<html>
<head><meta charset="utf-8"><title>Building a heap image for a built-in theory · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html">Building a heap image for a built-in theory</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="403575222"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403575222" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gergely Buday <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403575222">(Nov 22 2023 at 11:40)</a>:</h4>
<p>I want to build a heap image for the <code>Option</code> theory. I created a ROOT file to define a session for it:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">session</span><span class="w"> </span><span class="s">"Option"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"HOL"</span><span class="w"> </span><span class="o">+</span>
<span class="w">  </span><span class="n">theories</span><span class="w"> </span><span class="o">[</span><span class="n">document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">false</span><span class="o">]</span>
<span class="w">    </span><span class="s">"~~/src/HOL/Option"</span>
</code></pre></div>
<p>What is the isabelle command to build the heap upon this? I tried</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">isabelle</span><span class="w"> </span><span class="n">jedit</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">Option</span>
</code></pre></div>
<p>but jEdit said the session <code>Option</code> is undefined</p>
<p>I called this from the directory where my ROOT file is.</p>



<a name="403578171"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403578171" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gergely Buday <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403578171">(Nov 22 2023 at 12:00)</a>:</h4>
<p>Next I tried this <code>ROOT</code> file:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">session</span><span class="w"> </span><span class="s">"option"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HOL</span><span class="w"> </span><span class="o">+</span>
<span class="w">  </span><span class="n">theories</span><span class="w"> </span><span class="o">[</span><span class="n">document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">false</span><span class="o">]</span>
<span class="w">    </span><span class="s">"~~/src/HOL/Option"</span>
</code></pre></div>
<p>but for</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">isabelle</span><span class="w"> </span><span class="n">jedit</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="ow">.</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">option</span>
</code></pre></div>
<p>I get</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Implicit</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s">"/home/gergelybuday/Isabelle2023/src/HOL"</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="k">theory</span><span class="w"> </span><span class="s">"option.HOL"</span>
<span class="n">Implicit</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s">"/home/gergelybuday/Isabelle2023/src/HOL"</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="k">theory</span><span class="w"> </span><span class="s">"option.Orderings"</span>
<span class="n">Implicit</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s">"/home/gergelybuday/Isabelle2023/src/HOL"</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="k">theory</span><span class="w"> </span><span class="s">"option.Groups"</span>
<span class="ow">...</span>
<span class="n">Implicit</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s">"/home/gergelybuday/Isabelle2023/src/HOL"</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="k">theory</span><span class="w"> </span><span class="s">"option.Option"</span>
<span class="n">Implicit</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">directories</span><span class="o">:</span><span class="w"> </span><span class="s">"/home/gergelybuday/Isabelle2023/src/HOL"</span>
<span class="n">The</span><span class="w"> </span><span class="n">error</span><span class="o">(</span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">occurred</span><span class="w"> </span><span class="kp">in</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="s">"option"</span><span class="w"> </span><span class="o">(</span><span class="n">line</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="s">"/home/gergelybuday/gergelyphd/projects/monads/option/ROOT"</span><span class="o">)</span>
</code></pre></div>
<p>How should I do this correctly?</p>



<a name="403578408"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403578408" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403578408">(Nov 22 2023 at 12:02)</a>:</h4>
<p>Isn’t <code>Option</code> already part of <code>HOL</code>, from which you start?</p>



<a name="403578803"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403578803" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gergely Buday <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403578803">(Nov 22 2023 at 12:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="423655">Wolfgang Jeltsch</span> <a href="#narrow/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory/near/403578408">said</a>:</p>
<blockquote>
<p>Isn’t <code>Option</code> already part of <code>HOL</code>, from which you start?</p>
</blockquote>
<p>My original problem was this: I imported <code>Option</code> and Isabelle processed the background theories a lot, so I could not work on my theory. Should I build an image for HOL? I guess isabelle jedit starts with that by default, doesn't it?</p>



<a name="403579330"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403579330" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403579330">(Nov 22 2023 at 12:07)</a>:</h4>
<p>Yes, it does. Therefore, I don’t know what processing took place in your case.</p>



<a name="403579579"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403579579" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gergely Buday <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403579579">(Nov 22 2023 at 12:09)</a>:</h4>
<p>I think I have found the culprit: I imported <code>~~/src/HOL/Option</code> instead of simply <code>Main</code>.</p>



<a name="403580331"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403580331" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403580331">(Nov 22 2023 at 12:14)</a>:</h4>
<p>Hmm, still I don’t understand why Isabelle is not using the heap image in this case, but, then again, I don’t understand these technical details of Isabelle very well. In any case, you should always import <code>Main</code> first (directly or indirectly by importing a theory first about which you know that it imports <code>Main</code> first).</p>



<a name="403587213"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Building%20a%20heap%20image%20for%20a%20built-in%20theory/near/403587213" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Building.20a.20heap.20image.20for.20a.20built-in.20theory.html#403587213">(Nov 22 2023 at 12:58)</a>:</h4>
<p>I think that it is because you are writing a path instead of <code>HOL.Option</code></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>