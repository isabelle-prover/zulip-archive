<html>
<head><meta charset="utf-8"><title>Continuous integration · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html">Continuous integration</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="203372254"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203372254" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Chen <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203372254">(Jul 09 2020 at 10:50)</a>:</h4>
<p>Does anyone have any experience setting up CI for Isabelle with GitHub?</p>



<a name="203372576"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203372576" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203372576">(Jul 09 2020 at 10:57)</a>:</h4>
<p>I vaguely seem to recall that Lars Hupel tried it once, but found that GitHub's free CI is not beefy enough for Isabelle.</p>



<a name="203372583"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203372583" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203372583">(Jul 09 2020 at 10:57)</a>:</h4>
<p>Might depend on what you're trying to build exactly though.</p>



<a name="203372783"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203372783" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Chen <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203372783">(Jul 09 2020 at 11:00)</a>:</h4>
<p>Oh I just want to set up CI for the Isabelle/HoTT logic and theories. As a non-CS person by training it's new to me :D</p>



<a name="203372905"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203372905" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Chen <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203372905">(Jul 09 2020 at 11:02)</a>:</h4>
<p>I found <a href="https://github.com/isabelle-prover/admin">https://github.com/isabelle-prover/admin</a>, but I can't yet make sense of it.</p>



<a name="203373076"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203373076" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203373076">(Jul 09 2020 at 11:04)</a>:</h4>
<p>I would recommend to just as Lars Hupel. He knows about this kind of stuff.</p>



<a name="203380645"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203380645" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203380645">(Jul 09 2020 at 12:46)</a>:</h4>
<p><span class="user-mention" data-user-id="232736">@Manuel Eberl</span> What do you mean by not beefy? Lean / Mathlib uses it + Bors and we managed to process a whole lot of PRs while making sure everything builds</p>



<a name="203399879"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203399879" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203399879">(Jul 09 2020 at 15:23)</a>:</h4>
<p>I think he said something like there's a time and/or memory limit and it's just not enough to build reasonably-sized Isabelle sessions. Although I don't quite remember what he said; maybe the basic HOL session was still okay, but something like HOL-Analysis probably not. That one can take something like 60 CPU minutes. In any case, I might be mistaken altogether – I think this was a conversation we had some 3 years ago or so.</p>



<a name="203400354"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203400354" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203400354">(Jul 09 2020 at 15:26)</a>:</h4>
<p>For Isabelle distribution + AFP CI on every push, we have a 64 core, 512 GB build server. And that even excludes some of the ‘very slow’ sessions; these are built on some TUM VMs every night. And then there's the macOS tests on some old Macbooks and the testboard for experimental changes on another pretty big (but older) build server.</p>



<a name="203400396"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203400396" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203400396">(Jul 09 2020 at 15:27)</a>:</h4>
<p>Isabelle + AFP is /really/ big. But yeah Isabelle/HoTT is probably much more feasible.</p>



<a name="203958271"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203958271" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Wimmer <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203958271">(Jul 15 2020 at 13:57)</a>:</h4>
<p>So, Lars helped me do this once for my repository: <a href="https://github.com/wimmers/munta/blob/master/.travis.yml">https://github.com/wimmers/munta/blob/master/.travis.yml</a></p>



<a name="203958476"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203958476" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Wimmer <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203958476">(Jul 15 2020 at 13:58)</a>:</h4>
<p>The timeout is like 20 min on a single core, and that's just not enough time to finish building the HOL image, then some sessions from the AFP, and any session of this project on top.</p>



<a name="203958577"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203958577" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Wimmer <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203958577">(Jul 15 2020 at 13:59)</a>:</h4>
<p>For your project, I could however imagine if it still works because you do not need much underlying material, right?</p>



<a name="203958679"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203958679" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Wimmer <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203958679">(Jul 15 2020 at 14:00)</a>:</h4>
<p>Also, Travis is just the simplest way. You can also have the Github CI on your own hardware, and then it's a different story of course.</p>



<a name="203961946"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203961946" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203961946">(Jul 15 2020 at 14:25)</a>:</h4>
<p>This actually downloads Isabelle anew every time the CI is run, right?</p>



<a name="203961969"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203961969" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203961969">(Jul 15 2020 at 14:25)</a>:</h4>
<p>Or is there some kind of persistency?</p>



<a name="203961977"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203961977" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203961977">(Jul 15 2020 at 14:25)</a>:</h4>
<p>With Travis, we managed to get the timeout up to 50 min. 20 min is the maximum without response but you can pretend to be responsive every minute</p>



<a name="203962043"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203962043" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203962043">(Jul 15 2020 at 14:26)</a>:</h4>
<p>With Travis, you can cache the setup</p>



<a name="203962740"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203962740" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203962740">(Jul 15 2020 at 14:31)</a>:</h4>
<p>I think the Isabelle process emits random text to stdout frequently enough.</p>



<a name="203963069"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203963069" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203963069">(Jul 15 2020 at 14:34)</a>:</h4>
<p>You should be able to go up to 50 min then. Actually, with staged builds, we managed to get about 4x 50  minutes</p>



<a name="203963194"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203963194" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Wimmer <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203963194">(Jul 15 2020 at 14:35)</a>:</h4>
<p>It does download it anew every time. So, yeah, it's not very good :D</p>



<a name="203963314"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203963314" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Wimmer <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203963314">(Jul 15 2020 at 14:36)</a>:</h4>
<p>But that sounds interesting, Simon. Maybe I should give it another shot.</p>



<a name="203963654"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203963654" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203963654">(Jul 15 2020 at 14:38)</a>:</h4>
<p>There's a lot that we managed to do with Travis but, disclaimer, we started feeling constrained in the  last 6 months and moved to Github CI. There, we met new challenges as we had multiple PRs everyday that we needed to build and the build taking over an hour, it took a long time before entering the queue and getting a build machine. So we started batching the builds using a tool called bors</p>



<a name="203963706"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203963706" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203963706">(Jul 15 2020 at 14:39)</a>:</h4>
<p>I say we but I was mostly hands off in that process</p>



<a name="203963747"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203963747" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203963747">(Jul 15 2020 at 14:39)</a>:</h4>
<p><span class="user-mention" data-user-id="234947">@Rob Lewis</span> did a lot of heavy lifting, if I'm not mistaken</p>



<a name="203964230"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203964230" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Wimmer <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203964230">(Jul 15 2020 at 14:44)</a>:</h4>
<p>Interesting. The setup that Lars did for Isabelle is also quite involved. And builds are not triggered from Github but Mercurial repositories, of course ;)</p>



<a name="203964861"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203964861" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203964861">(Jul 15 2020 at 14:48)</a>:</h4>
<p>Shows what I know! I wasn't even aware that Mercurial was preferred in Isabelle projectts</p>



<a name="203964972"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203964972" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203964972">(Jul 15 2020 at 14:49)</a>:</h4>
<p>Depends on what you mean by "Isabelle projects". There's the Isabelle distribution and the AFP, each in its own Mercurial repository. We thought about switching the AFP to Git when Bitbucket kicked out Mercurial, but ultimately decided against it.</p>



<a name="203965121"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203965121" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203965121">(Jul 15 2020 at 14:50)</a>:</h4>
<p>For most of us, Mercurial over Git has historic reasons only. Makarius, however, is very adamant about Mercurial being the superior system and I don't think anyone cares enough about the whole Git vs. Mercurial discussion to go against him, since he's the one who makes things work behind the scenes at the end of the day.</p>



<a name="203965620"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203965620" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Hudon <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203965620">(Jul 15 2020 at 14:54)</a>:</h4>
<p>That's fair. I also don't know enough about the difference to pass judgement. Git is getting ubiquitous so I usually default to git.</p>



<a name="203965785"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203965785" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203965785">(Jul 15 2020 at 14:55)</a>:</h4>
<p>Yeah me, too. I am equally incompetent at using both systems, so I don't really care.</p>



<a name="203991967"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203991967" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Lewis <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203991967">(Jul 15 2020 at 18:12)</a>:</h4>
<p>Gabriel Ebner did more heavy lifting than I did in moving mathlib from Travis to GH Actions. But from my perspective, Actions has been a lot more pleasant to deal with than Travis was. And using Bors would have been necessary either way; Actions wasn't slower than Travis, if anything I think it was a bit faster. Of course, this is all irrelevant to you guys if you're not using GitHub!</p>



<a name="203992145"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203992145" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203992145">(Jul 15 2020 at 18:13)</a>:</h4>
<p>I just want to drop the idea to use Gitlab CI with a VM hosted at TUM. I found it really easy to set up and you won't have resource problems once properly set up.</p>



<a name="203992516"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203992516" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203992516">(Jul 15 2020 at 18:16)</a>:</h4>
<p>Gitlab CI supports caching</p>



<a name="203996822"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203996822" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203996822">(Jul 15 2020 at 18:50)</a>:</h4>
<p>Does the LRZ Gitlab support CI?</p>



<a name="203996871"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203996871" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203996871">(Jul 15 2020 at 18:50)</a>:</h4>
<p>You could also add your stuff to the distribution, then you also get CI for free. ;)</p>



<a name="203997035"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203997035" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Kappelmann <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203997035">(Jul 15 2020 at 18:52)</a>:</h4>
<p>I'd rather urge people to get stuff out of the distribution :D</p>



<a name="203997090"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203997090" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203997090">(Jul 15 2020 at 18:52)</a>:</h4>
<p>You just have to install the gitlab CI runner on the VM and register it with the LRZ Gitlab</p>



<a name="203997171"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203997171" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203997171">(Jul 15 2020 at 18:53)</a>:</h4>
<p>but any Gitlab instance would work. One can probably also mirror a Github repository on Gitlab and still run the CI on the Gitlab mirror if you want to have your project on Github</p>



<a name="203997451"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203997451" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203997451">(Jul 15 2020 at 18:55)</a>:</h4>
<blockquote>
<p>I'd rather urge people to get stuff out of the distribution :D</p>
</blockquote>
<p>“The standard library is where modules go to die.”  -- Kenneth Reitz</p>



<a name="203998574"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203998574" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203998574">(Jul 15 2020 at 19:04)</a>:</h4>
<p>Well, something like an entirely new logic definitely fits into the distribution.</p>



<a name="203998634"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203998634" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203998634">(Jul 15 2020 at 19:04)</a>:</h4>
<p>In the context of Isabelle, I'd argue that "outside the distribution/AFP is where developments go to die".</p>



<a name="203998665"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203998665" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203998665">(Jul 15 2020 at 19:04)</a>:</h4>
<p>In the long term that is probably true.</p>



<a name="203998680"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203998680" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203998680">(Jul 15 2020 at 19:05)</a>:</h4>
<p>How many Isabelle developments older than 5 years outside the distribution + AFP do you know that are still actively developed? How many of them still work with Isabelle2020?</p>



<a name="203998746"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203998746" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203998746">(Jul 15 2020 at 19:05)</a>:</h4>
<p>auto2 only still lives because Kevin fixed it. If it had been inactive for a few years more than that, the effort to fix it could have been so big it might not have been worth it.</p>



<a name="203998783"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203998783" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203998783">(Jul 15 2020 at 19:06)</a>:</h4>
<p>Some major developments like Avigad's Prime Number Theorem have already succumbed to bit rot indefinitely.</p>



<a name="203999014"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203999014" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203999014">(Jul 15 2020 at 19:07)</a>:</h4>
<p>But yeah there's a lot of ancient crap in the distribution that really shouldn't be there.</p>



<a name="203999105"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203999105" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203999105">(Jul 15 2020 at 19:08)</a>:</h4>
<p>Some people (including me) have suggested moving that into the AFP, but that was rejected on the basis that this stuff is actually not in a good enough state to go to the AFP (and never will be).</p>



<a name="203999114"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203999114" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203999114">(Jul 15 2020 at 19:08)</a>:</h4>
<p>These things date back to times when there was no AFP.</p>



<a name="203999320"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203999320" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Kappelmann <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203999320">(Jul 15 2020 at 19:10)</a>:</h4>
<p>Then at some point, I hope they also will not be good enough for the distro anymore ^^</p>



<a name="203999484"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203999484" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203999484">(Jul 15 2020 at 19:11)</a>:</h4>
<p>I fear they might be of too much historic interest for that.</p>



<a name="203999536"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203999536" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203999536">(Jul 15 2020 at 19:12)</a>:</h4>
<p>(aka "nostalgia")</p>



<a name="203999576"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/203999576" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#203999576">(Jul 15 2020 at 19:12)</a>:</h4>
<p>Show some respect, some of these developments are probably older than you. :P</p>



<a name="204292938"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/204292938" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max W. Haslbeck <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#204292938">(Jul 18 2020 at 09:20)</a>:</h4>
<p>I played around with Github Actions this week. Now I let my heap images be built by github instead of straining my precious iMac :D<br>
<a href="https://github.com/ammbauer/mirror-afp-2020/tree/9b95659af13b5fdbea1dc7a7a27ab90762865a1c/.github/workflows">https://github.com/ammbauer/mirror-afp-2020/tree/9b95659af13b5fdbea1dc7a7a27ab90762865a1c/.github/workflows</a><br>
<a href="https://github.com/ammbauer/mirror-afp-2020/actions/runs/172340567">https://github.com/ammbauer/mirror-afp-2020/actions/runs/172340567</a></p>



<a name="204297392"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/204297392" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Kappelmann <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#204297392">(Jul 18 2020 at 11:43)</a>:</h4>
<p>Cool, that's nice! :) That's also what the lean people do for mathlib btw. When you checkout a version, it downloads the pre-built object files so you can start proving straight away. Would be nice to have this for the AFP too</p>



<a name="204313497"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/204313497" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Chen <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#204313497">(Jul 18 2020 at 19:04)</a>:</h4>
<p>NIce! I got something working too. Is the <code>upload-artifact</code> action in your workflow for caching the heap images?</p>



<a name="204341123"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/204341123" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#204341123">(Jul 19 2020 at 09:32)</a>:</h4>
<p>I think it declares the heap image as a build artifact. You can download it here <a href="https://github.com/ammbauer/mirror-afp-2020/actions/runs/172340567">https://github.com/ammbauer/mirror-afp-2020/actions/runs/172340567</a></p>



<a name="204341143"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/204341143" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#204341143">(Jul 19 2020 at 09:33)</a>:</h4>
<p>Under build artifacts and then click on skip_list_heaps</p>



<a name="204345618"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/204345618" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Lewis <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#204345618">(Jul 19 2020 at 11:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233154">Kevin Kappelmann</span> <a href="#narrow/stream/202961-general/topic/Continuous.20integration/near/204297392">said</a>:</p>
<blockquote>
<p>Cool, that's nice! :) That's also what the lean people do for mathlib btw. When you checkout a version, it downloads the pre-built object files so you can start proving straight away. Would be nice to have this for the AFP too</p>
</blockquote>
<p>At least at the time we set it up, there was no API to map a git commit hash to the corresponding Actions artifact. So our CI script uploads the build somewhere else with a URL completely determined by the hash. It is (was?) an annoying limitation of the Actions setup, but IIRC changing it was on their to-do list.</p>



<a name="204523151"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/204523151" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max W. Haslbeck <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#204523151">(Jul 21 2020 at 08:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="228839">Josh Chen</span> <a href="#narrow/stream/202961-general/topic/Continuous.20integration/near/204313497">said</a>:</p>
<blockquote>
<p>NIce! I got something working too. Is the <code>upload-artifact</code> action in your workflow for caching the heap images?</p>
</blockquote>
<p>I used it to test if I can download and use the heap images. In this <a href="https://github.com/ammbauer/mirror-afp-2020/actions/runs/175419050">action</a> I use the <code>.isabelle/Isabelle2020/etc/settings</code> file that I also have on my macs. I can then download the heap images, copy them to <code>.isabelle/Isabelle2020/heaps/</code> and directly use them with <code>isabelle jedit -l Skip_Lists</code>.</p>



<a name="210701362"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Continuous%20integration/near/210701362" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pandaman <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Continuous.20integration.html#210701362">(Sep 21 2020 at 04:48)</a>:</h4>
<p>Hi! I was looking for a CI solution for an Isabelle project and finally managed to create an Isabelle GitHub Action with heap cache enabled: <a href="https://github.com/pandaman64/isabelle-action">https://github.com/pandaman64/isabelle-action</a><br>
Example workflow: <a href="https://github.com/pandaman64/sabi/blob/master/.github/workflows/build.yml">https://github.com/pandaman64/sabi/blob/master/.github/workflows/build.yml</a><br>
This <code>build.yml</code> builds heap images of your sessions and caches dependencies on rebuild.</p>
<p>I hope this helps!</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>