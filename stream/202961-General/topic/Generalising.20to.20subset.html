<html>
<head><meta charset="utf-8"><title>Generalising to subset · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html">Generalising to subset</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="206791677"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206791677" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206791677">(Aug 13 2020 at 08:33)</a>:</h4>
<p>Consider the locale <code>comp_fun_commute</code>: it fixes <code>f</code> and assumes <code>f x o f y = f y o f x</code>.What I want to have is <code>comp_fun_commute_on</code> that fixes <code>f</code> and <code>A</code> and assumes <code>x ∈ A ⟹ y ∈ A ⟹ f y ∘ f x = f x ∘ f y</code>. Is there a trick to generalise the first locale to the second one, without changing all the theorems and proofs?</p>



<a name="206793849"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206793849" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206793849">(Aug 13 2020 at 09:04)</a>:</h4>
<p>Yeah that's what types-to-sets does</p>



<a name="206793853"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206793853" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206793853">(Aug 13 2020 at 09:04)</a>:</h4>
<p>probably not worth it in this case though</p>



<a name="206793906"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206793906" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206793906">(Aug 13 2020 at 09:05)</a>:</h4>
<p>you might be able to do some trickery like artificially defining a new f relativised to A that returns some dummy value for everything not in A, perhaps, and thus fulfils the equality on the entire type</p>



<a name="206798258"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206798258" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206798258">(Aug 13 2020 at 10:06)</a>:</h4>
<p>Is <code>Types_To_Sets</code> something you could use in the distribution?</p>



<a name="206798282"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206798282" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206798282">(Aug 13 2020 at 10:07)</a>:</h4>
<p>Asking because it introduces additional axioms</p>



<a name="206803801"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206803801" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206803801">(Aug 13 2020 at 11:28)</a>:</h4>
<p>I think the jury is still out on that.</p>



<a name="206803820"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206803820" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206803820">(Aug 13 2020 at 11:29)</a>:</h4>
<p>But I think there probably wouldn't be too much opposition to it</p>



<a name="206803844"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206803844" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206803844">(Aug 13 2020 at 11:29)</a>:</h4>
<p>regardless, I doubt it's worth it for your example</p>



<a name="206803890"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206803890" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206803890">(Aug 13 2020 at 11:30)</a>:</h4>
<p>the proofs are probably pretty simple</p>



<a name="206803903"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206803903" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206803903">(Aug 13 2020 at 11:30)</a>:</h4>
<p>and you'd probably have to restate the theorems in their relativised form anyway if you wanted to lift them over with types-to-sets, so that still involves significant boilerplate</p>



<a name="206805703"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206805703" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206805703">(Aug 13 2020 at 11:54)</a>:</h4>
<p>The most annoying thing in my example is that you have to duplicate most theorems since you need to generalise the carrier <code>A</code> to <code>A'</code> and assume <code>A' ⊆ A</code> every time the theorem is proved by induction.</p>



<a name="206805857"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206805857" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206805857">(Aug 13 2020 at 11:57)</a>:</h4>
<p>Use types to sets is really a lot more elegant in this case (provided I can get the setup to work <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span>).</p>



<a name="206806263"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206806263" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206806263">(Aug 13 2020 at 12:02)</a>:</h4>
<p>I don't think you want to open that can of worms</p>



<a name="206806528"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206806528" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Kappelmann <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206806528">(Aug 13 2020 at 12:06)</a>:</h4>
<p>I remember a person saying that it is a bit worrying that there is (barely) anyone left knowing how to use types to sets - do not discourage the volunteer <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span></p>



<a name="206806717"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206806717" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206806717">(Aug 13 2020 at 12:07)</a>:</h4>
<p>I said we should have people who know how to use it, I didn't say we /should/ actually use it. :P</p>



<a name="206806785"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206806785" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206806785">(Aug 13 2020 at 12:08)</a>:</h4>
<p>I think you can't have both at the same time :D</p>



<a name="206806827"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206806827" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206806827">(Aug 13 2020 at 12:09)</a>:</h4>
<p>Well, feel free to play around with it. But I'm pretty sure it is not worth the effort for your use case, even if there were not the additional obstacle of you having to learn how to use it first.</p>



<a name="206806857"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Generalising%20to%20subset/near/206806857" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Generalising.20to.20subset.html#206806857">(Aug 13 2020 at 12:09)</a>:</h4>
<p>I'm curious what Mikhail Chekhov is up to with types-to-sets…</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>