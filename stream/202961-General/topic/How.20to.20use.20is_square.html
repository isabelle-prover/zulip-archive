<html>
<head><meta charset="utf-8"><title>How to use is_square · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html">How to use is_square</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="454710112"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454710112" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454710112">(Jul 29 2024 at 03:56)</a>:</h4>
<p>Chelsea Edmonds pointed out to me the is_square function. I tried using it with no luck in the show ?thesis line. Any ideas? I would think this would prove (𝗄 - Λ)^(𝗏 - 1) to be a square. Do I need to do more, like prove that det N / k is rational or natural?</p>
<div class="codehilite" data-code-language="lemma"><pre><span></span><code>proof -
  have "(det N / 𝗄)^2 = (𝗄 - Λ)^(𝗏 - 1)"
    using power_of_k_minus_lambda_2 by simp
  then show ?thesis by try0
?
</code></pre></div>



<a name="454717693"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454717693" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454717693">(Jul 29 2024 at 04:33)</a>:</h4>
<p>One of my goals is to prove in Isabelle that is sqrt x is rational and x is natural then sqrt x is natural. I’m having trouble with this seemingly simple goal.</p>



<a name="454776767"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454776767" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454776767">(Jul 29 2024 at 09:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/How.20to.20use.20is_square/near/454710112">said</a>:</p>
<blockquote>
<p>Chelsea Edmonds pointed out to me the is_square function. I tried using it with no luck in the show ?thesis line. Any ideas? I would think this would prove (𝗄 - Λ)^(𝗏 - 1) to be a square. Do I need to do more, like prove that det N / k is rational or natural?</p>
<p><div class="codehilite" data-code-language="lemma"><pre><span></span><code>proof -
  have "(det N / 𝗄)^2 = (𝗄 - Λ)^(𝗏 - 1)"
    using power_of_k_minus_lambda_2 by simp
  then show ?thesis by try0
?
</code></pre></div><br>
</p>
</blockquote>
<p>Try using "unfolding is_square_def" next to thesis, or (simp add: is_square_def) and see what the new proof goals are. Those proof goals should then guide your proof. This is a good starting point when working with any definition.</p>



<a name="454777432"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454777432" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454777432">(Jul 29 2024 at 09:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/How.20to.20use.20is_square/near/454717693">said</a>:</p>
<blockquote>
<p>One of my goals is to prove in Isabelle that is sqrt x is rational and x is natural then sqrt x is natural. I’m having trouble with this seemingly simple goal.</p>
</blockquote>
<p>From memory of the paper proof you showed me, I don't think it uses sqrts, and I'm pretty sure you won't need it in Isabelle either. Think the other way, i.e. can you find a number, such that if you square it, it is equal to x.</p>



<a name="454880062"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454880062" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454880062">(Jul 29 2024 at 16:19)</a>:</h4>
<p><span class="user-mention" data-user-id="252023">@Chelsea Edmonds</span> when I tried both "unfolding is_square_def" and "(simp add: is_square_def" I got "Undefined fact: "is_square_def""</p>



<a name="454880421"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454880421" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454880421">(Jul 29 2024 at 16:21)</a>:</h4>
<p><span class="user-mention" data-user-id="252023">@Chelsea Edmonds</span> the goal of proving that sqrt x is rational and x is natural implies sqrt x is natural is a side goal that doesn't necessarily impact the proof. I just wanted to see how to do it.</p>



<a name="454880577"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454880577" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454880577">(Jul 29 2024 at 16:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/How.20to.20use.20is_square/near/454880062">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="252023">Chelsea Edmonds</span> when I tried both "unfolding is_square_def" and "(simp add: is_square_def" I got "Undefined fact: "is_square_def""</p>
</blockquote>
<p>That typically means it's an abbreviation. Go and look at where is_square is defined (cntr+click, or search for it), and then try the  same things with the definition in the abbreviation.</p>



<a name="454883095"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454883095" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454883095">(Jul 29 2024 at 16:33)</a>:</h4>
<p><span class="user-mention" data-user-id="252023">@Chelsea Edmonds</span>  Ok, I did that and got when I hovered over "is_square" :</p>
<div class="codehilite" data-code-language="fixed"><pre><span></span><code>free variable
:: 'a ⇒ bool
</code></pre></div>



<a name="454884309"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454884309" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454884309">(Jul 29 2024 at 16:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/How.20to.20use.20is_square/near/454883095">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="252023">Chelsea Edmonds</span>  Ok, I did that and got when I hovered over "is_square" :</p>
<p><div class="codehilite" data-code-language="fixed"><pre><span></span><code>free variable
:: 'a ⇒ bool
</code></pre></div><br>
</p>
</blockquote>
<p>Ok, so as previously mentioned, if text is blue that means the definition isn't recognised in your current context and will usually be a free variable if you hover over it. Have you imported "HOL-Computational_Algebra.Nth_Powers" (was in my email reply).</p>



<a name="454886459"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454886459" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454886459">(Jul 29 2024 at 16:47)</a>:</h4>
<p>Yes, "HOL-Computational_Algebra.Nth_Powers" was imported.</p>



<a name="454887987"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454887987" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454887987">(Jul 29 2024 at 16:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/How.20to.20use.20is_square/near/454886459">said</a>:</p>
<blockquote>
<p>Yes, "HOL-Computational_Algebra.Nth_Powers" was imported.</p>
</blockquote>
<p>That's bizarre, it should definitely be recognised and was recognised for me. Maybe check the import is working properly (i.e. can you click on that file and find is_square yourself in it). Otherwise maybe something else in your theory is messing it up? Try moving the theorem statement to the top of the file and see if it becomes defined maybe, otherwise I don't know what's going on sorry!</p>
<p>Edit, just double checking you're talking about it saying that when you hover over it in your own file? Worth noting just in case, wherever the abbreviation is defined in the Nth_Powers theory it will also say that when you hover over it , but at that point you should be looking at the right side of the definition (i.e. see it uses is_nth_power, so try applying unfolding is_nth_power instead in your own proof). If it's not defined in your own file though, above still applies!</p>



<a name="454959637"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454959637" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454959637">(Jul 29 2024 at 22:04)</a>:</h4>
<p>I meant when I hover over it in the hol computational algebra file with powers definitions. When I press cntl and click over is_square in my file I get led to that hol file.</p>



<a name="454992834"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/454992834" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#454992834">(Jul 30 2024 at 01:53)</a>:</h4>
<p>I'm going to concentrate on the difficult part of the BRC proof now for odd v. proving that sqrt(k-lambda) is an integer follows relatively from sqrt(k-lambda) being a rational, which I already proved. It would be good to have such a lemma in Isabelle.</p>



<a name="455091581"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/455091581" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#455091581">(Jul 30 2024 at 10:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/How.20to.20use.20is_square/near/454959637">said</a>:</p>
<blockquote>
<p>I meant when I hover over it in the hol computational algebra file with powers definitions. When I press cntl and click over is_square in my file I get led to that hol file.</p>
</blockquote>
<p>Great, then there's no issue - just no reason to hover over is_square where the abbreviation is being set up! Once you've found where something is defined, looking at what is on the right side of the equality (which I hinted at above) should give you an idea of what definition you need to unfold.</p>



<a name="455091971"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/455091971" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#455091971">(Jul 30 2024 at 10:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/How.20to.20use.20is_square/near/454992834">said</a>:</p>
<blockquote>
<p>I'm going to concentrate on the difficult part of the BRC proof now for odd v. proving that sqrt(k-lambda) is an integer follows relatively from sqrt(k-lambda) being a rational, which I already proved. It would be good to have such a lemma in Isabelle.</p>
</blockquote>
<p>It exists in several forms. Try using a search tool like FindFacts (<a href="https://search.isabelle.in.tum.de/">https://search.isabelle.in.tum.de/#</a>) or Serapis (<a href="https://behemoth.cl.cam.ac.uk/search/">https://behemoth.cl.cam.ac.uk/search/</a>) and you should be able to find a few versions of it (e.g. nonneg_sqrt_nat_or_irrat)</p>



<a name="455263629"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/How%20to%20use%20is_square/near/455263629" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/How.20to.20use.20is_square.html#455263629">(Jul 31 2024 at 02:47)</a>:</h4>
<p><span class="user-mention" data-user-id="252023">@Chelsea Edmonds</span>  I can see those two libraries being helpful. I found the lemma I was looking for. I now have finished proving the even part of the BRC. Thanks again.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>