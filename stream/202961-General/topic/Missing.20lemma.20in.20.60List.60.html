<html>
<head><meta charset="utf-8"><title>Missing lemma in `List` · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Missing.20lemma.20in.20.60List.60.html">Missing lemma in `List`</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="302373590"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Missing%20lemma%20in%20%60List%60/near/302373590" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Javier Diaz <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Missing.20lemma.20in.20.60List.60.html#302373590">(Oct 05 2022 at 01:24)</a>:</h4>
<p>I think it would be useful to add the following lemma to the <code>List</code> theory:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">count_append</span><span class="o">:</span><span class="w"> </span><span class="s">"count_list (xs @ ys) z = count_list xs z + count_list ys z"</span><span class="w"></span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">induct</span><span class="w"> </span><span class="n">xs</span><span class="o">)</span><span class="w"> </span><span class="n">simp_all</span><span class="w"></span>
</code></pre></div>



<a name="302387758"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Missing%20lemma%20in%20%60List%60/near/302387758" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Missing.20lemma.20in.20.60List.60.html#302387758">(Oct 05 2022 at 05:15)</a>:</h4>
<p>Use multisets instead of lists <code>count (mset xs) z</code></p>



<a name="302464663"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Missing%20lemma%20in%20%60List%60/near/302464663" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Javier Diaz <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Missing.20lemma.20in.20.60List.60.html#302464663">(Oct 05 2022 at 14:10)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="233198">@Mathias Fleury</span>, for your answer. That definitely is a workaround, however the <code>List</code> theory already includes a <code>count_list</code> function which avoids the overhead of creating a temporary multiset out of a list. There are some basic lemmas about <code>count_list</code> already, but surprisingly there is no lemma relating <code>count_list</code> and <code>@</code> in the style of <code>Multiset.count_union</code>. That's why I think adding a <code>count_append</code> lemma as above is a good idea.</p>



<a name="302465900"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Missing%20lemma%20in%20%60List%60/near/302465900" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Missing.20lemma.20in.20.60List.60.html#302465900">(Oct 05 2022 at 14:15)</a>:</h4>
<p>This is already part of <code>List.thy</code> in the development version of Isabelle.</p>



<a name="302466007"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Missing%20lemma%20in%20%60List%60/near/302466007" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Missing.20lemma.20in.20.60List.60.html#302466007">(Oct 05 2022 at 14:15)</a>:</h4>
<p>It was added back in March.</p>



<a name="302466293"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Missing%20lemma%20in%20%60List%60/near/302466293" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Missing.20lemma.20in.20.60List.60.html#302466293">(Oct 05 2022 at 14:16)</a>:</h4>
<p>The next release will be soon so you can just add the lemma temporarily to your theory and then remove it when upgrading to the new version.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>