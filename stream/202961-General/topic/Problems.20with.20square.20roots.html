<html>
<head><meta charset="utf-8"><title>Problems with square roots · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html">Problems with square roots</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="451923440"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/451923440" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#451923440">(Jul 17 2024 at 03:36)</a>:</h4>
<p>The following is the beginning of a short proof of the easier half of the Bruck Ryser Chowla Theorem. It is so short because it uses lots of lemmas that I'm not posting, including power_of_k_minus_lambda_d:</p>
<p>theorem bruck_ryser_chowla_even:<br>
  assumes "∃n::nat. 𝗏 = 2 * n"<br>
  shows "sqrt(𝗄 - Λ) ∈ ℚ"<br>
proof -<br>
  have "(sqrt(𝗄 - Λ))^(𝗏 - 1) ∈ ℚ" using power_of_k_minus_lambda_d<br>
    by blast<br>
  from assms obtain n where "𝗏 = 2 * n" by blast<br>
  then have "𝗏 - 1 = 2 * n - 1" by auto<br>
  then have "(sqrt(𝗄 - Λ))^(2 * n - 1) ∈ ℚ" using power_of_k_minus_lambda_d<br>
    by presburger</p>
<p>It gives no errors so far, but when I try to show the conclusion from the last line (which is just simple algebra that square root of 𝗄 - Λ squared = 𝗄 - Λ in conjunction with the fact that k-Λ is a natural number), I always get lots of problems. Sledgehammer doesn't seem to recognize simple algebra. Any ideas?</p>



<a name="451933630"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/451933630" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#451933630">(Jul 17 2024 at 04:55)</a>:</h4>
<p>First, it is hard to say much without context, but for Λ = 0, k = 2, and v = 2, your lemma does not hold</p>



<a name="451933857"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/451933857" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#451933857">(Jul 17 2024 at 04:57)</a>:</h4>
<p>Second,</p>
<blockquote>
<p>which is just simple algebra that square root of 𝗄 - Λ squared = 𝗄 - Λ in conjunction with the fact that k-Λ is a natural number</p>
</blockquote>
<p>the proof states <code>(sqrt(𝗄 - Λ))^(2 * n - 1) ∈ ℚ</code>… when n = 0, there is squared at all. So your reasoning per hand has holes</p>



<a name="451934031"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/451934031" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#451934031">(Jul 17 2024 at 04:58)</a>:</h4>
<p>Third, please put your isabelle code with 3 backquotes to keep the indentation (the code block below the text editing box)</p>



<a name="451934518"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/451934518" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#451934518">(Jul 17 2024 at 05:01)</a>:</h4>
<p>Fourth, the general approach for a proof is: </p>
<ol>
<li>write one step that you believe are important</li>
<li>if the proof does not go through you need to write more intermediate steps (whatever "simple algebra" argument you believe this is: your definition of simple is very different from the Isabelle one)</li>
</ol>



<a name="452071149"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452071149" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452071149">(Jul 17 2024 at 13:32)</a>:</h4>
<p>That is a good point. I thought that since the context of the theorem is a symmetric BIBD, it would assume that lambda &gt; 0, but it probably was not told that. So given my assumptions that I told it, the theorem might not be true. Sledgehammer is almost like magic but it doesn’t prove false statements. Also I tried intermediate steps with no success. I’ll try again with better assumptions.</p>



<a name="452091852"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452091852" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452091852">(Jul 17 2024 at 14:30)</a>:</h4>
<p>maybe, I do not know the context of \Lambda</p>



<a name="452098897"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452098897" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452098897">(Jul 17 2024 at 14:50)</a>:</h4>
<p>It is very hard to judge what your intermediate steps are.</p>



<a name="452099320"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452099320" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452099320">(Jul 17 2024 at 14:52)</a>:</h4>
<p>This is what I got by adding some assumptions within 15min of trying and my (rusty) math knowledge:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"∃n::nat. n&gt;0 ∧ 𝗏 = 2 * n"</span><span class="w">  </span><span class="kp">and</span>
<span class="w">    </span><span class="n">k_ge</span><span class="o">:</span><span class="w"> </span><span class="s">"𝗄 ≥ Λ"</span><span class="w"> </span><span class="kp">and</span>
<span class="w">    </span><span class="n">diff_rat</span><span class="o">:</span><span class="w"> </span><span class="s">‹𝗄 - Λ ∈ ℚ›</span>
<span class="kp">shows</span><span class="w"> </span><span class="s">"sqrt(𝗄 - Λ) ∈ ℚ"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">eq</span><span class="o">:</span><span class="w"> </span><span class="s">"(sqrt(𝗄 - Λ))^(𝗏 - 1) ∈ ℚ"</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"𝗏 = 2 * n"</span><span class="w"> </span><span class="s">"n &gt; 0"</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"𝗏 - 1 = 2 * n - 1"</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"(sqrt(𝗄 - Λ))^(2 * n - 1) ∈ ℚ"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">eq</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="n">rat</span><span class="o">:</span><span class="w"> </span><span class="s">‹(sqrt(𝗄 - Λ))^(2 * n) / (sqrt(𝗄 - Λ)) ∈ ℚ›</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">metis</span><span class="w"> </span><span class="s">‹0 &lt; n›</span><span class="w"> </span><span class="n">div_by_0</span><span class="w"> </span><span class="n">div_less_iff_less_mult</span><span class="w"> </span><span class="n">mult.commute</span><span class="w"> </span><span class="n">mult_pos_pos</span>
<span class="w">        </span><span class="n">nonzero_mult_div_cancel_left</span><span class="w"> </span><span class="n">one_div_two_eq_zero</span><span class="w"> </span><span class="n">pos2</span><span class="w"> </span><span class="n">power_eq_0_iff</span>
<span class="w">        </span><span class="n">power_minus_mult</span><span class="w"> </span><span class="n">zero_less_diff</span><span class="o">)</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">eq2</span><span class="o">:</span><span class="w"> </span><span class="s">‹(sqrt(𝗄 - Λ))^(2 * n) / (sqrt(𝗄 - Λ)) = ((𝗄 - Λ))^ n * (1/sqrt(𝗄 - Λ))›</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">k_ge</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">power_mult</span><span class="o">)</span>
<span class="w">  </span><span class="k">moreover</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">‹(𝗄 - Λ) ^ n ∈ ℚ›</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">diff_rat</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">power_mult</span><span class="w"> </span><span class="n">Rats_mult_iff</span><span class="o">)</span>
<span class="w">  </span><span class="k">ultimately</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">‹1/sqrt(𝗄 - Λ) ∈ ℚ›</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">rat</span><span class="w"> </span><span class="n">k_ge</span><span class="w"> </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">power_mult</span><span class="w"> </span><span class="n">Rats_mult_iff</span><span class="o">)</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">metis</span><span class="w"> </span><span class="n">Rats_1</span><span class="w"> </span><span class="n">Rats_divide</span><span class="w"> </span><span class="n">divide_divide_eq_right</span><span class="w"> </span><span class="n">nonzero_mult_div_cancel_left</span><span class="w"> </span><span class="n">power_eq_0_iff</span><span class="w"> </span><span class="n">real_sqrt_zero</span><span class="o">)</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="o">?</span><span class="n">thesis</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">divide_inverse</span><span class="o">)</span>
<span class="k">qed</span>
</code></pre></div>



<a name="452100671"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452100671" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452100671">(Jul 17 2024 at 14:57)</a>:</h4>
<p>Side remark: for n = 0, i am not sure if it holds or not, it depends on <code>(sqrt(𝗄 - Λ))^(𝗏 - 1) ∈ ℚ</code> means exactly.  Currently the exponent is a natural number, meaning that you get <code>X^0</code> which is not helpful for proving what you want</p>



<a name="452100717"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452100717" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452100717">(Jul 17 2024 at 14:57)</a>:</h4>
<p>but I am not sure if this is wanted or not</p>



<a name="452201993"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452201993" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452201993">(Jul 17 2024 at 22:11)</a>:</h4>
<p>I just partially put your formulas in before the batteries in my laptop ran out. So far so good. Question - what is the difference between putting statements in quotes “…” and putting statements in &lt;…&gt;. I noticed that there is a difference because some of your stuff only works in &lt;…&gt;.<br>
Another question - why is your long explanation in purple? It doesn’t like long explanations?</p>
<p>Thank you so much for your help. Is it correct for me to include you in the authorship if and hopefully when this all gets published in the Isabelle archive of formal proofs?</p>



<a name="452207833"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452207833" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452207833">(Jul 17 2024 at 22:55)</a>:</h4>
<p>I just got my laptop a charger. Your code worked so I've proven my first major theorem in Isabelle; however, I need to prove the assumptions for it to technically be a proof. One thing I did not know before this is that apparently the definition of a natural number according to Isabelle includes zero.</p>



<a name="452210728"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452210728" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452210728">(Jul 17 2024 at 23:19)</a>:</h4>
<p>I modified the code to get a proof  without extra assumptions (v even is part of the theorem; v odd is the other part). I put three backward slashes before it, so hopefully it will look better:</p>
<p>\\\theorem bruck_ryser_chowla_even:<br>
  assumes "∃n::nat. 𝗏 = 2 * n"<br>
  shows "sqrt(𝗄 - Λ) ∈ ℚ"<br>
proof -<br>
  have "(sqrt(𝗄 - Λ))^(𝗏 - 1) ∈ ℚ" using power_of_k_minus_lambda_3<br>
    by blast<br>
  from assms obtain n where "𝗏 = 2 * n" by blast<br>
  then have "𝗏 - 1 = 2 * n - 1" by auto<br>
  then have "(sqrt(𝗄 - Λ))^(2 * n - 1) ∈ ℚ" using power_of_k_minus_lambda_3<br>
    by presburger<br>
  then have rat: "(sqrt(𝗄 - Λ))^(2 * n)/sqrt(𝗄 - Λ) ∈ ℚ"<br>
    by (metis div_by_0 div_less_iff_less_mult mult.commute<br>
        mult_pos_pos nonzero_mult_div_cancel_left one_div_two_eq_zero<br>
        pos2 power_eq_0_iff power_minus_mult zero_less_diff)<br>
   have eq2: ‹(sqrt(𝗄 - Λ))^(2 * n) / (sqrt(𝗄 - Λ)) = ((𝗄 - Λ))^ n * (1/sqrt(𝗄 - Λ))›<br>
    using k_minus_lambda_is_natural<br>
    by (simp add: power_mult)<br>
  moreover have ‹(𝗄 - Λ) ^ n ∈ ℚ›<br>
    using k_minus_lambda_is_natural by (simp add: power_mult Rats_mult_iff)<br>
  ultimately have ‹1/sqrt(𝗄 - Λ) ∈ ℚ›<br>
    using rat k_minus_lambda_is_natural apply (simp add: power_mult Rats_mult_iff)<br>
    by (metis Rats_1 Rats_divide divide_divide_eq_right <br>
        nonzero_mult_div_cancel_left power_eq_0_iff real_sqrt_zero)<br>
  then show ?thesis<br>
    by (simp add: divide_inverse)<br>
qed\\\</p>



<a name="452211045"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452211045" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452211045">(Jul 17 2024 at 23:21)</a>:</h4>
<p>I'm sorry, I see you said back quotes. Not sure what that is.</p>



<a name="452247156"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452247156" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452247156">(Jul 18 2024 at 05:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452201993">said</a>:</p>
<blockquote>
<p>Thank you so much for your help. Is it correct for me to include you in the authorship if and hopefully when this all gets published in the Isabelle archive of formal proofs?</p>
</blockquote>
<p>just take these few lines as your own that is far from enough to credit me</p>



<a name="452247374"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452247374" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452247374">(Jul 18 2024 at 05:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452201993">said</a>:</p>
<blockquote>
<p>I just partially put your formulas in before the batteries in my laptop ran out. So far so good. Question - what is the difference between putting statements in quotes “…” and putting statements in &lt;…&gt;. I noticed that there is a difference because some of your stuff only works in &lt;…&gt;.</p>
</blockquote>
<p>I prefer the cartouche ‹...› because I find them nicer to look at, no difference otherwise</p>



<a name="452247547"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452247547" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452247547">(Jul 18 2024 at 05:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452201993">said</a>:</p>
<blockquote>
<p>Another question - why is your long explanation in purple? It doesn’t like long explanations?</p>
</blockquote>
<p>That means that the proof is not terminating for you. Probably some theorem that changed meaning in your context (I only imported Complex_Main). Try sledgehammer</p>



<a name="452247678"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452247678" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452247678">(Jul 18 2024 at 05:03)</a>:</h4>
<p>Backtick. Click on the <code>?</code> bottom right of the area where you enter text</p>



<a name="452248439"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452248439" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452248439">(Jul 18 2024 at 05:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452247547">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452201993">said</a>:</p>
<blockquote>
<p>Another question - why is your long explanation in purple? It doesn’t like long explanations?</p>
</blockquote>
<p>That means that the proof is not terminating for you. Probably some theorem that changed meaning in your context (I only imported Complex_Main). Try sledgehammer</p>
</blockquote>
<p>Ahh you removed the assumption <code>n &gt; 0</code>, so the proof does not hold anymore. See my side remark above</p>



<a name="452248752"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452248752" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452248752">(Jul 18 2024 at 05:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452207833">said</a>:</p>
<blockquote>
<p>I just got my laptop a charger. Your code worked so I've proven my first major theorem in Isabelle; however, I need to prove the assumptions for it to technically be a proof. One thing I did not know before this is that apparently the definition of a natural number according to Isabelle includes zero.</p>
</blockquote>
<p>I am not aware of any construction of natural numbers that goes without 0</p>



<a name="452248782"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452248782" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452248782">(Jul 18 2024 at 05:11)</a>:</h4>
<p>(I checked wikipedia and there seem to be a debate, but no formal definition listed goes without 0)</p>



<a name="452336794"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452336794" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452336794">(Jul 18 2024 at 12:54)</a>:</h4>
<p>Does the purple highlights mean that it doesn’t consider the proof to be valid? Even before I removed the assumptions that n&gt;0, it had purple highlights. I’m pretty sure based on experimenting yesterday that it considers the natural numbers not to include zero.</p>



<a name="452337192"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452337192" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452337192">(Jul 18 2024 at 12:56)</a>:</h4>
<p>Purple highlight means that the method did not terminate yet. If it stays purple, it often means that the proof method loops, e.g. due to a loop of rewriting rules.</p>



<a name="452338198"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452338198" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452338198">(Jul 18 2024 at 13:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452336794">said</a>:</p>
<blockquote>
<p>I’m pretty sure based on experimenting yesterday that it considers the natural numbers not to include zero.</p>
</blockquote>
<p>This is with 100% certainty wrong:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w"> </span><span class="s">‹0 ∈ ℕ›</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
</code></pre></div>



<a name="452467601"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452467601" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452467601">(Jul 19 2024 at 01:25)</a>:</h4>
<p>You are correct that 0 is in N. I still get the purple highlights when I copy your exact text and substitute the sorry for my lemma, just as I did when I changed it yesterday. Sledgehammer didn't resolve it. For now, I'm going to leave it alone.</p>



<a name="452487382"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452487382" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452487382">(Jul 19 2024 at 05:01)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"(sqrt(𝗄 - Λ))^(2 * n - 1) ∈ ℚ"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">eq</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
<span class="w">  </span><span class="k">moreover</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">‹(sqrt(𝗄 - Λ))^(2 * n - 1) = (sqrt(𝗄 - Λ))^(2 * n) / (sqrt(𝗄 - Λ))›</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="s">‹0 &lt; n›</span><span class="w"> </span><span class="n">k_ge</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">cases</span><span class="w"> </span><span class="s">‹𝗄 - Λ = 0›</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">simp</span><span class="o">:</span><span class="w"> </span><span class="n">divide_inverse</span><span class="w"> </span><span class="n">power_diff_conv_inverse</span><span class="o">)</span>
<span class="w">  </span><span class="k">ultimately</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="n">rat</span><span class="o">:</span><span class="w"> </span><span class="s">‹(sqrt(𝗄 - Λ))^(2 * n) / (sqrt(𝗄 - Λ)) ∈ ℚ›</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>
</code></pre></div>



<a name="452487590"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452487590" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452487590">(Jul 19 2024 at 05:01)</a>:</h4>
<p>(with the rather obvious splitting intermediate step of making the transformation explicit)</p>



<a name="452487761"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452487761" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452487761">(Jul 19 2024 at 05:03)</a>:</h4>
<p>(the <code>by (cases ...) (auto ...)</code> is the result of finding <code>power_diff_conv_inverse</code> (with <code>find_theorems</code>) and finding out why auto did not apply it</p>



<a name="452617485"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452617485" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452617485">(Jul 19 2024 at 16:44)</a>:</h4>
<p>I have it down to the following:</p>
<div class="codehilite" data-code-language="theorem"><pre><span></span><code>  assumes "∃n::nat. 𝗏 = 2 * n"
  shows "sqrt(𝗄 - Λ) ∈ ℚ"
proof -
  have "(sqrt(𝗄 - Λ))^(𝗏 - 1) ∈ ℚ" using power_of_k_minus_lambda_3
    by blast
  from assms obtain n where "𝗏 = 2 * n" by blast
  then have "𝗏 - 1 = 2 * n - 1" by auto
  then have "(sqrt(𝗄 - Λ))^(2 * n - 1) ∈ ℚ" using power_of_k_minus_lambda_3
    by presburger
  then have "(sqrt(𝗄 - Λ))^(2 * n)/sqrt(𝗄 - Λ) ∈ ℚ"
    by (metis div_by_0 div_less_iff_less_mult)
  moreover have ‹(𝗄 - Λ) ^ n ∈ ℚ›
    using k_minus_lambda_is_natural by simp
  ultimately have ‹1/sqrt(𝗄 - Λ) ∈ ℚ›
    by (metis divide_divide_eq_right)
  then show ?thesis
    by (simp add: divide_inverse)
qed?

The lines where I use metis are highlighted purple on my machine. I don't think it matters whether n=0 or not. The theorem should still be true.
</code></pre></div>



<a name="452619692"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452619692" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452619692">(Jul 19 2024 at 16:58)</a>:</h4>
<p>Actually now I see that there may by problems with dividing by zero if k= Lambda. This might be causing the problems.</p>



<a name="452645602"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452645602" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452645602">(Jul 19 2024 at 19:13)</a>:</h4>
<p><code>n &gt; 0</code> makes a ton of a difference</p>



<a name="452645789"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452645789" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452645789">(Jul 19 2024 at 19:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452100671">said</a>:</p>
<blockquote>
<p>Side remark: for n = 0, i am not sure if it holds or not, it depends on <code>(sqrt(𝗄 - Λ))^(𝗏 - 1) ∈ ℚ</code> means exactly.  Currently the exponent is a natural number, meaning that you get <code>X^0</code> which is not helpful for proving what you want</p>
</blockquote>
<p>please reread that sentence</p>



<a name="452645858"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452645858" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452645858">(Jul 19 2024 at 19:14)</a>:</h4>
<p>and remember that <code>0 - 1 = 0</code></p>



<a name="452646611"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452646611" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452646611">(Jul 19 2024 at 19:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/452619692">said</a>:</p>
<blockquote>
<p>Actually now I see that there may by problems with dividing by zero if k= Lambda. This might be causing the problems.</p>
</blockquote>
<p>no, it does not. <code>a / 0 = 0</code> (yes it is surprising; yes it makes sense; please check the mailing list this pops up every year and I am not discussing this here)</p>



<a name="452664871"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/452664871" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#452664871">(Jul 19 2024 at 20:49)</a>:</h4>
<p>I'm going to add the assumption that n &gt; 0 again.</p>



<a name="453680472"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/453680472" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#453680472">(Jul 24 2024 at 12:26)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="736162">@Craig Alan Feinstein</span> , just saw this thread - very happy to see someone else taking up design theory in Isabelle! I was the main author on the original design AFP entry, so feel free to reach out with any questions. Sounds like this one is basically solved, but as some general tips for doing simple algebra on the design parameters. I went back and forth between the parameters being nats vs ints for a while - but based on their definitions (cardinalities of certain sets), nats made more sense and generally reduced the amount of type casting I had to do. Obviously, a lot of proofs on paper rely on integer properties though for algebraic manipulation (as in your case) so we still have to work around it. One tactic that is often really useful is the algebra_simps tactic (this often helps where sledgehammer fails), though it'll still need the right assumptions. Sometimes working with int versions of the parameters when doing a long calculation can also significantly improve automation (see the Boses inequality proof in the Resolvable design theory for a good example).</p>



<a name="453815815"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/453815815" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Alan Feinstein <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#453815815">(Jul 24 2024 at 23:43)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="252023">@Chelsea Edmonds</span>, I've been using a lot of your work on Isabelle Combinatorial Design Theory to try to prove the BRC theorem. I learned of this theorem in college in about 1990 and I liked its creative proof that uses the fact that every integer is the sum of four squares. Also the fact that it uses algebra is a good way for me to learn Isabelle. I'm glad you laid the groundwork for Design Theory, as it would have been difficult for me to do this from scratch. This is my first time working with a proof assistant and it is fun, but sometimes frustrating as I don't always understand the details of what makes a valid proof in Isabelle. May I email you versions of my BRC proof attempt and ask you questions when I get stuck? I ask because I am not sure they want me to post versions of my proof in Zulip.</p>



<a name="453900089"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Problems%20with%20square%20roots/near/453900089" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chelsea Edmonds <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Problems.20with.20square.20roots.html#453900089">(Jul 25 2024 at 09:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736162">Craig Alan Feinstein</span> <a href="#narrow/stream/202961-General/topic/Problems.20with.20square.20roots/near/453815815">said</a>:</p>
<blockquote>
<p>Hi <span class="user-mention silent" data-user-id="252023">Chelsea Edmonds</span>, I've been using a lot of your work on Isabelle Combinatorial Design Theory to try to prove the BRC theorem. I learned of this theorem in college in about 1990 and I liked its creative proof that uses the fact that every integer is the sum of four squares. Also the fact that it uses algebra is a good way for me to learn Isabelle. I'm glad you laid the groundwork for Design Theory, as it would have been difficult for me to do this from scratch. This is my first time working with a proof assistant and it is fun, but sometimes frustrating as I don't always understand the details of what makes a valid proof in Isabelle. May I email you versions of my BRC proof attempt and ask you questions when I get stuck? I ask because I am not sure they want me to post versions of my proof in Zulip.</p>
</blockquote>
<p>Glad it's been useful! Your welcome to email me (<a href="mailto:c.l.edmonds@sheffield.ac.uk">c.l.edmonds@sheffield.ac.uk</a>), or DM me with any questions about the existing libraries/how to use them effectively/problems specific to design theory. That said, this chat is still a great place to ask general questions about Isabelle proofs/generic errors as you're working and learning about Isabelle too  - as you've already been doing! For those types of things more people probably means a better chance at a faster response and also different insights.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>