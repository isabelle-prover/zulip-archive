<html>
<head><meta charset="utf-8"><title>Replace higher-order premise · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Replace.20higher-order.20premise.html">Replace higher-order premise</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="266439324"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Replace%20higher-order%20premise/near/266439324" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan van Brügge <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Replace.20higher-order.20premise.html#266439324">(Dec 30 2021 at 16:15)</a>:</h4>
<p>I have a theorem in the form <code>(⋀a b. a ∈ f &lt;image&gt; A ⟹ b ∈ B ⟹ ?g a b = ?h a b) ⟹ P2 ⟹ P3 ⟹ Q</code>. To prove the premise, I need to rewrite it slightly (remove the set image): <code>(⋀x b. x ∈ A ⟹ b ∈ B ⟹ ?g (f x) b = ?h (f x) b) ⟹ P2  ⟹ P3 ⟹ Q</code>.  A lemma that takes the original premise and produces the new one is easy to write and can be proven by blast, but I can't apply it because <code>OF</code> tries unify the <code>Q</code> only and not replace the whole higher order premise</p>



<a name="266439413"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Replace%20higher-order%20premise/near/266439413" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan van Brügge <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Replace.20higher-order.20premise.html#266439413">(Dec 30 2021 at 16:16)</a>:</h4>
<p>&lt;image&gt; above means ` but that confuses the markdown parser of zulip</p>



<a name="266439465"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Replace%20higher-order%20premise/near/266439465" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan van Brügge <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Replace.20higher-order.20premise.html#266439465">(Dec 30 2021 at 16:17)</a>:</h4>
<p>Is there a way to rewrite the theorem accordingly? I ultimately want to do this from ML, if that helps</p>



<a name="266443020"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Replace%20higher-order%20premise/near/266443020" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Replace.20higher-order.20premise.html#266443020">(Dec 30 2021 at 17:11)</a>:</h4>
<p>Perhaps you could apply the <code>atomize</code> method or more specifically use <code>[unfolded atomize_imp]</code> with the premise to (temporarily) replace the Pure implication by the HOL implication.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>