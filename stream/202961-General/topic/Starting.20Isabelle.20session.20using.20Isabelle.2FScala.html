<html>
<head><meta charset="utf-8"><title>Starting Isabelle session using Isabelle/Scala · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html">Starting Isabelle session using Isabelle/Scala</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="495877926"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Starting%20Isabelle%20session%20using%20Isabelle/Scala/near/495877926" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Milan Tom <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html#495877926">(Jan 25 2025 at 15:02)</a>:</h4>
<p>I have made an Isabelle/Scala project using <code>isabelle scala_project</code>. I am trying to start a session using Isabelle/Scala via <code>Server_commands.Session_start</code>. I tried:</p>
<ul>
<li><code>Server_commands.Session_start.command_body</code>: Cannot construct the required <code>Server.Context</code> as it has a private constructor</li>
<li><code>Server_commands.Session_start.command</code>: Getting bad build engine error and found that no services had been instantiated upon printing the available services </li>
</ul>
<p>Is this possible without writing to the console?</p>



<a name="496544571"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Starting%20Isabelle%20session%20using%20Isabelle/Scala/near/496544571" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html#496544571">(Jan 29 2025 at 13:10)</a>:</h4>
<p>Sorry, but from your writing I don't understand what you want to achieve, how, and what you tried. Have a look at Ch.4 of the system manual and at the implementation of the server management tools.</p>



<a name="496565752"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Starting%20Isabelle%20session%20using%20Isabelle/Scala/near/496565752" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Milan Tom <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html#496565752">(Jan 29 2025 at 14:48)</a>:</h4>
<p>Sorry if I was not clear about what I was intending to achieve. I would like to start an Isabelle session as can be achieved in the command line as shown below:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">isabelle</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">test_server</span>
<span class="n">server</span><span class="w"> </span><span class="s">"test_server"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">127.0.0.1</span><span class="o">:</span><span class="n">45443</span><span class="w"> </span><span class="o">(</span><span class="n">password</span><span class="w"> </span><span class="s">"0177189b-c423-453d-9cfd-d8cdea828156"</span><span class="o">)</span>
<span class="n">OK</span><span class="w"> </span><span class="ow">{</span><span class="s">"isabelle_id"</span><span class="o">:</span><span class="s">"..."</span><span class="o">,</span><span class="s">"isabelle_name"</span><span class="o">:</span><span class="s">"Isabelle2024"</span><span class="ow">}</span>

<span class="n">$</span><span class="w"> </span><span class="n">session_start</span><span class="w"> </span><span class="ow">{</span><span class="s">"session"</span><span class="o">:</span><span class="w"> </span><span class="s">"HOL"</span><span class="ow">}</span>
<span class="n">OK</span><span class="w"> </span><span class="ow">{</span><span class="s">"task"</span><span class="o">:</span><span class="s">"..."</span><span class="ow">}</span>
<span class="ow">...</span>
<span class="n">FINISHED</span><span class="w"> </span><span class="ow">{</span><span class="s">"session_id"</span><span class="o">:</span><span class="s">"..."</span><span class="o">,</span><span class="s">"tmp_dir"</span><span class="o">:</span><span class="s">"/tmp/..."</span><span class="ow">}</span>
</code></pre></div>
<p>I want to start the session directly using Isabelle/Scala commands rather than using the console.  Above I have listed the Isabelle/Scala commands I have tried to use to achieve this.</p>



<a name="496567015"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Starting%20Isabelle%20session%20using%20Isabelle/Scala/near/496567015" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html#496567015">(Jan 29 2025 at 14:54)</a>:</h4>
<p>This shouldn't be very difficult (you can look up how the "isabelle server" scala code does it) but I suspect you need to start a <code>Server</code> and call <code>Server_Commands.Session_Start.command</code> with the right arguments, in particular with properly initialized <code>Options</code> (via <code>Options.init()</code>).</p>



<a name="496567374"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Starting%20Isabelle%20session%20using%20Isabelle/Scala/near/496567374" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html#496567374">(Jan 29 2025 at 14:55)</a>:</h4>
<p>Though I don't get what you mean with no services have been instantiated. If you call <code>Server_Commands().entries</code>, you will find the instances</p>



<a name="496567596"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Starting%20Isabelle%20session%20using%20Isabelle/Scala/near/496567596" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html#496567596">(Jan 29 2025 at 14:56)</a>:</h4>
<p>All of this of course assumes a proper Isabelle/Scala context, e.g. by registering your own Isabelle/Scala component or running some code via <code>isabelle scala</code>.</p>



<a name="496963584"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Starting%20Isabelle%20session%20using%20Isabelle/Scala/near/496963584" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Milan Tom <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Starting.20Isabelle.20session.20using.20Isabelle.2FScala.html#496963584">(Jan 31 2025 at 09:31)</a>:</h4>
<blockquote>
<p>I suspect you need to start a <code>Server</code> and call <code>Server_Commands.Session_Start.command</code> with the right arguments</p>
</blockquote>
<p>Based on the code, I believe the correct function to call is <code>Server_Commands.Session_Start.command_body</code> with a <code>Server.Context</code> object as well. However, although I can start the server correctly, I am unable to construct a <code>Server.Context</code> object as its constructor is private. Calling <code>Server_Commands.Session_Start.command</code> directly raises an <code>Isabelle-specific thread required</code> error (I suspect due to not using <code>context.make_task</code>). Are there any workarounds that I can use?</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>