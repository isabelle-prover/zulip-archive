<html>
<head><meta charset="utf-8"><title>Type construction · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Type.20construction.html">Type construction</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="366535474"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/Type%20construction/near/366535474" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gergely Buday <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/Type.20construction.html#366535474">(Jun 15 2023 at 15:14)</a>:</h4>
<p>I have </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">locale</span><span class="w"> </span><span class="n">monoid</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w"> </span><span class="n">Monoid</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="n">composition</span><span class="w"> </span><span class="o">(</span><span class="kp">infixl</span><span class="w"> </span><span class="s">"oMonoid"</span><span class="w"> </span><span class="n">70</span><span class="o">)</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="n">unitMonoid</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">composition_closed</span><span class="w"> </span><span class="o">[</span><span class="n">intro</span><span class="o">,</span><span class="w"> </span><span class="n">simp</span><span class="o">]:</span><span class="w"> </span><span class="s">"⟦ a ∈ Monoid; b ∈ Monoid ⟧ ⟹ a oMonoid b ∈ Monoid"</span>
<span class="w">    </span><span class="kp">and</span><span class="w"> </span><span class="n">unit_closed</span><span class="w"> </span><span class="o">[</span><span class="n">intro</span><span class="o">,</span><span class="w"> </span><span class="n">simp</span><span class="o">]:</span><span class="w"> </span><span class="s">"unitMonoid ∈ Monoid"</span>
<span class="w">    </span><span class="kp">and</span><span class="w"> </span><span class="n">associative</span><span class="w"> </span><span class="o">[</span><span class="n">intro</span><span class="o">]:</span><span class="w"> </span><span class="s">"⟦ a ∈ Monoid; b ∈ Monoid; c ∈ Monoid ⟧ ⟹ (a oMonoid b) oMonoid c = a oMonoid (b oMonoid c)"</span>
<span class="w">    </span><span class="kp">and</span><span class="w"> </span><span class="n">left_unit</span><span class="w"> </span><span class="o">[</span><span class="n">intro</span><span class="o">,</span><span class="w"> </span><span class="n">simp</span><span class="o">]:</span><span class="w"> </span><span class="s">"a ∈ Monoid ⟹ unitMonoid oMonoid a = a"</span>
<span class="w">    </span><span class="kp">and</span><span class="w"> </span><span class="n">right_unit</span><span class="w"> </span><span class="o">[</span><span class="n">intro</span><span class="o">,</span><span class="w"> </span><span class="n">simp</span><span class="o">]:</span><span class="w"> </span><span class="s">"a ∈ Monoid ⟹ a oMonoid unitMonoid = a"</span>

<span class="kn">interpretation</span><span class="w"> </span><span class="n">charlist</span><span class="o">:</span><span class="w"> </span><span class="n">monoid</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="n">Monoid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"UNIV :: char list set"</span><span class="w"> </span><span class="kp">and</span>
<span class="w">  </span><span class="n">composition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">List.append</span><span class="w"> </span><span class="kp">and</span>
<span class="w">  </span><span class="n">unitMonoid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"[]"</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">unfold_locales</span><span class="o">)</span><span class="w"> </span><span class="n">auto</span>
</code></pre></div>
<p>Now I would like to construct a type synonym that would have a constraint:</p>
<p>type_synonym ('a, 'm: monoid) tyop = ...</p>
<p>May I use a type class or a locale construct for this, or this is not possible due to the limitations of the type system?</p>
<p>Also, I see a problem here that monoid is not a type but a locale, a different syntactic category.</p>
<p>Please let me know whether my goal is doable in Isabelle in any way.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>