<html>
<head><meta charset="utf-8"><title>instantiation with same type · General · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/index.html">General</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html">instantiation with same type</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="436615840"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/instantiation%20with%20same%20type/near/436615840" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html#436615840">(May 02 2024 at 04:44)</a>:</h4>
<p>Hi would like to ask how to instantiate a type class with a type with multiple of the same type for arity<br>
such as a function mapping to itself 'a =&gt; 'a<br>
instantiation "fun" :: (type ,type) instead instantiates for 'a =&gt; 'b.</p>



<a name="436650211"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/instantiation%20with%20same%20type/near/436650211" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html#436650211">(May 02 2024 at 09:16)</a>:</h4>
<p>I think this is not possible. You could define a type for endofunctions (i.e. functions with type <code>'a =&gt; 'a</code>) using typedef and then instantiate your typeclass for this type.</p>



<a name="437430240"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/instantiation%20with%20same%20type/near/437430240" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html#437430240">(May 07 2024 at 11:16)</a>:</h4>
<p>Thanks for your reply. I managed to do it manually using ML using Class.instantiation is there any reason for this behavior in the isar cmd?</p>



<a name="437503486"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/instantiation%20with%20same%20type/near/437503486" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html#437503486">(May 07 2024 at 18:02)</a>:</h4>
<p>wait nvm i just realized I didnt manage to succeed with doing it in ML <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span></p>



<a name="470315992"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/instantiation%20with%20same%20type/near/470315992" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html#470315992">(Sep 15 2024 at 10:22)</a>:</h4>
<p>It's just a fundamental restriction of the way type classes work in Isabelle/HOL. If you allow more flexibility in type class instantiations, you can easily get things like overlapping instances and all the checks become much more difficult. If you overdo it, type class inference becomes computationally hard or even undecidable.</p>



<a name="470316055"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/instantiation%20with%20same%20type/near/470316055" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html#470316055">(Sep 15 2024 at 10:22)</a>:</h4>
<p>This is probably described in the documentation on type classes</p>



<a name="470581596"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/instantiation%20with%20same%20type/near/470581596" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/202961-General/topic/instantiation.20with.20same.20type.html#470581596">(Sep 16 2024 at 12:29)</a>:</h4>
<p>Thanks for your reply i manually worked around the issue using adhoc overloading + locales instead</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>