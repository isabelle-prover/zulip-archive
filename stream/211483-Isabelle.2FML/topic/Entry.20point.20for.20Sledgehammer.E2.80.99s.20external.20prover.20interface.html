<html>
<head><meta charset="utf-8"><title>Entry point for Sledgehammer’s external prover interface · Isabelle/ML · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/index.html">Isabelle/ML</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html">Entry point for Sledgehammer’s external prover interface</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="560582201"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560582201" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jiangjing Xu <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560582201">(Nov 27 2025 at 12:12)</a>:</h4>
<p>Dear Isabelle developers,</p>
<p>I hope you are doing well. I am a student currently working on a university project regarding the reliability and testing of proof assistants. According to the project specification, my task is to test the interface between Isabelle/HOL and external provers, which are primarily invoked via Sledgehammer.</p>
<p>My supervisor recommended that I consult this community to better understand the internal architecture. In particular, I would be very grateful if you could advise me on the following:</p>
<ol>
<li>What is the main ML entry point or API through which Sledgehammer invokes external provers (such as E, Vampire, Z3)?  </li>
<li>
<p>Which modules or functions in the Isabelle code base are responsible for:<br>
   (a) preparing problems for external provers  <br>
   (b) launching the external tools  <br>
   (c) parsing and integrating their results back into Isabelle?</p>
</li>
<li>
<p>If one wishes to instrument or fuzz the interface (for example, by injecting mutated prover calls or modified problem files), is there a recommended way to call this layer programmatically?</p>
</li>
</ol>
<p>For context, I am working with Isabelle 2025, and this question is specifically motivated by Variant 3 of my project, which focuses on exercising the Sledgehammer–external prover interaction to search for crashes, miscommunication, hangs, or unexpected behaviours.</p>
<p>Thank you very much for your time and guidance. I sincerely appreciate your help as I am still learning the internal structure of Isabelle.</p>
<p>Kind regards,  <br>
Jiangjing Xu</p>



<a name="560586763"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560586763" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560586763">(Nov 27 2025 at 12:36)</a>:</h4>
<p>Have a look at the function <code>Sledgehammer_Prover_ATP.run_atp</code> (In the file <code>src/HOL/Tools/Sledgehammer/sledgehammer_prover_atp.ML</code>), where all of this happens.</p>
<p>This calls all the components, e.g. <code>ATP_Problem_Generate.generate_atp_problem</code> (in <code>src/HOL/Tools/ATP/atp_problem_generate.ML</code>).</p>
<p>You can simply write Isabelle/ML code to call the involved functions yourself.</p>



<a name="560587716"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560587716" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560587716">(Nov 27 2025 at 12:41)</a>:</h4>
<p>If you're new to Isabelle/ML, have a look at the first few sections of the <a href="https://web.cs.wpi.edu/~dd/resources_isabelle/isabelle_programming.urban.pdf">Isabelle/ML Cookbook</a>.</p>



<a name="560588047"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560588047" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Kappelmann <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560588047">(Nov 27 2025 at 12:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="348400">Fabian Huch</span> <a href="#narrow/channel/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface/near/560587716">said</a>:</p>
<blockquote>
<p>If you're new to Isabelle/ML, have a look at the first few sections of the <a href="https://web.cs.wpi.edu/~dd/resources_isabelle/isabelle_programming.urban.pdf">Isabelle/ML Cookbook</a>.</p>
</blockquote>
<p>That's the 2013 version. Here's the most up-to-date version (2019): <a href="https://urbanchr.github.io/Cookbook/">https://urbanchr.github.io/Cookbook/</a></p>



<a name="560624379"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560624379" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jiangjing Xu <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560624379">(Nov 27 2025 at 15:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="348400">Fabian Huch</span> <a href="#narrow/channel/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface/near/560586763">发言道</a>：</p>
<blockquote>
<p>Have a look at the function <code>Sledgehammer_Prover_ATP.run_atp</code> (In the file <code>src/HOL/Tools/Sledgehammer/sledgehammer_prover_atp.ML</code>), where all of this happens.</p>
<p>This calls all the components, e.g. <code>ATP_Problem_Generate.generate_atp_problem</code> (in <code>src/HOL/Tools/ATP/atp_problem_generate.ML</code>).</p>
<p>You can simply write Isabelle/ML code to call the involved functions yourself.</p>
</blockquote>
<p>Thank you very much, Mr.Huch — this is extremely helpful.</p>
<p>I will look into <code>Sledgehammer_Prover_ATP.run_atp</code> and the related modules you mentioned, especially <code>ATP_Problem_Generate.generate_atp_problem</code>. This gives me a clear starting point for understanding the full invocation chain.</p>
<p>I appreciate the guidance on calling these components directly from Isabelle/ML as well.</p>



<a name="560624686"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560624686" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jiangjing Xu <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560624686">(Nov 27 2025 at 15:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233154">Kevin Kappelmann</span> <a href="#narrow/channel/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface/near/560588047">发言道</a>：</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="348400">Fabian Huch</span> <a href="#narrow/channel/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface/near/560587716">said</a>:</p>
<blockquote>
<p>If you're new to Isabelle/ML, have a look at the first few sections of the <a href="https://web.cs.wpi.edu/~dd/resources_isabelle/isabelle_programming.urban.pdf">Isabelle/ML Cookbook</a>.</p>
</blockquote>
<p>That's the 2013 version. Here's the most up-to-date version (2019): <a href="https://urbanchr.github.io/Cookbook/">https://urbanchr.github.io/Cookbook/</a></p>
</blockquote>
<p>Thank you, Mr.Kappelmann, for the link to the updated Isabelle/ML Cookbook. I really appreciate it — I will study the 2019 version to familiarise myself with Isabelle/ML before diving deeper into the Sledgehammer interface.</p>



<a name="560633254"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560633254" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560633254">(Nov 27 2025 at 16:14)</a>:</h4>
<p>It seems strange to me to try fuzzing E and Vampire this way, because Isabelle does not really try to reconstruct the proofs</p>



<a name="560633403"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560633403" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560633403">(Nov 27 2025 at 16:14)</a>:</h4>
<p>Fuzzing the smt code that seems like a lot of fun :-)</p>



<a name="560633489"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560633489" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560633489">(Nov 27 2025 at 16:15)</a>:</h4>
<p>But: I expect that will find a lot of proof reconstruction problems</p>



<a name="560633760"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560633760" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560633760">(Nov 27 2025 at 16:16)</a>:</h4>
<p>before finding problems due to mutation</p>



<a name="560634017"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/560634017" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#560634017">(Nov 27 2025 at 16:17)</a>:</h4>
<p>BTW, I have somewhere a <code>check_smt</code> method that parses an input and a proof file. That might be useful to start fuzzing (you can mutate text files, which is easier than attempting to mutate the file generation itself)</p>



<a name="562425458"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/562425458" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jiangjing Xu <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#562425458">(Dec 08 2025 at 09:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface/near/560633254">发言道</a>：</p>
<blockquote>
<p>It seems strange to me to try fuzzing E and Vampire this way, because Isabelle does not really try to reconstruct the proofs</p>
</blockquote>
<p>Thank you very much, Mr.Fleury, for your thoughtful advice — I really appreciate it.</p>
<p>Your points about proof reconstruction dominating the results and about focusing on SMT fuzzing are very helpful, and I will carefully take them into account when refining my direction. The <code>check_smt</code> method you mentioned also sounds like an excellent starting point.</p>
<p>Many thanks again for your guidance.</p>



<a name="562606102"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/211483-Isabelle/ML/topic/Entry%20point%20for%20Sledgehammer%E2%80%99s%20external%20prover%20interface/near/562606102" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/211483-Isabelle.2FML/topic/Entry.20point.20for.20Sledgehammer.E2.80.99s.20external.20prover.20interface.html#562606102">(Dec 09 2025 at 06:14)</a>:</h4>
<p>Right, so the fork is at <a href="https://github.com/m-fleury/isabelle-emacs/tree/Isabelle2025-reconstruction">https://github.com/m-fleury/isabelle-emacs/tree/Isabelle2025-reconstruction</a>. It contains changes related to add support for a newer cvc5 and the latest veriT version. I will try to merge the changes with the latest RC5 over the week-end.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>