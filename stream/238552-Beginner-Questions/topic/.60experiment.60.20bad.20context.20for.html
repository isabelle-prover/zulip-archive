<html>
<head><meta charset="utf-8"><title>`experiment` bad context for · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.60experiment.60.20bad.20context.20for.html">`experiment` bad context for</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="373692372"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%60experiment%60%20bad%20context%20for/near/373692372" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Soeldner <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.60experiment.60.20bad.20context.20for.html#373692372">(Jul 09 2023 at 12:35)</a>:</h4>
<p>I'm trying to use a class definition within an experiment, used to generate latex snippets, but Isabelle rejects the definition with: </p>
<blockquote>
<p>Bad context for command "class"⌂</p>
</blockquote>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">experiment</span><span class="w"> </span><span class="k">begin</span>
<span class="k">text_raw</span><span class="w"> </span><span class="s">‹\DefineSnippet{countable}{›</span>
<span class="k">class</span><span class="w"> </span><span class="n">countable</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">ex_inj</span><span class="o">:</span><span class="w"> </span><span class="s">"∃to_nat :: 'a ⇒ nat. inj to_nat"</span>
<span class="k">text_raw</span><span class="w"> </span><span class="s">‹}%EndSnippet›</span>
<span class="k">end</span>
</code></pre></div>
<p>Is there a workaround?</p>



<a name="373715608"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%60experiment%60%20bad%20context%20for/near/373715608" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.60experiment.60.20bad.20context.20for.html#373715608">(Jul 09 2023 at 14:26)</a>:</h4>
<p>With <code>experiment</code> you introduce a kind of throw-away locale, and locale contexts can depend of type variables, values (introduced with <code>fixes</code>), and facts (introduced with <code>assumes</code>), while classes can’t have such dependencies. Maybe it works with <code>notepad</code>, which introduces a throw-away context without any such dependencies, although I can imagine that classes can only be permanent.</p>



<a name="373720833"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%60experiment%60%20bad%20context%20for/near/373720833" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Soeldner <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.60experiment.60.20bad.20context.20for.html#373720833">(Jul 09 2023 at 14:50)</a>:</h4>
<p>your explanation makes sense. It also prevents the use of  <code>notepad</code>.  TY :)</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>