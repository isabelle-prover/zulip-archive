<html>
<head><meta charset="utf-8"><title>✔ adding development version afp components breaks Isabelle · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html">✔ adding development version afp components breaks Isabelle</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="257870844"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/257870844" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#257870844">(Oct 16 2021 at 23:43)</a>:</h4>
<p>Isabelle version:2021Feb<br>
operating system version: MAC OS X 10.15.7</p>
<p>I wanted to load and read some theories from afp.<br>
To resolve dependencies, <br>
I decided to clone and use the afl repository.<br>
After cloning it I to a folder, I followed the instructions<br>
<a href="https://www.isa-afp.org/using.html">https://www.isa-afp.org/using.html</a><br>
and successfully executed the command<br>
isabelle components -u ~/Dropbox/Workspace/afp/afp-devel<br>
with output <br>
Added component "/Users/cstan/Dropbox/Workspace/afp/afp-devel/thys"</p>
<p>Now when I restart isabelle,<br>
I got this error message <br>
<a href="/user_uploads/14278/ezkhGVW6xTZN7IYmPI-6iy18/Screenshot-2021-10-17-at-00.39.10.png">Screenshot-2021-10-17-at-00.39.10.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/ezkhGVW6xTZN7IYmPI-6iy18/Screenshot-2021-10-17-at-00.39.10.png" title="Screenshot-2021-10-17-at-00.39.10.png"><img src="/user_uploads/14278/ezkhGVW6xTZN7IYmPI-6iy18/Screenshot-2021-10-17-at-00.39.10.png"></a></div><p>Sourced file: inline evaluation of: <br>
``     new isabelle.jedit.Isabelle_Export.VFS();   ;'' : No static field or inner class: VFS of class isabelle.jedit.Isabelle_Export : at Line: 2 :<br>
 in file: inline evaluation of:      new isabelle.jedit.Isabelle_Export.VFS();   ;''<br>
 : isabelle .jedit .Isabelle_Export .VFS </p>
<div class="codehilite"><pre><span></span><code>at org.gjt.sp.jedit.bsh.UtilEvalError.toEvalError(UtilEvalError.java:84)
at org.gjt.sp.jedit.bsh.UtilEvalError.toEvalError(UtilEvalError.java:89)
at org.gjt.sp.jedit.bsh.BSHAmbiguousName.toObject(BSHAmbiguousName.java:64)
at org.gjt.sp.jedit.bsh.BSHAllocationExpression.objectAllocation(BSHAllocationExpression.java:86)
at org.gjt.sp.jedit.bsh.BSHAllocationExpression.eval(BSHAllocationExpression.java:62)
at org.gjt.sp.jedit.bsh.BSHPrimaryExpression.eval(BSHPrimaryExpression.java:102)
at org.gjt.sp.jedit.bsh.BSHPrimaryExpression.eval(BSHPrimaryExpression.java:47)
at org.gjt.sp.jedit.bsh.Interpreter.eval(Interpreter.java:644)
at org.gjt.sp.jedit.bsh.Interpreter.eval(Interpreter.java:738)
at org.gjt.sp.jedit.bsh.Interpreter.eval(Interpreter.java:727)
at org.gjt.sp.jedit.BeanShellFacade._eval(BeanShellFacade.java:153)
at org.gjt.sp.jedit.BeanShellFacade.eval(BeanShellFacade.java:117)
at org.gjt.sp.jedit.BeanShell.eval(BeanShell.java:382)
at org.gjt.sp.jedit.ServiceManager$Descriptor.getInstance(ServiceManager.java:337)
at org.gjt.sp.jedit.ServiceManager.getService(ServiceManager.java:262)
at org.gjt.sp.jedit.io.VFSManager.getVFSForProtocol(VFSManager.java:158)
at org.gjt.sp.jedit.MiscUtilities.isURL(MiscUtilities.java:590)
at org.gjt.sp.jedit.io.VFSManager.getVFSForPath(VFSManager.java:176)
at org.gjt.sp.jedit.MiscUtilities.pathsEqual(MiscUtilities.java:1206)
at org.gjt.sp.jedit.BufferHistory.getEntry(BufferHistory.java:88)
at org.gjt.sp.jedit.jEdit.composeBufferPropsFromHistory(jEdit.java:4418)
at org.gjt.sp.jedit.jEdit.openTemporary(jEdit.java:1859)
at org.gjt.sp.jedit.jEdit.openTemporary(jEdit.java:1825)
at org.gjt.sp.jedit.jEdit.openTemporary(jEdit.java:1778)
at org.gjt.sp.jedit.BeanShell._runScript(BeanShell.java:328)
at org.gjt.sp.jedit.BeanShell._runScript(BeanShell.java:291)
at org.gjt.sp.jedit.BeanShell.runScript(BeanShell.java:217)
at org.gjt.sp.jedit.Macros$BeanShellHandler.runMacro(Macros.java:1115)
at org.gjt.sp.jedit.jEdit.runStartupScripts(jEdit.java:4001)
at org.gjt.sp.jedit.jEdit.main(jEdit.java:552)
at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.base/java.lang.reflect.Method.invoke(Method.java:564)
at isabelle.Main$.$anonfun$main$4(main.scala:129)
at isabelle.Main$.main(main.scala:138)
at isabelle.Main.main(main.scala)
</code></pre></div>

<p>``</p>
<p>And after I click OK I got<br>
<code>
/Applications/Isabelle2021.app/src/Tools/jEdit/dist/jars/Isabelle-jEdit.jar:
Cannot start: 
*** Unknown option "document_preprocessor"
*** The error(s) above occurred in session entry "Huffman" (line 3 of "/Users/cstan/Dropbox/Workspace/afp/afp-devel/thys/Huffman/ROOT")
</code><br>
And after that I could not get isabelle working properly (processing input, giving out messages etc.)<br>
And the jedit interface looks like the below picture.<br>
<a href="/user_uploads/14278/tahV2_iWqwKTV-D0J7PoKm_a/Screenshot-2021-10-17-at-00.42.18.png">Screenshot-2021-10-17-at-00.42.18.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/14278/tahV2_iWqwKTV-D0J7PoKm_a/Screenshot-2021-10-17-at-00.42.18.png" title="Screenshot-2021-10-17-at-00.42.18.png"><img src="/user_uploads/14278/tahV2_iWqwKTV-D0J7PoKm_a/Screenshot-2021-10-17-at-00.42.18.png"></a></div><p>Am I missing something important?<br>
Thanks in advance!</p>



<a name="257925012"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/257925012" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wenda Li <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#257925012">(Oct 17 2021 at 14:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="241231">Chengsong Tan</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/adding.20afp.20as.20components.20.20causes.20bean.20shell.20error/near/257870844">said</a>:</p>
<blockquote>
<p>isabelle components -u ~/Dropbox/Workspace/afp/afp-devel</p>
</blockquote>
<p>Which AFP version are you using? To me, it appears that you are probably using the development version rather than the most recent stable one (that is compatible with Isabelle2021). You can check if your AFP is correctly referenced by Isabelle by typing something like <code>Wendas-MBP:~ wenda$ cat ~/.isabelle/Isabelle2021/ROOTS </code> in you terminal. In my case, the command gives </p>
<div class="codehilite"><pre><span></span><code># Additional session root directories
#
#   * each line contains one directory entry in Isabelle path notation
#   * lines starting with &quot;#&quot; are stripped
#   * changes require application restart
#
#:mode=text:encoding=UTF-8:

/Users/wenda/Workspace/afp2021/thys/
</code></pre></div>
<p>where the last line is the path pointing to the theory directory of the downloaded AFP. You can later manually modify the <code>Isabelle2021/ROOTS</code> file as you see fit.</p>



<a name="257928660"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/257928660" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#257928660">(Oct 17 2021 at 15:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="246083">Wenda Li</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/adding.20afp.20as.20components.20.20causes.20bean.20shell.20error/near/257925012">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="241231">Chengsong Tan</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/adding.20afp.20as.20components.20.20causes.20bean.20shell.20error/near/257870844">said</a>:</p>
<blockquote>
<p>isabelle components -u ~/Dropbox/Workspace/afp/afp-devel</p>
</blockquote>
<p>Which AFP version are you using? To me, it appears that you are probably using the development version rather than the most recent stable one (that is compatible with Isabelle2021). You can check if your AFP is correctly referenced by Isabelle by typing something like <code>Wendas-MBP:~ wenda$ cat ~/.isabelle/Isabelle2021/ROOTS </code> in you terminal. In my case, the command gives </p>
<div class="codehilite"><pre><span></span><code># Additional session root directories
#
#   * each line contains one directory entry in Isabelle path notation
#   * lines starting with &quot;#&quot; are stripped
#   * changes require application restart
#
#:mode=text:encoding=UTF-8:

/Users/wenda/Workspace/afp2021/thys/
</code></pre></div>
<p>where the last line is the path pointing to the theory directory of the downloaded AFP. You can later manually modify the <code>Isabelle2021/ROOTS</code> file as you see fit.</p>
</blockquote>
<p>Thanks a lot for the reply!<br>
Yes, I directly cloned from the afp mercurial repository so it is probably not <br>
the stable release.</p>
<p>When I run the command cat  ~/.isabelle/Isabelle2021/ROOTS,<br>
I got</p>
<div class="codehilite"><pre><span></span><code># Additional session root directories
#
#   * each line contains one directory entry in Isabelle path notation
#   * lines starting with &quot;#&quot; are stripped
#   * changes require application restart
#
#:mode=text:encoding=UTF-8:
</code></pre></div>
<p>which means I don't have afp referenced correctly.<br>
I downloaded a stable version from the afp website <br>
and executed the same command with the new stable version afp directory:<br>
<code>isabelle components -u ~/Dropbox/Workspace/formalizing/afp-2021-10-13/thys </code></p>
<p>but this time the same error message appears when I open Isabelle2021,<br>
and using the <br>
<code>
cat ~/.isabelle/Isabelle2021/ROOTS   
</code><br>
 command gives me the same </p>
<div class="codehilite"><pre><span></span><code># Additional session root directories
#
#   * each line contains one directory entry in Isabelle path notation
#   * lines starting with &quot;#&quot; are stripped
#   * changes require application restart
#
#:mode=text:encoding=UTF-8:
</code></pre></div>
<p>message.</p>
<p>Is there a way to "roll back" to the isabelle configuration state before I did the <br>
<code>isabelle components ...</code><br>
command? Are there any manuals on these configuration options?<br>
Thanks a lot!</p>



<a name="257929379"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/257929379" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#257929379">(Oct 17 2021 at 16:06)</a>:</h4>
<p>I just found the "roll back" option for this: <code>isabelle components -x ~/Dropbox/Workspace/afp/afp-devel </code><br>
<code>-x</code> means to remove that component.<br>
<code>https://isabelle.in.tum.de/dist/Isabelle2021/doc/system.pdf</code><br>
is where you can find relevant manual information on <br>
isabelle components.<br>
Now trying to add the stable version first and see if it works :)</p>



<a name="257930114"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/257930114" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wenda Li <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#257930114">(Oct 17 2021 at 16:18)</a>:</h4>
<p>Glad to find out that you have figured out the solution, which is actually something I didn't know. Personally, I often manually add the AFP path to ROOTS every time I update Isabelle...</p>



<a name="257930365"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/257930365" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#257930365">(Oct 17 2021 at 16:22)</a>:</h4>
<p><a href="/user_uploads/14278/uWVDI9gJMGBCTDPE8MQmtD0B/Screenshot-2021-10-17-at-17.19.52.png">Screenshot-2021-10-17-at-17.19.52.png</a> <br>
Just added the stable afp version and it works!<br>
I can now look at the theory files interactively as shown in the screenshot :o)<br>
And thanks <span class="user-mention" data-user-id="246083">@Wenda Li</span>  for the suggestion on the version problem, I was running out of ideas yesterday.<br>
How do you do a manual AFP path adding?</p>
<div class="message_inline_image"><a href="/user_uploads/14278/uWVDI9gJMGBCTDPE8MQmtD0B/Screenshot-2021-10-17-at-17.19.52.png" title="Screenshot-2021-10-17-at-17.19.52.png"><img src="/user_uploads/14278/uWVDI9gJMGBCTDPE8MQmtD0B/Screenshot-2021-10-17-at-17.19.52.png"></a></div>



<a name="257932701"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/257932701" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wenda Li <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#257932701">(Oct 17 2021 at 16:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="241231">Chengsong Tan</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/adding.20development.20version.20afp.20components.20breaks.20Isabelle/near/257930365">said</a>:</p>
<blockquote>
<p>How do you do a manual AFP path adding?</p>
</blockquote>
<p>Ahh, that is easy -- just edit the ROOTS file using your favourite text editor and save :-) To me, <code>isabelle components -u</code> updates the ROOTS file when we don't know where it is located, but once we know its location ourselves it is straightforward to edit the file directly.</p>



<a name="258041696"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/%E2%9C%94%20adding%20development%20version%20afp%20components%20breaks%20Isabelle/near/258041696" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/.E2.9C.94.20adding.20development.20version.20afp.20components.20breaks.20Isabelle.html#258041696">(Oct 18 2021 at 14:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="241231">Chengsong Tan</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>