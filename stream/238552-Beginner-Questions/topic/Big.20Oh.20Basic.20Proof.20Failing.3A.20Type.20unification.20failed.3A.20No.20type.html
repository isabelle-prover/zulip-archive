<html>
<head><meta charset="utf-8"><title>Big Oh Basic Proof Failing: Type unification failed: No type · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html">Big Oh Basic Proof Failing: Type unification failed: No type</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="418709385"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Big%20Oh%20Basic%20Proof%20Failing%3A%20Type%20unification%20failed%3A%20No%20type/near/418709385" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zigzagdoom <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html#418709385">(Jan 29 2024 at 19:54)</a>:</h4>
<p>Hi,</p>
<p>I am a beginner learning to use Isabelle. I am trying to define big Oh, and prove a basic property. However, I am getting failures:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">theory</span><span class="w"> </span><span class="n">Scratch</span>
<span class="w">  </span><span class="kp">imports</span><span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="s">"HOL.Real"</span>

<span class="k">begin</span>

<span class="k">definition</span><span class="w"> </span><span class="n">big_O</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"(nat ⇒ real) ⇒ (nat ⇒ real) ⇒ bool"</span><span class="w"> </span><span class="o">(</span><span class="kp">infix</span><span class="w"> </span><span class="s">"∈ O"</span><span class="w"> </span><span class="n">50</span><span class="o">)</span>
<span class="w">  </span><span class="kp">where</span><span class="w"> </span><span class="s">"f ∈ O g ⟷ (∃c&gt;0. ∃n0. ∀n≥n0. abs (f n) ≤ c * abs (g n))"</span>

<span class="kn">lemma</span><span class="w"> </span><span class="n">square_in_O_square_plus_linear</span><span class="o">:</span><span class="w"> </span><span class="s">"λn. of_nat (n * n) ∈ O (λn. of_nat (n * n) + of_nat n)"</span>

<span class="k">end</span>
</code></pre></div>
<p>The issue I get is:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Type</span><span class="w"> </span><span class="n">unification</span><span class="w"> </span><span class="n">failed</span><span class="o">:</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">arity</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">semiring_1</span>

<span class="n">Type</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="kp">in</span><span class="w"> </span><span class="n">application</span><span class="o">:</span><span class="w"> </span><span class="n">incompatible</span><span class="w"> </span><span class="n">operand</span><span class="w"> </span><span class="n">type</span>

<span class="n">Operator</span><span class="o">:</span><span class="w">  </span><span class="o">(</span><span class="n">∈</span><span class="w"> </span><span class="n">O</span><span class="o">)</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="o">(</span><span class="n">nat</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">real</span><span class="o">)</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">(</span><span class="n">nat</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">real</span><span class="o">)</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span>
<span class="n">Operand</span><span class="o">:</span><span class="w">   </span><span class="n">of_nat</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="n">*</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="o">??</span><span class="n n-Type">'a</span>

<span class="n">Coercion</span><span class="w"> </span><span class="n">Inference</span><span class="o">:</span>

<span class="n">Local</span><span class="w"> </span><span class="n">coercion</span><span class="w"> </span><span class="n">insertion</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">operand</span><span class="w"> </span><span class="n">failed</span><span class="o">:</span>
<span class="n">No</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">arity</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">semiring_1</span>

<span class="n">Now</span><span class="w"> </span><span class="n">trying</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">infer</span><span class="w"> </span><span class="n">coercions</span><span class="w"> </span><span class="n">globally.</span>

<span class="n">Coercion</span><span class="w"> </span><span class="n">inference</span><span class="w"> </span><span class="n">failed</span><span class="o">:</span>
<span class="n">weak</span><span class="w"> </span><span class="n">unification</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">subtype</span><span class="w"> </span><span class="n">constraints</span><span class="w"> </span><span class="n">fails</span>
<span class="n">Clash</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="s">"_ ⇒ _"</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="s">"bool"</span>
</code></pre></div>
<p>Why is the type inference failing? I have converted to reals using of_nat?</p>
<p>Any help is greatly appreciated.</p>



<a name="418710602"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Big%20Oh%20Basic%20Proof%20Failing%3A%20Type%20unification%20failed%3A%20No%20type/near/418710602" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html#418710602">(Jan 29 2024 at 20:02)</a>:</h4>
<p>I am doing  Isabelle for too long apparently, because I find the error message very clear actually</p>



<a name="418710688"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Big%20Oh%20Basic%20Proof%20Failing%3A%20Type%20unification%20failed%3A%20No%20type/near/418710688" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html#418710688">(Jan 29 2024 at 20:03)</a>:</h4>
<p>The typing error indicates that Isabelle parses your expression as <code>(∈ O) (of_nat (n * n))</code></p>



<a name="418710701"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Big%20Oh%20Basic%20Proof%20Failing%3A%20Type%20unification%20failed%3A%20No%20type/near/418710701" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html#418710701">(Jan 29 2024 at 20:03)</a>:</h4>
<p>which is not what you want</p>



<a name="418711149"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Big%20Oh%20Basic%20Proof%20Failing%3A%20Type%20unification%20failed%3A%20No%20type/near/418711149" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html#418711149">(Jan 29 2024 at 20:06)</a>:</h4>
<p>If can live with ambiguous parse trees:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">big_O</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"(nat ⇒ real) ⇒ (nat ⇒ real) ⇒ bool"</span><span class="w"> </span><span class="o">(</span><span class="s">"_ ∈ O _"</span><span class="w"> </span><span class="n">99</span><span class="o">)</span>
<span class="w">  </span><span class="kp">where</span><span class="w"> </span><span class="s">"(f ∈ O g) ⟷ (∃c&gt;0. ∃n0. ∀n≥n0. abs (f n) ≤ c * abs (g n))"</span>

<span class="kn">lemma</span><span class="w"> </span><span class="n">square_in_O_square_plus_linear</span><span class="o">:</span><span class="w"> </span><span class="s">"λn. of_nat (n * n) ∈ O (λn. of_nat (n * n) + of_nat n)"</span>
</code></pre></div>



<a name="418732175"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Big%20Oh%20Basic%20Proof%20Failing%3A%20Type%20unification%20failed%3A%20No%20type/near/418732175" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zigzagdoom <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html#418732175">(Jan 29 2024 at 22:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type/near/418710602">said</a>:</p>
<blockquote>
<p>I am doing  Isabelle for too long apparently, because I find the error message very clear actually</p>
</blockquote>
<p>Thank you <span class="user-mention" data-user-id="233198">@Mathias Fleury</span> , </p>
<p>Is there any way I can avoid the ambiguity caused by ∈ O?</p>



<a name="418765143"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Big%20Oh%20Basic%20Proof%20Failing%3A%20Type%20unification%20failed%3A%20No%20type/near/418765143" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Big.20Oh.20Basic.20Proof.20Failing.3A.20Type.20unification.20failed.3A.20No.20type.html#418765143">(Jan 30 2024 at 04:21)</a>:</h4>
<p>you may want to check out how it was set up by Manuel Eberl: <a href="https://isabelle.in.tum.de/library/HOL/HOL-Library/Landau_Symbols.html">https://isabelle.in.tum.de/library/HOL/HOL-Library/Landau_Symbols.html</a> (short answer: O actually gives you a set, and \in is actually set inclusion)</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>