<html>
<head><meta charset="utf-8"><title>Cantor&#x27;s pairing function · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html">Cantor&#x27;s pairing function</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="237160985"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237160985" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237160985">(May 03 2021 at 13:33)</a>:</h4>
<p>I need an injective function from <code>(int * int) =&gt; int</code>, e.g. Cantor's pairing function. Where is this formalised?</p>



<a name="237161683"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237161683" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237161683">(May 03 2021 at 13:38)</a>:</h4>
<p>like <a href="https://www.isa-afp.org/browser_info/current/AFP/Recursion-Theory-I/CPair.html">https://www.isa-afp.org/browser_info/current/AFP/Recursion-Theory-I/CPair.html</a>?</p>



<a name="237162304"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237162304" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237162304">(May 03 2021 at 13:43)</a>:</h4>
<p>No need to turn to the AFP. You can use <code>prod_encode</code>/<code>prod_decode</code> from <code>HOL-Library.Nat_Bijection</code>. This is also used to prove the countability of products in <code>HOL-Library.Countable</code>.</p>



<a name="237162404"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237162404" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237162404">(May 03 2021 at 13:44)</a>:</h4>
<p>Thanks Manuel, I was hoping for something like that :D</p>



<a name="237162513"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237162513" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237162513">(May 03 2021 at 13:45)</a>:</h4>
<p>Unrelatedly, my favourite pairing function at least for theoretical purposes is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>↦</mo><msup><mn>2</mn><mi>a</mi></msup><mo>⋅</mo><mo stretchy="false">(</mo><mn>2</mn><mi>b</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a,b) \mapsto 2^a \cdot (2b+1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>. It's much easier to see why this is bijective, and it's very easy to invert as well. The drawback is that it is not as economic as the other one.</p>



<a name="237162854"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237162854" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237162854">(May 03 2021 at 13:47)</a>:</h4>
<p>For my application, the function does not have to be economic.</p>



<a name="237163344"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237163344" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237163344">(May 03 2021 at 13:50)</a>:</h4>
<p>Yes but still, it's easier to take the one that's already in the library.</p>



<a name="237163387"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237163387" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237163387">(May 03 2021 at 13:51)</a>:</h4>
<p>I just like telling people about the one above because it's neat and few people seem to know about it.</p>



<a name="237163555"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237163555" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237163555">(May 03 2021 at 13:52)</a>:</h4>
<p>By the way, if you're wondering how I found <code>prod_encode</code>: I knew about <code>HOL-Library.Countable_Set</code> and figured there has to be a pairing function in there somewhere, and I was right. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="237164592"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237164592" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237164592">(May 03 2021 at 13:59)</a>:</h4>
<p>Related question: are there any helpers for proving that combining bijective functions again yield a bijective function? Specifically, I am looking at the function <code>(λ(a, b). int_decode (prod_encode (int_encode a, int_encode b)))</code>.</p>



<a name="237164782"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237164782" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237164782">(May 03 2021 at 14:00)</a>:</h4>
<p>I tried a bit and only managed to prove it by taking annoyingly small steps</p>



<a name="237165458"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237165458" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237165458">(May 03 2021 at 14:04)</a>:</h4>
<p>*prove parts of it (until now)</p>



<a name="237165591"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237165591" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237165591">(May 03 2021 at 14:05)</a>:</h4>
<p>Write it with as a composition of bijective functions with <code>∘</code> and <code>map_prod</code>:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span> <span class="n">map_prod_bij</span><span class="o">:</span>
  <span class="kp">assumes</span> <span class="s">"bij f"</span> <span class="s">"bij g"</span>
  <span class="kp">shows</span>   <span class="s">"bij (map_prod f g)"</span>
  <span class="k">using</span> <span class="n">assms</span> <span class="k">unfolding</span> <span class="n">bij_def</span> <span class="k">by</span> <span class="o">(</span><span class="n">intro</span> <span class="n">conjI</span> <span class="n">prod.inj_map</span> <span class="n">map_prod_surj</span><span class="o">)</span> <span class="n">auto</span>

<span class="kn">lemma</span> <span class="s">"(λ(a, b). int_decode (prod_encode (int_encode a, int_encode b))) =</span>
<span class="s">       int_decode ∘ prod_encode ∘ map_prod int_encode int_encode"</span>
  <span class="k">by</span> <span class="n">auto</span>

<span class="kn">lemma</span> <span class="s">"bij (int_decode ∘ prod_encode ∘ map_prod int_encode int_encode)"</span>
  <span class="k">by</span> <span class="o">(</span><span class="n">intro</span> <span class="n">map_prod_bij</span> <span class="n">bij_comp</span> <span class="n">bij_int_encode</span> <span class="n">bij_prod_encode</span> <span class="n">bij_int_decode</span><span class="o">)</span>
</code></pre></div>



<a name="237166277"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Cantor%27s%20pairing%20function/near/237166277" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Cantor&#x27;s.20pairing.20function.html#237166277">(May 03 2021 at 14:10)</a>:</h4>
<p>Thanks!</p>



<hr><p>Last updated: Jul 15 2022 at 23:21 UTC</p>
</html>