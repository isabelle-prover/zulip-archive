<html>
<head><meta charset="utf-8"><title>Choice operator on sets? · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html">Choice operator on sets?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="498143299"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498143299" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498143299">(Feb 06 2025 at 15:08)</a>:</h4>
<p>I am aware of the Hilbert Choice operator Eps as in <br>
<a href="https://www.isa-afp.org/browser_info/current/HOL/HOL/Hilbert_Choice.html">https://www.isa-afp.org/browser_info/current/HOL/HOL/Hilbert_Choice.html</a></p>
<p>but I would prefer if there is something applying on sets, rather than predicates. But </p>
<p>find_consts "?'a set ⇒ ?'a"</p>
<p>does not give me that thing. So do we have a set version for Eps? Basically, I would like to take a image of the choice function of a set.</p>



<a name="498149028"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498149028" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498149028">(Feb 06 2025 at 15:32)</a>:</h4>
<p>There are functions converting between sets and predicates:<br>
  Nunchaku.rmember :: "'a set ⇒ 'a ⇒ bool"<br>
  Predicate_Compile.contains ::<br>
    "'a set ⇒ 'a ⇒ bool"</p>



<a name="498149154"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498149154" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498149154">(Feb 06 2025 at 15:33)</a>:</h4>
<p>I can compose it with Eps, but I do not know which one to pick, or if there is already something canonical (which makes sledgehammer happier).</p>



<a name="498157396"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498157396" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498157396">(Feb 06 2025 at 16:07)</a>:</h4>
<p>Eps has the fancy notation:<code>SOME x. x \in S</code></p>



<a name="498211397"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498211397" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498211397">(Feb 06 2025 at 21:13)</a>:</h4>
<p>Hi, though maybe you already did this -- in my very limited experience, proving that the set is not empty should help sledgehammer to get over one barrier</p>



<a name="498213043"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498213043" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498213043">(Feb 06 2025 at 21:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F/near/498157396">said</a>:</p>
<blockquote>
<p>Eps has the fancy notation:<code>SOME x. x \in S</code></p>
</blockquote>
<p>Thanks! I have confirmed that writing it as \lambda x. ... is indeed the standard way to do this.</p>



<a name="498213105"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498213105" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498213105">(Feb 06 2025 at 21:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="700664">Yiran Duan</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F/near/498211397">said</a>:</p>
<blockquote>
<p>Hi, though maybe you already did this -- in my very limited experience, proving that the set is not empty should help sledgehammer to get over one barrier</p>
</blockquote>
<p>This is not only helpful, it is a requirement. Without proving the set is nonempty, you cannot do anything with the choice operator.</p>



<a name="498213497"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498213497" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498213497">(Feb 06 2025 at 21:29)</a>:</h4>
<p>This is because the axiom of choice itself does not tell you that you can pick from the empty set. What sledgehammer does is (not precise!) Skolemization ( pretty much another way to call the axiom of choice). (Write it out just in case that you are not aware of this! In the case you do know about that, yes it is indeed helpful to state explicitly that the set you are picking from is nonempty.) Thanks for your attempt to help!</p>



<a name="498217393"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498217393" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498217393">(Feb 06 2025 at 21:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F/near/498213043">said</a>:</p>
<blockquote>
<p>I have confirmed that writing it as \lambda x. ... is indeed the standard way to do this.</p>
</blockquote>
<p>Could you please also expand a bit on this? I'm curious to see what a standard way would be: is it some alternative to e.g. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>SOME </mtext><mi>x</mi><mi mathvariant="normal">.</mi><mtext> </mtext><mi>x</mi><mo>∈</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">\text{SOME}\ x.\ x \in A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord text"><span class="mord">SOME</span></span><span class="mspace"> </span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mspace"> </span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>?</p>



<a name="498262578"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498262578" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498262578">(Feb 07 2025 at 05:16)</a>:</h4>
<p>Not essentially. This just means you can converting set membership as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mi>x</mi><mi mathvariant="normal">.</mi><mi>x</mi><mo>∈</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">\lambda x. x \in s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">λ</span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> into a predicate, and then call "Eps". So you can have <code>Choice s</code> defined as <code>Eps (\lambda x. x \in s)</code> to get the desired effect.</p>



<a name="498267668"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498267668" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498267668">(Feb 07 2025 at 06:14)</a>:</h4>
<p>Reminder here: choice is very very bad for automation (at least I have never seen <code>someI</code>-involving proofs by sledgehammer). So whenever possible, put the choice in a definition (like <code>MyChoiceDefinition</code>) and add lemmas (so usual <code>assumption ==&gt; MyChoiceDefinition \in s</code>)  to be picked up by Sledgehammer</p>



<a name="498324015"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498324015" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498324015">(Feb 07 2025 at 12:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F/near/498267668">said</a>:</p>
<blockquote>
<p>Reminder here: choice is very very bad for automation (at least I have never seen <code>someI</code>-involving proofs by sledgehammer). So whenever possible, put the choice in a definition (like <code>MyChoiceDefinition</code>) and add lemmas (so usual <code>assumption ==&gt; MyChoiceDefinition \in s</code>)  to be picked up by Sledgehammer</p>
</blockquote>
<p>Thanks! I think I see it is very bad.</p>
<p>I want to show:</p>
<p>have <br>
  "⋀m fl v. ∃wl. asatis tM v (cDIAM m fl) ⟶<br>
         length wl = length fl ∧<br>
              rel tM m (v # wl) ∧ <br>
              (∀w f. (w,f) ∈ set (zip wl fl) ⟶ asatis tM w f)"<br>
    unfolding asatis.simps <br>
    by blast<br>
  then obtain cwl where <br>
  "⋀m fl v. asatis tM v (cDIAM m fl) ⟹<br>
           length (cwl (cDIAM m fl) v) = length fl ∧<br>
              rel tM m (v # (cwl (cDIAM m fl) v)) ∧ <br>
              (∀w f. (w,f) ∈ set (zip (cwl (cDIAM m fl) v) fl) ⟶ asatis tM w f)"<br>
    sledgehammer</p>
<p>Note that I only want a choice function from the existence. But sledgehammer does not prove it. How may I help it?</p>



<a name="498324138"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498324138" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498324138">(Feb 07 2025 at 12:01)</a>:</h4>
<p><a href="/user_uploads/14278/_af7tfVgIHymz4oc0tsH1VRd/image.png">image.png</a><br>
This is the colored goal.</p>
<div class="message_inline_image"><a href="/user_uploads/14278/_af7tfVgIHymz4oc0tsH1VRd/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="985x373" src="/user_uploads/thumbnail/14278/_af7tfVgIHymz4oc0tsH1VRd/image.png/840x560.webp"></a></div>



<a name="498324710"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498324710" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498324710">(Feb 07 2025 at 12:03)</a>:</h4>
<p>Okay it likes this better:<br>
 then obtain cwl where <br>
  "⋀m fl v. asatis tM v (cDIAM m fl) ⟹<br>
           length (cwl m fl v) = length fl ∧<br>
              rel tM m (v # (cwl m fl v)) ∧ <br>
              (∀w f. (w,f) ∈ set (zip (cwl m fl v) fl) ⟶ <br>
                asatis tM w f)"</p>



<a name="498365570"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498365570" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498365570">(Feb 07 2025 at 15:27)</a>:</h4>
<p>wait does you goal hold?</p>



<a name="498365643"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498365643" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498365643">(Feb 07 2025 at 15:27)</a>:</h4>
<p>I mean this:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="k">assume</span><span class="w"> </span><span class="s">‹⋀l :: bool. (∃b. b = l)›</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">‹⋀l. b = l›</span>
<span class="w">    </span><span class="gr">sorry</span>
</code></pre></div>
<p>does not hold</p>



<a name="498365868"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498365868" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498365868">(Feb 07 2025 at 15:28)</a>:</h4>
<p>As far as I understand, you goal holds if you take <code>cwl m fl v</code> to obtain, not a constant for all possible <code>m</code>, <code>fl</code>, and <code>v</code></p>



<a name="498366083"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498366083" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498366083">(Feb 07 2025 at 15:29)</a>:</h4>
<p>Yes cwl is a function. takes three parameters instead of a value.</p>



<a name="498366143"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498366143" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498366143">(Feb 07 2025 at 15:29)</a>:</h4>
<p>Manuel wrote a post on how to do this: <a href="#narrow/channel/238552-Beginner-Questions/topic/Proving.20lemma.20with.20definite.20description/near/291315915">https://isabelle.zulipchat.com/#narrow/channel/238552-Beginner-Questions/topic/Proving.20lemma.20with.20definite.20description/near/291315915</a></p>



<a name="498366308"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498366308" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498366308">(Feb 07 2025 at 15:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F/near/498366083">said</a>:</p>
<blockquote>
<p>Yes cwl is a function. takes three parameters instead of a value.</p>
</blockquote>
<p>ah yeah now I see that in your other post</p>



<a name="498366519"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498366519" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498366519">(Feb 07 2025 at 15:31)</a>:</h4>
<p>It is pretty unhappy if I prove it exists for all <code>m</code> and <code>fl</code>, but want it to give me a function that takes <code>cDIAM m fl</code>.</p>



<a name="498366733"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498366733" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498366733">(Feb 07 2025 at 15:32)</a>:</h4>
<p>I agree it is reasonable for sledgehammer to dislike it.</p>



<a name="498367496"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498367496" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498367496">(Feb 07 2025 at 15:35)</a>:</h4>
<p>hmm depends on <code>cDIAM</code>. If it is the function that ignores the arguments and always returns True, my intuition says that you cannot prove that</p>
<p>You want to have <code>cwl (iDIAM m fl) v</code> right?</p>



<a name="498370300"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498370300" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498370300">(Feb 07 2025 at 15:48)</a>:</h4>
<p>Yes.</p>



<a name="498370546"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498370546" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498370546">(Feb 07 2025 at 15:49)</a>:</h4>
<p>And if I obtain a function for cwl m fl v, then do it by hand on case analysis on formulas, and tell sledgehammer to prove that it has the correct effect on <code>cDIAM m fl</code>, then it gives me what I want.</p>



<a name="498370855"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498370855" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498370855">(Feb 07 2025 at 15:50)</a>:</h4>
<p>I mean, after obtain <code>cwl m fl v</code>, define cwl' by <br>
 "cwl ≡ λf. case f of cDIAM m0 fl0 ⇒ cwl0 m0 fl0<br>
                                                    |_ ⇒ undefined"</p>



<a name="498370999"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Choice%20operator%20on%20sets%3F/near/498370999" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Choice.20operator.20on.20sets.3F.html#498370999">(Feb 07 2025 at 15:51)</a>:</h4>
<p>That is the flow:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w"> </span><span class="k">have</span>
<span class="w">  </span><span class="s">"⋀m fl v. ∃wl. asatis tM v (cDIAM m fl) ⟶</span>
<span class="s">         length wl = length fl ∧</span>
<span class="s">              rel tM m (v # wl) ∧</span>
<span class="s">              (∀w f. (w,f) ∈ set (zip wl fl) ⟶ asatis tM w f)"</span>
<span class="w">    </span><span class="k">unfolding</span><span class="w"> </span><span class="n">asatis.simps</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">cwl0</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="n">cwl0</span><span class="o">:</span><span class="s">"⋀m fl v. asatis tM v (cDIAM m fl) ⟹</span>
<span class="s">           length (cwl0 m fl v) = length fl ∧</span>
<span class="s">              rel tM m (v # (cwl0 m fl v)) ∧</span>
<span class="s">              (∀w f. (w,f) ∈ set (zip (cwl0 m fl v) fl) ⟶</span>
<span class="s">                asatis tM w f)"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">    </span><span class="k">assume</span><span class="w"> </span><span class="s">"⋀cwl. (⋀m fl v. asatis tM v ♢m fl ⟹ length (cwl m fl v) = length fl ∧ rel tM m (v # cwl m fl v) ∧ (∀w f. (w, f) ∈ set (zip (cwl m fl v) fl) ⟶ asatis tM w f)) ⟹ thesis"</span>
<span class="w">    </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="o">?</span><span class="n">thesis</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="s">‹⋀v m fl. ∃wl. asatis tM v ♢m fl ⟶ length wl = length fl ∧ rel tM m (v # wl) ∧ (∀w f. (w, f) ∈ set (zip wl fl) ⟶ asatis tM w f)›</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">moura</span>
<span class="w">  </span><span class="k">qed</span>
<span class="w">  </span><span class="n">define</span><span class="w"> </span><span class="n">cwl</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"cwl ≡ λf. case f of cDIAM m0 fl0 ⇒ cwl0 m0 fl0</span>
<span class="s">                                                    |_ ⇒ undefined"</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span>
<span class="w">  </span><span class="n">cwl</span><span class="o">:</span><span class="s">"⋀m fl v. asatis tM v (cDIAM m fl) ⟹</span>
<span class="s">           length (cwl (cDIAM m fl) v) = length fl ∧</span>
<span class="s">              rel tM m (v # (cwl (cDIAM m fl) v)) ∧</span>
<span class="s">              (∀w f. (w,f) ∈ set (zip (cwl (cDIAM m fl) v) fl) ⟶</span>
<span class="s">                asatis tM w f)"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">cwl0</span><span class="o">)</span>
</code></pre></div>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>