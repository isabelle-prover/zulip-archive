<html>
<head><meta charset="utf-8"><title>Defining inductive predicate: fun vs primrec vs inductive? · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html">Defining inductive predicate: fun vs primrec vs inductive?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="469317624"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469317624" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469317624">(Sep 11 2024 at 08:13)</a>:</h4>
<p>I would like to translate the following type declaration into Isabelle/HOL.</p>



<a name="469317642"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469317642" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469317642">(Sep 11 2024 at 08:13)</a>:</h4>
<p><a href="/user_uploads/14278/LT2jN_loR97dCM_vSh1niPI2/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/LT2jN_loR97dCM_vSh1niPI2/image.png" title="image.png"><img data-original-dimensions="758x510" src="/user_uploads/thumbnail/14278/LT2jN_loR97dCM_vSh1niPI2/image.png/840x560.webp"></a></div>



<a name="469318194"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469318194" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469318194">(Sep 11 2024 at 08:15)</a>:</h4>
<p>The definitions above serves for evaluating a modal formula in the basic modal language. I defined formula, frame and model in Isabelle as follows. (Is everything good up to now?)</p>



<a name="469318203"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469318203" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469318203">(Sep 11 2024 at 08:15)</a>:</h4>
<p>datatype form = VAR "num" <br>
  | FALSE<br>
  | DISJ "form" "form"<br>
  | NOT "form"<br>
  | DIAM "form"</p>
<p>record 'a frame =<br>
  world :: "'a ⇒ bool"<br>
  rel :: "'a ⇒ 'a ⇒ bool"</p>
<p>record 'a model = "'a frame" +<br>
  valt :: "num ⇒ 'a ⇒ bool"</p>



<a name="469318720"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469318720" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469318720">(Sep 11 2024 at 08:16)</a>:</h4>
<p>But then I think I get confused on the translation of the "satis" predicate. It seems to be a bunch of options. There are primrec, fun and inductive. Is there any consideration that I should take before picking one?</p>



<a name="469319081"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469319081" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469319081">(Sep 11 2024 at 08:18)</a>:</h4>
<p>I am attempting to do "fun". I wrote:<br>
fun satis :: "'a model ⇒ 'a ⇒ form ⇒ bool" <br>
  where <br>
   "satis M w (VAR p) = M.valt p v ∧ <a href="http://M.frame.world">M.frame.world</a> w<br>
  | satis M w FALSE  = false"</p>
<p>And it already started complaining:<br>
<a href="/user_uploads/14278/JkkrLzdq1PQdUPq9vBr0Rbow/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/JkkrLzdq1PQdUPq9vBr0Rbow/image.png" title="image.png"><img data-original-dimensions="1516x1020" src="/user_uploads/thumbnail/14278/JkkrLzdq1PQdUPq9vBr0Rbow/image.png/840x560.webp"></a></div>



<a name="469319127"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469319127" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469319127">(Sep 11 2024 at 08:18)</a>:</h4>
<p>May I please ask if there is any quick fix? Thanks in advance!</p>



<a name="469323441"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469323441" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469323441">(Sep 11 2024 at 08:30)</a>:</h4>
<p>I'm not so familiar with record syntax in Isabelle, but that should be <code>valt M</code></p>



<a name="469333024"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469333024" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469333024">(Sep 11 2024 at 08:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F/near/469323441">said</a>:</p>
<blockquote>
<p>I'm not so familiar with record syntax in Isabelle, but that should be <code>valt M</code></p>
</blockquote>
<p>Thanks so much! The underscore before disappears.</p>



<a name="469333321"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469333321" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469333321">(Sep 11 2024 at 09:00)</a>:</h4>
<p>Now I type <code>(world (frame M))</code> and it does not look correct:<br>
<a href="/user_uploads/14278/LnEpbM3R4MKK7xdPkMcDMBK7/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/LnEpbM3R4MKK7xdPkMcDMBK7/image.png" title="image.png"><img data-original-dimensions="1898x1020" src="/user_uploads/thumbnail/14278/LnEpbM3R4MKK7xdPkMcDMBK7/image.png/840x560.webp"></a></div>



<a name="469333540"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469333540" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469333540">(Sep 11 2024 at 09:01)</a>:</h4>
<p>The "frame" is green, and may I please ask a "human language" translation of the error message?</p>



<a name="469400672"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469400672" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469400672">(Sep 11 2024 at 13:41)</a>:</h4>
<p>= is binding to strongly. Use <code>statis M w ... &lt;--&gt; ...</code> or <code>statis M w ... = (...)</code></p>



<a name="469400739"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469400739" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469400739">(Sep 11 2024 at 13:41)</a>:</h4>
<p>And it is False</p>



<a name="469400752"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469400752" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469400752">(Sep 11 2024 at 13:41)</a>:</h4>
<p>instead of false</p>



<a name="469455811"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469455811" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469455811">(Sep 11 2024 at 16:29)</a>:</h4>
<p>Thanks! I changed it into False and &lt;--&gt;.<br>
<a href="/user_uploads/14278/9p_1fbBJPwuu6SaLZ399UiYX/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/9p_1fbBJPwuu6SaLZ399UiYX/image.png" title="image.png"><img data-original-dimensions="2072x674" src="/user_uploads/thumbnail/14278/9p_1fbBJPwuu6SaLZ399UiYX/image.png/840x560.webp"></a></div>



<a name="469456149"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469456149" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469456149">(Sep 11 2024 at 16:30)</a>:</h4>
<p>Any clue why it thinks "frame" is green? M.frame also does not work.</p>



<a name="469456623"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469456623" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469456623">(Sep 11 2024 at 16:31)</a>:</h4>
<p>Not obvious from <a href="https://isabelle.in.tum.de/doc/isar-ref.pdf">https://isabelle.in.tum.de/doc/isar-ref.pdf</a> how can we extract fields of a record term.</p>



<a name="469473365"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469473365" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469473365">(Sep 11 2024 at 17:42)</a>:</h4>
<p>frame is a type, you cannot use it as a function in a term</p>



<a name="469473486"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469473486" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469473486">(Sep 11 2024 at 17:42)</a>:</h4>
<p>I do not even know what you are trying to achieve</p>



<a name="469474269"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469474269" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469474269">(Sep 11 2024 at 17:47)</a>:</h4>
<p>I would like the effect to be "a model consists of a frame and a valuation". So I should be able to type M.frame to extract the field "frame" from "M" and then type (M.frame).world to extract the field "world" from the frame "M.frame". But your comment does give a hint! I have just figured out the type "model" will not take "frame" as its field. So what I need is just "world M". Thank you!</p>



<a name="469476843"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469476843" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469476843">(Sep 11 2024 at 18:01)</a>:</h4>
<p><a href="/user_uploads/14278/o5ivoncW_2-VuG-gXhYNvHk4/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/o5ivoncW_2-VuG-gXhYNvHk4/image.png" title="image.png"><img data-original-dimensions="2072x674" src="/user_uploads/thumbnail/14278/o5ivoncW_2-VuG-gXhYNvHk4/image.png/840x560.webp"></a></div>



<a name="469476989"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469476989" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469476989">(Sep 11 2024 at 18:01)</a>:</h4>
<p>For the type declaration, I wrote:</p>
<p>record 'a frame =<br>
world :: "'a ⇒ bool"<br>
rel :: "'a ⇒ 'a ⇒ bool"</p>
<p>record 'a model = "'a frame" +<br>
valt :: "num ⇒ 'a ⇒ bool"</p>



<a name="469477194"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469477194" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469477194">(Sep 11 2024 at 18:03)</a>:</h4>
<p>The same recipe of writing rel M to be the field "rel" of M does not seem to work.</p>



<a name="469477232"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469477232" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469477232">(Sep 11 2024 at 18:03)</a>:</h4>
<p>Sorry if it turns out to be stupid, but I am confused again.</p>



<a name="469478695"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469478695" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469478695">(Sep 11 2024 at 18:13)</a>:</h4>
<p>It seems that Isabelle does not complain about rel M w v, it is complaining about te quantification.</p>
<p><a href="/user_uploads/14278/gyrgHu8Qbal8tFSaTBTUYuzW/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/gyrgHu8Qbal8tFSaTBTUYuzW/image.png" title="image.png"><img data-original-dimensions="2072x674" src="/user_uploads/thumbnail/14278/gyrgHu8Qbal8tFSaTBTUYuzW/image.png/840x560.webp"></a></div>



<a name="469478713"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469478713" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469478713">(Sep 11 2024 at 18:13)</a>:</h4>
<p>What's wrong here?</p>



<a name="469479208"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469479208" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469479208">(Sep 11 2024 at 18:17)</a>:</h4>
<p>add parentheses. And binds too strongly</p>



<a name="469479488"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469479488" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469479488">(Sep 11 2024 at 18:19)</a>:</h4>
<p>Thank you for the swift answer, it solves my problem.<br>
<a href="/user_uploads/14278/ojXWcb4uAzgeUhzYehscBM0r/image.png">image.png</a><br>
Now Isabelle is happy.</p>
<div class="message_inline_image"><a href="/user_uploads/14278/ojXWcb4uAzgeUhzYehscBM0r/image.png" title="image.png"><img data-original-dimensions="2072x878" src="/user_uploads/thumbnail/14278/ojXWcb4uAzgeUhzYehscBM0r/image.png/840x560.webp"></a></div>



<a name="469479585"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469479585" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469479585">(Sep 11 2024 at 18:20)</a>:</h4>
<p>(But I feel its strength to this extent is a bit weird.)</p>



<a name="469546525"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469546525" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469546525">(Sep 12 2024 at 03:52)</a>:</h4>
<p>Regarding what to choose to use among fun/definition/primrec. I find an answer here:<br>
<a href="https://courses.grainger.illinois.edu/cs576/sp2015/lectures/3-4/04-Isabelle-syntax-2x3.pdf">https://courses.grainger.illinois.edu/cs576/sp2015/lectures/3-4/04-Isabelle-syntax-2x3.pdf</a> slides 5.</p>



<a name="469747314"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469747314" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan van Brügge <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469747314">(Sep 12 2024 at 18:04)</a>:</h4>
<p>usually definition for stuff that does not recurse, fun for everything else</p>



<a name="469747552"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469747552" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan van Brügge <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469747552">(Sep 12 2024 at 18:05)</a>:</h4>
<p>there is rarely a reason to use primrec</p>



<a name="469747852"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/469747852" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#469747852">(Sep 12 2024 at 18:06)</a>:</h4>
<p>Got it. I will just not use it for the foreseeable future then.</p>



<a name="496791720"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496791720" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John  Hughes <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496791720">(Jan 30 2025 at 14:34)</a>:</h4>
<p>Last September, Jan van Brügge answered a question about fun/definition/primrec with the advice "usually <code>definition</code> for stuff that does not recurse, <code>fun</code> for everything else". I note from the  Isar reference manual (p. 221) that </p>
<blockquote>
<p>Also note that definitional packages like <code>datatype, primrec, fun</code> routinely declare Simplifier rules to the target context, while plain <code>definition</code> is an exception in not declaring anything.</p>
</blockquote>
<p>Does this mean that I should be changing</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">parallel</span><span class="o">::</span><span class="s">"'l ⇒ 'l ⇒ bool"</span><span class="w">  </span><span class="o">(</span><span class="kp">infix</span><span class="w"> </span><span class="s">"||"</span><span class="w"> </span><span class="n">5</span><span class="o">)</span><span class="w">  </span><span class="kp">where</span>
<span class="w">  </span><span class="s">"parallel l m = (if (l ∈ Lines ∧ m ∈ Lines)</span>
<span class="s">  then l = m ∨ ¬ (∃ P. P ∈ Points ∧ meets P l ∧ meets P m) else undefined)"</span>
</code></pre></div>
<p>to</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">parallel</span><span class="o">::</span><span class="s">"'l ⇒ 'l ⇒ bool"</span><span class="w">  </span><span class="o">(</span><span class="kp">infix</span><span class="w"> </span><span class="s">"||"</span><span class="w"> </span><span class="n">5</span><span class="o">)</span><span class="w">  </span><span class="kp">where</span><span class="w"> </span><span class="o">[</span><span class="n">simp</span><span class="o">]:</span>
<span class="w">  </span><span class="s">"parallel l m = (if (l ∈ Lines ∧ m ∈ Lines)</span>
<span class="s">  then l = m ∨ ¬ (∃ P. P ∈ Points ∧ meets P l ∧ meets P m) else undefined)"</span>
</code></pre></div>
<p>perhaps? Or is adding non-recursive function-definitions to the simplifier a bad idea in general? Is there any general advice here?</p>



<a name="496798546"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496798546" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan van Brügge <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496798546">(Jan 30 2025 at 15:05)</a>:</h4>
<p>Like most things, it depends. If you just want to use the definition as a shorthand, but want to automation to always look under it you can do that however at that point I would probably use <code>abbreviation</code> instead.<br>
With a definition you can define theorems about the definition where you can be sure that the automation will actually be able to apply them as there is no way that the definition got expanded too early. If you do want to expand the definition for a theorem, you can just add it to the simpset for that particular spot.</p>



<a name="496836005"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496836005" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496836005">(Jan 30 2025 at 17:57)</a>:</h4>
<p>Remark that I sometimes go the opposite way and I use fun with <code>[simp del]</code> to not automatically get the unfolding</p>



<a name="496836245"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496836245" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496836245">(Jan 30 2025 at 17:58)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">fun</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="o">[</span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">]:</span><span class="w"> </span><span class="s">‹test (a, b) = a + b›</span>

<span class="k">lemmas</span><span class="w"> </span><span class="n">test_def</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">test.simps</span>


<span class="kn">lemma</span><span class="w"> </span><span class="s">‹test (A, 0) = A›</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">test_def</span><span class="o">)</span>
</code></pre></div>



<a name="496836254"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496836254" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John  Hughes <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496836254">(Jan 30 2025 at 17:58)</a>:</h4>
<p>Following up on this, I tried to substitute a definition for a <code>fun</code> and it seems to break my  locale definition. Here's a version with <code>fun</code>, which checks out OK, but if you comment that out and include the <code>definition</code> version, you get a type error. This baffles me (as, frankly, does anything that mentions weak types). </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">theory</span><span class="w"> </span><span class="n">Affine_test</span>
<span class="w">  </span><span class="kp">imports</span><span class="w"> </span><span class="n">Complex_Main</span>
<span class="k">begin</span>

<span class="k">locale</span><span class="w"> </span><span class="n">affine_plane_data</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w"> </span><span class="n">Points</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'p set"</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="n">Lines</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'l set"</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="n">meets</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'p ⇒ 'l ⇒ bool"</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w"> </span><span class="n">join</span><span class="o">::</span><span class="w"> </span><span class="s">"'p ⇒ 'p ⇒ 'l"</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w"> </span><span class="n">find_parallel</span><span class="o">::</span><span class="w"> </span><span class="s">"'l ⇒ 'p ⇒ 'l"</span>
<span class="k">begin</span>
<span class="w">  </span><span class="k">fun</span><span class="w"> </span><span class="n">parallel</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'l ⇒ 'l ⇒ bool"</span><span class="w"> </span><span class="o">(</span><span class="kp">infix</span><span class="w"> </span><span class="s">"||"</span><span class="w"> </span><span class="n">50</span><span class="o">)</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="s">"l || m = (if (l ∈ Lines ∧ m ∈ Lines)</span>
<span class="s">  then l = m ∨ ¬ (∃ P. P ∈ Points ∧ meets P l ∧ meets P m) else undefined)"</span>

<span class="c">(* replace the "fun" version of "parallel" with this one and see the next locale-description fail.*)</span>
<span class="c">(*</span>
<span class="c">definition parallel::"'l ⇒ 'l ⇒ bool"  (infix "||" 5)  where</span>
<span class="c">  "parallel l m = (if (l ∈ Lines ∧ m ∈ Lines)</span>
<span class="c">  then l = m ∨ ¬ (∃ P. P ∈ Points ∧ meets P l ∧ meets P m) else undefined)"*)</span>

<span class="k">fun</span><span class="w"> </span><span class="n">collinear</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'p ⇒ 'p ⇒ 'p ⇒ bool"</span>
<span class="w">    </span><span class="kp">where</span><span class="w"> </span><span class="s">"collinear A B C = (if A ∈ Points ∧ B ∈ Points ∧ C ∈ Points</span>
<span class="s">  then (∃ l. l ∈ Lines ∧ meets A l ∧ meets B l ∧ meets C l) else undefined)"</span>
<span class="k">end</span>

<span class="k">locale</span><span class="w"> </span><span class="n">affine_plane</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">affine_plane_data</span><span class="w">  </span><span class="o">+</span>
<span class="w">    </span><span class="kp">assumes</span>
<span class="w">    </span><span class="n">a1a</span><span class="o">:</span><span class="w"> </span><span class="s">"⟦P ≠ Q; P ∈ Points; Q ∈ Points⟧ ⟹ join P Q ∈ Lines ∧ meets P (join P Q)  ∧ meets Q (join P Q)"</span><span class="w"> </span><span class="kp">and</span>
<span class="w">    </span><span class="n">a1b</span><span class="o">:</span><span class="w"> </span><span class="s">"⟦P ≠ Q; P ∈ Points; Q ∈ Points; meets P m; meets Q m⟧ ⟹ m = join P Q"</span><span class="w"> </span><span class="kp">and</span>
<span class="w">    </span><span class="n">a2</span><span class="o">:</span><span class="w"> </span><span class="s">"⟦¬ meets P l; P ∈ Points; l ∈ Lines⟧ ⟹ find_parallel l P ∈ Lines ∧ ( find_parallel l P) || l ∧ meets P (find_parallel l P)"</span><span class="w"> </span><span class="kp">and</span>
<span class="w">    </span><span class="n">a3</span><span class="o">:</span><span class="w"> </span><span class="s">"∃P Q R. P ∈ Points ∧ Q ∈ Points ∧ R ∈ Points ∧ P ≠ Q ∧ P ≠ R ∧ Q ≠ R ∧ ¬ (collinear P Q R)"</span>
<span class="k">begin</span>
<span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>Can someone explain this?  And perhaps more usefully, can someone explain how I might work out for myself what's happening in situations like this in the future?</p>



<a name="496836290"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496836290" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496836290">(Jan 30 2025 at 17:58)</a>:</h4>
<p>It is useful when you want pattern matching</p>



<a name="496836477"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496836477" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496836477">(Jan 30 2025 at 17:59)</a>:</h4>
<p><del>I do not see an error, which Isabelle version is that?</del><br>
I just replace fun by definition and it worked</p>



<a name="496836885"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496836885" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496836885">(Jan 30 2025 at 18:01)</a>:</h4>
<p>Copy-paste error:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">fun</span><span class="w"> </span><span class="n">parallel</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'l ⇒ 'l ⇒ bool"</span><span class="w">   </span><span class="o">(</span><span class="kp">infix</span><span class="w"> </span><span class="s">"||"</span><span class="w"> </span><span class="n">50</span><span class="o">)</span><span class="w"> </span><span class="kp">where</span>
<span class="k">definition</span><span class="w"> </span><span class="n">parallel</span><span class="o">::</span><span class="s">"'l ⇒ 'l ⇒ bool"</span><span class="w">  </span><span class="o">(</span><span class="kp">infix</span><span class="w"> </span><span class="s">"||"</span><span class="w"> </span><span class="n">5</span><span class="o">)</span><span class="w">  </span><span class="kp">where</span>
</code></pre></div>
<p>50 vs 5</p>



<a name="496837649"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496837649" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496837649">(Jan 30 2025 at 18:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="699541">John  Hughes</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F/near/496836254">said</a>:</p>
<blockquote>
<p>Can someone explain this?  And perhaps more usefully, can someone explain how I might work out for myself what's happening in situations like this in the future?</p>
</blockquote>
<p>I got lucky to see that definition but in general I reduce the term to become as small as possible, here: <code>term ‹f || l ∧ H›</code></p>



<a name="496837790"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496837790" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496837790">(Jan 30 2025 at 18:05)</a>:</h4>
<p>Then  from the error message</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Type</span><span class="w"> </span><span class="n">unification</span><span class="w"> </span><span class="n">failed</span>

<span class="n">Type</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="kp">in</span><span class="w"> </span><span class="n">application</span><span class="o">:</span><span class="w"> </span><span class="n">incompatible</span><span class="w"> </span><span class="n">operand</span><span class="w"> </span><span class="n">type</span>

<span class="n">Operator</span><span class="o">:</span><span class="w">  </span><span class="o">(||)</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n n-Type">'l</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span>
<span class="n">Operand</span><span class="o">:</span><span class="w">   </span><span class="n">l</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">H</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">bool</span>
</code></pre></div>
<p>you can see how it is parsed</p>



<a name="496842739"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Defining%20inductive%20predicate%3A%20fun%20vs%20primrec%20vs%20inductive%3F/near/496842739" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John  Hughes <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Defining.20inductive.20predicate.3A.20fun.20vs.20primrec.20vs.20inductive.3F.html#496842739">(Jan 30 2025 at 18:34)</a>:</h4>
<p>Actually not a copy-paste error --- the "definition" version comes from a different (working!) copy of very similar code, in which I reduced the priority for some reason that presumably felt very good at the time. :)  Presumably there are other differences that made things work in that copy. And it's nice to know that the problem was benign, and simple enough that I could have figured it out myself if I hadn't been spooked by the warning about weak types. </p>
<p>Thanks!</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>