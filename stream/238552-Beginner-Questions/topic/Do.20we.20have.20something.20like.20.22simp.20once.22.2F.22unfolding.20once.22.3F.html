<html>
<head><meta charset="utf-8"><title>Do we have something like &quot;simp once&quot;/&quot;unfolding once&quot;? · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html">Do we have something like &quot;simp once&quot;/&quot;unfolding once&quot;?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="489002931"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489002931" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489002931">(Dec 14 2024 at 15:22)</a>:</h4>
<p>For some iff thms generated from induction, it will obviously loop when we expend it, say:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">height_le</span><span class="w"> </span><span class="o">?</span><span class="n">r</span><span class="w"> </span><span class="o">?</span><span class="n">Op</span><span class="w"> </span><span class="o">?</span><span class="n">R</span><span class="w"> </span><span class="o">?</span><span class="n">a1.0</span><span class="w"> </span><span class="o">?</span><span class="n">a2.0</span><span class="w"> </span><span class="o">=</span>
<span class="o">(?</span><span class="n">a1.0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">r</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="o">?</span><span class="n">a2.0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="n">∨</span>
<span class="w"> </span><span class="o">(</span><span class="n">∃w</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">vl</span><span class="w"> </span><span class="n">v.</span>
<span class="w">     </span><span class="o">?</span><span class="n">a1.0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="o">?</span><span class="n">a2.0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">height_le</span><span class="w"> </span><span class="o">?</span><span class="n">r</span><span class="w"> </span><span class="o">?</span><span class="n">Op</span><span class="w"> </span><span class="o">?</span><span class="n">R</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">Op</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="o">?</span><span class="n">R</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">w</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">vl</span><span class="o">))</span>
</code></pre></div>



<a name="489002970"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489002970" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489002970">(Dec 14 2024 at 15:23)</a>:</h4>
<p>But sometimes I would still want to expand it only once to see how the goal looks like. Is there anything that only apply the unfolding/rw only once?</p>



<a name="489005374"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005374" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005374">(Dec 14 2024 at 15:57)</a>:</h4>
<p><code>apply (subst ...)</code> (possibly with position specification like <code>subst (asm)(4)</code>) or <code>apply (rewrite ....)</code>(possibly with <code>rewrite at ... in ...</code>)</p>



<a name="489005534"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005534" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005534">(Dec 14 2024 at 15:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F/near/489005374">said</a>:</p>
<blockquote>
<p><code>apply (subst ...)</code> (possibly with position specification like <code>subst (asm)(4)</code>) or <code>apply (rewrite ....)</code>(possibly with <code>rewrite at ... in ...</code>)</p>
</blockquote>
<p>subst works for me in the sense that</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="ow">...</span>
<span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="n">hle_v_suc_n</span><span class="o">:</span><span class="s">"height_le r τ R v (n + 1)"</span>
<span class="w">    </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">subst</span><span class="w"> </span><span class="n">height_le.simps</span><span class="o">)</span>
</code></pre></div>
<p>gives</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">generated_set</span><span class="w"> </span><span class="n">τ</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="ow">{</span><span class="n">r</span><span class="ow">}</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="n">∨</span>
<span class="w">    </span><span class="o">(</span><span class="n">∃w</span><span class="w"> </span><span class="n">na</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">vl</span><span class="w"> </span><span class="n">va.</span>
<span class="w">        </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">va</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">na</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">height_le</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">τ</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">na</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">τ</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">w</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">va</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span>
</code></pre></div>



<a name="489005638"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005638" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005638">(Dec 14 2024 at 16:00)</a>:</h4>
<p>rewrite reports error</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Undefined</span><span class="w"> </span><span class="n">method</span><span class="o">:</span><span class="w"> </span><span class="s">"rewrite"</span><span class="n">⌂</span>
</code></pre></div>



<a name="489005645"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005645" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005645">(Dec 14 2024 at 16:00)</a>:</h4>
<p>Oh maybe imports...</p>



<a name="489005687"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005687" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005687">(Dec 14 2024 at 16:01)</a>:</h4>
<p>yeah rewrite is somewhere</p>



<a name="489005703"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005703" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005703">(Dec 14 2024 at 16:01)</a>:</h4>
<p><a href="https://isabelle.in.tum.de/website-Isabelle2020/dist/library/HOL/HOL-ex/Rewrite_Examples.html">https://isabelle.in.tum.de/website-Isabelle2020/dist/library/HOL/HOL-ex/Rewrite_Examples.html</a></p>



<a name="489005718"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005718" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005718">(Dec 14 2024 at 16:01)</a>:</h4>
<p>Great! Thanks!</p>



<a name="489005783"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005783" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005783">(Dec 14 2024 at 16:02)</a>:</h4>
<p><code>HOL-Library.Rewrite</code> and the link is the tutorial</p>



<a name="489005817"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Do%20we%20have%20something%20like%20%22simp%20once%22/%22unfolding%20once%22%3F/near/489005817" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Do.20we.20have.20something.20like.20.22simp.20once.22.2F.22unfolding.20once.22.3F.html#489005817">(Dec 14 2024 at 16:03)</a>:</h4>
<p>Nice to see it exists!</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>