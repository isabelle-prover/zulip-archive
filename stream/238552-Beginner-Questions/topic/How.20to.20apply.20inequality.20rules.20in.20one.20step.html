<html>
<head><meta charset="utf-8"><title>How to apply inequality rules in one step · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html">How to apply inequality rules in one step</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="348215682"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348215682" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zixuan Fan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348215682">(Apr 10 2023 at 13:21)</a>:</h4>
<p>Hi, in my proof, I want to show an inequality relation like </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">B</span><span class="w"> </span><span class="o">+</span><span class="w">  </span><span class="n">B</span><span class="w"> </span><span class="n">*</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">*</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">+</span><span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="n">*</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">*</span><span class="w"> </span><span class="n">C</span>
</code></pre></div>
<p>Apparently, if I have the the relation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>≤</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">B \le C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>, I can apply this rule for quite a few times to show the goal, but it is tedious and repetitive to do so in Isar.  </p>
<p>Additionaly, it seems like that no automatic method maybe helpful here. I thought <code>linarith</code> maybe efficient in this context, but it seems to only be able to apply the rule once. So I wonder if there is a better solution or any approach that I did not know.</p>



<a name="348216397"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348216397" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348216397">(Apr 10 2023 at 13:24)</a>:</h4>
<p>What type do your variables have? If you just state the goal as it is, they will probably be of a type variable that is only guaranteed to be of the most general class providing <code>+</code> and <code>*</code>, which will probably give you no axioms about <code>+</code> and <code>*</code>. Well, given that <code>linarith</code> was at least partly successful, this is maybe not what happened, but it would still be good to first clarify what the types are.</p>



<a name="348216516"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348216516" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zixuan Fan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348216516">(Apr 10 2023 at 13:25)</a>:</h4>
<p>I am showing some property about the cardinality, so the type has to be the nature number.</p>



<a name="348216525"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348216525" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348216525">(Apr 10 2023 at 13:25)</a>:</h4>
<p>Have you tried proof-finding tools like <code>try0</code>, <code>sledgehammer</code>, or <code>try</code> (which involves the former two)?</p>



<a name="348216573"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348216573" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348216573">(Apr 10 2023 at 13:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="562381">Zixuan Fan</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step/near/348216516">said</a>:</p>
<blockquote>
<p>I am showing some property about the cardinality, so the type has to be the nature number.</p>
</blockquote>
<p>And is it guaranteed to be of type <code>nat</code>from the context?</p>



<a name="348216700"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348216700" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zixuan Fan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348216700">(Apr 10 2023 at 13:26)</a>:</h4>
<p>Yes, that's where I found <code>linarith</code> is typically more efficient than other methods.</p>



<a name="348216794"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348216794" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zixuan Fan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348216794">(Apr 10 2023 at 13:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="423655">Wolfgang Jeltsch</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step/near/348216573">schrieb</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="562381">Zixuan Fan</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step/near/348216516">said</a>:</p>
<blockquote>
<p>I am showing some property about the cardinality, so the type has to be the nature number.</p>
</blockquote>
<p>And is it guaranteed to be of type <code>nat</code>from the context?</p>
</blockquote>
<p>Yes.</p>



<a name="348216856"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348216856" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348216856">(Apr 10 2023 at 13:27)</a>:</h4>
<p>Doesn’t <code>simp</code> help then?</p>



<a name="348217025"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348217025" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348217025">(Apr 10 2023 at 13:28)</a>:</h4>
<p>After all, it’s just application of <code>≤</code>-congruence.</p>



<a name="348217065"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348217065" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zixuan Fan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348217065">(Apr 10 2023 at 13:28)</a>:</h4>
<p>No, only <code>sledgehammer</code> yields a non-terminating proof.</p>



<a name="348217460"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348217460" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zixuan Fan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348217460">(Apr 10 2023 at 13:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="423655">Wolfgang Jeltsch</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step/near/348217025">schrieb</a>:</p>
<blockquote>
<p>After all, it’s just application of <code>≤</code>-congruence.</p>
</blockquote>
<p>That is just what I don't understand about. It seems that all the methods fails to find the intermiediate steps fo the relation. So I wonder if there is any method that is more helpful, or if Eisbach methods can be useful here.</p>



<a name="348220782"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348220782" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348220782">(Apr 10 2023 at 13:46)</a>:</h4>
<p>On my machine, which runs Isabelle2022, <code>sledgehammer</code> finds the proof <code>by (simp add: add_mono mult_le_mono)</code>. Here’s a complete working code snippet:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">nat</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"B ≤ C"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"B +  B * B + d * B ≤ C +  C * C + d * C"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">add_mono</span><span class="w"> </span><span class="n">mult_le_mono</span><span class="o">)</span>
</code></pre></div>



<a name="348221447"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348221447" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wolfgang Jeltsch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348221447">(Apr 10 2023 at 13:49)</a>:</h4>
<p>Maybe older Sledgehammer versions aren’t capable of finding this proof (I think they don’t find <code>simp</code> proofs), and <code>try0</code> doesn’t search for additional rewrite rules to pass from what I know. In such situations, it can help to think about what lemmas would be needed, search for them using <code>find_theorems</code>, and then pass them to the proof method.</p>



<a name="348223053"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/How%20to%20apply%20inequality%20rules%20in%20one%20step/near/348223053" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zixuan Fan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/How.20to.20apply.20inequality.20rules.20in.20one.20step.html#348223053">(Apr 10 2023 at 13:58)</a>:</h4>
<p>I see, my goal is a bit more complicated than my example, maybe that is why the sledgehammer does not work. But I guess I can figure out a way by looking for useful lemmas in this way. Thanks a lot!</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>