<html>
<head><meta charset="utf-8"><title>Not to expand abbreviation in proof state · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html">Not to expand abbreviation in proof state</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="498143500"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498143500" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498143500">(Feb 06 2025 at 15:09)</a>:</h4>
<p>Hi! I'm using the keyword <code>abbreviation</code> for some frequently used complex constants in my code, in the hope to improve readability of the code. But the abbreviations are automatically expanded in proof state, making it hard to read. Is there a way to disable the expansion of abbreviations in the proof state? Or, what is the best practice in such case?</p>



<a name="498151547"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498151547" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498151547">(Feb 06 2025 at 15:43)</a>:</h4>
<p>I have tried with <code>definition</code> instead of <code>abbreviation</code>,  and add the definition to the simpset of proof or unfold the definition wherever needed, but I don't think this is the best solution because I would need to do that very frequently, however as I understand, <code>definition</code>'s are not supposed to be unfolded anywhere.</p>



<a name="498157629"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498157629" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498157629">(Feb 06 2025 at 16:08)</a>:</h4>
<p>abbreviations are not unfolded. They are folded in during printing. Hence, if they disappear in the output, it means that they could not be folded in</p>



<a name="498162004"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498162004" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498162004">(Feb 06 2025 at 16:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state/near/498157629">said</a>:</p>
<blockquote>
<p>abbreviations are not unfolded. They are folded in during printing. Hence, if they disappear in the output, it means that they could not be folded in</p>
</blockquote>
<p>Thank you! I wonder why they could not be folded in. I compared the strings printed in the proof state and the abbreviated constant expression itself, they are exactly the same. I have no knowledge how the printing works. Is there anything I can do to make them possible to be folded in during printing?</p>



<a name="498162529"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498162529" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498162529">(Feb 06 2025 at 16:30)</a>:</h4>
<p>copy paste the part that you want to be folded <code>A</code>, put it into a lemma of <code>A = abbreviation</code> and see if they are really equal. You should find a minor difference (like a typing or something like that)</p>



<a name="498210843"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498210843" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498210843">(Feb 06 2025 at 21:09)</a>:</h4>
<p>I tried such lemmas, they can be proven by e.g. blast. And I think I can rule out typos since they always appear as a whole and I always use the abbreviations only.</p>



<a name="498267189"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498267189" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498267189">(Feb 07 2025 at 06:09)</a>:</h4>
<p>no no no</p>



<a name="498267200"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498267200" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498267200">(Feb 07 2025 at 06:09)</a>:</h4>
<p>the important thing is not that it is proven by blast</p>



<a name="498267219"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498267219" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498267219">(Feb 07 2025 at 06:09)</a>:</h4>
<p>the important thing is that the abbreviation get folded in immediatly</p>



<a name="498267230"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498267230" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498267230">(Feb 07 2025 at 06:09)</a>:</h4>
<p>and that <code>apply (rule refl)</code> is able to prove it</p>



<a name="498267297"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498267297" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498267297">(Feb 07 2025 at 06:10)</a>:</h4>
<p>You need stuff on the left and the right to be identical</p>



<a name="498267306"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498267306" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498267306">(Feb 07 2025 at 06:10)</a>:</h4>
<p>if they are not identical, folding will not work</p>



<a name="498267817"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498267817" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498267817">(Feb 07 2025 at 06:16)</a>:</h4>
<p>that includes associativity of operators</p>



<a name="498289078"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498289078" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498289078">(Feb 07 2025 at 08:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state/near/498267230">said</a>:</p>
<blockquote>
<p>and that <code>apply (rule refl)</code> is able to prove it</p>
</blockquote>
<p>Yes, I confirmed that one single<code>apply (rule refl)</code> can directly prove it</p>



<a name="498364602"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498364602" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498364602">(Feb 07 2025 at 15:22)</a>:</h4>
<p>then it is really strangle that it is not folding</p>



<a name="498364670"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498364670" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498364670">(Feb 07 2025 at 15:23)</a>:</h4>
<p>can you show the abbreviation and the term you have?</p>



<a name="498369154"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498369154" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498369154">(Feb 07 2025 at 15:42)</a>:</h4>
<p>Sure, and I just realized that the issue won't occur if I define the abbreviation outside of the locale -- is there anything I should know about locale and abbreviation?<br>
<a href="/user_uploads/14278/_ADrdU2cHn5qiPYSyDVdu_qE/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/_ADrdU2cHn5qiPYSyDVdu_qE/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="1015x708" src="/user_uploads/thumbnail/14278/_ADrdU2cHn5qiPYSyDVdu_qE/image.png/840x560.webp"></a></div>



<a name="498375737"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498375737" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498375737">(Feb 07 2025 at 16:14)</a>:</h4>
<p><a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Contracting.20Abbreviations.20of.20Locale.20Definitions.html">http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Contracting.20Abbreviations.20of.20Locale.20Definitions.html</a></p>



<a name="498376463"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498376463" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498376463">(Feb 07 2025 at 16:17)</a>:</h4>
<p>basically, there are issues that can arise with locales and abbreviation (there are more posts on the mailing list, but the archives are gone sadly)</p>



<a name="498392229"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Not%20to%20expand%20abbreviation%20in%20proof%20state/near/498392229" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiran Duan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state.html#498392229">(Feb 07 2025 at 17:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Not.20to.20expand.20abbreviation.20in.20proof.20state/near/498376463">said</a>:</p>
<blockquote>
<p>basically, there are issues that can arise with locales and abbreviation (there are more posts on the mailing list, but the archives are gone sadly)</p>
</blockquote>
<p>I see, thank you very much!</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>