<html>
<head><meta charset="utf-8"><title>Simplifying &quot;(if 1 = 0 then P else Q)&quot; to Q · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Simplifying.20.22.28if.201.20.3D.200.20then.20P.20else.20Q.29.22.20to.20Q.html">Simplifying &quot;(if 1 = 0 then P else Q)&quot; to Q</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="402024955"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Simplifying%20%22%28if%201%20%3D%200%20then%20P%20else%20Q%29%22%20to%20Q/near/402024955" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Simplifying.20.22.28if.201.20.3D.200.20then.20P.20else.20Q.29.22.20to.20Q.html#402024955">(Nov 14 2023 at 16:36)</a>:</h4>
<p>Hi,</p>
<p>I was trying to prove a lemma with a subgoal whose conclusion is of the form <code>(if 1 = 0 then P else Q)</code>,<br>
where P and Q are some (computable but) huge boolean predicates. I would like to convert that goal into just <code>Q</code>.<br>
I am not sure what's the neatest way to do that single change on the goal state.<br>
I tried to prove some lemma like </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">if_simp1</span><span class="o">:</span><span class="w"> </span><span class="kp">shows</span><span class="w"> </span><span class="s">"(if 1 = 0 then P else Q) = Q"</span>
<span class="w">  </span><span class="gr">oops</span>
</code></pre></div>
<p>and then use <code>apply (subst if_simp1)</code> to do that rewriting,<br>
but apparently that does not hold since P/Q might not terminate etc.<br>
How do I restrict the lemma to the terminating case?<br>
Alternatively, how can I do a single step rewriting <code>(if 1 = 0 then P else Q) ----&gt; Q</code>?</p>
<p>Here's a (contrived) MWE:<br>
<a href="/user_uploads/14278/RqMYi48qSISlyAgB9-AKlZVV/IfExample.thy">IfExample.thy</a></p>
<p>Best wishes,<br>
Chengsong</p>



<a name="402026782"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Simplifying%20%22%28if%201%20%3D%200%20then%20P%20else%20Q%29%22%20to%20Q/near/402026782" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Simplifying.20.22.28if.201.20.3D.200.20then.20P.20else.20Q.29.22.20to.20Q.html#402026782">(Nov 14 2023 at 16:46)</a>:</h4>
<p>How about <code>apply (subst if_not_P)</code>?</p>



<a name="402030485"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Simplifying%20%22%28if%201%20%3D%200%20then%20P%20else%20Q%29%22%20to%20Q/near/402030485" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Simplifying.20.22.28if.201.20.3D.200.20then.20P.20else.20Q.29.22.20to.20Q.html#402030485">(Nov 14 2023 at 17:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233155">Lukas Stevens</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/Simplifying.20.22.28if.201.20.3D.200.20then.20P.20else.20Q.29.22.20to.20Q/near/402026782">said</a>:</p>
<blockquote>
<p>How about <code>apply (subst if_not_P)</code>?</p>
</blockquote>
<p>Thank you!</p>
<p>Inspired by your answer I also realised that <br>
<code>  find_theorems "if False then _ else _  " </code><br>
gives me the desired theorem.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>