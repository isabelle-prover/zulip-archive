<html>
<head><meta charset="utf-8"><title>Sledgehammer proof found quickly but not work · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html">Sledgehammer proof found quickly but not work</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="480291863"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480291863" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480291863">(Nov 03 2024 at 09:07)</a>:</h4>
<p>I am proving the following. I defined:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim</span><span class="w"> </span><span class="o">::</span>
<span class="w"> </span><span class="s">"(nat ⇒ 'a ⇒ 'b ⇒ bool) ⇒ nat ⇒</span>
<span class="s">  ('m,'p,'a) model ⇒ ('m,'p,'b) model ⇒</span>
<span class="s">  'a ⇒ 'b ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim Z n M M' w w' ≡</span>
<span class="s">  (∀i v v'. Z i v v' ⟶ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M') ∧</span>
<span class="s">  (∀i v v'. i + 1 ≤ n --&gt; Z (i + 1) v v' ⟶ Z i v v') ∧</span>
<span class="s">  (∀v v' p. Z 0 v v' ⟶ valt M p v = valt M' p v') ∧</span>
<span class="s">  (∀i v v' ul m.</span>
<span class="s">    i + 1 ≤ n ∧ Z (i + 1) v v' ∧ rel M m (v # ul) ⟶</span>
<span class="s">    (∃ul'.</span>
<span class="s">      rel M' m (v' # ul') ∧</span>
<span class="s">      (∀u u'. (u,u') ∈ set (zip ul ul') ⟶ Z i u u'))) ∧</span>
<span class="s">  (∀i v v' ul' m.</span>
<span class="s">    i + 1 ≤ n ∧ Z (i + 1) v v' ∧ rel M' m (v' # ul') ⟶</span>
<span class="s">    (∃ul.</span>
<span class="s">      rel M' m (v' # ul') ∧</span>
<span class="s">      (∀u u'. (u,u') ∈ set (zip ul ul') ⟶ Z i u u'))) ∧</span>
<span class="s">  Z n w w'</span>
<span class="s">  "</span>
</code></pre></div>
<p>and want to prove:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_on_worlds</span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"nbisim Z n M M' w w'"</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="s">"Z m v v'"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"v ∈ world M"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">nbisim_def</span><span class="w"> </span><span class="kt">sledgehammer</span>
</code></pre></div>
<p>sledgehammer found the proof very quicky, it says:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Sledgehammering...</span>
<span class="n">verit</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">proof</span><span class="ow">...</span>
<span class="n">cvc4</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">proof</span><span class="ow">...</span>
<span class="n">cvc4</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">proof</span><span class="ow">...</span>
<span class="n">vampire</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">proof</span><span class="ow">...</span>
<span class="n">spass</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">proof</span><span class="ow">...</span>
<span class="n">cvc4</span><span class="o">:</span><span class="w"> </span><span class="n">Try</span><span class="w"> </span><span class="n">this</span><span class="o">:</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">smt</span><span class="w"> </span><span class="o">(</span><span class="n">verit</span><span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="n">&gt;</span><span class="w"> </span><span class="n">1.0</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">timed</span><span class="w"> </span><span class="n">out</span><span class="o">)</span>
<span class="n">verit</span><span class="o">:</span><span class="w"> </span><span class="n">Duplicate</span><span class="w"> </span><span class="k">proof</span>
<span class="n">cvc4</span><span class="o">:</span><span class="w"> </span><span class="n">Duplicate</span><span class="w"> </span><span class="k">proof</span>
<span class="n">vampire</span><span class="o">:</span><span class="w"> </span><span class="n">Try</span><span class="w"> </span><span class="n">this</span><span class="o">:</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">metis</span><span class="w"> </span><span class="o">(</span><span class="n">&gt;</span><span class="w"> </span><span class="n">1.0</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">timed</span><span class="w"> </span><span class="n">out</span><span class="o">)</span>
<span class="n">spass</span><span class="o">:</span><span class="w"> </span><span class="n">Duplicate</span><span class="w"> </span><span class="k">proof</span>
<span class="n">Done</span>
</code></pre></div>
<p>This is a particularly easy proof-even without looking at what are the relevant definitions are, it should be killed by metis, I expected. But both of the proofs gives by sledgehammer does not work. May I please ask what should I try?</p>



<a name="480292432"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480292432" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480292432">(Nov 03 2024 at 09:16)</a>:</h4>
<p>As the first obvious thing to try, I tried to restrict the searching space to a part of the definition nbisim_def. I went:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">equivD1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"A ≡ B ⟹ A ⟹ B"</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kt">thm</span><span class="w"> </span><span class="n">nbisim_def</span><span class="o">[</span><span class="n">THEN</span><span class="w"> </span><span class="n">equivD1</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct1</span><span class="o">]</span>
</code></pre></div>
<p>This gives me </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="o">(?</span><span class="n">Z2</span><span class="o">::</span><span class="n">nat</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">n2</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">M2</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span>
<span class="w"> </span><span class="o">(?</span><span class="n">M'2</span><span class="o">::?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span><span class="w"> </span><span class="o">(?</span><span class="n">w2</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">w'2</span><span class="o">::?</span><span class="n n-Type">'b2</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span>
<span class="n">∀</span><span class="o">(</span><span class="n">i</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="o">)</span><span class="w"> </span><span class="n">v'</span><span class="o">::?</span><span class="n n-Type">'b2.</span><span class="w"> </span><span class="o">?</span><span class="n">Z2</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="o">?</span><span class="n">n2</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M2</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M'2</span>
</code></pre></div>



<a name="480292556"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480292556" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480292556">(Nov 03 2024 at 09:18)</a>:</h4>
<p>I think I can just apply function to extract relevant part of this definition to obtain the theorem I want. But it does not accept another step of "THEN conjunct2". I think it is because "THEN conjunct2" does not go underneath the non-meta quantification and implication.</p>



<a name="480292994"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480292994" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480292994">(Nov 03 2024 at 09:26)</a>:</h4>
<p>From:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="o">(?</span><span class="n">Z2</span><span class="o">::</span><span class="n">nat</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">n2</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">M2</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span>
<span class="w"> </span><span class="o">(?</span><span class="n">M'2</span><span class="o">::?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span><span class="w"> </span><span class="o">(?</span><span class="n">w2</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">w'2</span><span class="o">::?</span><span class="n n-Type">'b2</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span>
<span class="n">∀</span><span class="o">(</span><span class="n">i</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="o">)</span><span class="w"> </span><span class="n">v'</span><span class="o">::?</span><span class="n n-Type">'b2.</span><span class="w"> </span><span class="o">?</span><span class="n">Z2</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="o">?</span><span class="n">n2</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M2</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M'2</span>
</code></pre></div>
<p>I tried </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">PULL_metaall</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"(A ⟹ (∀x. B)) ⟹ (⋀ x. A ⟹ B)"</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>
</code></pre></div>
<p>But for the next step, the theorem cannot be unified with PULL_metaall:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kt">thm</span><span class="w"> </span><span class="n">nbisim_def</span><span class="o">[</span><span class="n">THEN</span><span class="w"> </span><span class="n">equivD1</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct1</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">PULL_metaall</span><span class="o">]</span>
</code></pre></div>
<p>does not work.</p>
<p>The error message is:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">exception</span><span class="w"> </span><span class="n">THM</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">raised</span><span class="w"> </span><span class="o">(</span><span class="n">line</span><span class="w"> </span><span class="n">2601</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="s">"thm.ML"</span><span class="o">):</span>
<span class="w">  </span><span class="n">RSN</span><span class="o">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">unifiers</span>
<span class="w">  </span><span class="n">nbisim</span><span class="w"> </span><span class="o">(?</span><span class="n">Z2</span><span class="o">::</span><span class="n">nat</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">n2</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">M2</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span>
<span class="w">   </span><span class="o">(?</span><span class="n">M'2</span><span class="o">::?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b2</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span><span class="w"> </span><span class="o">(?</span><span class="n">w2</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">w'2</span><span class="o">::?</span><span class="n n-Type">'b2</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">  </span><span class="n">∀</span><span class="o">(</span><span class="n">i</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="o">::?</span><span class="n n-Type">'a2</span><span class="o">)</span><span class="w"> </span><span class="n">v'</span><span class="o">::?</span><span class="n n-Type">'b2.</span><span class="w"> </span><span class="o">?</span><span class="n">Z2</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="o">?</span><span class="n">n2</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M2</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M'2</span>
<span class="w">  </span><span class="o">(?</span><span class="n">A</span><span class="o">::</span><span class="n">bool</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="n">∀x</span><span class="o">::?</span><span class="n n-Type">'a.</span><span class="w"> </span><span class="o">(?</span><span class="n">B</span><span class="o">::</span><span class="n">bool</span><span class="o">))</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="o">?</span><span class="n">A</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="o">?</span><span class="n">B</span>
</code></pre></div>
<p>Maybe a screenshot with color makes more sense.<br>
<a href="/user_uploads/14278/qFXhd-xTI16xrVduE5t0MgRx/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/qFXhd-xTI16xrVduE5t0MgRx/image.png" title="image.png"><img data-original-dimensions="1537x347" src="/user_uploads/thumbnail/14278/qFXhd-xTI16xrVduE5t0MgRx/image.png/840x560.webp"></a></div>



<a name="480293020"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480293020" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480293020">(Nov 03 2024 at 09:26)</a>:</h4>
<p>May I please ask why the unification fail? (I guess because of multiple quantifiers?) <br>
Can we do something to force the unifcation?</p>



<a name="480296392"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480296392" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480296392">(Nov 03 2024 at 10:25)</a>:</h4>
<p>I don't think your <code>PULL_metaall</code> is doing what you want</p>



<a name="480296476"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480296476" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480296476">(Nov 03 2024 at 10:26)</a>:</h4>
<p>look carefully at the types: <code>?B</code> is a constant while you want it to be a predicate in order to unify</p>



<a name="480296855"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480296855" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480296855">(Nov 03 2024 at 10:33)</a>:</h4>
<p>Thanks for the swift reply and sorry I am afraid that I do not get it. The "?B" is of type "bool", in which sense is it a constant, and in which sense is a predicate required?</p>
<p>It seems unexpected to me because I see "?B" is asking for a bool, and the thing below the first quantifier, i.e.</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kt">term</span><span class="w"> </span><span class="s">"∀(v::'a2) v'::'b2. Z2 i v v' ⟶ i ≤ n2 ∧ v ∈ world M2 ∧ v' ∈ world M'2"</span>
</code></pre></div>
<p>is indeed of type bool.</p>



<a name="480298720"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480298720" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480298720">(Nov 03 2024 at 11:03)</a>:</h4>
<p>it is of type bool, but the term has a free variable <code>i</code></p>



<a name="480298808"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480298808" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480298808">(Nov 03 2024 at 11:05)</a>:</h4>
<p><code>∀x. B</code> &lt;-- here <code>B</code> is of type <code>bool</code> which means it is a predicate independent of <code>x</code></p>



<a name="480298947"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480298947" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480298947">(Nov 03 2024 at 11:07)</a>:</h4>
<p>Thank you! I see. now it works and gives me:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="o">(?</span><span class="n">A</span><span class="o">::</span><span class="n">bool</span><span class="w"> </span><span class="n">⟹</span>
<span class="w"> </span><span class="n">nbisim</span><span class="w"> </span><span class="o">(?</span><span class="n">Z3</span><span class="o">::</span><span class="n">nat</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">n3</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">M3</span><span class="o">::?</span><span class="n n-Type">'a3</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a3</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'a3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span>
<span class="w">  </span><span class="o">(?</span><span class="n">M'3</span><span class="o">::?</span><span class="n n-Type">'b3</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'m3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b3</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">)</span><span class="w"> </span><span class="n">×</span><span class="w"> </span><span class="o">(?</span><span class="n n-Type">'p3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="o">?</span><span class="n n-Type">'b3</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="n">bool</span><span class="o">))</span><span class="w"> </span><span class="o">(?</span><span class="n">w3</span><span class="o">::?</span><span class="n n-Type">'a3</span><span class="o">)</span><span class="w"> </span><span class="o">(?</span><span class="n">w'3</span><span class="o">::?</span><span class="n n-Type">'b3</span><span class="o">))</span><span class="w"> </span><span class="n">⟹</span>
<span class="o">?</span><span class="n">A</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="n">∀</span><span class="o">(</span><span class="n">v</span><span class="o">::?</span><span class="n n-Type">'a3</span><span class="o">)</span><span class="w"> </span><span class="n">v'</span><span class="o">::?</span><span class="n n-Type">'b3.</span><span class="w"> </span><span class="o">?</span><span class="n">Z3</span><span class="w"> </span><span class="o">(?</span><span class="n">x</span><span class="o">::</span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="o">?</span><span class="n">x</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="o">?</span><span class="n">n3</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M3</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">?</span><span class="n">M'3</span>
</code></pre></div>



<a name="480298954"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480298954" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480298954">(Nov 03 2024 at 11:07)</a>:</h4>
<p>That is what I expected.</p>



<a name="480299133"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299133" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299133">(Nov 03 2024 at 11:10)</a>:</h4>
<p>It seems not such a common approach though. May I please ask if there is a quicker way to, from:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="n">≡</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="n">M'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'.</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">--</span><span class="n">&gt;</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">p.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">valt</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">valt</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">v'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">ul</span><span class="w"> </span><span class="n">m.</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span>
<span class="w">    </span><span class="o">(</span><span class="n">∃ul'.</span>
<span class="w">      </span><span class="n">rel</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v'</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">      </span><span class="o">(</span><span class="n">∀u</span><span class="w"> </span><span class="n">u'.</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="o">,</span><span class="n">u'</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">(</span><span class="n">zip</span><span class="w"> </span><span class="n">ul</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">u'</span><span class="o">)))</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">ul'</span><span class="w"> </span><span class="n">m.</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v'</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span>
<span class="w">    </span><span class="o">(</span><span class="n">∃ul.</span>
<span class="w">      </span><span class="n">rel</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v'</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">      </span><span class="o">(</span><span class="n">∀u</span><span class="w"> </span><span class="n">u'.</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="o">,</span><span class="n">u'</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">(</span><span class="n">zip</span><span class="w"> </span><span class="n">ul</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">u'</span><span class="o">)))</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span>
</code></pre></div>
<p>get </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">)</span>
</code></pre></div>
<p>(or other equivalent form, up to meta-equivalence)</p>
<p>I prefer the function-application approach in that case, can this be done in a quicker way?</p>



<a name="480299285"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299285" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299285">(Nov 03 2024 at 11:12)</a>:</h4>
<p>you could use mkide</p>



<a name="480299309"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299309" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299309">(Nov 03 2024 at 11:13)</a>:</h4>
<p><a href="https://www.isa-afp.org/entries/Intro_Dest_Elim.html">https://www.isa-afp.org/entries/Intro_Dest_Elim.html</a></p>



<a name="480299315"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299315" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299315">(Nov 03 2024 at 11:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480299285">said</a>:</p>
<blockquote>
<p>you could use mkide</p>
</blockquote>
<p>I have not heard about this. Thanks for directing! Is there any minimal working example?</p>



<a name="480299384"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299384" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299384">(Nov 03 2024 at 11:14)</a>:</h4>
<p><a href="https://www.isa-afp.org/sessions/intro_dest_elim/#IDE_Reference">https://www.isa-afp.org/sessions/intro_dest_elim/#IDE_Reference</a></p>



<a name="480299391"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299391" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299391">(Nov 03 2024 at 11:14)</a>:</h4>
<p>Let me check. I see there is a documentation, but seems very minimal.</p>



<a name="480299454"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299454" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299454">(Nov 03 2024 at 11:15)</a>:</h4>
<p>it does simple generation of intro dest and elim rules for definitions of the form A = B /\ C .. /\ N</p>



<a name="480299617"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480299617" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480299617">(Nov 03 2024 at 11:18)</a>:</h4>
<p>Thanks! It seems relevant. I will read it.</p>



<a name="480319336"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319336" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319336">(Nov 03 2024 at 16:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480299133">said</a>:</p>
<blockquote>
<p>It seems not such a common approach though. May I please ask if there is a quicker way to, from:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="n">≡</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="n">M'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'.</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">--</span><span class="n">&gt;</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">p.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">valt</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">valt</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">v'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">ul</span><span class="w"> </span><span class="n">m.</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span>
<span class="w">    </span><span class="o">(</span><span class="n">∃ul'.</span>
<span class="w">      </span><span class="n">rel</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v'</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">      </span><span class="o">(</span><span class="n">∀u</span><span class="w"> </span><span class="n">u'.</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="o">,</span><span class="n">u'</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">(</span><span class="n">zip</span><span class="w"> </span><span class="n">ul</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">u'</span><span class="o">)))</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">ul'</span><span class="w"> </span><span class="n">m.</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">1</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v'</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span>
<span class="w">    </span><span class="o">(</span><span class="n">∃ul.</span>
<span class="w">      </span><span class="n">rel</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">v'</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">      </span><span class="o">(</span><span class="n">∀u</span><span class="w"> </span><span class="n">u'.</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="o">,</span><span class="n">u'</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">(</span><span class="n">zip</span><span class="w"> </span><span class="n">ul</span><span class="w"> </span><span class="n">ul'</span><span class="o">)</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">u'</span><span class="o">)))</span><span class="w"> </span><span class="n">∧</span>
<span class="w">  </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span>
</code></pre></div>
<p>get </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">)</span>
</code></pre></div>
<p>(or other equivalent form, up to meta-equivalence)</p>
<p>I prefer the function-application approach in that case, can this be done in a quicker way?</p>
</blockquote>
<p>You can also destroy the equivalence by hand with</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim_def</span><span class="o">[</span><span class="n">THEN</span><span class="w"> </span><span class="n">iffD1</span><span class="o">]</span>
</code></pre></div>



<a name="480319421"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319421" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319421">(Nov 03 2024 at 16:24)</a>:</h4>
<p>Yes, but it takes multiple steps. I tried several layers and during proof I wrote sth like</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbs</span><span class="o">[</span><span class="n">unfolded</span><span class="w"> </span><span class="n">nbisim_def</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct2</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct2</span><span class="o">,</span>
<span class="w">              </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct1</span><span class="o">]</span>
</code></pre></div>



<a name="480319474"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319474" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319474">(Nov 03 2024 at 16:25)</a>:</h4>
<p>It would be nice if we have something like "conjunct3, conjunct4,etc".</p>



<a name="480319542"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319542" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319542">(Nov 03 2024 at 16:26)</a>:</h4>
<p>Oh I remember it is not the main thing I am complaining about!</p>



<a name="480319592"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319592" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319592">(Nov 03 2024 at 16:26)</a>:</h4>
<p>I am not satisfied with the fact that there is no obvious way to pass the quantifier and implication to get into "i &lt;= n" in the first conjunct.</p>



<a name="480319621"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319621" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319621">(Nov 03 2024 at 16:27)</a>:</h4>
<p>It is easy to get </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span>
<span class="w">  </span><span class="o">(</span><span class="n">∀i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="n">M'</span><span class="o">)</span>
</code></pre></div>



<a name="480319667"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319667" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319667">(Nov 03 2024 at 16:27)</a>:</h4>
<p>My problem is mainly how to easily get from the above to </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span>
<span class="w">  </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="o">--</span><span class="n">&gt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span>
</code></pre></div>



<a name="480319726"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319726" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319726">(Nov 03 2024 at 16:28)</a>:</h4>
<p>Or sth like</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span>
<span class="w">  </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span>
</code></pre></div>



<a name="480319764"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319764" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319764">(Nov 03 2024 at 16:28)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">nbisim</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span>
<span class="w"> </span><span class="o">!!</span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v.</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">v'</span><span class="w"> </span><span class="o">==</span><span class="n">&gt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">n</span>
</code></pre></div>
<p>(maybe this one is illegal...) (edit: yes it is illegal and the i's are not the same, silly me.)</p>



<a name="480319882"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319882" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319882">(Nov 03 2024 at 16:30)</a>:</h4>
<p>First, you could change your definition to use <code>!!</code></p>



<a name="480319951"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319951" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319951">(Nov 03 2024 at 16:31)</a>:</h4>
<p>It then seems to me that it would help to have a function that takes a theorem, and destroy it apart into as-meta-as-possible version, since it seems to me that conjunct1 can get underneath meta connectives.</p>



<a name="480319978"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319978" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319978">(Nov 03 2024 at 16:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480319882">said</a>:</p>
<blockquote>
<p>First, you could change your definition to use <code>!!</code></p>
</blockquote>
<p>Let me try a bit the syntax...</p>



<a name="480319992"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480319992" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480319992">(Nov 03 2024 at 16:31)</a>:</h4>
<p>Second, once only one conjunct remain, you can use</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">Q</span><span class="o">:</span><span class="w"> </span><span class="s">‹nbisim Z n M M' w w' ==&gt;</span>
<span class="s">  (∀i v v'. Z i v v' ⟶ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M')</span>
<span class="s">›</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="kt">thm</span><span class="w"> </span><span class="n">Q</span><span class="o">[</span><span class="n">rule_format</span><span class="o">]</span>
</code></pre></div>



<a name="480320180"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320180" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320180">(Nov 03 2024 at 16:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480319978">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480319882">said</a>:</p>
<blockquote>
<p>First, you could change your definition to use <code>!!</code></p>
</blockquote>
<p>Let me try a bit the syntax...</p>
</blockquote>
<p>A bit tricky. May I please ask, say I have 2 conjuncts:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim</span><span class="w"> </span><span class="o">::</span>
<span class="w"> </span><span class="s">"(nat ⇒ 'a ⇒ 'b ⇒ bool) ⇒ nat ⇒</span>
<span class="s">  ('m,'p,'a) model ⇒ ('m,'p,'b) model ⇒</span>
<span class="s">  'a ⇒ 'b ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim Z n M M' w w' ≡</span>
<span class="s">  (∀i v v'. Z i v v' ⟶ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M') ∧</span>
<span class="s">  (∀i v v'. i + 1 ≤ n --&gt; Z (i + 1) v v' ⟶ Z i v v')"</span>
</code></pre></div>
<p>How would I define it use "!!"?</p>



<a name="480320237"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320237" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320237">(Nov 03 2024 at 16:34)</a>:</h4>
<p>(but maybe read: <a href="https://proofcraft.org/blog/isabelle-style-part2.html">https://proofcraft.org/blog/isabelle-style-part2.html</a>)</p>



<a name="480320276"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320276" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320276">(Nov 03 2024 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480319992">said</a>:</p>
<blockquote>
<p>Second, once only one conjunct remain, you can use</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">Q</span><span class="o">:</span><span class="w"> </span><span class="s">‹nbisim Z n M M' w w' ==&gt;</span>
<span class="s">  (∀i v v'. Z i v v' ⟶ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M')</span>
<span class="s">›</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="kt">thm</span><span class="w"> </span><span class="n">Q</span><span class="o">[</span><span class="n">rule_format</span><span class="o">]</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I see, it seems like rule_format is exactly the function I am asking for. i.e. make a theorem as meta-as-possible.</p>



<a name="480320423"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320423" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320423">(Nov 03 2024 at 16:36)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Avoid</span><span class="w"> </span><span class="kn">theorem</span><span class="o">-</span><span class="n">transforming</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="sx">`[simplified]`</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="sx">`[rule_format]`</span><span class="w"> </span><span class="kp">in</span><span class="w"> </span><span class="kn">lemma</span><span class="w"> </span><span class="n">statements.</span>
</code></pre></div>



<a name="480320430"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320430" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320430">(Nov 03 2024 at 16:36)</a>:</h4>
<p>Sad...</p>



<a name="480320455"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320455" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320455">(Nov 03 2024 at 16:36)</a>:</h4>
<p>But is there any concrete reason that rule_format is bad?</p>



<a name="480320526"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320526" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320526">(Nov 03 2024 at 16:37)</a>:</h4>
<p>It seems to be predictable to me. Unlike the simplifier that changes over time, I expect it to stay the same because it is very clear that what it is supposed to do.</p>



<a name="480320558"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320558" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320558">(Nov 03 2024 at 16:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480320455">said</a>:</p>
<blockquote>
<p>But is there any concrete reason that rule_format is bad?</p>
</blockquote>
<p>from a maintainers point of view: the output can change in different Isabelle version, hence you have to look at the old version to find what changed, which is annoying</p>



<a name="480320629"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320629" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320629">(Nov 03 2024 at 16:38)</a>:</h4>
<p>but the main reason is that it goes a bit against the idea of nice Isar proofs</p>



<a name="480320717"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320717" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320717">(Nov 03 2024 at 16:39)</a>:</h4>
<p>It is helpful to have. Thank you and then I will try to only use it for proof exploration then!</p>



<a name="480320774"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320774" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320774">(Nov 03 2024 at 16:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480320180">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480319978">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480319882">said</a>:</p>
<blockquote>
<p>First, you could change your definition to use <code>!!</code></p>
</blockquote>
<p>Let me try a bit the syntax...</p>
</blockquote>
<p>A bit tricky. May I please ask, say I have 2 conjuncts:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim</span><span class="w"> </span><span class="o">::</span>
<span class="w"> </span><span class="s">"(nat ⇒ 'a ⇒ 'b ⇒ bool) ⇒ nat ⇒</span>
<span class="s">  ('m,'p,'a) model ⇒ ('m,'p,'b) model ⇒</span>
<span class="s">  'a ⇒ 'b ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim Z n M M' w w' ≡</span>
<span class="s">  (∀i v v'. Z i v v' ⟶ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M') ∧</span>
<span class="s">  (∀i v v'. i + 1 ≤ n --&gt; Z (i + 1) v v' ⟶ Z i v v')"</span>
</code></pre></div>
<p>How would I define it use "!!"?</p>
</blockquote>
<p>ah that is really ugly because there is no conjunction in Pure. Use induction is probably better at that point</p>



<a name="480320818"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320818" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320818">(Nov 03 2024 at 16:40)</a>:</h4>
<p>I mean this is really ugly:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim</span><span class="w">  </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim Z n M M' w w' ≡</span>
<span class="s">  (⋀thesis. (⋀i v v'. Z i v v' ⟶ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M') ⟹</span>
<span class="s">  (⋀i v v'. i + 1 ≤ n --&gt; Z (i + 1) v v' ⟶ Z i v v') ⟹ thesis)"</span>
</code></pre></div>



<a name="480320819"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320819" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320819">(Nov 03 2024 at 16:40)</a>:</h4>
<p>This is unfortunately not an inductive definition.</p>



<a name="480320842"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320842" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320842">(Nov 03 2024 at 16:40)</a>:</h4>
<p>every definition is also an inductive definition</p>



<a name="480320876"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480320876" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480320876">(Nov 03 2024 at 16:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480320818">said</a>:</p>
<blockquote>
<p>I mean this is really ugly:</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim</span><span class="w">  </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim Z n M M' w w' ≡</span>
<span class="s">  (⋀thesis. (⋀i v v'. Z i v v' ⟶ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M') ⟹</span>
<span class="s">  (⋀i v v'. i + 1 ≤ n --&gt; Z (i + 1) v v' ⟶ Z i v v') ⟹ thesis)"</span>
</code></pre></div><br>
</p>
</blockquote>
<p>In this sense I will agree (since it is a shape of an inductive principle). I am not aware that such a thing is generated.</p>



<a name="480321006"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480321006" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480321006">(Nov 03 2024 at 16:42)</a>:</h4>
<p>How would you suggest reshaping it or is it even possible? I was proving little lemmas like:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_bound</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">nbs</span><span class="o">:</span><span class="w"> </span><span class="s">"nbisim Z n M M' w w'"</span>
<span class="w">     </span><span class="kp">and</span><span class="w"> </span><span class="n">Z</span><span class="o">:</span><span class="s">"Z i v v'"</span><span class="w"> </span><span class="kp">shows</span><span class="w"> </span><span class="s">"i ≤ n"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">nbs</span><span class="o">[</span><span class="n">unfolded</span><span class="w"> </span><span class="n">nbisim_def</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct1</span><span class="o">]</span><span class="w"> </span><span class="n">Z</span><span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>

<span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_Z_world1</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">nbs</span><span class="o">:</span><span class="w"> </span><span class="s">"nbisim Z n M M' w w'"</span>
<span class="w">     </span><span class="kp">and</span><span class="w"> </span><span class="n">Z</span><span class="o">:</span><span class="s">"Z i v v'"</span><span class="w"> </span><span class="kp">shows</span><span class="w"> </span><span class="s">"v ∈ world M"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">nbs</span><span class="o">[</span><span class="n">unfolded</span><span class="w"> </span><span class="n">nbisim_def</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct1</span><span class="o">]</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>


<span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_Z_world2</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">nbs</span><span class="o">:</span><span class="w"> </span><span class="s">"nbisim Z n M M' w w'"</span>
<span class="w">     </span><span class="kp">and</span><span class="w"> </span><span class="n">Z</span><span class="o">:</span><span class="s">"Z i v v'"</span><span class="w"> </span><span class="kp">shows</span><span class="w"> </span><span class="s">"v' ∈ world M'"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">nbs</span><span class="o">[</span><span class="n">unfolded</span><span class="w"> </span><span class="n">nbisim_def</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct1</span><span class="o">]</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_valt</span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">nbs</span><span class="o">:</span><span class="w"> </span><span class="s">"nbisim Z n M M' w w'"</span>
<span class="w">     </span><span class="kp">and</span><span class="w"> </span><span class="n">Z</span><span class="o">:</span><span class="s">"Z i v v'"</span><span class="w"> </span><span class="kp">shows</span><span class="w"> </span><span class="s">"valt M p v = valt M' p v'"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">from</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"Z 0 v v'"</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">nbisim_chain</span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">nbs</span><span class="o">]</span><span class="w"> </span><span class="n">nbisim_bound</span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">nbs</span><span class="w"> </span><span class="n">Z</span><span class="o">]</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="o">?</span><span class="n">thesis</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">nbs</span><span class="o">[</span><span class="n">unfolded</span><span class="w"> </span><span class="n">nbisim_def</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct2</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct2</span><span class="o">,</span>
<span class="w">              </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct1</span><span class="o">]</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>
<span class="k">qed</span>
</code></pre></div>
<p>to take out the conjuncts and reshape them into rules...</p>



<a name="480321381"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480321381" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480321381">(Nov 03 2024 at 16:47)</a>:</h4>
<p>Umm? In which sense do we not have conjunction in Pure? We have the <code>&amp;&amp;&amp;</code>.</p>



<a name="480321484"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480321484" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480321484">(Nov 03 2024 at 16:48)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">inductive</span><span class="w"> </span><span class="n">nbisim</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="kp">where</span>
<span class="n">1</span><span class="o">:</span><span class="w"> </span><span class="s">‹nbisim Z n M M' w w'›</span>
<span class="kp">if</span><span class="w"> </span><span class="s">‹⋀i v v'. Z i v v' ⟹ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M'›</span><span class="w"> </span><span class="kp">and</span>
<span class="w">   </span><span class="s">‹⋀i v v'. i + 1 ≤ n ⟹ Z (i + 1) v v' ⟹ Z i v v'›</span>

<span class="kn">inductive_cases</span><span class="w"> </span><span class="n">nbisimE</span><span class="o">:</span><span class="w"> </span><span class="s">‹nbisim Z n M M' w w'›</span>

<span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_bound</span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w">  </span><span class="s">‹nbisim Z n M M' w w'›</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">‹⋀i v v'. Z i v v' ⟹ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M'›</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">nbisim.cases</span><span class="o">)</span><span class="w"> </span><span class="n">blast</span>

<span class="kt">thm</span><span class="w"> </span><span class="n">nbisim_bound</span><span class="o">[</span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunct2</span><span class="o">]</span>
</code></pre></div>



<a name="480321764"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480321764" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480321764">(Nov 03 2024 at 16:52)</a>:</h4>
<p>Wow black technology!!!</p>



<a name="480321850"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480321850" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480321850">(Nov 03 2024 at 16:53)</a>:</h4>
<p>So it would have the same effect as the iff, where the "inductive clauses" gives "_ /\ _ ....==&gt; nbisim" and the induction principle gives "nbisim ==&gt; ... /\ ...".</p>



<a name="480321856"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480321856" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480321856">(Nov 03 2024 at 16:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480321381">said</a>:</p>
<blockquote>
<p>Umm? In which sense do we not have conjunction in Pure? We have the <code>&amp;&amp;&amp;</code>.</p>
</blockquote>
<p>ah try I forgot that:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim'</span><span class="w">  </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim' Z n M M' w w' ≡</span>
<span class="s">  ((⋀i v v'. Z i v v' ⟹ i ≤ n ∧ v ∈ world M ∧ v' ∈ world M') &amp;&amp;&amp;</span>
<span class="s">  (⋀i v v'. i + 1 ≤ n ⟹ Z (i + 1) v v' ⟹ Z i v v'))"</span>

<span class="kt">thm</span><span class="w"> </span><span class="n">equal_elim_rule1</span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">nbisim'_def</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunctionD1</span><span class="o">]</span>
<span class="kt">thm</span><span class="w"> </span><span class="n">equal_elim_rule1</span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">nbisim'_def</span><span class="o">,</span><span class="w"> </span><span class="n">THEN</span><span class="w"> </span><span class="n">conjunctionD2</span><span class="o">]</span>
<span class="kt">thm</span><span class="w"> </span><span class="n">iffD1</span><span class="w"> </span><span class="n">conjunct2</span>
</code></pre></div>
<p>EDIT: with ⟹</p>



<a name="480321972"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480321972" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480321972">(Nov 03 2024 at 16:55)</a>:</h4>
<p>Ahh it works...</p>



<a name="480322106"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480322106" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480322106">(Nov 03 2024 at 16:57)</a>:</h4>
<p>Tried that meta-logic is happy even with</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim'</span><span class="w">  </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim' Z n M M' w w' ≡</span>
<span class="s">  ((⋀i v v'. Z i v v' ⟹ i ≤ n &amp;&amp;&amp; v ∈ world M &amp;&amp;&amp; v' ∈ world M') &amp;&amp;&amp;</span>
<span class="s">  (⋀i v v'. i + 1 ≤ n ⟹ Z (i + 1) v v' ⟹ Z i v v'))"</span>
</code></pre></div>



<a name="480322137"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480322137" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480322137">(Nov 03 2024 at 16:57)</a>:</h4>
<p>But maybe a better idea is just to split them up into different conjuncts...</p>



<a name="480404238"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480404238" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480404238">(Nov 04 2024 at 09:46)</a>:</h4>
<p>I have trouble stating theorems with the new definition:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_below</span><span class="o">:</span>
<span class="w"> </span><span class="kp">assumes</span><span class="w"> </span><span class="n">M</span><span class="o">:</span><span class="w"> </span><span class="s">"is_model sig M"</span>
<span class="w">      </span><span class="kp">and</span><span class="w"> </span><span class="n">M'</span><span class="o">:</span><span class="w"> </span><span class="s">"is_model sig M'"</span>
<span class="w">      </span><span class="kp">and</span><span class="w"> </span><span class="n">nbs</span><span class="o">:</span><span class="w"> </span><span class="s">"nbisim' Z n M M' w w'"</span>
<span class="w">      </span><span class="kp">and</span><span class="w"> </span><span class="n">k</span><span class="o">:</span><span class="w"> </span><span class="s">"k ≤ n"</span>
<span class="w">    </span><span class="kp">shows</span><span class="w"> </span><span class="s">"nbisim' Z1 k M M' w w'"</span>
</code></pre></div>
<p>reports error.</p>
<p>with error message:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Type</span><span class="w"> </span><span class="n">unification</span><span class="w"> </span><span class="n">failed</span><span class="o">:</span><span class="w"> </span><span class="n">Clash</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="s">"prop"</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="s">"bool"</span>

<span class="n">Type</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="kp">in</span><span class="w"> </span><span class="n">application</span><span class="o">:</span><span class="w"> </span><span class="n">incompatible</span><span class="w"> </span><span class="n">operand</span><span class="w"> </span><span class="n">type</span>

<span class="n">Operator</span><span class="o">:</span><span class="w">  </span><span class="n">Trueprop</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="n">⇒</span><span class="w"> </span><span class="kt">prop</span>
<span class="n">Operand</span><span class="o">:</span><span class="w">   </span><span class="n">nbisim'</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">M'</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">w'</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="kt">prop</span>
</code></pre></div>



<a name="480404256"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480404256" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480404256">(Nov 04 2024 at 09:46)</a>:</h4>
<p>What might be wrong here?</p>



<a name="480404304"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480404304" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480404304">(Nov 04 2024 at 09:47)</a>:</h4>
<p>I defined:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">nbisim'</span><span class="w">  </span><span class="kp">where</span>
<span class="w"> </span><span class="s">"nbisim' Z n M M' w w' ≡</span>
<span class="s">  ((⋀i v v'. Z i v v' ⟹ i ≤ n &amp;&amp;&amp; v ∈ world M &amp;&amp;&amp; v' ∈ world M') &amp;&amp;&amp;</span>
<span class="s">  (⋀i v v'. i + 1 ≤ n ⟹ Z (i + 1) v v' ⟹ Z i v v') &amp;&amp;&amp;</span>
<span class="s">  (⋀v v' p. Z 0 v v' ⟹ valt M p v = valt M' p v') &amp;&amp;&amp;</span>
<span class="s">   (⋀i v v' ul m.</span>
<span class="s">    i + 1 ≤ n ⟹ Z (i + 1) v v' ⟹ rel M m (v # ul) ⟹</span>
<span class="s">    (∃ul'.</span>
<span class="s">      rel M' m (v' # ul') ∧</span>
<span class="s">      (∀u u'. (u,u') ∈ set (zip ul ul') ⟶ Z i u u'))) &amp;&amp;&amp;</span>
<span class="s">  (⋀i v v' ul' m.</span>
<span class="s">    i + 1 ≤ n ⟹ Z (i + 1) v v' ⟹ rel M' m (v' # ul') ⟹</span>
<span class="s">    (∃ul.</span>
<span class="s">      rel M' m (v' # ul') ∧</span>
<span class="s">      (∀u u'. (u,u') ∈ set (zip ul ul') ⟶ Z i u u'))) &amp;&amp;&amp;</span>
<span class="s">  Z n w w')"</span>
</code></pre></div>



<a name="480405123"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480405123" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480405123">(Nov 04 2024 at 09:50)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">‹_›</span><span class="w"> </span><span class="kp">where</span>
<span class="s">‹X ≡ Trueprop True›</span>

<span class="kn">lemma</span><span class="w"> </span><span class="kp">shows</span><span class="w"> </span><span class="s">"PROP X"</span>
</code></pre></div>



<a name="480405284"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480405284" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480405284">(Nov 04 2024 at 09:51)</a>:</h4>
<p>There is an implicit conversion from bool (the HOL thing) to prop (the Pure thing) , which is bad in this case</p>



<a name="480405386"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480405386" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480405386">(Nov 04 2024 at 09:51)</a>:</h4>
<p>There is no easy way around that</p>



<a name="480406026"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406026" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406026">(Nov 04 2024 at 09:54)</a>:</h4>
<p>I checked "PROP" is not a term, so PROP is not a HOL-level function.</p>



<a name="480406121"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406121" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406121">(Nov 04 2024 at 09:55)</a>:</h4>
<p>Trueprop is the implicit conversion</p>



<a name="480406181"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406181" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406181">(Nov 04 2024 at 09:56)</a>:</h4>
<p>I think I am confused by these subtle things. Where is the position that "Trueprop" is implicitly inserted in </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">nbisim_below</span><span class="o">:</span>
<span class="w"> </span><span class="kp">assumes</span><span class="w"> </span><span class="n">M</span><span class="o">:</span><span class="w"> </span><span class="s">"is_model sig M"</span>
<span class="w">      </span><span class="kp">and</span><span class="w"> </span><span class="n">M'</span><span class="o">:</span><span class="w"> </span><span class="s">"is_model sig M'"</span>
<span class="w">      </span><span class="kp">and</span><span class="w"> </span><span class="n">nbs</span><span class="o">:</span><span class="w"> </span><span class="s">"nbisim' Z n M M' w w'"</span>
<span class="w">      </span><span class="kp">and</span><span class="w"> </span><span class="n">k</span><span class="o">:</span><span class="w"> </span><span class="s">"k ≤ n"</span>
<span class="w">    </span><span class="kp">shows</span><span class="w"> </span><span class="s">"nbisim' Z1 k M M' w w'"</span>
</code></pre></div>
<p>?</p>



<a name="480406341"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406341" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406341">(Nov 04 2024 at 09:56)</a>:</h4>
<p>It is parsed as</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w"> </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Trueprop (nbisim' Z1 k M M' w w')"</span>
</code></pre></div>
<p>(like <code>shows "Trueprop True"</code>)</p>



<a name="480406512"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406512" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406512">(Nov 04 2024 at 09:57)</a>:</h4>
<p>It is (nearly) always the right thing</p>



<a name="480406659"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406659" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406659">(Nov 04 2024 at 09:58)</a>:</h4>
<p>I see, so for the meta-definition, it defines <code>nbisim' Z1 k M M' w w'</code> to be a prop instead of bool. And if there is any way to get rid of that, that would be to force it not to parse it as "<code>Trueprop (nbisim' Z1 k M M' w w')</code>", i.e. to insert the Trueprop, but to keep the original <code>nbisim' Z1 k M M' w w'</code>. Is that correct?</p>



<a name="480406708"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406708" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406708">(Nov 04 2024 at 09:58)</a>:</h4>
<p>And it would be tricky because parsing is at implementation level...</p>



<a name="480406957"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480406957" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480406957">(Nov 04 2024 at 10:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work/near/480406659">said</a>:</p>
<blockquote>
<p>I see, so for the meta-definition, it defines <code>nbisim' Z1 k M M' w w'</code> to be a prop instead of bool. And if there is any way to get rid of that, that would be to force it not to parse it as "<code>Trueprop (nbisim' Z1 k M M' w w')</code>", i.e. to insert the Trueprop, but to keep the original <code>nbisim' Z1 k M M' w w'</code>. Is that correct?</p>
</blockquote>
<p>that is what the PROP does yes</p>



<a name="480407195"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480407195" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480407195">(Nov 04 2024 at 10:01)</a>:</h4>
<p>lemma nbisim_below: <br>
 assumes M: "is_model sig M"<br>
      and M': "is_model sig M'"<br>
      and nbs: "nbisim' Z n M M' w w'"<br>
      and k: "k ≤ n"<br>
    shows "PROP (nbisim' Z1 k M M' w w')" </p>
<p>still not accepted, with the same error message. A bit unfortunate.</p>



<a name="480407319"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480407319" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480407319">(Nov 04 2024 at 10:02)</a>:</h4>
<p>I can live with the original definition. Thank you! That is good to know!</p>



<a name="480407408"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480407408" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480407408">(Nov 04 2024 at 10:02)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kp">and</span><span class="w"> </span><span class="n">nbs</span><span class="o">:</span><span class="w"> </span><span class="s">"nbisim' Z n M M' w w'"</span>
</code></pre></div>
<p>needs to be fixed too</p>



<a name="480407672"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480407672" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480407672">(Nov 04 2024 at 10:04)</a>:</h4>
<p>Vielen Danke that works!</p>



<a name="480407728"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sledgehammer%20proof%20found%20quickly%20but%20not%20work/near/480407728" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sledgehammer.20proof.20found.20quickly.20but.20not.20work.html#480407728">(Nov 04 2024 at 10:04)</a>:</h4>
<p>lemma nbisim_below: <br>
 assumes M: "(is_model sig M)"<br>
      and M': "(is_model sig M')"<br>
      and nbs: "PROP (nbisim' Z n M M' w w')"<br>
      and k: "k ≤ n"<br>
    shows "PROP (nbisim' Z1 k M M' w w')" unfolding nbisim'_def</p>
<p>That is what is accepted.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>