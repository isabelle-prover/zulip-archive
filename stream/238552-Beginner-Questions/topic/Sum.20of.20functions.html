<html>
<head><meta charset="utf-8"><title>Sum of functions · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html">Sum of functions</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="242247969"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242247969" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicolò Cavalleri <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242247969">(Jun 10 2021 at 18:13)</a>:</h4>
<p>Where is the exact point in the HOL library where it is proven that if the type <code>'a</code> has an instance as a real_vector then functions valued in <code>'a</code> also do? How do I find out these kind of things? On Lean ctrl+click on + takes you to the instance where that type has been given addition but in Isabelle it takes you to the point where + is introduced in Isabelle</p>



<a name="242260093"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242260093" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242260093">(Jun 10 2021 at 19:45)</a>:</h4>
<p>There is no <code>real_vector</code> instance for functions in either <code>HOL</code> or <code>HOL-Analysis</code>. What library are you using exactly?</p>



<a name="242260429"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242260429" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242260429">(Jun 10 2021 at 19:48)</a>:</h4>
<p>There is one in <code>Lp.Functional_Spaces</code> in the AFP…</p>



<a name="242260491"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242260491" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242260491">(Jun 10 2021 at 19:49)</a>:</h4>
<p>I don't know if there is a general way to find out where exactly a particular typeclass instance for a particular type constructor was proven.</p>



<a name="242281608"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242281608" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicolò Cavalleri <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242281608">(Jun 10 2021 at 22:50)</a>:</h4>
<p>I am using the smooth manifolds library. I guess</p>
<div class="codehilite"><pre><span></span><code>instance &quot;fun&quot; :: (type, real_vector) real_vector
  by standard (auto simp: scaleR_fun_def algebra_simps)
</code></pre></div>
<p>is then the point where such instance is defined... What is exactly the syntax <code> "fun" :: (type, real_vector)</code>?</p>



<a name="242281962"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242281962" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakub Kądziołka <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242281962">(Jun 10 2021 at 22:55)</a>:</h4>
<p><code>instance a :: (b, c) d</code> means that <code>'t 'u a :: d</code> if <code>'t :: b</code> and <code>'u :: c</code></p>



<a name="242317117"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242317117" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242317117">(Jun 11 2021 at 08:52)</a>:</h4>
<p>And "fun" is the internal name of the function type constructor. When you write <code>'a ⇒ 'b</code>, the internal representation of that type is <code>('a, 'b) fun</code>.</p>



<a name="242317199"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242317199" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242317199">(Jun 11 2021 at 08:53)</a>:</h4>
<p>I see, the Smooth Manifold entry defines its own vector space instance for functions – presumably in the same way as the <code>Lp</code> entry.</p>



<a name="242328860"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242328860" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicolò Cavalleri <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242328860">(Jun 11 2021 at 10:51)</a>:</h4>
<p>Can I write the instantiation in an equivalent way as</p>
<div class="codehilite"><pre><span></span><code>instantiation &quot;&#39;a ⇒ (&#39;b :: real_vector)&quot; :: real_vector
</code></pre></div>
<p>somehow? It tells me <code>Undefined type name: "'a ⇒ ('b :: real_vector)"</code></p>



<a name="242329031"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329031" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329031">(Jun 11 2021 at 10:53)</a>:</h4>
<p>No, you have to write <code>instantiation "fun" :: (type, real_vector) real_vector</code>. The bit before the <code>::</code> has to be a type constructor.</p>



<a name="242329340"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329340" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicolò Cavalleri <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329340">(Jun 11 2021 at 10:57)</a>:</h4>
<p>Ok, my final goal is to put an instance of <code>real_vector</code> on the type <code>('a × (('a ⇒ real) ⇒ real))</code> which ignores the first coordinate and treats pairs as if they were they second coordinate. Does this mean that I have to put an instance on a generic product of a type and a real vector space? This will probably collide with the instance of product of vector spaces which is more standard I guess</p>



<a name="242329462"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329462" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicolò Cavalleri <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329462">(Jun 11 2021 at 10:58)</a>:</h4>
<p>Indeed it says</p>
<div class="codehilite"><pre><span></span><code>Conflict of type arities:
  prod :: (type, real_vector) cancel_ab_semigroup_add and
  prod :: (cancel_ab_semigroup_add, cancel_ab_semigroup_add) cancel_ab_semigroup_add
</code></pre></div>



<a name="242329468"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329468" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329468">(Jun 11 2021 at 10:58)</a>:</h4>
<p>You cannot do that in Isabelle. Typeclass instances must <em>always</em> be for a type constructor.</p>



<a name="242329503"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329503" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329503">(Jun 11 2021 at 10:59)</a>:</h4>
<p>What you are trying to do would require something like <code>FlexibleInstances</code> and <code>OverlappingInstances</code> in Haskell, which the Isabelle type class system just doesn't support.</p>



<a name="242329530"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329530" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329530">(Jun 11 2021 at 10:59)</a>:</h4>
<p>The only way around this would be to introduce a type clone of <code>'a × (('a ⇒ real) ⇒ real)</code> with <code>type_definition</code>, then you can instantiate it in whichever way you want</p>



<a name="242329605"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329605" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicolò Cavalleri <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329605">(Jun 11 2021 at 11:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232736">Manuel Eberl</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/Sum.20of.20functions/near/242329530">said</a>:</p>
<blockquote>
<p>The only way around this would be to introduce a type clone of <code>'a × (('a ⇒ real) ⇒ real)</code> with <code>type_definition</code>, then you can instantiate it in whichever way you want</p>
</blockquote>
<p>Ok thanks this is what I was looking for!</p>



<a name="242329631"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242329631" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242329631">(Jun 11 2021 at 11:00)</a>:</h4>
<p>Sorry, type classes in Isabelle are just not very flexible… It's a known problem.</p>



<a name="242330060"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242330060" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242330060">(Jun 11 2021 at 11:06)</a>:</h4>
<p>It would be nice to have some kind of deriving via typedef mechanism like in Haskell. This wouldn't require any changes to the core typeclass mechanism.</p>



<a name="242345016"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Sum%20of%20functions/near/242345016" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Stevens <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Sum.20of.20functions.html#242345016">(Jun 11 2021 at 13:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233155">Lukas Stevens</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/Sum.20of.20functions/near/242330060">said</a>:</p>
<blockquote>
<p>It would be nice to have some kind of deriving via typedef mechanism like in Haskell. This wouldn't require any changes to the core typeclass mechanism.</p>
</blockquote>
<p>A topic for a student perhaps?</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>