<html>
<head><meta charset="utf-8"><title>Syntax for proving termination of this recursive predicate · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html">Syntax for proving termination of this recursive predicate</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="479833634"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479833634" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479833634">(Oct 31 2024 at 09:13)</a>:</h4>
<p>Code for copy and paste:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">datatype</span><span class="w"> </span><span class="o">(</span><span class="n n-Type">'m</span><span class="o">,</span><span class="n n-Type">'p</span><span class="o">)</span><span class="w"> </span><span class="n">cform</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cVAR</span><span class="w"> </span><span class="s">"'p"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">cFALSE</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">cDISJ</span><span class="w"> </span><span class="s">"('m,'p) cform"</span><span class="w"> </span><span class="s">"('m,'p) cform"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">cNOT</span><span class="w"> </span><span class="s">"('m,'p) cform"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">cDIAM</span><span class="w"> </span><span class="n n-Type">'m</span><span class="w"> </span><span class="s">"(('m,'p) cform) list"</span><span class="w"> </span><span class="o">(</span><span class="s">"♢_ _"</span><span class="w"> </span><span class="o">[</span><span class="n">0</span><span class="o">,</span><span class="w"> </span><span class="n">0</span><span class="o">])</span>


<span class="k">abbreviation</span><span class="w"> </span><span class="n">ops</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'m set × ('m ⇒ nat) ⇒ 'm set"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"ops τ ≡ fst τ"</span>

<span class="k">abbreviation</span><span class="w"> </span><span class="n">arity</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'m set × ('m ⇒ nat) ⇒ ('m ⇒ nat)"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"arity τ ≡ snd τ"</span>

<span class="k">type_synonym</span><span class="w"> </span><span class="o">(</span><span class="n n-Type">'m</span><span class="o">,</span><span class="n n-Type">'p</span><span class="o">)</span><span class="w"> </span><span class="n">sig</span><span class="w"> </span><span class="o">=</span>
<span class="s">"('m set × ('m ⇒ nat)) × 'p set "</span>

<span class="k">abbreviation</span><span class="w"> </span><span class="n">props</span><span class="w"> </span><span class="o">::</span>
<span class="s">"('m set × ('m ⇒ nat)) × 'p set ⇒ 'p set"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"props sig ≡ snd sig"</span>

<span class="k">abbreviation</span><span class="w"> </span><span class="n">mops</span><span class="w"> </span><span class="o">::</span>
<span class="s">"('m set × ('m ⇒ nat)) × 'p set ⇒ 'm set"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"mops sig ≡ fst (fst sig)"</span>

<span class="k">abbreviation</span><span class="w"> </span><span class="n">marity</span><span class="w"> </span><span class="o">::</span>
<span class="s">"('m set × ('m ⇒ nat)) × 'p set ⇒ 'm ⇒ nat"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"marity sig ≡ snd (fst sig)"</span>

<span class="k">inductive</span><span class="w"> </span><span class="n">wff</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">‹('m set × ('m ⇒ nat)) × 'p set ⇒ ('m, 'p) cform ⇒ bool›</span>
<span class="w">  </span><span class="kp">for</span><span class="w"> </span><span class="n">sig</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"('m set × ('m ⇒ nat)) × 'p set"</span>
<span class="w">  </span><span class="kp">where</span>
<span class="w">    </span><span class="s">"wff sig cFALSE"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s">"p ∈ props sig ⟹ wff sig (cVAR p) "</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s">"wff sig (cDIAM m fl) "</span>
<span class="w">    </span><span class="kp">if</span><span class="w"> </span><span class="s">"m ∈ mops sig"</span><span class="w"> </span><span class="s">"length fl = (marity sig m)"</span><span class="w"> </span><span class="s">"∀f. f ∈ list.set fl ⟹</span>
<span class="s">      wff sig f"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s">"wff sig (cNOT f)"</span><span class="w"> </span><span class="kp">if</span><span class="w"> </span><span class="s">"wff sig f"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s">"wff sig (cDISJ f1 f2)"</span><span class="w"> </span><span class="kp">if</span><span class="w"> </span><span class="s">"wff sig f1"</span>
<span class="w">  </span><span class="s">"wff sig f2 "</span>

<span class="k">type_synonym</span><span class="w"> </span><span class="o">(</span><span class="n n-Type">'m</span><span class="o">,</span><span class="n n-Type">'p</span><span class="o">,</span><span class="n n-Type">'a</span><span class="o">)</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">=</span>
<span class="s">"'a set × ('m ⇒ 'a list ⇒ bool) × ('p ⇒ 'a ⇒ bool)"</span>

<span class="k">abbreviation</span><span class="w"> </span><span class="n">world</span><span class="w"> </span><span class="o">::</span>
<span class="s">"'a set × ('m ⇒ 'a list ⇒ bool) × ('p ⇒ 'a ⇒ bool)</span>
<span class="s"> ⇒ 'a set"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"world M ≡ fst M"</span>

<span class="k">abbreviation</span>
<span class="n">rel</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'a set × ('m ⇒ 'a list ⇒ bool) × ('p ⇒ 'a ⇒ bool)</span>
<span class="s"> ⇒ ('m ⇒ 'a list ⇒ bool)"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"rel τ ≡ fst (snd τ)"</span>

<span class="k">abbreviation</span>
<span class="n">valt</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'a set × ('m ⇒ 'a list ⇒ bool) × ('p ⇒ 'a ⇒ bool)</span>
<span class="s">⇒ ('p ⇒ 'a ⇒ bool)"</span><span class="w"> </span><span class="kp">where</span>
<span class="s">"valt τ ≡ snd (snd τ)"</span>


<span class="kn">function</span><span class="w"> </span><span class="n">csatis</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"('m set × ('m ⇒ nat)) × 'p set ⇒ 'a set × ('m ⇒ 'a list ⇒ bool) × ('p ⇒ 'a ⇒ bool) ⇒</span>
<span class="s">              'a ⇒ ('m,'p) cform ⇒ bool"</span>
<span class="w">  </span><span class="kp">where</span>
<span class="w">   </span><span class="s">"csatis sig M w cFALSE ⟷ False"</span>
<span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">"csatis sig M w (cVAR p) ⟷ p ∈ props sig ∧ w ∈ world M ∧ valt M p w"</span>
<span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">"csatis sig M w (cDISJ f1 f2) = (csatis sig M w f1 ∨ csatis sig M w f2)"</span>
<span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">"csatis sig M w (cNOT f) = (w ∈ world M  ∧ ¬ csatis sig M w f)"</span>
<span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s">"csatis sig M w (cDIAM m fl) =</span>
<span class="s">   (m ∈ mops sig ∧ marity sig m = length fl ∧</span>
<span class="s">     w ∈ world M ∧ (∃vl. length vl = length fl ∧ rel M m (w # vl) ∧</span>
<span class="s">     (∀i. i &lt; length vl ⟶ csatis sig M (vl ! i) (fl ! i))))"</span>
<span class="w"> </span><span class="kp">apply</span><span class="w"> </span><span class="n">auto</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">cform.exhaust</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>
<span class="kn">termination</span><span class="w"> </span><span class="gr">sorry</span>
</code></pre></div>
<p>I define the predicate csatis and have trouble proving its termination. The goal is as follows:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">state</span><span class="o">)</span>
<span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">5</span><span class="w"> </span><span class="n">subgoals</span><span class="o">):</span>
<span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">wf</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">2.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2.</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">f1</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">cDISJ</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">3.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2.</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">f2</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">cDISJ</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">4.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">f.</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">cNOT</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">5.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xa.</span><span class="w"> </span><span class="n">xa</span><span class="w"> </span><span class="n">&lt;</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">xa</span><span class="o">,</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">xa</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">♢m</span><span class="w"> </span><span class="n">fl</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
</code></pre></div>
<p>I believe the relation ?R should be on the size of the formula. I would like to write:<br>
 "wf {((a,b,c,d),e,f,g,h). size d &lt; size h}", then I would have <code>size f1 &lt; size (cDISJ f1 f2)</code>, etc.</p>
<p>I am not sure if it is the canonical flow for doing these sort of things. For the proof, I tried to write</p>
<p>have "wf {((a,b,c,d),e,f,g,h). size d &lt; size h}" apply auto</p>
<p>to see what remains. But Isabelle refuses to apply auto for me, and complains </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kp">apply</span><span class="w"> </span><span class="k">proof</span><span class="w"> </span><span class="n">method⌂</span><span class="o">:</span>
<span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">1</span><span class="w"> </span><span class="n">subgoal</span><span class="o">):</span>
<span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">wf</span><span class="w"> </span><span class="ow">{</span><span class="o">((</span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">c</span><span class="o">,</span><span class="w"> </span><span class="n">d</span><span class="o">),</span><span class="w"> </span><span class="n">e</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="o">)</span><span class="ow">.</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">&lt;</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">h</span><span class="ow">}</span>
</code></pre></div>
<p>May I please ask what I am suggested to do here?</p>
<p>I tried type "termination" to look for examples, but I opened several files and only find this word on the comment... If someone would think there is a good example, it would be helpful to give the name of the file I should look at as well.</p>



<a name="479839408"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479839408" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479839408">(Oct 31 2024 at 09:48)</a>:</h4>
<p><a href="https://search.isabelle.in.tum.de/#search/default_Isabelle2024_AFP2024?page=%5B%5D&amp;q=%7B%22term%22%3A%22termination%22%2C%22fields%22%3A%5B%7B%22field%22%3A%22Command%22%2C%22match%22%3A%22OneOf%22%2C%22terms%22%3A%5B%22function%22%5D%7D%5D%7D">Here are some termination examples</a></p>



<a name="479848539"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479848539" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479848539">(Oct 31 2024 at 10:42)</a>:</h4>
<p>It is a very useful website, thanks a lot for sharing! I am making progress by looking at it.</p>



<a name="479848949"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479848949" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Huch <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479848949">(Oct 31 2024 at 10:45)</a>:</h4>
<p>You're welcome -- have a look at <a href="https://isabelle.systems/">isabelle.systems</a> for an overview over helpful Isabelle resources!</p>



<a name="479849503"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479849503" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479849503">(Oct 31 2024 at 10:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="348400">Fabian Huch</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate/near/479848949">said</a>:</p>
<blockquote>
<p>You're welcome -- have a look at <a href="https://isabelle.systems/">isabelle.systems</a> for an overview over helpful Isabelle resources!</p>
</blockquote>
<p>Thanks again!</p>



<a name="479849931"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479849931" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479849931">(Oct 31 2024 at 10:50)</a>:</h4>
<p>I tried to use "measure" on formula size and here is the only subgoal that is not killed by auto:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">1</span><span class="w"> </span><span class="n">subgoal</span><span class="o">):</span>
<span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xa.</span>
<span class="w">       </span><span class="n">xa</span><span class="w"> </span><span class="n">&lt;</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">       </span><span class="n">size_cform</span><span class="w"> </span><span class="n">sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">(</span><span class="n">fl</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">xa</span><span class="o">)</span><span class="w"> </span><span class="n">&lt;</span><span class="w"> </span><span class="n">Suc</span><span class="w"> </span><span class="o">(</span><span class="n">sig</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">size_list</span><span class="w"> </span><span class="o">(</span><span class="n">size_cform</span><span class="w"> </span><span class="n">sig</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">fl</span><span class="o">)</span>
</code></pre></div>
<p>I expect to be able to use a lemma saying each item in the list has smaller size than the whole list. I tried " sledgehammer(add:cform.size(5) Groups_List.monoid_add_class.size_list_conv_sum_list)" but it finds nothing. I expect this to be a common pattern, what do people do for this?</p>



<a name="479850499"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479850499" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479850499">(Oct 31 2024 at 10:54)</a>:</h4>
<p>I can try fix ... assume... show... Let me see how it goes...</p>



<a name="479851127"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479851127" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479851127">(Oct 31 2024 at 10:57)</a>:</h4>
<p>have "size_cform sig M (fl ! xa) ≤ size_list (size_cform sig M) fl"<br>
      using Groups_List.monoid_add_class.size_list_conv_sum_list<br>
      sledgehammer<br>
found no proof. I think I need help here.</p>



<a name="479879915"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479879915" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479879915">(Oct 31 2024 at 13:39)</a>:</h4>
<p>First: most theorems in Isabelle are written with ?x ∈ set ?xs instead of list, so searching for a useful lemma requires to try both.<br>
~&gt; size_list_estimation' is helpful here</p>



<a name="479880403"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479880403" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479880403">(Oct 31 2024 at 13:41)</a>:</h4>
<p>Second: there is an issue in the lemma, which explains why sledgehammer cannot prove it. Either you can see it or you will find when proving:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="s">‹... ⟹ ...›</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">size_list_estimation'</span><span class="o">[</span><span class="n">of</span><span class="w"> </span><span class="s">‹fl ! xa›</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="s">‹size_cform sig M (fl ! xa)›</span><span class="w">  </span><span class="s">‹size_cform sig M›</span><span class="o">,</span><span class="w"> </span><span class="n">OF</span><span class="w"> </span><span class="n">nth_mem</span><span class="o">]</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
</code></pre></div>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<p>Is the nth well-formed?</p>
</div></div>



<a name="479881789"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479881789" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479881789">(Oct 31 2024 at 13:47)</a>:</h4>
<p>Maybe rewriting the forall as <code>∀(x,y) ∈ set (zip vl fl). csatis sig M x y</code> helps</p>



<a name="479882109"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479882109" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479882109">(Oct 31 2024 at 13:49)</a>:</h4>
<p>I just saw that! But why it is giving xa &lt; length x instead of fl? I expect the generated goal for my definition to have the pre-condition xa &lt; length fl.</p>



<a name="479882203"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479882203" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479882203">(Oct 31 2024 at 13:49)</a>:</h4>
<p>My definition says  <code> (∀i. i &lt; length vl ⟶ csatis sig M (vl ! i) (fl ! i)))</code>.</p>



<a name="479882472"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479882472" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479882472">(Oct 31 2024 at 13:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate/near/479881789">said</a>:</p>
<blockquote>
<p>Maybe rewriting the forall as <code>∀(x,y) ∈ set (zip vl fl). csatis sig M x y</code> helps</p>
</blockquote>
<p>Does it mean editing the definition in terms of zip?</p>



<a name="479882988"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479882988" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479882988">(Oct 31 2024 at 13:53)</a>:</h4>
<p>Or is it possible within the goal?</p>



<a name="479883840"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479883840" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479883840">(Oct 31 2024 at 13:56)</a>:</h4>
<div class="spoiler-block"><div class="spoiler-header">
<p>full</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>lemma csatis_termination_helper: ‹(ac, bc) ∈ set (zip x fl) ⟹ size bc &lt; Suc (size_list size fl)›<br>
  apply (induction fl arbitrary: x)<br>
  subgoal by auto<br>
  subgoal for x fl xs<br>
    by (meson Suc_n_not_le_n in_set_zipE linorder_le_less_linear size_list_estimation')<br>
  done</p>
<p>lemma wf_size_csatis: "wf {((a, b, c, d), e, f, g, h). size d &lt; size h}"<br>
  unfolding wfP_wf_eq[symmetric]<br>
  by (rule wfP_if_convertible_to_nat[of _ ‹λ(a, b, c, d). size d›])<br>
   auto</p>
<p>function csatis :: "('m set × ('m ⇒ nat)) × 'p set ⇒ 'a set × ('m ⇒ 'a list ⇒ bool) × ('p ⇒ 'a ⇒ bool) ⇒<br>
              'a ⇒ ('m,'p) cform ⇒ bool"<br>
  where<br>
   "csatis sig M w cFALSE ⟷ False"<br>
 | "csatis sig M w (cVAR p) ⟷ p ∈ props sig ∧ w ∈ world M ∧ valt M p w"<br>
 | "csatis sig M w (cDISJ f1 f2) = (csatis sig M w f1 ∨ csatis sig M w f2)"<br>
 | "csatis sig M w (cNOT f) = (w ∈ world M  ∧ ¬ csatis sig M w f)"<br>
 | "csatis sig M w (cDIAM m fl) =<br>
   (m ∈ mops sig ∧ marity sig m = length fl ∧<br>
     w ∈ world M ∧ (∃vl. length vl = length fl ∧ rel M m (w # vl) ∧<br>
     (∀(x,y) ∈ set (zip vl fl). csatis sig M x y)))"<br>
 apply auto<br>
  using cform.exhaust by blast<br>
termination<br>
  by (relation ‹{((a,b,c,d),e,f,g,h). size d &lt; size h}›)<br>
    (auto simp: csatis_termination_helper wf_size_csatis)</p>
</div></div>



<a name="479883868"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479883868" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479883868">(Oct 31 2024 at 13:57)</a>:</h4>
<p>If I edit the definition it will give me a provable goal. But I think I like the original one better. Does it seem possible to keep the original definition? Otherwise I should prove the original version as derived.</p>



<a name="479883879"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479883879" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479883879">(Oct 31 2024 at 13:57)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">5</span><span class="w"> </span><span class="n">subgoals</span><span class="o">):</span>
<span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">wf</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">2.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2.</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">f1</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">cDISJ</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">3.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2.</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">f2</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">cDISJ</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="n">f2</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">4.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">f.</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">cNOT</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
<span class="w"> </span><span class="n">5.</span><span class="w"> </span><span class="n">⋀sig</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xa</span><span class="w"> </span><span class="n">xb.</span>
<span class="w">       </span><span class="o">(</span><span class="n">xa</span><span class="o">,</span><span class="w"> </span><span class="n">xb</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">list.set</span><span class="w"> </span><span class="o">(</span><span class="n">zip</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">fl</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="o">((</span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">xa</span><span class="o">,</span><span class="w"> </span><span class="n">xb</span><span class="o">),</span><span class="w"> </span><span class="n">sig</span><span class="o">,</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">♢m</span><span class="w"> </span><span class="n">fl</span><span class="o">)</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">R</span>
</code></pre></div>



<a name="479884279"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479884279" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479884279">(Oct 31 2024 at 13:58)</a>:</h4>
<p>It would be helpful to know according to which principle does Isabelle generate the goals for termination. Seems not written down anywhere.</p>



<a name="479884337"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479884337" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479884337">(Oct 31 2024 at 13:59)</a>:</h4>
<p>I do not really know why termination is doing this. I just have learned over the years to use as few nth as possible</p>



<a name="479884576"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479884576" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479884576">(Oct 31 2024 at 14:00)</a>:</h4>
<p>I am curious, except for the generated goals, is there any other thing that nth is bad to work with?</p>



<a name="479884734"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479884734" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479884734">(Oct 31 2024 at 14:00)</a>:</h4>
<p>It is loosely documented <a href="https://isabelle.in.tum.de/doc/functions.pdf">https://isabelle.in.tum.de/doc/functions.pdf</a> for user</p>



<a name="479885022"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479885022" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479885022">(Oct 31 2024 at 14:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate/near/479884576">said</a>:</p>
<blockquote>
<p>I am curious, except for the generated goals, is there any other thing that nth is bad to work with?</p>
</blockquote>
<p>Generally everything that forces an order on things when the order is not relevant. Like list vs set.</p>



<a name="479885093"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479885093" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479885093">(Oct 31 2024 at 14:01)</a>:</h4>
<p>(or list vs multiset to be more accurate)</p>



<a name="479886681"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479886681" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479886681">(Oct 31 2024 at 14:08)</a>:</h4>
<p>Emmm... I am not sure if I get it. For my cases, I do need the order on the list vl and fl and they need to match up. But indeed, the point of  <code>(∀i. i &lt; length vl ⟶ csatis sig M (vl ! i) (fl ! i))</code> is just to pair things up. So the relation R cares the order, but  <code>(∀i. i &lt; length vl ⟶ csatis sig M (vl ! i) (fl ! i))</code> does not.</p>



<a name="479887390"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479887390" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479887390">(Oct 31 2024 at 14:11)</a>:</h4>
<p>I am going to try this since I feel like it may make me more comfortable. Thanks for the elaboration on this!</p>



<a name="479887728"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479887728" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479887728">(Oct 31 2024 at 14:13)</a>:</h4>
<p>Is that a better style for practical reason to write "∀(x,y) ∈ set (zip vl fl). csatis sig M x y" over "∀x y. (x,y)∈ set (zip vl fl). csatis sig M x y", or is it purely atheistical?</p>



<a name="479887991"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479887991" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479887991">(Oct 31 2024 at 14:14)</a>:</h4>
<p>On paper, I am used to the first notation (like in math proof with "\in \R"), so I usually go for the first one</p>



<a name="479888006"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479888006" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479888006">(Oct 31 2024 at 14:14)</a>:</h4>
<p>but internally they are the same</p>



<a name="479888174"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479888174" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479888174">(Oct 31 2024 at 14:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate/near/479886681">said</a>:</p>
<blockquote>
<p>Emmm... I am not sure if I get it. For my cases, I do need the order on the list vl and fl and they need to match up. But indeed, the point of  <code>(∀i. i &lt; length vl ⟶ csatis sig M (vl ! i) (fl ! i))</code> is just to pair things up. So the relation R cares the order, but  <code>(∀i. i &lt; length vl ⟶ csatis sig M (vl ! i) (fl ! i))</code> does not.</p>
</blockquote>
<p>Not really right? once you paired the elements, the order in the list does not matter anymore</p>



<a name="479889766"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479889766" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479889766">(Oct 31 2024 at 14:23)</a>:</h4>
<p>It is indeed true that once I pair the elements, the order in the list does not matter anymore. It seems to be a convincing argument to avoid anything related to ordering here. We only need the order to make sure to pair a world with a formula in a way that only correct pairs are created. But once we have done the procedure of pairing, the order in the zip list does not matter anymore.</p>



<a name="479889917"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Syntax%20for%20proving%20termination%20of%20this%20recursive%20predicate/near/479889917" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate.html#479889917">(Oct 31 2024 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Syntax.20for.20proving.20termination.20of.20this.20recursive.20predicate/near/479888006">said</a>:</p>
<blockquote>
<p>but internally they are the same</p>
</blockquote>
<p>I see. That's good to know.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>