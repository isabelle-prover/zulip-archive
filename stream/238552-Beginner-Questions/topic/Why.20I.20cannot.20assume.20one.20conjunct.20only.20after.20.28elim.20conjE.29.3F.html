<html>
<head><meta charset="utf-8"><title>Why I cannot assume one conjunct only after (elim conjE)? · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html">Why I cannot assume one conjunct only after (elim conjE)?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="473409715"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473409715" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473409715">(Sep 29 2024 at 04:16)</a>:</h4>
<p>As an abridged version:<br>
My original goal looks like (A /\ B ==&gt; C). Such a subgoal is generated by a proof method application. I want to refer to "A" and "B" separately, so I typed:<br>
assume "A /\ B" show "C" proof (elim conjI)</p>
<p>The goal turns to "A ==&gt;B ==&gt; C", as I expected.<br>
However, I then typed "from B obtain ..."<br>
Isabelle complains and gives me: "Failed to retrieve literal fact: B"</p>
<p>Why is that?</p>
<p>Concrete version of the problem:</p>
<p>My goal originally looks like this:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">1</span><span class="w"> </span><span class="n">subgoal</span><span class="o">):</span>
<span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">elts</span><span class="w"> </span><span class="o">(</span><span class="n">world</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">    </span><span class="o">(</span><span class="n">∃vl.</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">w</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">          </span><span class="n">Truel</span>
<span class="w">           </span><span class="o">(</span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="n">λf</span><span class="w"> </span><span class="n">v.</span><span class="w"> </span><span class="n">adSts</span><span class="w"> </span><span class="o">(</span><span class="n">Gframe.truncate</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">valt</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">f</span><span class="o">)</span>
<span class="w">             </span><span class="n">fl</span><span class="o">)</span>
<span class="w">           </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="n">∃vl.</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">Mf</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">sEqc</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">Σ</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">         </span><span class="n">Truel</span>
<span class="w">          </span><span class="o">(</span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="n">λf</span><span class="w"> </span><span class="n">v.</span><span class="w"> </span><span class="n">adSts</span><span class="w"> </span><span class="o">(</span><span class="n">Gframe.truncate</span><span class="w"> </span><span class="n">Mf</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">valt</span><span class="w"> </span><span class="n">Mf</span><span class="o">)</span><span class="w"> </span><span class="n">v</span>
<span class="w">                       </span><span class="n">f</span><span class="o">)</span>
<span class="w">            </span><span class="n">fl</span><span class="o">)</span>
<span class="w">          </span><span class="n">vl</span>
</code></pre></div>
<p>I typed:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">assume</span><span class="w"> </span><span class="n">a</span><span class="o">:</span><span class="w"> </span><span class="s">"w ∈ elts (world M) ∧</span>
<span class="s">    (∃vl. rel M m (w # vl) ∧</span>
<span class="s">          Truel</span>
<span class="s">           (map (λf v. adSts (Gframe.truncate M) (valt M) v f)</span>
<span class="s">             fl)</span>
<span class="s">           vl)"</span>
<span class="w">      </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"∃vl. rel Mf m (sEqc M Σ w # vl) ∧</span>
<span class="s">         Truel</span>
<span class="s">          (map (λf v. adSts (Gframe.truncate Mf) (valt Mf) v</span>
<span class="s">                       f)</span>
<span class="s">            fl)</span>
<span class="s">          vl"</span>
<span class="w">      </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">elim</span><span class="w"> </span><span class="n">conjE</span><span class="o">)</span>
</code></pre></div>
<p>to turn it into:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">w</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">elts</span><span class="w"> </span><span class="o">(</span><span class="n">world</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="n">∃vl.</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">w</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">         </span><span class="n">Truel</span>
<span class="w">          </span><span class="o">(</span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="n">λf</span><span class="w"> </span><span class="n">v.</span><span class="w"> </span><span class="n">adSts</span><span class="w"> </span><span class="o">(</span><span class="n">Gframe.truncate</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">valt</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">f</span><span class="o">)</span>
<span class="w">            </span><span class="n">fl</span><span class="o">)</span>
<span class="w">          </span><span class="n">vl</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="n">∃vl.</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">Mf</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">sEqc</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">Σ</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">         </span><span class="n">Truel</span>
<span class="w">          </span><span class="o">(</span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="n">λf</span><span class="w"> </span><span class="n">v.</span><span class="w"> </span><span class="n">adSts</span><span class="w"> </span><span class="o">(</span><span class="n">Gframe.truncate</span><span class="w"> </span><span class="n">Mf</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">valt</span><span class="w"> </span><span class="n">Mf</span><span class="o">)</span><span class="w"> </span><span class="n">v</span>
<span class="w">                       </span><span class="n">f</span><span class="o">)</span>
<span class="w">            </span><span class="n">fl</span><span class="o">)</span>
<span class="w">          </span><span class="n">vl</span>
</code></pre></div>
<p>I hope I can then refer to "w ∈ elts (world M) " and "∃vl. rel M m (w # vl) ∧<br>
         Truel<br>
          (map (λf v. adSts (Gframe.truncate M) (valt M) v f)<br>
            fl)<br>
          vl " separately.<br>
However, after the "proof (elim conjE)", when I type:</p>
<p>from ‹ (∃vl. rel M m (w # vl) ∧<br>
          Truel<br>
           (map (λf v. adSts (Gframe.truncate M) (valt M) v f)<br>
             fl)<br>
           vl)› </p>
<p>obtain vl <br>
         where "rel M m (w # vl) ∧<br>
         Truel<br>
          (map (λf v. adSts (Gframe.truncate M) (valt M) v f)<br>
            fl)<br>
          vl"</p>
<p>it complains:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">retrieve</span><span class="w"> </span><span class="n">literal</span><span class="w"> </span><span class="n">fact⌂</span><span class="o">:</span>
<span class="n">∃vl.</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">(</span><span class="n">w</span><span class="w"> </span><span class="n">#</span><span class="w"> </span><span class="n">vl</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span>
<span class="w">     </span><span class="n">Truel</span>
<span class="w">      </span><span class="o">(</span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="n">λf</span><span class="w"> </span><span class="n">v.</span><span class="w"> </span><span class="n">adSts</span><span class="w"> </span><span class="o">(</span><span class="n">Gframe.truncate</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">valt</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="n">fl</span><span class="o">)</span>
<span class="w">      </span><span class="n">vl</span>
</code></pre></div>



<a name="473409729"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473409729" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473409729">(Sep 29 2024 at 04:16)</a>:</h4>
<p>How can I split and refer to the long conjunct separately?</p>



<a name="473419080"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473419080" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473419080">(Sep 29 2024 at 06:39)</a>:</h4>
<p>You need to assume it</p>



<a name="473419153"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473419153" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473419153">(Sep 29 2024 at 06:40)</a>:</h4>
<p>When you type <code>B</code> it is looking at a fact in the Isar proof. This is the entire point of Isar: the proof text is sufficient</p>



<a name="473419176"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473419176" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473419176">(Sep 29 2024 at 06:40)</a>:</h4>
<p>and only <code>show</code> and <code>qed</code> look at the concrete proof goal</p>



<a name="473421597"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473421597" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473421597">(Sep 29 2024 at 07:16)</a>:</h4>
<p>I see, thanks! I forgot (again) that assume is for and only for the things that are generated during the proof.</p>



<a name="473422466"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473422466" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473422466">(Sep 29 2024 at 07:28)</a>:</h4>
<p>BTW you can also decompose the assumptions directly with</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">assume</span><span class="w"> </span><span class="s">"A /\ B"</span>
<span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="n">B</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="n">fast</span><span class="o">+</span>
</code></pre></div>



<a name="473422503"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473422503" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473422503">(Sep 29 2024 at 07:29)</a>:</h4>
<p>avoiding a nesting of <code>proof</code> (and hence indentation and so on)</p>



<a name="473422668"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473422668" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473422668">(Sep 29 2024 at 07:31)</a>:</h4>
<p>Or the version with term naming to avoid repeating terms:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">assume</span><span class="w"> </span><span class="s">"A /\ B"</span><span class="w"> </span><span class="o">(</span><span class="kp">is</span><span class="w"> </span><span class="s">"?w_in_word /\ ?succs"</span><span class="o">)</span>
<span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="o">?</span><span class="n">w_in_word</span><span class="w"> </span><span class="kp">and</span><span class="w"> </span><span class="o">?</span><span class="n">succs</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="n">fast</span><span class="o">+</span>
</code></pre></div>
<p>As usual in naming during programming: ?A is a cool name for examples, but not a good one for proof maintainability.</p>



<a name="473422899"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473422899" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473422899">(Sep 29 2024 at 07:34)</a>:</h4>
<p>Sorry, what does the name with "?" break for sack of maintainability?</p>



<a name="473423483"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473423483" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473423483">(Sep 29 2024 at 07:43)</a>:</h4>
<p>I do not manage to come up with a good example, but if you use <code>?A</code> and by accident it starts referring to another term, it is much harder to remember what it should point to</p>



<a name="473423859"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473423859" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473423859">(Sep 29 2024 at 07:48)</a>:</h4>
<p>In your example  you have two assumptions:<code>w ∈ elts (world M)</code> and<br>
<code>    ∃vl. rel M m (w # vl) ∧
         Truel
          (map (λf v. adSts (Gframe.truncate M) (valt M) v f)
            fl)
          vl </code>. Which one is more naturally an <code>?A</code> and which one a <code>?B</code>?</p>



<a name="473424317"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473424317" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473424317">(Sep 29 2024 at 07:53)</a>:</h4>
<p>I think I will just call the first conjunct ?A and the second conjunct ?B, so in my case ?A is <code>w ∈ elts (world M)</code> and <code>∃vl. rel M m (w # vl) ∧ Truel (map (λf v. adSts (Gframe.truncate M) (valt M) v f) fl) vl</code> is ?B.</p>



<a name="473424589"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20I%20cannot%20assume%20one%20conjunct%20only%20after%20%28elim%20conjE%29%3F/near/473424589" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20I.20cannot.20assume.20one.20conjunct.20only.20after.20.28elim.20conjE.29.3F.html#473424589">(Sep 29 2024 at 07:55)</a>:</h4>
<p>I think one possible thing to do is not to use sth like "A" but a longer thing to keep all of them distinguished. Say, call the first one <code>?w_wd</code> and the second one <code>?exvl</code>.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>