<html>
<head><meta charset="utf-8"><title>Why is `list_update_beyond` marked simp? · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20is.20.60list_update_beyond.60.20marked.20simp.3F.html">Why is `list_update_beyond` marked simp?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="390107171"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20is%20%60list_update_beyond%60%20marked%20simp%3F/near/390107171" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hanno Becker <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20is.20.60list_update_beyond.60.20marked.20simp.3F.html#390107171">(Sep 10 2023 at 06:20)</a>:</h4>
<p>Hi. The following takes a long time on my machine:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">test</span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">‹length x = 42›</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">‹x [0 := 0,  1  := 0, 2  := 0, 3  := 0, 4  := 0,</span>
<span class="s">            5 := 0,  6  := 0, 7  := 0, 8  := 0, 9  := 0,</span>
<span class="s">            10 := 0, 11 := 0, 12 := 0, 13 := 0, 14 := 0,</span>
<span class="s">            15 := 0, 16 := 0, 17 := 0, 18 := 0, 19 := 0] = y›</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="kp">apply</span><span class="w"> </span><span class="n">simp</span>
</code></pre></div>
<p>The reason is that </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">list_update_beyond</span><span class="o">:</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">?</span><span class="n">xs</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="o">?</span><span class="n">i</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="o">?</span><span class="n">xs</span><span class="o">[?</span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">?</span><span class="n">x</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="n">xs</span>
</code></pre></div>
<p>is marked as a <code>simp</code> rule by default, which leads to an explosion of simplification paths explored by the simplifier for iterated list updates -- as witnessed in the example above.</p>
<p>Of course, one can remove <code>list_update_beyond</code> from the simpset, but why is it in it to begin with? As the lemma itself says, updating a list beyond its length isn't very useful, so I think it should not be considered by default.</p>



<a name="390309042"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20is%20%60list_update_beyond%60%20marked%20simp%3F/near/390309042" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Kappelmann <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20is.20.60list_update_beyond.60.20marked.20simp.3F.html#390309042">(Sep 11 2023 at 13:19)</a>:</h4>
<p>This is probably something you have to post on the mailing list to receive an answer.</p>



<a name="390661873"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20is%20%60list_update_beyond%60%20marked%20simp%3F/near/390661873" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hanno Becker <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20is.20.60list_update_beyond.60.20marked.20simp.3F.html#390661873">(Sep 13 2023 at 07:17)</a>:</h4>
<p>Okay</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>