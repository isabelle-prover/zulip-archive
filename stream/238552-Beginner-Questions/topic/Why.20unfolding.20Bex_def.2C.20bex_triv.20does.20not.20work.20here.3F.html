<html>
<head><meta charset="utf-8"><title>Why unfolding Bex_def, bex_triv does not work here? · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html">Why unfolding Bex_def, bex_triv does not work here?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="486680286"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486680286" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486680286">(Dec 07 2024 at 15:43)</a>:</h4>
<p>I have a goal looks like this:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">⋀a</span><span class="w"> </span><span class="n">b.</span><span class="w"> </span><span class="n">∃x.</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cVAR</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">           </span><span class="n">∃x.</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">tau</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="o">(</span><span class="n">∃xa.</span><span class="w"> </span><span class="n">xa</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="ow">{</span><span class="n">fl.</span><span class="w"> </span><span class="n">∀f.</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">DPM</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">tau</span><span class="ow">}</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">♢x</span><span class="w"> </span><span class="n">xa</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">           </span><span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="n">∉</span><span class="w"> </span><span class="n">cequivr</span><span class="w"> </span><span class="n">TYPE</span><span class="o">(</span><span class="n n-Type">'a</span><span class="o">)</span>
</code></pre></div>
<p>I want to eliminate:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="o">(</span><span class="n">∃xa.</span><span class="w"> </span><span class="n">xa</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="ow">{</span><span class="n">fl.</span><span class="w"> </span><span class="n">∀f.</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">fl</span><span class="w"> </span><span class="n">⟶</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="n">DPM</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">tau</span><span class="ow">}</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">♢x</span><span class="w"> </span><span class="n">xa</span><span class="o">)</span>
</code></pre></div>
<p>But I tried both bex_triv and Bex_def and none of them works.</p>
<p>As a reminder:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="n">Set.Bex_def</span><span class="o">:</span><span class="w"> </span><span class="n">Bex</span><span class="w"> </span><span class="o">?</span><span class="n">A</span><span class="w"> </span><span class="o">?</span><span class="n">P</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span><span class="n">∃x.</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">A</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="o">?</span><span class="n">P</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="w">  </span><span class="n">Set.bex_triv</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">∃x∈</span><span class="o">?</span><span class="n">A.</span><span class="w"> </span><span class="o">?</span><span class="n">P</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">((</span><span class="n">∃x.</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">∈</span><span class="w"> </span><span class="o">?</span><span class="n">A</span><span class="o">)</span><span class="w"> </span><span class="n">∧</span><span class="w"> </span><span class="o">?</span><span class="n">P</span><span class="o">)</span>
</code></pre></div>
<p>May I please ask why <code> unfolding bex_triv Bex_def</code> does not make change on this goal?</p>



<a name="486681242"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486681242" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486681242">(Dec 07 2024 at 15:54)</a>:</h4>
<p>Side remark: there is no Bex in <code>(∃xa. xa ∈ {fl. ∀f. f ∈ set fl ⟶ f ∈ DPM n s tau} ∧ b = ♢x xa)</code>, so unfolding will not (and cannot) do anything.</p>



<a name="486681304"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486681304" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486681304">(Dec 07 2024 at 15:55)</a>:</h4>
<p>Side remark 2: unfolding is <em>not</em> what you want. You want to replace <code>∃x. P x ==&gt; thesis</code> by <code>!!x. P x ==&gt; thesis</code>. This is not something unfolding can do (not equivalence preserving).</p>



<a name="486681433"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486681433" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486681433">(Dec 07 2024 at 15:57)</a>:</h4>
<p>And now you know that you want an elim rule and not an unfolding: <code>apply (elim exE)</code></p>



<a name="486681531"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486681531" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486681531">(Dec 07 2024 at 15:59)</a>:</h4>
<p>There is a <code>bexE</code> with the meaning you can guess if you a <code>bex</code> instead of an <code>ex</code> quantifier</p>



<a name="486682078"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682078" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682078">(Dec 07 2024 at 16:05)</a>:</h4>
<p>Oh I did not note that I have already eliminated the Bex! Silly me! Alles klar.</p>



<a name="486682175"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682175" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682175">(Dec 07 2024 at 16:06)</a>:</h4>
<p>But as for "elim exE", I am repeatedly told to avoid apply. And I would do the unfolding before opening a proof-qed block.</p>



<a name="486682221"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682221" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682221">(Dec 07 2024 at 16:06)</a>:</h4>
<p>Let me try to find an iff thm that does this for me.</p>



<a name="486682373"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682373" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682373">(Dec 07 2024 at 16:08)</a>:</h4>
<p>I find this:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="n">HOL.atomize_exL</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">⋀x.</span><span class="w"> </span><span class="o">?</span><span class="n">P</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="o">)</span><span class="w"> </span><span class="n">≡</span><span class="w"> </span><span class="o">(</span><span class="n">∃x.</span><span class="w"> </span><span class="o">?</span><span class="n">P</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="o">?</span><span class="n">Q</span><span class="o">)</span>
</code></pre></div>



<a name="486682422"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682422" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682422">(Dec 07 2024 at 16:09)</a>:</h4>
<p>I like this one but its direction is wrong for unfolding. Is that any function that flips an equality that I can call without go to ML level?</p>



<a name="486682522"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682522" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682522">(Dec 07 2024 at 16:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682175">said</a>:</p>
<blockquote>
<p>But as for "elim exE", I am repeatedly told to avoid apply. And I would do the unfolding before opening a proof-qed block.</p>
</blockquote>
<p>Can't you do<br>
proof(elim exE)<br>
....</p>



<a name="486682574"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682574" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682574">(Dec 07 2024 at 16:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486681304">said</a>:</p>
<blockquote>
<p>Side remark 2: unfolding is <em>not</em> what you want. You want to replace <code>∃x. P x ==&gt; thesis</code> by <code>!!x. P x ==&gt; thesis</code>. This is not something unfolding can do (not equivalence preserving).</p>
</blockquote>
<p>I think this is "((?x. P x) ==&gt; ?thesis)\equiv (!!x. P x ==&gt; ?thesis)", so we can retrieve an equivalence.</p>



<a name="486682818"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682818" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682818">(Dec 07 2024 at 16:13)</a>:</h4>
<p>If you want an isar block you can also do something like<br>
lemma"∃x. P x"<br>
proof -<br>
  fix x<br>
  have "P x"<br>
    by sorry<br>
  then show "∃x. P x"<br>
    by(rule exI)<br>
qed</p>



<a name="486682860"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682860" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682860">(Dec 07 2024 at 16:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682522">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682175">said</a>:</p>
<blockquote>
<p>But as for "elim exE", I am repeatedly told to avoid apply. And I would do the unfolding before opening a proof-qed block.</p>
</blockquote>
<p>Can't you do<br>
proof(elim exE)<br>
....</p>
</blockquote>
<p>I can do that as well. Thank you! Using more equivalence might just be my personal preference.</p>



<a name="486682936"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486682936" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486682936">(Dec 07 2024 at 16:14)</a>:</h4>
<p>Since the HOL4 style tends to prefer simplification (i.e. iff) than implication...</p>



<a name="486683182"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486683182" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486683182">(Dec 07 2024 at 16:17)</a>:</h4>
<p>After 3 months, I find the style I prefer in Isar is to avoid opening a proof block once possible and keep using equality for reasoning. I tend to believe that looks neater. (Sadly I need more time to actually achieve this...)</p>



<a name="486683520"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486683520" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486683520">(Dec 07 2024 at 16:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682818">said</a>:</p>
<blockquote>
<p>If you want an isar block you can also do something like<br>
lemma"∃x. P x"<br>
proof -<br>
  fix x<br>
  have "P x"<br>
    by sorry<br>
  then show "∃x. P x"<br>
    by(rule exI)<br>
qed</p>
</blockquote>
<p><code>obtain x where "P x"</code> is the syntax you are looking for.</p>



<a name="486683734"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486683734" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> irvin <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486683734">(Dec 07 2024 at 16:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683520">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682818">said</a>:</p>
<blockquote>
<p>If you want an isar block you can also do something like<br>
lemma"∃x. P x"<br>
proof -<br>
  fix x<br>
  have "P x"<br>
    by sorry<br>
  then show "∃x. P x"<br>
    by(rule exI)<br>
qed</p>
</blockquote>
<p><code>obtain x where "P x"</code> is the syntax you are looking for.</p>
</blockquote>
<p>oh my bad yup mathias is right<br>
for clarification</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="s">"∃x. P x ⟹ Q"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">assume</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"P x"</span><span class="w"> </span><span class="ow">..</span>

<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"Q"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="gr">sorry</span>
<span class="k">qed</span>
</code></pre></div>



<a name="486683783"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486683783" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486683783">(Dec 07 2024 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682574">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486681304">said</a>:</p>
<blockquote>
<p>Side remark 2: unfolding is <em>not</em> what you want. You want to replace <code>∃x. P x ==&gt; thesis</code> by <code>!!x. P x ==&gt; thesis</code>. This is not something unfolding can do (not equivalence preserving).</p>
</blockquote>
<p>I think this is "((?x. P x) ==&gt; ?thesis)\equiv (!!x. P x ==&gt; ?thesis)", so we can retrieve an equivalence.</p>
</blockquote>
<p>Yeah you are right that it is equivalent, but the scope of <code>x</code> changes from only <code>P x</code> to the entire formula.</p>



<a name="486683914"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486683914" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486683914">(Dec 07 2024 at 16:26)</a>:</h4>
<p>This is the equivalence you are looking for:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">unfolding</span><span class="w"> </span><span class="n">ex_neg_all_pos</span>
</code></pre></div>



<a name="486684024"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486684024" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486684024">(Dec 07 2024 at 16:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683734">said</a>:<br>
for clarification</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="s">"∃x. P x ⟹ Q"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">assume</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"P x"</span><span class="w"> </span><span class="ow">..</span>

<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"Q"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="gr">sorry</span>
<span class="k">qed</span>
</code></pre></div>
<p>If you go for Isar, let's use full Isar:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">P</span><span class="o">:</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">obtain</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"P x"</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="ow">..</span>

<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"Q"</span>
<span class="w">    </span><span class="gr">sorry</span>
<span class="k">qed</span>
</code></pre></div>



<a name="486692050"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486692050" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486692050">(Dec 07 2024 at 18:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683734">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683520">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682818">said</a>:</p>
<blockquote>
<p>If you want an isar block you can also do something like<br>
lemma"∃x. P x"<br>
proof -<br>
  fix x<br>
  have "P x"<br>
    by sorry<br>
  then show "∃x. P x"<br>
    by(rule exI)<br>
qed</p>
</blockquote>
<p><code>obtain x where "P x"</code> is the syntax you are looking for.</p>
</blockquote>
<p>oh my bad yup mathias is right<br>
for clarification</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="s">"∃x. P x ⟹ Q"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">assume</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"P x"</span><span class="w"> </span><span class="ow">..</span>

<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"Q"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="gr">sorry</span>
<span class="k">qed</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Incidently, I would like to ask about the difference between "rule" and "intro". Sometimes "intro thm" works but "rule thm" does not. Why is the case?</p>



<a name="486692151"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486692151" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486692151">(Dec 07 2024 at 18:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683783">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682574">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486681304">said</a>:</p>
<blockquote>
<p>Side remark 2: unfolding is <em>not</em> what you want. You want to replace <code>∃x. P x ==&gt; thesis</code> by <code>!!x. P x ==&gt; thesis</code>. This is not something unfolding can do (not equivalence preserving).</p>
</blockquote>
<p>I think this is "((?x. P x) ==&gt; ?thesis)\equiv (!!x. P x ==&gt; ?thesis)", so we can retrieve an equivalence.</p>
</blockquote>
<p>Yeah you are right that it is equivalent, but the scope of <code>x</code> changes from only <code>P x</code> to the entire formula.</p>
</blockquote>
<p>Yes, you can omit the brackets because the meta implication separates its LHS and RHS.</p>



<a name="486692666"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486692666" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486692666">(Dec 07 2024 at 18:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486692050">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683734">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683520">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682818">said</a>:</p>
<blockquote>
<p>If you want an isar block you can also do something like<br>
lemma"∃x. P x"<br>
proof -<br>
  fix x<br>
  have "P x"<br>
    by sorry<br>
  then show "∃x. P x"<br>
    by(rule exI)<br>
qed</p>
</blockquote>
<p><code>obtain x where "P x"</code> is the syntax you are looking for.</p>
</blockquote>
<p>oh my bad yup mathias is right<br>
for clarification</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="s">"∃x. P x ⟹ Q"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">assume</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"P x"</span><span class="w"> </span><span class="ow">..</span>

<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"Q"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="gr">sorry</span>
<span class="k">qed</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Incidently, I would like to ask about the difference between "rule" and "intro". Sometimes "intro thm" works but "rule thm" does not. Why is the case?</p>
</blockquote>
<p>IIRC the main difference comes from the handling of the facts in the context: <code>using YY apply (rule X)</code> requires X to generate an assumption that can be matched with <code>YY</code></p>



<a name="486711956"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486711956" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486711956">(Dec 07 2024 at 22:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486692666">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486692050">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683734">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486683520">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="714722">irvin</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486682818">said</a>:</p>
<blockquote>
<p>If you want an isar block you can also do something like<br>
lemma"∃x. P x"<br>
proof -<br>
  fix x<br>
  have "P x"<br>
    by sorry<br>
  then show "∃x. P x"<br>
    by(rule exI)<br>
qed</p>
</blockquote>
<p><code>obtain x where "P x"</code> is the syntax you are looking for.</p>
</blockquote>
<p>oh my bad yup mathias is right<br>
for clarification</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="s">"∃x. P x ⟹ Q"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">assume</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"P x"</span><span class="w"> </span><span class="ow">..</span>

<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"Q"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="gr">sorry</span>
<span class="k">qed</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Incidently, I would like to ask about the difference between "rule" and "intro". Sometimes "intro thm" works but "rule thm" does not. Why is the case?</p>
</blockquote>
<p>IIRC the main difference comes from the handling of the facts in the context: <code>using YY apply (rule X)</code> requires X to generate an assumption that can be matched with <code>YY</code></p>
</blockquote>
<p>So, in the case that there is no assumption in the context at all, does it mean that I cannot use <code>rule</code> at all?</p>



<a name="486740716"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486740716" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486740716">(Dec 08 2024 at 06:26)</a>:</h4>
<p>You can. But <em>if</em> you have one, it must match.</p>



<a name="486740781"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486740781" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486740781">(Dec 08 2024 at 06:27)</a>:</h4>
<p>Try this with and without the <code>using P</code>:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">P</span><span class="o">:</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q ⟶ Q"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">P</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">impI</span><span class="o">)</span>
</code></pre></div>



<a name="486740797"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486740797" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486740797">(Dec 08 2024 at 06:27)</a>:</h4>
<p>And then replace the <code>rule</code> by <code>intro</code> with the <code>using P</code></p>



<a name="486741256"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486741256" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486741256">(Dec 08 2024 at 06:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486740781">said</a>:</p>
<blockquote>
<p>Try this with and without the <code>using P</code>:</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">P</span><span class="o">:</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q ⟶ Q"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">P</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">impI</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>With <code>using P</code> it does not work, it works only without <code>using P</code>.<br>
I guess it it because with the P the goal is <code>(?x. P x) ==&gt; Q --&gt; Q</code>, so the top level is a <code>==&gt;</code>, not <code>--&gt;</code>, so it does not find a match. (let me rethink.)</p>



<a name="486741335"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486741335" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486741335">(Dec 08 2024 at 06:36)</a>:</h4>
<p>And for intro, both with and without P works.</p>



<a name="486741509"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486741509" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486741509">(Dec 08 2024 at 06:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486741256">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486740781">said</a>:</p>
<blockquote>
<p>Try this with and without the <code>using P</code>:</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">P</span><span class="o">:</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q ⟶ Q"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">P</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">impI</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>With <code>using P</code> it does not work, it works only without <code>using P</code>.<br>
I guess it it because with the P the goal is <code>(?x. P x) ==&gt; Q --&gt; Q</code>, so the top level is a <code>==&gt;</code>, not <code>--&gt;</code>, so it does not find a match. (let me rethink.)</p>
</blockquote>
<p>No that is not it. <code>Q --&gt; Q</code> is transformed by rule into <code>Q ==&gt; Q</code>. So rule is now checking if <code>(?x. P x)</code> matches the first goal: it does not, so it is failing.</p>
<p>Here is a working example:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">P</span><span class="o">:</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"(∃x. P x) ⟶ (∃x. P x)"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">P</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">impI</span><span class="o">)</span>
</code></pre></div>



<a name="486741511"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486741511" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486741511">(Dec 08 2024 at 06:39)</a>:</h4>
<p>So, for using rule, with<br>
impI: <code>(P ⟹ Q) ⟹ P ⟶ Q</code><br>
on the goal<br>
<code>(?x. P x) ==&gt; Q --&gt; Q</code><br>
We want the application of the rule impI to generate an assumption that matches <code>(?x. P x)</code>.<br>
But the application will generate the assumption <code>Q</code>.</p>



<a name="486741574"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486741574" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486741574">(Dec 08 2024 at 06:40)</a>:</h4>
<p>And Q is not an existential.</p>



<a name="486741616"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486741616" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486741616">(Dec 08 2024 at 06:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486741509">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="754515">Yiming Xu</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486741256">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/channel/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F/near/486740781">said</a>:</p>
<blockquote>
<p>Try this with and without the <code>using P</code>:</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">P</span><span class="o">:</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q ⟶ Q"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">P</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">impI</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>With <code>using P</code> it does not work, it works only without <code>using P</code>.<br>
I guess it it because with the P the goal is <code>(?x. P x) ==&gt; Q --&gt; Q</code>, so the top level is a <code>==&gt;</code>, not <code>--&gt;</code>, so it does not find a match. (let me rethink.)</p>
</blockquote>
<p>No that is not it. <code>Q --&gt; Q</code> is transformed by rule into <code>Q ==&gt; Q</code>. So rule is now checking if <code>(?x. P x)</code> matches the first goal: it does not, so it is failing.</p>
<p>Here is a working example:</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="n">P</span><span class="o">:</span><span class="w"> </span><span class="s">"∃x. P x"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"(∃x. P x) ⟶ (∃x. P x)"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">P</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">impI</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Aha I think that is what I got just a few seconds ago! Now I think I get it!</p>



<a name="486741629"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/Why%20unfolding%20Bex_def%2C%20bex_triv%20does%20not%20work%20here%3F/near/486741629" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yiming Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/Why.20unfolding.20Bex_def.2C.20bex_triv.20does.20not.20work.20here.3F.html#486741629">(Dec 08 2024 at 06:41)</a>:</h4>
<p>Thanks a lot! These comparisons are always helpful.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>