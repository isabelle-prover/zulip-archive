<html>
<head><meta charset="utf-8"><title>disable eta-contraction in printing · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/disable.20eta-contraction.20in.20printing.html">disable eta-contraction in printing</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="245643677"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/disable%20eta-contraction%20in%20printing/near/245643677" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qiyuan Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/disable.20eta-contraction.20in.20printing.html#245643677">(Jul 12 2021 at 04:25)</a>:</h4>
<p>How to disable the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span>-contraction when print terms?<br>
For example,</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">translations</span> <span class="s">"{x. P}"</span> <span class="err">⇌</span> <span class="s">"CONST MyCollect (λx. P)"</span>
</code></pre></div>
<p>this translation works in every case except the <code>{x. P x}</code>.<br>
For <code>{x. P x}</code>, it is printed as <code>MyCollect P</code> because the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mi>x</mi><mi mathvariant="normal">.</mi><mi>P</mi><mtext> </mtext><mi>x</mi></mrow><annotation encoding="application/x-tex">\lambda x. P\,x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">λ</span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span></span></span></span> is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span>-contracted to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span>.</p>
<p>In the reference manual, it is mentioned that such <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span>-contracted can be prevented by print-translations in ML, but there is no further information about this.</p>



<a name="245644002"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/disable%20eta-contraction%20in%20printing/near/245644002" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qiyuan Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/disable.20eta-contraction.20in.20printing.html#245644002">(Jul 12 2021 at 04:31)</a>:</h4>
<p>(deleted)</p>



<a name="245646155"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/disable%20eta-contraction%20in%20printing/near/245646155" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qiyuan Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/disable.20eta-contraction.20in.20printing.html#245646155">(Jul 12 2021 at 05:15)</a>:</h4>
<p>(deleted)</p>



<a name="269063393"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/disable%20eta-contraction%20in%20printing/near/269063393" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qiyuan Xu <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/disable.20eta-contraction.20in.20printing.html#269063393">(Jan 24 2022 at 06:05)</a>:</h4>
<p>Finally, i found the solution when i read the source <code>Set.thy</code>. The eta contraction is disabled by print_translations</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">print_translation</span> <span class="err">‹</span>
 <span class="o">[</span><span class="n">Syntax_Trans.preserve_binder_abs2_tr'</span> <span class="err">\&lt;^</span><span class="n">const_syntax</span><span class="err">&gt;‹</span><span class="n">Ball</span><span class="err">›</span> <span class="err">\&lt;^</span><span class="n">syntax_const</span><span class="err">&gt;‹</span><span class="o">_</span><span class="n">Ball</span><span class="err">›</span><span class="o">,</span>
  <span class="n">Syntax_Trans.preserve_binder_abs2_tr'</span> <span class="err">\&lt;^</span><span class="n">const_syntax</span><span class="err">&gt;‹</span><span class="n">Bex</span><span class="err">›</span> <span class="err">\&lt;^</span><span class="n">syntax_const</span><span class="err">&gt;‹</span><span class="o">_</span><span class="n">Bex</span><span class="err">›</span><span class="o">]</span>
<span class="err">›</span> <span class="err">―</span> <span class="err">‹</span><span class="n">to</span> <span class="n">avoid</span> <span class="n">eta</span><span class="o">-</span><span class="n">contraction</span> <span class="n">of</span> <span class="n">body</span><span class="err">›</span>
</code></pre></div>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>