<html>
<head><meta charset="utf-8"><title>list comprehension · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/list.20comprehension.html">list comprehension</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="271340105"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/list%20comprehension/near/271340105" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/list.20comprehension.html#271340105">(Feb 09 2022 at 20:08)</a>:</h4>
<p>I was trying to define a list using comprehension but got complaints from Isabelle:<br>
<a href="/user_uploads/14278/c58ZfUQl86q5brpOCmUpVcpP/Screenshot-2022-02-09-at-20.01.19.png">Screenshot-2022-02-09-at-20.01.19.png</a> <br>
What I was trying to achieve is to build larger regular expressions with smaller ones recursively:<br>
<a href="/user_uploads/14278/E--rOo1susxIoipBp6yQsV8A/Screenshot-2022-02-09-at-20.03.04.png">Screenshot-2022-02-09-at-20.03.04.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/14278/c58ZfUQl86q5brpOCmUpVcpP/Screenshot-2022-02-09-at-20.01.19.png" title="Screenshot-2022-02-09-at-20.01.19.png"><img src="/user_uploads/14278/c58ZfUQl86q5brpOCmUpVcpP/Screenshot-2022-02-09-at-20.01.19.png"></a></div><div class="message_inline_image"><a href="/user_uploads/14278/E--rOo1susxIoipBp6yQsV8A/Screenshot-2022-02-09-at-20.03.04.png" title="Screenshot-2022-02-09-at-20.03.04.png"><img src="/user_uploads/14278/E--rOo1susxIoipBp6yQsV8A/Screenshot-2022-02-09-at-20.03.04.png"></a></div><p>What am I missing here?<br>
Or is it the case that there is no clean way for doing this, that I have to do zip [0..n] [n..0] and define a convolution-like<br>
recursive function for generation?</p>



<a name="271343849"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/list%20comprehension/near/271343849" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/list.20comprehension.html#271343849">(Feb 09 2022 at 20:38)</a>:</h4>
<p>even on paper I am not sure what this means… (is i&lt;j? how should the r_1 be ordered?)</p>



<a name="271343963"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/list%20comprehension/near/271343963" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/list.20comprehension.html#271343963">(Feb 09 2022 at 20:39)</a>:</h4>
<p>all that to say: yes you need your own functions to define that</p>



<a name="271344085"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/list%20comprehension/near/271344085" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/list.20comprehension.html#271344085">(Feb 09 2022 at 20:40)</a>:</h4>
<p>if you can use a set instead, things are different</p>



<a name="271505124"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/list%20comprehension/near/271505124" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chengsong Tan <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/list.20comprehension.html#271505124">(Feb 10 2022 at 22:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/list.20comprehension/near/271344085">said</a>:</p>
<blockquote>
<p>if you can use a set instead, things are different</p>
</blockquote>
<p>Thank you!<br>
I tried using set, but get the following:<br>
<a href="/user_uploads/14278/fWE-v4QE-i4fDVNUnMn_3QNv/Screenshot-2022-02-10-at-22.29.49.png">Screenshot-2022-02-10-at-22.29.49.png</a> <br>
Any idea why the case and how do I fix this?<br>
<a href="https://stackoverflow.com/questions/67092973/how-to-define-a-function-map-from-one-set-to-another-f-a-b-in-isabelle">https://stackoverflow.com/questions/67092973/how-to-define-a-function-map-from-one-set-to-another-f-a-b-in-isabelle</a><br>
This I found sadly does not help.</p>
<div class="message_inline_image"><a href="/user_uploads/14278/fWE-v4QE-i4fDVNUnMn_3QNv/Screenshot-2022-02-10-at-22.29.49.png" title="Screenshot-2022-02-10-at-22.29.49.png"><img src="/user_uploads/14278/fWE-v4QE-i4fDVNUnMn_3QNv/Screenshot-2022-02-10-at-22.29.49.png"></a></div>



<a name="271544825"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/list%20comprehension/near/271544825" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Maximilian Schaeffeler <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/list.20comprehension.html#271544825">(Feb 11 2022 at 08:37)</a>:</h4>
<p>Hi,</p>
<p>to define a (recursive) function, you have to prove 2 things: completeness+compatibility of patterns and termination. Both are proved automatically by the command "fun".<br>
In your case, the automatic proof does not work, in this case you use the command "function":</p>
<div class="codehilite"><pre><span></span><code>context notes rev_conj_cong[fundef_cong] begin
function (sequential) rexp_enum :: &quot;nat ⇒ rrexpr set&quot; where
&quot;rexp_enum 0 = {}&quot; |
&quot;rexp_enum (Suc 0) = {}&quot; |
&quot;rexp_enum (Suc n) = {(RSEQ r1 r2) | r1 r2 i j.  r1 ∈ rexp_enum i ∧ r2 ∈ rexp_enum j ∧ i + j = n}&quot;
  by pat_completeness auto
termination
  by (relation &quot;measure size&quot;) auto
end
</code></pre></div>
<p>For pattern completeness+comatibility we add <code>(sequential)</code> after <code>function</code> and prove it using <code>by pat_completeness auto</code> (this is quite standard).<br>
For the considerations regarding termination, I refer to <br>
<a href="https://stackoverflow.com/questions/33379349/termination-proof-with-functions-using-set-comprehensions">https://stackoverflow.com/questions/33379349/termination-proof-with-functions-using-set-comprehensions</a><br>
This tackles a very similar definition.<br>
The "functions" tutorial (in Jedit on the upper left: Documentation -&gt; Isabelle Tutorials -&gt; functions) gives you more information about termination proofs.</p>



<hr><p>Last updated: Jul 15 2022 at 23:21 UTC</p>
</html>