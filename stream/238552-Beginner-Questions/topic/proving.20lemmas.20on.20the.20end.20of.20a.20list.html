<html>
<head><meta charset="utf-8"><title>proving lemmas on the end of a list · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html">proving lemmas on the end of a list</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="437410662"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437410662" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ee <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437410662">(May 07 2024 at 09:06)</a>:</h4>
<p>I have functions defined on lists case splitting the regular way "Nil | Cons (h ## t)", but I'd like to prove lemmas on a "t @ [h]" structure(assuming finite length lists)<br>
I tried defining my own inductive hyptohesis but Isablelle wont let me use those, says it's ill-instantiated. <br>
I tried using the regular rev_induct but it doesn't give me what I need.<br>
 I also tried defining a function case splitting from the end by defining a local variable hoping to be able to show extensional equality but that didn't work either.<br>
 Is there any way I can do this w/o just assuming that it holds?<br>
TIA</p>



<a name="437410954"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437410954" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437410954">(May 07 2024 at 09:08)</a>:</h4>
<blockquote>
<p>I tried using the regular rev_induct but it doesn't give me what I need.</p>
</blockquote>
<p>Can you be more precise here?</p>



<a name="437411008"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437411008" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437411008">(May 07 2024 at 09:08)</a>:</h4>
<blockquote>
<p>I tried defining my own inductive hyptohesis but Isablelle wont let me use those, says it's ill-instantiated. </p>
</blockquote>
<p>Without showing it, it is not possible to say what is wrong…</p>



<a name="437418903"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437418903" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ee <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437418903">(May 07 2024 at 09:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list/near/437410954">said</a>:</p>
<blockquote>
<blockquote>
<p>I tried using the regular rev_induct but it doesn't give me what I need.</p>
</blockquote>
<p>Can you be more precise here?</p>
</blockquote>
<p>The inductive hypothesis depends on something I can't prove, as the function has 3 arguments and if I have ' P a b (xs @ [x])', I can't  prove 'P a b xs'(the latter I need to use the inductive hypothesis produced by rev_induct)</p>



<a name="437429891"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437429891" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437429891">(May 07 2024 at 11:14)</a>:</h4>
<p>So what induction principle would you want to have?</p>



<a name="437786011"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437786011" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ee <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437786011">(May 09 2024 at 08:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list/near/437429891">said</a>:</p>
<blockquote>
<p>So what induction principle would you want to have?</p>
</blockquote>
<p>Sorry about the late response. I basically have a function that boils down to</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">fun</span><span class="w"> </span><span class="n">f1</span><span class="o">::</span><span class="w"> </span><span class="s">"'a ⇒ 'a ⇒ 'a list ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="n">ni</span><span class="o">:</span><span class="w"> </span><span class="s">"f1 x y Nil = (x=y)"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">co</span><span class="o">:</span><span class="w"> </span><span class="s">"f1 x y (a#ll) = ((f2 a = x ∧ f1 (f2 a)  y ll) ∨ ((f3 a) = x ∧ f1 (f3 a) y ll))"</span>
<span class="sx">``` and I just want to prove that if I know that this holds for some list of finite length, the "f2 a = x " etc equalities should hold for the elements at the end of the list, but I can't  :upside_down:</span>
</code></pre></div>



<a name="437809599"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437809599" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437809599">(May 09 2024 at 12:15)</a>:</h4>
<p>What are you trying to prove exactly? This is what I understand:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">‹'a ⇒ 'a›</span><span class="w"> </span><span class="kp">where</span>
<span class="s">‹f2 a = undefined›</span>

<span class="k">definition</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">‹'a ⇒ 'a›</span><span class="w"> </span><span class="kp">where</span>
<span class="s">‹f3 a = undefined›</span>

<span class="k">fun</span><span class="w"> </span><span class="n">f1</span><span class="o">::</span><span class="w"> </span><span class="s">"'a ⇒ 'a ⇒ 'a list ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="n">ni</span><span class="o">:</span><span class="w"> </span><span class="s">"f1 x y Nil = (x=y)"</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">co</span><span class="o">:</span><span class="w"> </span><span class="s">"f1 x y (a#ll) = ((f2 a = x ∧ f1 (f2 a)  y ll) ∨ ((f3 a) = x ∧ f1 (f3 a) y ll))"</span>

<span class="kn">lemma</span>
<span class="w"> </span><span class="s">‹f1 x y xs ⟹ xs ≠ [] ⟹ f2 (last xs) = y ∨ f3 (last xs) = y›</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="n">rule</span><span class="o">:</span><span class="w"> </span><span class="n">f1.induct</span><span class="o">)</span>
<span class="w">    </span><span class="n">auto</span>
</code></pre></div>



<a name="437947882"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/proving%20lemmas%20on%20the%20end%20of%20a%20list/near/437947882" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ee <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list.html#437947882">(May 10 2024 at 08:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/proving.20lemmas.20on.20the.20end.20of.20a.20list/near/437809599">said</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w"> </span><span class="s">‹f1 x y xs ⟹ xs ≠ [] ⟹ f2 (last xs) = y ∨ f3 (last xs) = y›</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="n">rule</span><span class="o">:</span><span class="w"> </span><span class="n">f1.induct</span><span class="o">)</span>
<span class="w">    </span><span class="n">auto</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Thank you!! I didn't know I could use three variables to do induction that was the problem <span aria-label="melting face" class="emoji emoji-1fae0" role="img" title="melting face">:melting_face:</span></p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>