<html>
<head><meta charset="utf-8"><title>using/unfolding assms · Beginner Questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/index.html">Beginner Questions</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html">using/unfolding assms</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="432536896"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432536896" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432536896">(Apr 10 2024 at 15:58)</a>:</h4>
<p>Hi, I did this question in previous thread but it got lost. I have an induction proof in which one subgoal (0) is working if i write  only <code>using assms </code>, while the other subgoal (n) is working only for <code>unfolding assms</code>, both do not work if I put the other way. Is there a way I can solve this?</p>



<a name="432616620"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432616620" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432616620">(Apr 11 2024 at 02:15)</a>:</h4>
<p>do you mean</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">assms</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
</code></pre></div>
<p>versus:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">unfolding</span><span class="w"> </span><span class="n">assms</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
</code></pre></div>
<p>If that's the case, then I'm afraid you have to stick to one (probably the former)</p>
<p>otherwise I assume you may be doing something like:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
<span class="k">using</span><span class="n">/unfolding</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">FOO</span>
</code></pre></div>
<p>in that case, you can try:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
<span class="n">subgoal</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="ow">...</span>
<span class="k">unfolding</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="ow">...</span>
</code></pre></div>



<a name="432627127"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432627127" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432627127">(Apr 11 2024 at 04:38)</a>:</h4>
<p><code>using assms(6-) unfolding assms(1-5)</code></p>



<a name="432627146"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432627146" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432627146">(Apr 11 2024 at 04:38)</a>:</h4>
<p><code>using assms</code> and <code>unfolding assms</code> are very different for non definition</p>



<a name="432627230"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432627230" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432627230">(Apr 11 2024 at 04:40)</a>:</h4>
<p>Consider:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">   </span><span class="kp">defines</span><span class="w"> </span><span class="s">"q == f n"</span>
<span class="w">   </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"P n"</span>
<span class="w">   </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q q n"</span>
</code></pre></div>
<p>when doing induction without unfolding the assumptions, you are going to need <code>arbitrary: q</code> otherwise the q is fixed across the subgoals</p>



<a name="432630452"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432630452" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432630452">(Apr 11 2024 at 05:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432616620">said</a>:</p>
<blockquote>
<p>do you mean</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">assms</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
</code></pre></div>
<p>versus:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">unfolding</span><span class="w"> </span><span class="n">assms</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
</code></pre></div>
<p>If that's the case, then I'm afraid you have to stick to one (probably the former)</p>
<p>otherwise I assume you may be doing something like:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
<span class="k">using</span><span class="n">/unfolding</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">FOO</span>
</code></pre></div>
<p>in that case, you can try:</p>
<p><div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="o">)</span>
<span class="n">subgoal</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="ow">...</span>
<span class="k">unfolding</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="ow">...</span>
</code></pre></div><br>
</p>
</blockquote>
<p>This is the case </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="k">using</span><span class="n">/unfolding</span><span class="w"> </span><span class="n">assms</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="n">rule</span><span class="o">:</span><span class="n">loop_o.induct</span><span class="o">)</span>
<span class="w">  </span><span class="n">subgoal</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span>
<span class="w">    </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">    </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">simp</span><span class="o">:</span><span class="w"> </span><span class="n">Let_def</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
</code></pre></div>
<p>So I think I am in the second case you said, right? I tried this but it does not work</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w"> </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="n">rule</span><span class="o">:</span><span class="n">loop_o.induct</span><span class="o">)</span>
<span class="w">  </span><span class="n">subgoal</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span>
<span class="w">    </span><span class="k">unfolding</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">simp</span><span class="o">:</span><span class="w"> </span><span class="n">Let_def</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
</code></pre></div>
<p>Moreover, the case not working (if I understood correctly) is this one </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="s">"ns r = 0  ⟹ loop_o r = r"</span>
</code></pre></div>
<p>so if I write in the assumptions <code> P r</code> it should work, so this subcase actually only needs one assms. But if I write <br>
<code> using assms(1) unfolding assms(2-) </code> then the second case also is looking for an unfolded assms(1) (i can see it in the error message).</p>



<a name="432630767"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432630767" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432630767">(Apr 11 2024 at 05:30)</a>:</h4>
<p>as <span class="user-mention" data-user-id="233198">@Mathias Fleury</span>  said, <code>using</code> and <code>unfolding</code> is very different, especially when you are using it BEFORE your induction</p>
<p>I would say that DO NOT USE THIS:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">unfolding</span><span class="w"> </span><span class="n">assms</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="ow">...</span><span class="o">)</span>
</code></pre></div>
<p>USE THIS:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">assms</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="ow">...</span><span class="o">)</span>
</code></pre></div>
<p>and then fix your proof as needed</p>
<p>(edit: this is assuming your <code>assms</code> are needed in the induction, you can also choose only some of them that are relevant)</p>



<a name="432631454"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432631454" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432631454">(Apr 11 2024 at 05:39)</a>:</h4>
<p>Yes, indeed I noticed that only one <code>assms</code> is really needed and creating the conflict. So it is something even simpler, because now I have  </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kp">assumes</span><span class="w">  </span><span class="s">"..."</span>
<span class="kp">shows</span><span class="w"> </span><span class="s">"..."</span>
<span class="w">  </span><span class="k">using</span><span class="n">/unfolding</span><span class="w"> </span><span class="n">assms</span><span class="o">(</span><span class="n">1</span><span class="o">)</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="n">rule</span><span class="o">:</span><span class="n">loop_o.induct</span><span class="o">)</span>
<span class="w">  </span><span class="n">subgoal</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span>
<span class="w">    </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">    </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">simp</span><span class="o">:</span><span class="w"> </span><span class="n">Let_def</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
</code></pre></div>
<p>As you said, I will use <code>using assms</code> and not <code>unfolding</code>. But I do not understand, how should I fix my proof then? Can't I unfold this only assms only in the second subgoal?</p>



<a name="432631642"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432631642" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432631642">(Apr 11 2024 at 05:41)</a>:</h4>
<p>it depends on what you need in the second goal, probably it should be</p>
<p><code>unfolding ... apply (...)</code></p>
<p>you will need to pick the correct name to <code>unfold</code> if it is from the inductive hypothesis (or use a structured proof)</p>



<a name="432633346"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432633346" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432633346">(Apr 11 2024 at 06:03)</a>:</h4>
<p>I tried writing <code>unfolding ... apply (...)</code> and I get a failed subgoal </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">1</span><span class="w"> </span><span class="n">subgoal</span><span class="o">):</span>
<span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="n">&lt;</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="o">(</span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">)</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i2</span>
<span class="w">     </span><span class="n">≤</span><span class="w"> </span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">)</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">     </span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">loop_o</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">))</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i2</span>
<span class="w">     </span><span class="n">≤</span><span class="w"> </span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">loop_o</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">))</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i1</span><span class="o">)</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="n">sl</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i2</span><span class="w"> </span><span class="n">≤</span><span class="w"> </span><span class="n">sl</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">loop_o</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">))</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i2</span>
<span class="w">    </span><span class="n">≤</span><span class="w"> </span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">loop_o</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">))</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">i1</span>
</code></pre></div>
<p>The problem is the mismatch between <code>sl r ! i2 ≤ sl r ! i1</code> and <code>sl (assign_seats r) ! i2 ≤ sl (assign_seats r) ! i1</code>, right? But with a lemma <code>sl r ! i2 ≤ sl r ! i1 ⟹ sl (assign_seats r) ! i2 ≤ sl (assign_seats r) ! i1</code> it should work?</p>



<a name="432633598"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432633598" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432633598">(Apr 11 2024 at 06:05)</a>:</h4>
<p>I don't really know your problem at hand, so I don't know the answer... but you should try it I suppose..</p>
<p>or maybe just use sledgehammer to see if it finds anything?</p>
<p>edit: your proposed lemma looks reasonable for solving the goal (not sure if it is true for your definition)</p>



<a name="432634371"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432634371" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432634371">(Apr 11 2024 at 06:13)</a>:</h4>
<p>I have the lemma, it is</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">a_s_c</span><span class="o">:</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w"> </span><span class="s">"..."</span>
<span class="kp">assumes</span>
<span class="w">  </span><span class="n">/*</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">*/</span>
<span class="w">  </span><span class="s">"sl rec ! i1 ≥ sl rec ! i2"</span>
<span class="kp">shows</span><span class="w"> </span><span class="s">"sl (assign_seats rec) ! i1 ≥</span>
<span class="s">       sl (assign_seats rec) ! i2"</span>
</code></pre></div>
<p>To use this lemma in my induction proof, I have to write add <code>other assms</code> in my first theorem, right?</p>



<a name="432634473"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432634473" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432634473">(Apr 11 2024 at 06:14)</a>:</h4>
<p>it depends on what they are... you should include any necessary ones, yes, but anything you can prove within the context of your previously mentioned subgoal, no</p>



<a name="432635868"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432635868" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432635868">(Apr 11 2024 at 06:28)</a>:</h4>
<p>I would like to remind that:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">f</span>
<span class="w">   </span><span class="kp">defines</span><span class="w"> </span><span class="s">"q == f n"</span>
<span class="w">   </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"P n"</span>
<span class="w">   </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q q n"</span>
<span class="w">  </span><span class="kt">thm</span><span class="w"> </span><span class="n">assms</span><span class="o">(</span><span class="n">1</span><span class="o">)</span>
<span class="c">(*q = f n*)</span>
</code></pre></div>



<a name="432636199"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432636199" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432636199">(Apr 11 2024 at 06:31)</a>:</h4>
<p>assms(1) is not the first assumption</p>



<a name="432636972"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432636972" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432636972">(Apr 11 2024 at 06:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233198">Mathias Fleury</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432636199">said</a>:</p>
<blockquote>
<p>assms(1) is not the first assumption</p>
</blockquote>
<p>I know, I have no defines</p>



<a name="432641819"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432641819" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432641819">(Apr 11 2024 at 07:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432634473">said</a>:</p>
<blockquote>
<p>it depends on what they are... you should include any necessary ones, yes, but anything you can prove within the context of your previously mentioned subgoal, no</p>
</blockquote>
<p>I added lemma and assumptions and I have </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="n">&lt;</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="ow">...</span><span class="w"> </span><span class="n">⟹</span>
<span class="w">    </span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">loop_o</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">))</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">(</span><span class="n">p</span><span class="w"> </span><span class="n">r</span><span class="o">)</span><span class="w"> </span><span class="n">party2</span>
<span class="w">    </span><span class="n">≤</span><span class="w"> </span><span class="n">sl</span><span class="w"> </span><span class="o">(</span><span class="n">loop_o</span><span class="w"> </span><span class="o">(</span><span class="n">assign_seats</span><span class="w"> </span><span class="n">r</span><span class="o">))</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">(</span><span class="n">p</span><span class="w"> </span><span class="n">r</span><span class="o">)</span><span class="w"> </span><span class="n">party1</span>
</code></pre></div>
<p>Why (p r) is not written as (p (assign_seats r))? <br>
Adding assms <code> p rec = p (assign_seats rec)</code> as <span class="user-mention" data-user-id="233198">@Mathias Fleury</span>  suggested actually makes things worse because then my other assumptions start to unfold "too much".</p>
<p>P.S: trying to cut the problem at the beginning: if I know that this parameter is never changing, putting it outside of this structure but just as a normal parameter should make the lemma work?</p>



<a name="432644029"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432644029" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432644029">(Apr 11 2024 at 07:33)</a>:</h4>
<p>Update: I put this parameter outside the structure, having now </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kp">shows</span><span class="w"> </span><span class="s">"sl (loop_o p rec) ! i1 ≥</span>
<span class="s">       sl (loop_o p rec) ! i2"</span>
</code></pre></div>
<p>Using the rule loop_o.induct,  how do I specify that the induction should be only on <code>rec</code> and <code>p</code> should be fixed?</p>



<a name="432651692"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432651692" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432651692">(Apr 11 2024 at 08:23)</a>:</h4>
<p>Update 2 (I am really trying): The first case, <code>ns r &gt; 0</code> seems to work and I am trying the other case <code>ns r = 0</code> by hand.</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="n">rule</span><span class="o">:</span><span class="n">loop_o.induct</span><span class="o">)</span>
<span class="w">  </span><span class="n">subgoal</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">parties</span>
<span class="w">    </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">simp</span><span class="o">:</span><span class="w"> </span><span class="n">Let_def</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="n">subgoal</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">parties</span>
<span class="w">    </span><span class="k">proof</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"ns r = 0"</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">    </span><span class="k">done</span>
</code></pre></div>
<p>Why I cannot retrieve "ns r = 0" if it is the subgoal I am in?</p>



<a name="432662516"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432662516" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432662516">(Apr 11 2024 at 09:23)</a>:</h4>
<p>sorry it is very hard to see what your problem is without the code or a minimal example....</p>
<p>what do you mean cannot retriev <code>ns r = 0</code>?</p>



<a name="432665549"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432665549" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432665549">(Apr 11 2024 at 09:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432662516">said</a>:</p>
<blockquote>
<p>sorry it is very hard to see what your problem is without the code or a minimal example....</p>
<p>what do you mean cannot retriev <code>ns r = 0</code>?</p>
</blockquote>
<p>You are right, I am sorry. This is the function </p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">function</span><span class="w"> </span><span class="n">loop_o</span><span class="w"> </span><span class="o">::</span>
<span class="w">  </span><span class="s">"'b list ⇒ ('a::linorder, 'b) Divisor_Module ⇒ ('a::linorder, 'b) Divisor_Module"</span>
<span class="w">  </span><span class="kp">where</span>
<span class="w">  </span><span class="s">"ns r &gt; 0 ⟹ loop_o p r = loop_o p (assign_seats p r)"</span><span class="w"> </span><span class="o">|</span>
<span class="w">  </span><span class="s">"ns r = 0  ⟹ loop_o p r = r"</span>
</code></pre></div>
<p>The first subgoal is working, the second not. I try to do it by hand</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">rec</span><span class="w"> </span><span class="n">rule</span><span class="o">:</span><span class="n">loop_o.induct</span><span class="o">)</span>
<span class="w">  </span><span class="n">subgoal</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">parties</span><span class="w"> </span><span class="o">(</span><span class="n">working</span><span class="o">)</span>
<span class="w">    </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">auto</span><span class="w"> </span><span class="n">simp</span><span class="o">:</span><span class="w"> </span><span class="n">Let_def</span><span class="w"> </span><span class="n">split</span><span class="o">:</span><span class="w"> </span><span class="n">if_splits</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">del</span><span class="o">:</span><span class="w"> </span><span class="n">assign_seats.simps</span><span class="o">)</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="n">subgoal</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">parties</span><span class="w"> </span><span class="n">&lt;</span><span class="o">----</span>
<span class="w">    </span><span class="k">proof</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"ns r = 0"</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">    </span><span class="k">done</span>
</code></pre></div>
<p>I cannot <code>have "ns r = 0"</code> but why if I am in this subgoal? Is it something with variables that I am forgetting?<br>
Because when I put the cursor on the subgoal I see</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">1</span><span class="w"> </span><span class="n">subgoal</span><span class="o">):</span>
<span class="w"> </span><span class="n">1.</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="w"> </span><span class="n">⟹</span><span class="w"> </span><span class="ow">....</span>
</code></pre></div>
<p>I hope I was clear</p>



<a name="432668972"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432668972" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432668972">(Apr 11 2024 at 09:58)</a>:</h4>
<p>PS: if I was not clear, here's the code</p>
<p><a href="/user_uploads/14278/Ln7h9-6Bt4SnysTEtiJuIbiQ/Votes.thy">Votes.thy</a></p>



<a name="432679427"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432679427" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432679427">(Apr 11 2024 at 11:02)</a>:</h4>
<p>you should write <code>assume "ns r = 0" ... show ...</code> if you want to use a structured proof</p>



<a name="432681690"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432681690" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432681690">(Apr 11 2024 at 11:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432679427">said</a>:</p>
<blockquote>
<p>you should write <code>assume "ns r = 0" ... show ...</code> if you want to use a structured proof</p>
</blockquote>
<p>Thank you, I wrote it but I understood that...</p>



<a name="432685326"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432685326" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432685326">(Apr 11 2024 at 11:38)</a>:</h4>
<p>... the problem boils down to: one subgoal needs <code>assms</code> to work, the other subgoal does not work with <code>assms</code> (but it does without). I can not tell the second case not to consider the assumption? It's weird that there is no syntax to solve this</p>



<a name="432708415"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432708415" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432708415">(Apr 11 2024 at 13:40)</a>:</h4>
<p>You can skip assumptions</p>



<a name="432708475"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432708475" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Fleury <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432708475">(Apr 11 2024 at 13:40)</a>:</h4>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="n">subgoal</span><span class="w"> </span><span class="n">premises</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="kp">for</span><span class="w"> </span><span class="n">r</span>
<span class="w">   </span><span class="k">using</span><span class="w"> </span><span class="n">p</span><span class="o">(</span><span class="n">1</span><span class="o">,</span><span class="n">3</span><span class="o">,</span><span class="n">5</span><span class="o">,</span><span class="n">19</span><span class="o">)</span><span class="w"> </span><span class="ow">...</span>
</code></pre></div>
<p>(for Isar this is obvious)</p>



<a name="432709900"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432709900" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432709900">(Apr 11 2024 at 13:48)</a>:</h4>
<p>I finally took a look at your Votes.thy the problem is this:</p>
<p>currently it does not have any <code>assms</code> before <code>apply (induction ...)</code></p>
<p>I recommend that you look <em>very</em> carefully at what goals you get with and without <code>using assms</code></p>



<a name="432711151"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432711151" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432711151">(Apr 11 2024 at 13:54)</a>:</h4>
<p>to make sure you understand the difference, perhaps look at this simpler example:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">ls_induction_1</span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"P xs"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q (xs::'a list)"</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">xs</span><span class="o">)</span>
<span class="w">  </span><span class="gr">oops</span>

<span class="kn">lemma</span><span class="w"> </span><span class="n">ls_induction_2</span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"P xs"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q (xs::'a list)"</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">xs</span><span class="o">)</span>
<span class="w">  </span><span class="gr">oops</span>
</code></pre></div>
<p>have a look at the difference between the two goals you get</p>
<p>in <code>ls_induction_1</code>, the <code>P xs</code> assumption will not help you at all in the induction because the <code>xs</code> is not quantified (see the parallel with your theorem)</p>
<p>in <code>ls_induction_2</code>, you get <code>P (x # xs)</code> as an assumption, but in return you need to prove <code>P</code> for an appropriate list in the IH</p>



<a name="432711852"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432711852" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432711852">(Apr 11 2024 at 13:57)</a>:</h4>
<p>in other words, these are two different inductions that you are trying to do in your proof... it's not as simple as "one works with <code>using assms</code>" and one doesn't -- you need to know which induction you're trying to do</p>



<a name="432712374"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432712374" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432712374">(Apr 11 2024 at 13:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432711852">said</a>:</p>
<blockquote>
<p>in other words, these are two different inductions that you are trying to do in your proof... it's not as simple as "one works with <code>using assms</code>" and one doesn't -- you need to know which induction you're trying to do</p>
</blockquote>
<p>Your example was clear, I think I understood. So how should I proceed?</p>



<a name="432712958"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432712958" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432712958">(Apr 11 2024 at 14:02)</a>:</h4>
<p>well... you need to know what inductive argument you are making here....</p>
<p>at minimum, I believe every assumption that mentions <code>parties</code> and <code>rec</code> should be inside the induction i.e., you should <code>using assms(...)</code> where (...) refers to the assumptions involving those two</p>



<a name="432713422"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432713422" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432713422">(Apr 11 2024 at 14:04)</a>:</h4>
<p>a third possibility which I should have mentioned above:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="kn">lemma</span><span class="w"> </span><span class="n">ls_induction_3</span><span class="o">:</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"⋀xs. P xs"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w"> </span><span class="s">"Q (xs::'a list)"</span>
<span class="w">  </span><span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="n">xs</span><span class="o">)</span>
<span class="w">  </span><span class="gr">oops</span>
</code></pre></div>
<p>this is another way you might need to setup your lemma ... do you want to assume <code>P</code> FORALL <code>xs</code> or only the <code>xs</code> in the conclusion?</p>



<a name="432715215"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432715215" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432715215">(Apr 11 2024 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432712958">said</a>:</p>
<blockquote>
<p>well... you need to know what inductive argument you are making here....</p>
<p>at minimum, I believe every assumption that mentions <code>parties</code> and <code>rec</code> should be inside the induction i.e., you should <code>using assms(...)</code> where (...) refers to the assumptions involving those two</p>
</blockquote>
<p>Well, my idea was induction over <code>rec</code>, also I I thought it was needed one assumption (the one in the file I uploaded here), just because it was giving me "no subgoals", but maybe I should add also all the assumptions from the previous lemma that I want to use during the induction?</p>



<a name="432715830"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432715830" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432715830">(Apr 11 2024 at 14:15)</a>:</h4>
<p>well yes, but as you can see from <code>ls_induction_2</code> adding more assumptions to the induction means that you also need to <em>prove</em> more things before you can apply an induction hypothesis</p>



<a name="432718550"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432718550" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432718550">(Apr 11 2024 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432715830">said</a>:</p>
<blockquote>
<p>well yes, but as you can see from <code>ls_induction_2</code> adding more assumptions to the induction means that you also need to <em>prove</em> more things before you can apply an induction hypothesis</p>
</blockquote>
<p>Of course, so always referencing <code>ls_induction_2</code>, knowing <code>P(x # xs)</code> I should prove <code>P(x)</code>, so I get as implication <code>Q(x)</code> and therefore  <code> Q (x # xs)</code></p>



<a name="432718848"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432718848" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432718848">(Apr 11 2024 at 14:28)</a>:</h4>
<p>yes, but you need to figure out the analogous argument for the result you want here</p>



<a name="432722288"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432722288" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432722288">(Apr 11 2024 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432718848">said</a>:</p>
<blockquote>
<p>yes, but you need to figure out the analogous argument for the result you want here</p>
</blockquote>
<p>Well, I have a first lemma that is proving one "time" case <code>A(x)  ⟹ P(x)</code>. Then I want to prove a second lemma that is a loop, so maybe something like <code>A (... ( A (x) ) ) ⟹ P(x)</code>? And at this point maybe I need a quantifier on the first lemma, like <code>∀x. A(x)  ⟹ P(x)</code>? I don't know if what I wrote makes sense</p>



<a name="432722974"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432722974" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432722974">(Apr 11 2024 at 14:46)</a>:</h4>
<p>your first lemma is already implicitly quantified over <code>x</code></p>



<a name="432723039"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432723039" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432723039">(Apr 11 2024 at 14:46)</a>:</h4>
<p>what I mean is that for the second lemma, you need to figure out what the induction argument looks like</p>



<a name="432724625"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432724625" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432724625">(Apr 11 2024 at 14:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432723039">said</a>:</p>
<blockquote>
<p>what I mean is that for the second lemma, you need to figure out what the induction argument looks like</p>
</blockquote>
<p>Well, I think it makes sense to be  <code>ns r</code> because it is a nat constantly decreasing or maybe also the list of parties but I think it would be harder</p>



<a name="432725875"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432725875" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432725875">(Apr 11 2024 at 14:58)</a>:</h4>
<p>with <code>loop_o.induct</code> you're using the induction principle for <code>loop_o</code></p>
<p>it's a similar idea: you need to figure out what assumptions you can/cannot add to the induction for it to go through</p>
<p>it's always a fine balance between finding just the right induction</p>



<a name="432726603"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432726603" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432726603">(Apr 11 2024 at 15:01)</a>:</h4>
<p>one thing you can try (not sure it works), do:</p>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">assms</span>
<span class="kp">apply</span><span class="w"> </span><span class="o">(</span><span class="n">induction</span><span class="w"> </span><span class="ow">....</span><span class="o">)</span>
</code></pre></div>
<p>in the case that fails, figure out what goes wrong when you try to apply the induction hypothesis</p>



<a name="432729180"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432729180" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432729180">(Apr 11 2024 at 15:13)</a>:</h4>
<p>and one more comment: if you want to try this above, I recommend exploring the proof in a structured way instead of using an <code>apply</code>-style proof... it'll be much clearer where the proof is going wrong</p>



<a name="432736645"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432736645" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Salvatore Francesco Rossetta <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432736645">(Apr 11 2024 at 15:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234226">Yong Kiam</span> <a href="#narrow/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms/near/432729180">said</a>:</p>
<blockquote>
<p>and one more comment: if you want to try this above, I recommend exploring the proof in a structured way instead of using an <code>apply</code>-style proof... it'll be much clearer where the proof is going wrong</p>
</blockquote>
<p>Yes, I just thought that being the loop a simple n times application of a function that has a property, then it would be easy to use the induction within the function itself.<br>
So since my induction argument is decreasing, is there any way isabelle allows me to induct "in reverse"?</p>



<a name="432812721"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner%20Questions/topic/using/unfolding%20assms/near/432812721" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yong Kiam <a href="http://isabelle.systems/zulip-archive/stream/238552-Beginner-Questions/topic/using.2Funfolding.20assms.html#432812721">(Apr 12 2024 at 01:18)</a>:</h4>
<p>I'm not sure what you mean here, but this just sounds like regular induction to me... I think <code>loop_o.induct</code> is what you want here (which you're already using)</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>