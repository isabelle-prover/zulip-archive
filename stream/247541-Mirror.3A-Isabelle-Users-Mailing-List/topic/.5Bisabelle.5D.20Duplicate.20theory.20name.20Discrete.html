<html>
<head><meta charset="utf-8"><title>[isabelle] Duplicate theory name Discrete · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html">[isabelle] Duplicate theory name Discrete</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="482033063"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482033063" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482033063">(Nov 12 2024 at 20:25)</a>:</h4>
<p>From: Paolo Crisafulli &lt;<a href="mailto:paolo.crisafulli@irt-systemx.fr">paolo.crisafulli@irt-systemx.fr</a>&gt;<br>
Hi all,</p>
<p>I have the following error message in a thy file which uses both <br>
sessions Ordinary_Differential_Equations and HOL-CSPM:</p>
<p>exception THEORY raised (line 378 of "context.ML"):<br>
   Duplicate theory name<br>
   {..., Main, HOLCF.Porder, HOLCF.Pcpo, HOLCF.Cont, Discrete}<br>
   {..., HOL.Transcendental, HOL.Complex, HOL.MacLaurin, Complex_Main, <br>
Discrete}</p>
<p>A simple setup to reproduce the error is with the following theory:</p>
<p>theory MyTheory<br>
   imports<br>
     "HOLCF.Discrete"<br>
     "HOL-Library.Library"<br>
begin<br>
end</p>
<p>and a ROOTS file such as:</p>
<p>/path/to/Isabelle2024/src/HOL</p>
<p>Any idea on how to fix this?</p>
<p>Thank you very much in advance.</p>
<p>Paolo</p>



<a name="482118091"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482118091" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482118091">(Nov 13 2024 at 08:46)</a>:</h4>
<p>From: Fabian Huch &lt;<a href="mailto:huch@in.tum.de">huch@in.tum.de</a>&gt;<br>
You cannot have two theories with the same base name in an import path <br>
unfortunately (a limitation coming from a time when theories were <br>
considered globally unique entities).</p>
<p>Currently, the only option (that I am aware of) is is to rename one of <br>
the theories.</p>
<p>Fabian</p>
<p>On 11/12/24 21:25, Paolo Crisafulli wrote:</p>
<blockquote>
<p>Hi all,</p>
<p>I have the following error message in a thy file which uses both <br>
sessions Ordinary_Differential_Equations and HOL-CSPM:</p>
<p>exception THEORY raised (line 378 of "context.ML"):<br>
  Duplicate theory name<br>
  {..., Main, HOLCF.Porder, HOLCF.Pcpo, HOLCF.Cont, Discrete}<br>
  {..., HOL.Transcendental, HOL.Complex, HOL.MacLaurin, Complex_Main, <br>
Discrete}</p>
<p>A simple setup to reproduce the error is with the following theory:</p>
<p>theory MyTheory<br>
  imports<br>
    "HOLCF.Discrete"<br>
    "HOL-Library.Library"<br>
begin<br>
end</p>
<p>and a ROOTS file such as:</p>
<p>/path/to/Isabelle2024/src/HOL</p>
<p>Any idea on how to fix this?</p>
<p>Thank you very much in advance.</p>
<p>Paolo</p>
</blockquote>



<a name="482132159"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482132159" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482132159">(Nov 13 2024 at 09:58)</a>:</h4>
<p>From: bpuyobro &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Le 2024-11-13 09:46, Fabian Huch a écrit :</p>
<blockquote>
<p>You cannot have two theories with the same base name in an import path <br>
unfortunately (a limitation coming from a time when theories were <br>
considered globally unique entities).</p>
<p>Currently, the only option (that I am aware of) is is to rename one of <br>
the theories.</p>
<p>Fabian</p>
<p>On 11/12/24 21:25, Paolo Crisafulli wrote:</p>
<blockquote>
<p>Hi all,</p>
<p>I have the following error message in a thy file which uses both <br>
sessions Ordinary_Differential_Equations and HOL-CSPM:</p>
<p>exception THEORY raised (line 378 of "context.ML"):<br>
  Duplicate theory name<br>
  {..., Main, HOLCF.Porder, HOLCF.Pcpo, HOLCF.Cont, Discrete}<br>
  {..., HOL.Transcendental, HOL.Complex, HOL.MacLaurin, Complex_Main, <br>
Discrete}</p>
<p>A simple setup to reproduce the error is with the following theory:</p>
<p>theory MyTheory<br>
  imports<br>
    "HOLCF.Discrete"<br>
    "HOL-Library.Library"<br>
begin<br>
end</p>
<p>and a ROOTS file such as:</p>
<p>/path/to/Isabelle2024/src/HOL</p>
<p>Any idea on how to fix this?</p>
<p>Thank you very much in advance.</p>
<p>Paolo</p>
<p>Hi, I'm currently working with Paolo and we share the issue.</p>
</blockquote>
</blockquote>
<p>Is there a way of renaming a theory during the import of said theory <br>
(using long names maybe?) so that the solution of the issue is carried <br>
in the theory file or should we just bruteforce it by renaming said <br>
theory "by hand" in the HOL/Library folder (we would like to avoid this) <br>
?</p>
<p>Regards,<br>
Benjamin</p>



<a name="482154776"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482154776" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482154776">(Nov 13 2024 at 11:58)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 13/11/2024 09:46, Fabian Huch wrote:</p>
<blockquote>
<p>You cannot have two theories with the same base name in an import path <br>
unfortunately (a limitation coming from a time when theories were considered <br>
globally unique entities).</p>
</blockquote>
<p>Note that theory names are still globally unique, although the name is usually <br>
qualified by the session name, so clashes don't occur in the session context.</p>
<p>There is an additional restriction for theories that are formally merged: base <br>
names need to be unique, because thy are used for the standard name space <br>
policy. One happy day, when the name space policies are changed --- after a <br>
lot of hard work --- this restriction will disappear.</p>
<blockquote>
<p>Currently, the only option (that I am aware of) is is to rename one of the <br>
theories.</p>
</blockquote>
<p>Yes, indeed.</p>
<p>Dirty tricks should be avoided. The planet needs to be kept clean and alive.</p>
<p>Although HOL-Library.Discrete could just as well be called something else, <br>
e.g. HOL-Librrary.Discrete_Funs, it is probably easier to clean-up HOLCF a <br>
little bit.</p>
<p>Here is historic evidence for the introduction of this theory in 1997: <br>
<a href="https://isabelle-dev.sketis.net/rISABELLEc2508f4ab739">https://isabelle-dev.sketis.net/rISABELLEc2508f4ab739</a></p>
<p>That is interesting on its own account: it shows how theory construction had <br>
to alternate between .thy files (for specifications) and .ML files (for <br>
proofs) a few decades ago.</p>
<p>Today there is very little motivation of have these few specifications and <br>
proofs in the separate theory HOLCF.Discrete. The material could be moved to <br>
the start of its descendent HOLCF.Lift (and maybe separated by 'section' <br>
headings).</p>
<p>Makarius</p>



<a name="482165139"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482165139" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482165139">(Nov 13 2024 at 12:51)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
Hello,</p>
<p>it is somewhat rare to include all of HOL-Library in a theory. Usually <br>
you only import the bits of it that you actually need.</p>
<p>If your work does not depend on HOL-Library.Discrete then I would <br>
recommend to simply import the bits of HOL-Library that you explicitly need.</p>
<p>Of course we should try to make sure that at least within the HOL part <br>
of the Isabelle distribution, no duplicate theory names occur. And in <br>
the future, in the AFP as well.</p>
<p>Manuel</p>
<p>On 13/11/2024 10:48, bpuyobro (via cl-isabelle-users Mailing List) wrote:</p>
<blockquote>
<p>Le 2024-11-13 09:46, Fabian Huch a écrit :</p>
<blockquote>
<p>You cannot have two theories with the same base name in an import <br>
path unfortunately (a limitation coming from a time when theories <br>
were considered globally unique entities).</p>
<p>Currently, the only option (that I am aware of) is is to rename one <br>
of the theories.</p>
<p>Fabian</p>
<p>On 11/12/24 21:25, Paolo Crisafulli wrote:</p>
<blockquote>
<p>Hi all,</p>
<p>I have the following error message in a thy file which uses both <br>
sessions Ordinary_Differential_Equations and HOL-CSPM:</p>
<p>exception THEORY raised (line 378 of "context.ML"):<br>
  Duplicate theory name<br>
  {..., Main, HOLCF.Porder, HOLCF.Pcpo, HOLCF.Cont, Discrete}<br>
  {..., HOL.Transcendental, HOL.Complex, HOL.MacLaurin, <br>
Complex_Main, Discrete}</p>
<p>A simple setup to reproduce the error is with the following theory:</p>
<p>theory MyTheory<br>
  imports<br>
    "HOLCF.Discrete"<br>
    "HOL-Library.Library"<br>
begin<br>
end</p>
<p>and a ROOTS file such as:</p>
<p>/path/to/Isabelle2024/src/HOL</p>
<p>Any idea on how to fix this?</p>
<p>Thank you very much in advance.</p>
<p>Paolo</p>
<p>Hi, I'm currently working with Paolo and we share the issue.</p>
</blockquote>
</blockquote>
<p>Is there a way of renaming a theory during the import of said theory <br>
(using long names maybe?) so that the solution of the issue is carried <br>
in the theory file or should we just bruteforce it by renaming said <br>
theory "by hand" in the HOL/Library folder (we would like to avoid <br>
this) ?</p>
<p>Regards,<br>
Benjamin</p>
</blockquote>



<a name="482165732"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482165732" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482165732">(Nov 13 2024 at 12:54)</a>:</h4>
<p>From: Fabian Huch &lt;<a href="mailto:huch@in.tum.de">huch@in.tum.de</a>&gt;</p>
<p>On 11/13/24 11:03, Manuel Eberl wrote:</p>
<blockquote>
<p>Of course we should try to make sure that at least within the HOL part <br>
of the Isabelle distribution, no duplicate theory names occur. And in <br>
the future, in the AFP as well.</p>
</blockquote>
<p>Note that the AFP submission checker explicitly warns of possible clashes.</p>
<p>Fabian</p>



<a name="482188741"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482188741" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482188741">(Nov 13 2024 at 14:46)</a>:</h4>
<p>From: Paolo Crisafulli &lt;<a href="mailto:paolo.crisafulli@irt-systemx.fr">paolo.crisafulli@irt-systemx.fr</a>&gt;<br>
Thank you for your responses, but does this mean that we should wait for <br>
the next Isabelle release, as both HOL-Library and HOLCSP are part of it?</p>
<p>Is there a practical solution to allow us to submit our theories to AFP <br>
before that?</p>
<p>(For the record, we can't apply this advice:</p>
<blockquote>
<p>If your work does not depend on HOL-Library.Discrete then I would <br>
recommend to simply import the bits of HOL-Library that you explicitly need.</p>
</blockquote>
<p>We don't import anything directly from both HOL-Library or HOLCF, these <br>
are transitive dependencies of HOL-CSPM and <br>
Ordinary_Differential_Equations.)</p>
<p>Thank you all in advance for your help.</p>
<p>Best,</p>
<p>Paolo</p>
<p>On 13/11/2024 12:57, Makarius wrote:</p>
<blockquote>
<p>On 13/11/2024 09:46, Fabian Huch wrote:</p>
<blockquote>
<p>You cannot have two theories with the same base name in an import path<br>
unfortunately (a limitation coming from a time when theories were considered<br>
globally unique entities).<br>
Note that theory names are still globally unique, although the name is usually<br>
qualified by the session name, so clashes don't occur in the session context.</p>
</blockquote>
<p>There is an additional restriction for theories that are formally merged: base<br>
names need to be unique, because thy are used for the standard name space<br>
policy. One happy day, when the name space policies are changed --- after a<br>
lot of hard work --- this restriction will disappear.</p>
<blockquote>
<p>Currently, the only option (that I am aware of) is is to rename one of the<br>
theories.<br>
Yes, indeed.</p>
</blockquote>
<p>Dirty tricks should be avoided. The planet needs to be kept clean and alive.</p>
<p>Although HOL-Library.Discrete could just as well be called something else,<br>
e.g. HOL-Librrary.Discrete_Funs, it is probably easier to clean-up HOLCF a<br>
little bit.</p>
<p>Here is historic evidence for the introduction of this theory in 1997:<br>
<a href="https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94">https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94</a></p>
<p>That is interesting on its own account: it shows how theory construction had<br>
to alternate between .thy files (for specifications) and .ML files (for<br>
proofs) a few decades ago.</p>
<p>Today there is very little motivation of have these few specifications and<br>
proofs in the separate theory HOLCF.Discrete. The material could be moved to<br>
the start of its descendent HOLCF.Lift (and maybe separated by 'section'<br>
headings).</p>
<p>Makarius</p>
</blockquote>



<a name="482191906"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482191906" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482191906">(Nov 13 2024 at 15:00)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;</p>
<blockquote>
<p>We don't import anything directly from both HOL-Library or HOLCF, <br>
these are transitive dependencies of HOL-CSPM and <br>
Ordinary_Differential_Equations.) <br>
If none of them actually need HOL-Library.Discrete one could change <br>
those entries to simply not import it.</p>
</blockquote>
<p>Other than that, the best option would probably to rename <br>
HOL-Library.Discrete. In the long run, that is the only sensible option <br>
anyway.</p>
<blockquote>
<p>Is there a practical solution to allow us to submit our theories to <br>
AFP before that? <br>
Once the issue has been taken care of in afp-devel you can submit your <br>
entry to afp-devel (<a href="https://devel.isa-afp.org/submission/">https://devel.isa-afp.org/submission/</a>). It will <br>
however only appear in the official release version of the AFP after the <br>
next Isabelle release (some time in Q1 of 2025, if I recall correctly).</p>
</blockquote>
<p>I don't think there is a sensible way to submit your entry to the <br>
"regular" AFP before then.</p>
<p>Cheers,</p>
<p>Manuel</p>
<p>On 13/11/2024 15:45, Paolo Crisafulli wrote:</p>
<blockquote>
<p>Thank you for your responses, but does this mean that we should wait <br>
for the next Isabelle release, as both HOL-Library and HOLCSP are part <br>
of it?</p>
<p>Is there a practical solution to allow us to submit our theories to <br>
AFP before that?</p>
<p>(For the record, we can't apply this advice:</p>
<blockquote>
<p>If your work does not depend on HOL-Library.Discrete then I would <br>
recommend to simply import the bits of HOL-Library that you explicitly <br>
need.</p>
</blockquote>
<p>We don't import anything directly from both HOL-Library or HOLCF, <br>
these are transitive dependencies of HOL-CSPM and <br>
Ordinary_Differential_Equations.)</p>
<p>Thank you all in advance for your help.</p>
<p>Best,</p>
<p>Paolo</p>
<p>On 13/11/2024 12:57, Makarius wrote:</p>
<blockquote>
<p>On 13/11/2024 09:46, Fabian Huch wrote:</p>
<blockquote>
<p>You cannot have two theories with the same base name in an import path<br>
unfortunately (a limitation coming from a time when theories were <br>
considered<br>
globally unique entities).<br>
Note that theory names are still globally unique, although the name <br>
is usually<br>
qualified by the session name, so clashes don't occur in the session <br>
context.</p>
</blockquote>
<p>There is an additional restriction for theories that are formally <br>
merged: base<br>
names need to be unique, because thy are used for the standard name <br>
space<br>
policy. One happy day, when the name space policies are changed --- <br>
after a<br>
lot of hard work --- this restriction will disappear.</p>
<blockquote>
<p>Currently, the only option (that I am aware of) is is to rename one <br>
of the<br>
theories.<br>
Yes, indeed.</p>
</blockquote>
<p>Dirty tricks should be avoided. The planet needs to be kept clean and <br>
alive.</p>
<p>Although HOL-Library.Discrete could just as well be called something <br>
else,<br>
e.g. HOL-Librrary.Discrete_Funs, it is probably easier to clean-up <br>
HOLCF a<br>
little bit.</p>
<p>Here is historic evidence for the introduction of this theory in 1997:<br>
<a href="https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94">https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94</a> </p>
<p>That is interesting on its own account: it shows how theory <br>
construction had<br>
to alternate between .thy files (for specifications) and .ML files (for<br>
proofs) a few decades ago.</p>
<p>Today there is very little motivation of have these few <br>
specifications and<br>
proofs in the separate theory HOLCF.Discrete. The material could be <br>
moved to<br>
the start of its descendent HOLCF.Lift (and maybe separated by 'section'<br>
headings).</p>
<p>Makarius</p>
</blockquote>
</blockquote>



<a name="482227802"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482227802" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482227802">(Nov 13 2024 at 17:45)</a>:</h4>
<p>From: Paolo Crisafulli &lt;<a href="mailto:paolo.crisafulli@irt-systemx.fr">paolo.crisafulli@irt-systemx.fr</a>&gt;<br>
Thank you for you answer.</p>
<p>HOL-Library.Discrete is used by HOL-Analysis (in Summation_Tests), fully <br>
imported by Ordinary_Differential_Equations.Linear_ODE, through <br>
Bounded_Linear_Operator.</p>
<p>On the other hand, I have renamed HOL-Library.Discrete to LDiscrete (not <br>
a great name, just testing), and it only requires a reasonable effort to <br>
propagate the change:</p>
<p>./HOL/ex/Function_Growth.thy:19<br>
./HOL/Library/Library.thy:1<br>
./HOL/Library/LDiscrete.thy:24<br>
./HOL/Analysis/Summation_Tests.thy:14</p>
<p>Didn't actually do it for the whole AFP, but it looks reasonable too:</p>
<p>$ grep -r -l "HOL-Library.Discrete" . | xargs grep -c Discrete<br>
./thys/Bertrands_Postulate/Bertrand.thy:26<br>
./thys/Universal_Turing_Machine/Recs_alt_Def.thy:1<br>
./thys/Universal_Turing_Machine/Recs.thy:1<br>
./thys/Vickrey_Clarke_Groves/MiscTools.thy:3<br>
./thys/Pell/Efficient_Discrete_Sqrt.thy:23<br>
./thys/Pell/Pell_Algorithm.thy:6<br>
./thys/Hoare_Time/Nielson_Sqrt.thy:11<br>
./thys/Hoare_Time/QuantK_Sqrt.thy:11<br>
./thys/LLL_Basis_Reduction/LLL_Complexity.thy:1<br>
./thys/Continued_Fractions/Quadratic_Irrationals.thy:8<br>
./thys/Number_Theoretic_Transform/Butterfly.thy:4<br>
./thys/DPRM_Theorem/Diophantine/Exponentiation.thy:1<br>
./thys/Karatsuba_Sqrt/Karatsuba_Sqrt_Library.thy:8<br>
./thys/Karatsuba_Sqrt/Karatsuba_Sqrt.thy:40</p>
<p>I am willing to do the job if necessary.</p>
<p>Any thoughts anyone?</p>
<p>Thank you,</p>
<p>Paolo</p>
<p>On 13/11/2024 15:59, Manuel Eberl wrote:</p>
<blockquote>
<blockquote>
<p>We don't import anything directly from both HOL-Library or HOLCF,<br>
these are transitive dependencies of HOL-CSPM and<br>
Ordinary_Differential_Equations.)<br>
If none of them actually need HOL-Library.Discrete one could change<br>
those entries to simply not import it.</p>
</blockquote>
<p>Other than that, the best option would probably to rename<br>
HOL-Library.Discrete. In the long run, that is the only sensible option<br>
anyway.</p>
<blockquote>
<p>Is there a practical solution to allow us to submit our theories to<br>
AFP before that?<br>
Once the issue has been taken care of in afp-devel you can submit your<br>
entry to afp-devel (<a href="https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fdevel.isa%2dafp.org%2fsubmission%2f&amp;umid=a4a9516f-bf37-440e-8da9-834154c471fb&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-e828e06bbdc7fff258c13967647d8aeeb6b4a4b2">https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fdevel.isa%2dafp.org%2fsubmission%2f&amp;umid=a4a9516f-bf37-440e-8da9-834154c471fb&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-e828e06bbdc7fff258c13967647d8aeeb6b4a4b2</a>). It will<br>
however only appear in the official release version of the AFP after the<br>
next Isabelle release (some time in Q1 of 2025, if I recall correctly).</p>
</blockquote>
<p>I don't think there is a sensible way to submit your entry to the<br>
"regular" AFP before then.</p>
<p>Cheers,</p>
<p>Manuel</p>
<p>On 13/11/2024 15:45, Paolo Crisafulli wrote:</p>
<blockquote>
<p>Thank you for your responses, but does this mean that we should wait<br>
for the next Isabelle release, as both HOL-Library and HOLCSP are part<br>
of it?</p>
<p>Is there a practical solution to allow us to submit our theories to<br>
AFP before that?</p>
<p>(For the record, we can't apply this advice:</p>
<blockquote>
<p>If your work does not depend on HOL-Library.Discrete then I would<br>
recommend to simply import the bits of HOL-Library that you explicitly<br>
need.</p>
</blockquote>
<p>We don't import anything directly from both HOL-Library or HOLCF,<br>
these are transitive dependencies of HOL-CSPM and<br>
Ordinary_Differential_Equations.)</p>
<p>Thank you all in advance for your help.</p>
<p>Best,</p>
<p>Paolo</p>
<p>On 13/11/2024 12:57, Makarius wrote:</p>
<blockquote>
<p>On 13/11/2024 09:46, Fabian Huch wrote:</p>
<blockquote>
<p>You cannot have two theories with the same base name in an import path<br>
unfortunately (a limitation coming from a time when theories were<br>
considered<br>
globally unique entities).<br>
Note that theory names are still globally unique, although the name<br>
is usually<br>
qualified by the session name, so clashes don't occur in the session<br>
context.</p>
</blockquote>
<p>There is an additional restriction for theories that are formally<br>
merged: base<br>
names need to be unique, because thy are used for the standard name<br>
space<br>
policy. One happy day, when the name space policies are changed ---<br>
after a<br>
lot of hard work --- this restriction will disappear.</p>
<blockquote>
<p>Currently, the only option (that I am aware of) is is to rename one<br>
of the<br>
theories.<br>
Yes, indeed.</p>
</blockquote>
<p>Dirty tricks should be avoided. The planet needs to be kept clean and<br>
alive.</p>
<p>Although HOL-Library.Discrete could just as well be called something<br>
else,<br>
e.g. HOL-Librrary.Discrete_Funs, it is probably easier to clean-up<br>
HOLCF a<br>
little bit.</p>
<p>Here is historic evidence for the introduction of this theory in 1997:<br>
<a href="https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94">https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94</a></p>
<p>That is interesting on its own account: it shows how theory<br>
construction had<br>
to alternate between .thy files (for specifications) and .ML files (for<br>
proofs) a few decades ago.</p>
<p>Today there is very little motivation of have these few<br>
specifications and<br>
proofs in the separate theory HOLCF.Discrete. The material could be<br>
moved to<br>
the start of its descendent HOLCF.Lift (and maybe separated by 'section'<br>
headings).</p>
<p>Makarius</p>
</blockquote>
</blockquote>
</blockquote>



<a name="482246701"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482246701" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482246701">(Nov 13 2024 at 19:39)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 13/11/2024 15:59, Manuel Eberl wrote:</p>
<blockquote>
<p>Other than that, the best option would probably to rename HOL- <br>
Library.Discrete. In the long run, that is the only sensible option anyway.</p>
</blockquote>
<p>Looking again more closely, I now understand the rather generic name of theory <br>
HOL-Library.Discrete: it defines qualified functions like Discrete.log.</p>
<p>In contrast, HOLCF.Discrete is merely "internal" to HOLCF and not used <br>
directly elsewhere. So we could easily change that for Isabelle2025 (March <br>
2025), using the included changeset.</p>
<p>Makarius</p>
<p><a href="/user_uploads/14278/DSwEzsv7PV93orYSFbCIodQ_/ch">ch</a></p>



<a name="482602845"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482602845" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482602845">(Nov 15 2024 at 12:33)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
Theory Library/Discrete is headed "Common discrete functions”. I would suggest renaming it to Discrete_Functions in time for the next release. Quite apart from the propensity for name clashes, the current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made perfect sense in 1997, but no longer. Some of them have the suffix _cpo, but unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL part of the Isabelle distribution, no duplicate theory names occur. And in the future, in the AFP as well.</p>
</blockquote>



<a name="482609126"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482609126" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482609126">(Nov 15 2024 at 13:07)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I would suggest renaming it to Discrete_Functions in time for the next release. Quite apart from the propensity for name clashes, the current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made perfect sense in 1997, but no longer. Some of them have the suffix _cpo, but unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL part of the Isabelle distribution, no duplicate theory names occur. And in the future, in the AFP as well.<br>
</p>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/UaZsBLmlZVoXXsv0FgdaLChs/smime.p7s">smime.p7s</a></p>



<a name="482612636"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482612636" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482612636">(Nov 15 2024 at 13:26)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
As Makarius noted, the problem is that the functions defined in <br>
"HOL-Library.Discrete" can (by design) only be used with their <br>
fully-qualified names "Discrete.sqrt" and "Discrete.log".</p>
<p>I don't think we want "Discrete_Functions.log" since that's quite a <br>
mouthful.</p>
<p>Personally I'm not a huge fan of "Discrete.log" and "Discrete.sqrt" <br>
either. Perhaps something like "floorlog2" and "floorsqrt"? (cf. my <br>
"ceillog2" that Larry recently moved into the distribution). <br>
Alternatively "log2_nat" and "sqrt_nat" would also work, but then the <br>
question arises what one should call the corresponding versions that <br>
round up instead of down.</p>
<p>Manuel</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I <br>
would suggest renaming it to Discrete_Functions in time for the next <br>
release. Quite apart from the propensity for name clashes, the <br>
current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made <br>
perfect sense in 1997, but no longer. Some of them have the suffix <br>
_cpo, but unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL <br>
part of the Isabelle distribution, no duplicate theory names occur. <br>
And in the future, in the AFP as well.</p>
</blockquote>
</blockquote>
</blockquote>



<a name="482614107"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482614107" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482614107">(Nov 15 2024 at 13:33)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;</p>
<p>On 15/11/2024 14:25, Manuel Eberl wrote:</p>
<blockquote>
<p>As Makarius noted, the problem is that the functions defined in "HOL- <br>
Library.Discrete" can (by design) only be used with their fully-qualified names <br>
"Discrete.sqrt" and "Discrete.log".</p>
</blockquote>
<p>Sorry, yes, I'll leave Library.Discrete alone.</p>
<blockquote>
<p>I don't think we want "Discrete_Functions.log" since that's quite a mouthful.</p>
<p>Personally I'm not a huge fan of "Discrete.log" and "Discrete.sqrt" either. <br>
Perhaps something like "floorlog2" and "floorsqrt"? (cf. my "ceillog2" that <br>
Larry recently moved into the distribution).</p>
</blockquote>
<p>floor_log2? (Personally, I belive in having the important name components first <br>
but can see that floor_log2 is more natural).</p>
<p>Tobias</p>
<blockquote>
<p>Alternatively "log2_nat" and <br>
"sqrt_nat" would also work, but then the question arises what one should call <br>
the corresponding versions that round up instead of down.</p>
<p>Manuel</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I would <br>
suggest renaming it to Discrete_Functions in time for the next release. Quite <br>
apart from the propensity for name clashes, the current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made perfect <br>
sense in 1997, but no longer. Some of them have the suffix _cpo, but <br>
unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL part of <br>
the Isabelle distribution, no duplicate theory names occur. And in the <br>
future, in the AFP as well.</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/9jHUdyrHf_xX7f5SLCTUHPjn/smime.p7s">smime.p7s</a></p>



<a name="482617130"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482617130" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482617130">(Nov 15 2024 at 13:49)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
I'd be fine with "floor_log2" as well, but then you should adjust <br>
"ceillog2" as well.</p>
<p>I think I picked "ceillog2" because there is something similar (but more <br>
general) called "floorlog" elsewhere in the library.</p>
<p>On 15/11/2024 14:32, Tobias Nipkow wrote:</p>
<blockquote>
<p>On 15/11/2024 14:25, Manuel Eberl wrote:</p>
<blockquote>
<p>As Makarius noted, the problem is that the functions defined in "HOL- <br>
Library.Discrete" can (by design) only be used with their <br>
fully-qualified names "Discrete.sqrt" and "Discrete.log".</p>
</blockquote>
<p>Sorry, yes, I'll leave Library.Discrete alone.</p>
<blockquote>
<p>I don't think we want "Discrete_Functions.log" since that's quite a <br>
mouthful.</p>
<p>Personally I'm not a huge fan of "Discrete.log" and "Discrete.sqrt" <br>
either. Perhaps something like "floorlog2" and "floorsqrt"? (cf. my <br>
"ceillog2" that Larry recently moved into the distribution).</p>
</blockquote>
<p>floor_log2? (Personally, I belive in having the important name <br>
components first but can see that floor_log2 is more natural).</p>
<p>Tobias</p>
<blockquote>
<p>Alternatively "log2_nat" and "sqrt_nat" would also work, but then the <br>
question arises what one should call the corresponding versions that <br>
round up instead of down.</p>
<p>Manuel</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I <br>
would suggest renaming it to Discrete_Functions in time for the <br>
next release. Quite apart from the propensity for name clashes, the <br>
current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made <br>
perfect sense in 1997, but no longer. Some of them have the suffix <br>
_cpo, but unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL <br>
part of the Isabelle distribution, no duplicate theory names <br>
occur. And in the future, in the AFP as well.</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>



<a name="482698683"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482698683" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482698683">(Nov 15 2024 at 21:40)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
HOLCF.Discrete has been renamed to HOLCF.Discrete_Cpo.</p>
<p>Tobias</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I would suggest <br>
renaming it to Discrete_Functions in time for the next release. Quite apart <br>
from the propensity for name clashes, the current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made perfect <br>
sense in 1997, but no longer. Some of them have the suffix _cpo, but <br>
unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL part of the <br>
Isabelle distribution, no duplicate theory names occur. And in the future, in <br>
the AFP as well.</p>
</blockquote>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/imucmqH9z3-iAzQ982ynUYro/smime.p7s">smime.p7s</a></p>



<a name="482863724"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482863724" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482863724">(Nov 17 2024 at 13:51)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Presumably this means Discrete.sqrt -&gt; floor_sqrt as well?</p>
<p>Tobias</p>
<p>On 15/11/2024 14:48, Manuel Eberl wrote:</p>
<blockquote>
<p>I'd be fine with "floor_log2" as well, but then you should adjust "ceillog2" as <br>
well.</p>
<p>I think I picked "ceillog2" because there is something similar (but more <br>
general) called "floorlog" elsewhere in the library.</p>
<p>On 15/11/2024 14:32, Tobias Nipkow wrote:</p>
<blockquote>
<p>On 15/11/2024 14:25, Manuel Eberl wrote:</p>
<blockquote>
<p>As Makarius noted, the problem is that the functions defined in "HOL- <br>
Library.Discrete" can (by design) only be used with their fully-qualified <br>
names "Discrete.sqrt" and "Discrete.log".</p>
</blockquote>
<p>Sorry, yes, I'll leave Library.Discrete alone.</p>
<blockquote>
<p>I don't think we want "Discrete_Functions.log" since that's quite a mouthful.</p>
<p>Personally I'm not a huge fan of "Discrete.log" and "Discrete.sqrt" either. <br>
Perhaps something like "floorlog2" and "floorsqrt"? (cf. my "ceillog2" that <br>
Larry recently moved into the distribution).</p>
</blockquote>
<p>floor_log2? (Personally, I belive in having the important name components <br>
first but can see that floor_log2 is more natural).</p>
<p>Tobias</p>
<blockquote>
<p>Alternatively "log2_nat" and "sqrt_nat" would also work, but then the <br>
question arises what one should call the corresponding versions that round up <br>
instead of down.</p>
<p>Manuel</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I would <br>
suggest renaming it to Discrete_Functions in time for the next release. <br>
Quite apart from the propensity for name clashes, the current name is <br>
ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made perfect <br>
sense in 1997, but no longer. Some of them have the suffix _cpo, but <br>
unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL part of <br>
the Isabelle distribution, no duplicate theory names occur. And in the <br>
future, in the AFP as well.</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/jbLdEEAT7H4r3lAnrAHgI4gn/smime.p7s">smime.p7s</a></p>



<a name="482863749"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482863749" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482863749">(Nov 17 2024 at 13:51)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
That seems reasonable to me.</p>
<p>On 17/11/2024 14:50, Tobias Nipkow wrote:</p>
<blockquote>
<p>Presumably this means Discrete.sqrt -&gt; floor_sqrt as well?</p>
<p>Tobias</p>
<p>On 15/11/2024 14:48, Manuel Eberl wrote:</p>
<blockquote>
<p>I'd be fine with "floor_log2" as well, but then you should adjust <br>
"ceillog2" as well.</p>
<p>I think I picked "ceillog2" because there is something similar (but <br>
more general) called "floorlog" elsewhere in the library.</p>
<p>On 15/11/2024 14:32, Tobias Nipkow wrote:</p>
<blockquote>
<p>On 15/11/2024 14:25, Manuel Eberl wrote:</p>
<blockquote>
<p>As Makarius noted, the problem is that the functions defined in <br>
"HOL- Library.Discrete" can (by design) only be used with their <br>
fully-qualified names "Discrete.sqrt" and "Discrete.log".</p>
</blockquote>
<p>Sorry, yes, I'll leave Library.Discrete alone.</p>
<blockquote>
<p>I don't think we want "Discrete_Functions.log" since that's quite a <br>
mouthful.</p>
<p>Personally I'm not a huge fan of "Discrete.log" and "Discrete.sqrt" <br>
either. Perhaps something like "floorlog2" and "floorsqrt"? (cf. my <br>
"ceillog2" that Larry recently moved into the distribution).</p>
</blockquote>
<p>floor_log2? (Personally, I belive in having the important name <br>
components first but can see that floor_log2 is more natural).</p>
<p>Tobias</p>
<blockquote>
<p>Alternatively "log2_nat" and "sqrt_nat" would also work, but then <br>
the question arises what one should call the corresponding versions <br>
that round up instead of down.</p>
<p>Manuel</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I <br>
would suggest renaming it to Discrete_Functions in time for the <br>
next release. Quite apart from the propensity for name clashes, <br>
the current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made <br>
perfect sense in 1997, but no longer. Some of them have the <br>
suffix _cpo, but unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the <br>
HOL part of the Isabelle distribution, no duplicate theory names <br>
occur. And in the future, in the AFP as well.</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>



<a name="482895436"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/482895436" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#482895436">(Nov 17 2024 at 20:52)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;</p>
<ul>
<li>Theory "HOL-Library/Discrete" has been renamed "HOL-Library/Discrete_Functions"<br>
   Discrete.log -&gt; floor_log<br>
   Discrete.sqrt -&gt; floor_sqrt<br>
   Renamed lemmas accordingly (...log/sqrt... -&gt; ...floor_log/sqrt...)</li>
</ul>
<p>Thus both Discrete theories have been renamed now.</p>
<p>Tobias</p>
<p>PS There was no log2. I did not touch other variants elsewhere, like ceillog2.</p>
<p>On 15/11/2024 14:48, Manuel Eberl wrote:</p>
<blockquote>
<p>I'd be fine with "floor_log2" as well, but then you should adjust "ceillog2" as <br>
well.</p>
<p>I think I picked "ceillog2" because there is something similar (but more <br>
general) called "floorlog" elsewhere in the library.</p>
<p>On 15/11/2024 14:32, Tobias Nipkow wrote:</p>
<blockquote>
<p>On 15/11/2024 14:25, Manuel Eberl wrote:</p>
<blockquote>
<p>As Makarius noted, the problem is that the functions defined in "HOL- <br>
Library.Discrete" can (by design) only be used with their fully-qualified <br>
names "Discrete.sqrt" and "Discrete.log".</p>
</blockquote>
<p>Sorry, yes, I'll leave Library.Discrete alone.</p>
<blockquote>
<p>I don't think we want "Discrete_Functions.log" since that's quite a mouthful.</p>
<p>Personally I'm not a huge fan of "Discrete.log" and "Discrete.sqrt" either. <br>
Perhaps something like "floorlog2" and "floorsqrt"? (cf. my "ceillog2" that <br>
Larry recently moved into the distribution).</p>
</blockquote>
<p>floor_log2? (Personally, I belive in having the important name components <br>
first but can see that floor_log2 is more natural).</p>
<p>Tobias</p>
<blockquote>
<p>Alternatively "log2_nat" and "sqrt_nat" would also work, but then the <br>
question arises what one should call the corresponding versions that round up <br>
instead of down.</p>
<p>Manuel</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I would <br>
suggest renaming it to Discrete_Functions in time for the next release. <br>
Quite apart from the propensity for name clashes, the current name is <br>
ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made perfect <br>
sense in 1997, but no longer. Some of them have the suffix _cpo, but <br>
unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL part of <br>
the Isabelle distribution, no duplicate theory names occur. And in the <br>
future, in the AFP as well.</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/sw_KIRg7I2GT43mv2zhQgYQs/smime.p7s">smime.p7s</a></p>



<a name="483038111"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/483038111" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#483038111">(Nov 18 2024 at 14:34)</a>:</h4>
<p>From: Paolo Crisafulli &lt;<a href="mailto:paolo.crisafulli@irt-systemx.fr">paolo.crisafulli@irt-systemx.fr</a>&gt;<br>
Thank you very much.</p>
<p>(For the record, Makarius' patch is enough to fix the issue locally, for <br>
any user wanting to quickly import both HOLCF and HOL-Library.Discrete).</p>
<p>Paolo</p>
<p>On 15/11/2024 22:40, Tobias Nipkow wrote:</p>
<blockquote>
<p>HOLCF.Discrete has been renamed to HOLCF.Discrete_Cpo.</p>
<p>Tobias</p>
<p>On 15/11/2024 14:06, Tobias Nipkow wrote:</p>
<blockquote>
<p>Good suggestions. Happy to take care of it later today.</p>
<p>Tobias</p>
<p>On 15/11/2024 13:32, Lawrence Paulson wrote:</p>
<blockquote>
<p>Theory Library/Discrete is headed "Common discrete functions”. I <br>
would suggest renaming it to Discrete_Functions in time for the next <br>
release. Quite apart from the propensity for name clashes, the <br>
current name is ambiguous.</p>
<p>Turning to HOLCF, many of the theories have short names that made <br>
perfect sense in 1997, but no longer. Some of them have the suffix <br>
_cpo, but unfortunately Discrete currently does not.</p>
<p>Larry</p>
<blockquote>
<p>On 13 Nov 2024, at 10:03, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>Of course we should try to make sure that at least within the HOL <br>
part of the Isabelle distribution, no duplicate theory names occur. <br>
And in the future, in the AFP as well.<br>
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>



<a name="483260935"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Duplicate%20theory%20name%20Discrete/near/483260935" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Duplicate.20theory.20name.20Discrete.html#483260935">(Nov 19 2024 at 13:17)</a>:</h4>
<p>From: Paolo Crisafulli &lt;<a href="mailto:paolo.crisafulli@irt-systemx.fr">paolo.crisafulli@irt-systemx.fr</a>&gt;<br>
Thank you Manuel.</p>
<p>To sum up:</p>
<ul>
<li>
<p>to benefit from the renaming of HOL-Library.Discrete and <br>
HOLCF.Discrete, we need to work with a development version of <br>
Isabelle/HOL: <a href="https://isatest.sketis.net/devel/release_snapshot/">https://isatest.sketis.net/devel/release_snapshot/</a></p>
</li>
<li>
<p>as a consequence, we'll also have to work with a development version <br>
of AFP, because of the impact of the renaming done in HOL-Library.Discrete</p>
</li>
<li>
<p>and our submissions, if accepted, will be available in afp-devel only, <br>
until Q1 2025; then AFP release.</p>
</li>
</ul>
<p>Is that correct?</p>
<p>Best,</p>
<p>Paolo</p>
<p>On 13/11/2024 15:59, Manuel Eberl wrote:</p>
<blockquote>
<blockquote>
<p>We don't import anything directly from both HOL-Library or HOLCF,<br>
these are transitive dependencies of HOL-CSPM and<br>
Ordinary_Differential_Equations.)<br>
If none of them actually need HOL-Library.Discrete one could change<br>
those entries to simply not import it.</p>
</blockquote>
<p>Other than that, the best option would probably to rename<br>
HOL-Library.Discrete. In the long run, that is the only sensible option<br>
anyway.</p>
<blockquote>
<p>Is there a practical solution to allow us to submit our theories to<br>
AFP before that?<br>
Once the issue has been taken care of in afp-devel you can submit your<br>
entry to afp-devel (<a href="https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fdevel.isa%2dafp.org%2fsubmission%2f&amp;umid=a4a9516f-bf37-440e-8da9-834154c471fb&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-e828e06bbdc7fff258c13967647d8aeeb6b4a4b2">https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fdevel.isa%2dafp.org%2fsubmission%2f&amp;umid=a4a9516f-bf37-440e-8da9-834154c471fb&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-e828e06bbdc7fff258c13967647d8aeeb6b4a4b2</a>). It will<br>
however only appear in the official release version of the AFP after the<br>
next Isabelle release (some time in Q1 of 2025, if I recall correctly).</p>
</blockquote>
<p>I don't think there is a sensible way to submit your entry to the<br>
"regular" AFP before then.</p>
<p>Cheers,</p>
<p>Manuel</p>
<p>On 13/11/2024 15:45, Paolo Crisafulli wrote:</p>
<blockquote>
<p>Thank you for your responses, but does this mean that we should wait<br>
for the next Isabelle release, as both HOL-Library and HOLCSP are part<br>
of it?</p>
<p>Is there a practical solution to allow us to submit our theories to<br>
AFP before that?</p>
<p>(For the record, we can't apply this advice:</p>
<blockquote>
<p>If your work does not depend on HOL-Library.Discrete then I would<br>
recommend to simply import the bits of HOL-Library that you explicitly<br>
need.</p>
</blockquote>
<p>We don't import anything directly from both HOL-Library or HOLCF,<br>
these are transitive dependencies of HOL-CSPM and<br>
Ordinary_Differential_Equations.)</p>
<p>Thank you all in advance for your help.</p>
<p>Best,</p>
<p>Paolo</p>
<p>On 13/11/2024 12:57, Makarius wrote:</p>
<blockquote>
<p>On 13/11/2024 09:46, Fabian Huch wrote:</p>
<blockquote>
<p>You cannot have two theories with the same base name in an import path<br>
unfortunately (a limitation coming from a time when theories were<br>
considered<br>
globally unique entities).<br>
Note that theory names are still globally unique, although the name<br>
is usually<br>
qualified by the session name, so clashes don't occur in the session<br>
context.</p>
</blockquote>
<p>There is an additional restriction for theories that are formally<br>
merged: base<br>
names need to be unique, because thy are used for the standard name<br>
space<br>
policy. One happy day, when the name space policies are changed ---<br>
after a<br>
lot of hard work --- this restriction will disappear.</p>
<blockquote>
<p>Currently, the only option (that I am aware of) is is to rename one<br>
of the<br>
theories.<br>
Yes, indeed.</p>
</blockquote>
<p>Dirty tricks should be avoided. The planet needs to be kept clean and<br>
alive.</p>
<p>Although HOL-Library.Discrete could just as well be called something<br>
else,<br>
e.g. HOL-Librrary.Discrete_Funs, it is probably easier to clean-up<br>
HOLCF a<br>
little bit.</p>
<p>Here is historic evidence for the introduction of this theory in 1997:<br>
<a href="https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94">https://cas5-0-urlprotect.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fisabelle%2ddev.sketis.net%2frISABELLEc2508f4ab739&amp;umid=070888fe-b1e4-40d4-8c4b-fc350f75d77e&amp;auth=b6005005a7b50bc3a68b2003f1e38d069f93f262-8a9ce3d82ace24c3827208341f125e1ee2693d94</a></p>
<p>That is interesting on its own account: it shows how theory<br>
construction had<br>
to alternate between .thy files (for specifications) and .ML files (for<br>
proofs) a few decades ago.</p>
<p>Today there is very little motivation of have these few<br>
specifications and<br>
proofs in the separate theory HOLCF.Discrete. The material could be<br>
moved to<br>
the start of its descendent HOLCF.Lift (and maybe separated by 'section'<br>
headings).</p>
<p>Makarius</p>
</blockquote>
</blockquote>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>