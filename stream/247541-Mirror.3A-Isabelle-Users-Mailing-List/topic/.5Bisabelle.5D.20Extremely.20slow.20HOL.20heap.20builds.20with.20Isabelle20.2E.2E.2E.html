<html>
<head><meta charset="utf-8"><title>[isabelle] Extremely slow HOL heap builds with Isabelle20... · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Extremely.20slow.20HOL.20heap.20builds.20with.20Isabelle20.2E.2E.2E.html">[isabelle] Extremely slow HOL heap builds with Isabelle20...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="434340533"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Extremely%20slow%20HOL%20heap%20builds%20with%20Isabelle20.../near/434340533" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Extremely.20slow.20HOL.20heap.20builds.20with.20Isabelle20.2E.2E.2E.html#434340533">(Apr 19 2024 at 11:16)</a>:</h4>
<p>From: Dominic Mulligan &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi,</p>
<p>We are testing Isabelle2024-RC2 locally on our fairly large proof.  We are<br>
noticing extremely slow builds of Pure and HOL heaps after changing the ML<br>
runtime settings.  For example, I turned on the debugger exception tracing<br>
and selected ML System 64-bit option in the Isabelle plugin settings and<br>
caused a heap rebuild which has now taken over an hour to reach<br>
HOL.Binomial.</p>
<p>With previous Isabelle versions we have never noticed rebuilds taking this<br>
long after changing ML runtime settings.</p>
<p>This is on an Apple M1 MacBook Pro 32GiB RAM.</p>
<p>Thanks,<br>
Dominic</p>



<a name="434341705"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Extremely%20slow%20HOL%20heap%20builds%20with%20Isabelle20.../near/434341705" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Extremely.20slow.20HOL.20heap.20builds.20with.20Isabelle20.2E.2E.2E.html#434341705">(Apr 19 2024 at 11:24)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
Hello,</p>
<p>are you sure this is a regression? In my experience this is perfectly <br>
normal. If you switch on ML debugging and rebuild Pure, Pure takes much <br>
longer to build and HOL takes forever. However, if you switch on <br>
debugging and <em>only</em> rebuild HOL, there is very little overhead.</p>
<p>Manuel</p>



<a name="435465960"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Extremely%20slow%20HOL%20heap%20builds%20with%20Isabelle20.../near/435465960" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Extremely.20slow.20HOL.20heap.20builds.20with.20Isabelle20.2E.2E.2E.html#435465960">(Apr 25 2024 at 20:52)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I have now made some experiments with Mac Studio M1 and the following settings <br>
(according to "isabelle build -?"):</p>
<p>ML_PLATFORM="arm64-darwin"<br>
     ML_OPTIONS="--minheap 1500 --maxheap 30000"</p>
<p>Notable options (via etc/preferences):</p>
<p>threads = 8<br>
     ML_system_64 = true<br>
     ML_debugger = true</p>
<p>Here are some results of "isabelle build -f -b HOL":</p>
<p>Isabelle2023:<br>
Finished HOL (0:21:40 elapsed time, 1:24:30 cpu time, factor 3.90)</p>
<p>Isabelle2024-RC2:<br>
Finished HOL (0:21:44 elapsed time, 1:24:10 cpu time, factor 3.87)</p>
<p>Conclusion from this experiment: There is nothing to be seen here. We can <br>
continue towards the final release. (Unless you have other experiments that <br>
disprove that.)</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>