<html>
<head><meta charset="utf-8"><title>[isabelle] HOL-Analysis bug reminder · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html">[isabelle] HOL-Analysis bug reminder</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="483019676"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483019676" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483019676">(Nov 18 2024 at 13:16)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hello,</p>
<p>this is a repeated attempt to attract attention to a mistake in <br>
HOL-Analysis.</p>
<p>To be specific, I am convinced that line 997 of <br>
HOL/Analysis/Finite_Cartesian_Product.thy should be</p>
<blockquote>
<p>where "v v* m == (χ j. sum (λi.  (v$i) * ((m$i)$j)) (UNIV :: 'm <br>
set)) :: 'a^'n"</p>
</blockquote>
<p>instead of the current</p>
<blockquote>
<p>where "v v* m == (χ j. sum (λi. ((m$i)$j) * (v$i)) (UNIV :: 'm set)) <br>
:: 'a^'n"</p>
</blockquote>
<p>Please, let me know if there a different way/place to report this properly.</p>
<p>Stepan</p>
<p>On 17-Sep-24 9:22 AM, Stepan Holub (via cl-isabelle-users Mailing List) <br>
wrote:</p>
<blockquote>
<p>Hello,</p>
<p>in HOL/Analysis/Finite_Cartesian_Product.thy<br>
the multiplication by a vector from the left  (constant <br>
vector_matrix_mult) is not associative unless the underlying semiring <br>
is commutative.<br>
Namely,<br>
  lemma  "(x v* A) v* B = x v* (A ** B)"<br>
is not true, unlike its proven counterpart<br>
lemma matrix_vector_mul_assoc: "A *v (B *v x) = (A ** B) *v x"</p>
<p>This is due to the inverted order of multiplicands in the definition <br>
of vector_matrix_mult.</p>
<p>I expect this is unintended. If there is no motivation I miss, I <br>
suggest it should be changed.</p>
<p>Best regards</p>
<p>Stepan</p>
</blockquote>



<a name="483260296"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483260296" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483260296">(Nov 19 2024 at 13:13)</a>:</h4>
<p>From: 伊藤洋介 &lt;<a href="mailto:glacier345@gmail.com">glacier345@gmail.com</a>&gt;<br>
Dear Stepan Holub,</p>
<p>I agree with you.<br>
The definition of <code>vector_matrix_mult</code> seems wrong.<br>
I think this is the right place to point it out.<br>
I hope the Isabelle developers also agree with us...</p>
<p>Best regards,</p>
<p>2024年11月18日(月) 22:16 Stepan Holub &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;:</p>
<blockquote>
<p>Hello,</p>
<p>this is a repeated attempt to attract attention to a mistake in<br>
HOL-Analysis.</p>
<p>To be specific, I am convinced that line 997 of<br>
HOL/Analysis/Finite_Cartesian_Product.thy should be</p>
<blockquote>
<p>where "v v* m == (χ j. sum (λi.  (v$i) * ((m$i)$j)) (UNIV :: 'm<br>
set)) :: 'a^'n"</p>
</blockquote>
<p>instead of the current</p>
<blockquote>
<p>where "v v* m == (χ j. sum (λi. ((m$i)$j) * (v$i)) (UNIV :: 'm set))<br>
:: 'a^'n"</p>
</blockquote>
<p>Please, let me know if there a different way/place to report this properly.</p>
<p>Stepan</p>
<p>On 17-Sep-24 9:22 AM, Stepan Holub (via cl-isabelle-users Mailing List)<br>
wrote:</p>
<blockquote>
<p>Hello,</p>
<p>in HOL/Analysis/Finite_Cartesian_Product.thy<br>
the multiplication by a vector from the left  (constant<br>
vector_matrix_mult) is not associative unless the underlying semiring<br>
is commutative.<br>
Namely,<br>
  lemma  "(x v* A) v* B = x v* (A ** B)"<br>
is not true, unlike its proven counterpart<br>
lemma matrix_vector_mul_assoc: "A *v (B *v x) = (A ** B) *v x"</p>
<p>This is due to the inverted order of multiplicands in the definition<br>
of vector_matrix_mult.</p>
<p>I expect this is unintended. If there is no motivation I miss, I<br>
suggest it should be changed.</p>
<p>Best regards</p>
<p>Stepan</p>
</blockquote>
</blockquote>
<p>-- <br>
伊藤 洋介<br>
Yosuke ITO<br>
+81 80-5057-6931<br>
<a href="mailto:glacier345@gmail.com">glacier345@gmail.com</a></p>



<a name="483292800"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483292800" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483292800">(Nov 19 2024 at 15:38)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
Hello,</p>
<p>it might well be that I am the only HOL-Analysis person remaining among <br>
the core Isabelle developers. I've never used the matrices in <br>
HOL-Analysis, so I am completely unfamiliar with that library. But if I <br>
am indeed the only person who is in a position to do anything about it, <br>
I will look into it.</p>
<p>Perhaps some more people using that library can chime in?</p>
<p>Manuel</p>
<p>On 19/11/2024 14:13, 伊藤洋介 wrote:</p>
<blockquote>
<p>Dear Stepan Holub,</p>
<p>I agree with you.<br>
The definition of <code>vector_matrix_mult</code> seems wrong.<br>
I think this is the right place to point it out.<br>
I hope the Isabelle developers also agree with us...</p>
<p>Best regards,</p>
<p>2024年11月18日(月) 22:16 Stepan Holub &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;:</p>
<p>Hello,</p>
<p>this is a repeated attempt to attract attention to a mistake in<br>
    HOL-Analysis.</p>
<p>To be specific, I am convinced that line 997 of<br>
    HOL/Analysis/Finite_Cartesian_Product.thy should be</p>
<p>&gt;   where "v v* m == (χ j. sum (λi.  (v$i) * ((m$i)$j)) (UNIV :: 'm<br>
    &gt; set)) :: 'a^'n"</p>
<p>instead of the current<br>
    &gt; where "v v* m == (χ j. sum (λi. ((m$i)$j) * (v$i)) (UNIV :: 'm<br>
    set))<br>
    &gt; :: 'a^'n"</p>
<p>Please, let me know if there a different way/place to report this<br>
    properly.</p>
<p>Stepan</p>
<p>On 17-Sep-24 9:22 AM, Stepan Holub (via cl-isabelle-users Mailing<br>
    List)<br>
    wrote:<br>
    &gt; Hello,<br>
    &gt;<br>
    &gt; in HOL/Analysis/Finite_Cartesian_Product.thy<br>
    &gt; the multiplication by a vector from the left  (constant<br>
    &gt; vector_matrix_mult) is not associative unless the underlying<br>
    semiring<br>
    &gt; is commutative.<br>
    &gt; Namely,<br>
    &gt;   lemma  "(x v* A) v* B = x v* (A ** B)"<br>
    &gt; is not true, unlike its proven counterpart<br>
    &gt; lemma matrix_vector_mul_assoc: "A *v (B *v x) = (A ** B) *v x"<br>
    &gt;<br>
    &gt; This is due to the inverted order of multiplicands in the<br>
    definition<br>
    &gt; of vector_matrix_mult.<br>
    &gt;<br>
    &gt; I expect this is unintended. If there is no motivation I miss, I<br>
    &gt; suggest it should be changed.<br>
    &gt;<br>
    &gt; Best regards<br>
    &gt;<br>
    &gt; Stepan<br>
    &gt;<br>
    &gt;</p>
<p>-- <br>
伊藤 洋介<br>
Yosuke ITO<br>
+81 80-5057-6931<br>
<a href="mailto:glacier345@gmail.com">glacier345@gmail.com</a></p>
</blockquote>



<a name="483295543"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483295543" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483295543">(Nov 19 2024 at 15:50)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Thanks for the reactions. I appreciate them.</p>
<p>Just in case the topic seems esoteric: I believe there should be no <br>
discussion about the fact that matrix multiplication is supposed to be <br>
associative. Which is not the case now.</p>
<p>Stepan</p>
<p>On 11/19/2024 4:38 PM, Manuel Eberl wrote:</p>
<blockquote>
<p>Hello,</p>
<p>it might well be that I am the only HOL-Analysis person remaining <br>
among the core Isabelle developers. I've never used the matrices in <br>
HOL-Analysis, so I am completely unfamiliar with that library. But if <br>
I am indeed the only person who is in a position to do anything about <br>
it, I will look into it.</p>
<p>Perhaps some more people using that library can chime in?</p>
<p>Manuel</p>
<p>On 19/11/2024 14:13, 伊藤洋介 wrote:</p>
<blockquote>
<p>Dear Stepan Holub,</p>
<p>I agree with you.<br>
The definition of <code>vector_matrix_mult</code> seems wrong.<br>
I think this is the right place to point it out.<br>
I hope the Isabelle developers also agree with us...</p>
<p>Best regards,</p>
<p>2024年11月18日(月) 22:16 Stepan Holub <br>
&lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;:</p>
<p>Hello,</p>
<p>this is a repeated attempt to attract attention to a mistake in<br>
    HOL-Analysis.</p>
<p>To be specific, I am convinced that line 997 of<br>
    HOL/Analysis/Finite_Cartesian_Product.thy should be</p>
<p>&gt;   where "v v* m == (χ j. sum (λi.  (v$i) * ((m$i)$j)) (UNIV :: 'm<br>
    &gt; set)) :: 'a^'n"</p>
<p>instead of the current<br>
    &gt; where "v v* m == (χ j. sum (λi. ((m$i)$j) * (v$i)) (UNIV :: 'm<br>
    set))<br>
    &gt; :: 'a^'n"</p>
<p>Please, let me know if there a different way/place to report this<br>
    properly.</p>
<p>Stepan</p>
<p>On 17-Sep-24 9:22 AM, Stepan Holub (via cl-isabelle-users Mailing<br>
    List)<br>
    wrote:<br>
    &gt; Hello,<br>
    &gt;<br>
    &gt; in HOL/Analysis/Finite_Cartesian_Product.thy<br>
    &gt; the multiplication by a vector from the left (constant<br>
    &gt; vector_matrix_mult) is not associative unless the underlying<br>
    semiring<br>
    &gt; is commutative.<br>
    &gt; Namely,<br>
    &gt;   lemma  "(x v* A) v* B = x v* (A ** B)"<br>
    &gt; is not true, unlike its proven counterpart<br>
    &gt; lemma matrix_vector_mul_assoc: "A *v (B *v x) = (A ** B) *v x"<br>
    &gt;<br>
    &gt; This is due to the inverted order of multiplicands in the<br>
    definition<br>
    &gt; of vector_matrix_mult.<br>
    &gt;<br>
    &gt; I expect this is unintended. If there is no motivation I miss, I<br>
    &gt; suggest it should be changed.<br>
    &gt;<br>
    &gt; Best regards<br>
    &gt;<br>
    &gt; Stepan<br>
    &gt;<br>
    &gt;</p>
<p>-- <br>
伊藤 洋介<br>
Yosuke ITO<br>
+81 80-5057-6931<br>
<a href="mailto:glacier345@gmail.com">glacier345@gmail.com</a></p>
</blockquote>
</blockquote>



<a name="483455171"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483455171" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483455171">(Nov 20 2024 at 10:50)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I ported vast chunks of this library (from HOL Light). But the operative word is “ported”; I didn't change any definitions. This particular file however, lists the author as Amine Chaieb (Who gave us formal power series). Anyway the question is simple: what do textbooks say?</p>
<p>Of course it is not esoteric. This sort of basic definition needs to be correct.</p>
<p>Larry</p>
<blockquote>
<p>On 19 Nov 2024, at 15:38, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>it might well be that I am the only HOL-Analysis person remaining among the core Isabelle developers. I've never used the matrices in HOL-Analysis, so I am completely unfamiliar with that library. But if I am indeed the only person who is in a position to do anything about it, I will look into it.<br>
Perhaps some more people using that library can chime in?<br>
</p>
</blockquote>



<a name="483459240"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483459240" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483459240">(Nov 20 2024 at 11:12)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>
<blockquote>
<p>Anyway the question is simple: what do textbooks say?<br>
Do you mean what textbooks say about how matrices should be multiplied?</p>
</blockquote>
<p>Stepan</p>



<a name="483767052"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483767052" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483767052">(Nov 21 2024 at 18:53)</a>:</h4>
<p>From: Alexander Pach &lt;<a href="mailto:alexander.pach@tum.de">alexander.pach@tum.de</a>&gt;<br>
Dear all,</p>
<p>as vector_matrix_mult is surprisingly rarely used, only minor adaptions <br>
are needed. See attached file 81471.patch for Isabelle and 15047.patch <br>
for the AFP, which also adapts Vector-Matrix-Multiplications for <br>
AFP-defined arrays, where necessary. Feel free to use them in any way <br>
you see fit.</p>
<p>I have successfully built all sessions using vector_matrix_mult in their <br>
theory files, but not all possibly impacted sessions due to performance <br>
constraints, so I'd appreciate someone doing a complete build.</p>
<p>Kind regards<br>
Alexander Pach</p>
<p>P.S. Groebner_Bases has a definition with correct term order in <br>
Macaulay_Matrix at line 31:</p>
<p>mult_vec_mat :: "'a vec \&lt;Rightarrow&gt; 'a :: semiring_0 mat \&lt;Rightarrow&gt; 'a vec" (infixl "\&lt;^sub&gt;v*" 70)<br>
   where "v \&lt;^sub&gt;v* A \&lt;equiv&gt; vec (dim_col A) (\&lt;lambda&gt;j. v \&lt;bullet&gt; col A j)"</p>
<p>Am 2024-11-20 um 11:50 schrieb Lawrence Paulson:</p>
<blockquote>
<p>I ported vast chunks of this library (from HOL Light). But the operative word is “ported”; I didn't change any definitions. This particular file however, lists the author as Amine Chaieb (Who gave us formal power series). Anyway the question is simple: what do textbooks say?</p>
<p>Of course it is not esoteric. This sort of basic definition needs to be correct.</p>
<p>Larry</p>
<blockquote>
<p>On 19 Nov 2024, at 15:38, Manuel Eberl&lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>it might well be that I am the only HOL-Analysis person remaining among the core Isabelle developers. I've never used the matrices in HOL-Analysis, so I am completely unfamiliar with that library. But if I am indeed the only person who is in a position to do anything about it, I will look into it.<br>
Perhaps some more people using that library can chime in?<br>
</p>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/NdSE5jULYYHQb3mdfGXHNXKi/81471.patch">81471.patch</a><br>
<a href="/user_uploads/14278/SnBag4mBCBvD4oi2XLOSYiZQ/15047.patch">15047.patch</a><br>
<a href="/user_uploads/14278/ljyb65N6TDwmhzpOkV9A5utV/smime.p7s">smime.p7s</a></p>



<a name="483777247"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483777247" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483777247">(Nov 21 2024 at 19:48)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Dear Alexander,</p>
<p>thank you very much. Accidentally I have just written almost the same <br>
patch (for HOL-Analysis only), attached.</p>
<p>It contains two additional minor suggestions:<br>
-  vector_scalar_commute and scalar_vector_matrix_assoc can be <br>
generalized from field to comm_semiring_1<br>
-  vector_matrix_mul_assoc in Cartesian_Space is now a (weaker) <br>
duplicate and can be deleted.</p>
<p>Best regards</p>
<p>Stepan</p>
<p>On 21-Nov-24 7:46 PM, Alexander Pach wrote:</p>
<blockquote>
<p>Dear all,</p>
<p>as vector_matrix_mult is surprisingly rarely used, only minor <br>
adaptions are needed. See attached file 81471.patch for Isabelle and <br>
15047.patch for the AFP, which also adapts <br>
Vector-Matrix-Multiplications for AFP-defined arrays, where necessary. <br>
Feel free to use them in any way you see fit.</p>
<p>I have successfully built all sessions using vector_matrix_mult in <br>
their theory files, but not all possibly impacted sessions due to <br>
performance constraints, so I'd appreciate someone doing a complete build.</p>
<p>Kind regards<br>
Alexander Pach</p>
<p>P.S. Groebner_Bases has a definition with correct term order in <br>
Macaulay_Matrix at line 31:</p>
<p>mult_vec_mat :: "'a vec \&lt;Rightarrow&gt; 'a :: semiring_0 mat \&lt;Rightarrow&gt; 'a vec" (infixl "\&lt;^sub&gt;v*" 70)<br>
   where "v \&lt;^sub&gt;v* A \&lt;equiv&gt; vec (dim_col A) (\&lt;lambda&gt;j. v \&lt;bullet&gt; col A j)"<br>
Am 2024-11-20 um 11:50 schrieb Lawrence Paulson:</p>
<blockquote>
<p>I ported vast chunks of this library (from HOL Light). But the operative word is “ported”; I didn't change any definitions. This particular file however, lists the author as Amine Chaieb (Who gave us formal power series). Anyway the question is simple: what do textbooks say?</p>
<p>Of course it is not esoteric. This sort of basic definition needs to be correct.</p>
<p>Larry</p>
<blockquote>
<p>On 19 Nov 2024, at 15:38, Manuel Eberl&lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>it might well be that I am the only HOL-Analysis person remaining among the core Isabelle developers. I've never used the matrices in HOL-Analysis, so I am completely unfamiliar with that library. But if I am indeed the only person who is in a position to do anything about it, I will look into it.<br>
Perhaps some more people using that library can chime in?<br>
</p>
</blockquote>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/gt510AcAS9u7D4DsMZ_m3BIN/vector_matrix_mult.patch">vector_matrix_mult.patch</a></p>



<a name="483778035"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483778035" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483778035">(Nov 21 2024 at 19:53)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
P.S.: BTW, a plausible explanation of how that strange definition came <br>
about in the first place is that, for some reasons, Amine sacrificed <br>
associativity of the vector-matrix multiplication in non-commutative <br>
case in favor of vector_transpose_matrix identity in the non-commutative <br>
case (for two matrices the transpose identity is restricted to the <br>
commutative case in the original version anyway).</p>
<p>On 21-Nov-24 8:47 PM, Stepan Holub (via cl-isabelle-users Mailing List) <br>
wrote:</p>
<blockquote>
<p>Dear Alexander,</p>
<p>thank you very much. Accidentally I have just written almost the same <br>
patch (for HOL-Analysis only), attached.</p>
<p>It contains two additional minor suggestions:<br>
-  vector_scalar_commute and scalar_vector_matrix_assoc can be <br>
generalized from field to comm_semiring_1<br>
-  vector_matrix_mul_assoc in Cartesian_Space is now a (weaker) <br>
duplicate and can be deleted.</p>
<p>Best regards</p>
<p>Stepan</p>
<p>On 21-Nov-24 7:46 PM, Alexander Pach wrote:</p>
<blockquote>
<p>Dear all,</p>
<p>as vector_matrix_mult is surprisingly rarely used, only minor <br>
adaptions are needed. See attached file 81471.patch for Isabelle and <br>
15047.patch for the AFP, which also adapts <br>
Vector-Matrix-Multiplications for AFP-defined arrays, where <br>
necessary. Feel free to use them in any way you see fit.</p>
<p>I have successfully built all sessions using vector_matrix_mult in <br>
their theory files, but not all possibly impacted sessions due to <br>
performance constraints, so I'd appreciate someone doing a complete <br>
build.</p>
<p>Kind regards<br>
Alexander Pach</p>
<p>P.S. Groebner_Bases has a definition with correct term order in <br>
Macaulay_Matrix at line 31:</p>
<p>mult_vec_mat :: "'a vec \&lt;Rightarrow&gt; 'a :: semiring_0 mat \&lt;Rightarrow&gt; 'a vec" (infixl "\&lt;^sub&gt;v*" 70)<br>
   where "v \&lt;^sub&gt;v* A \&lt;equiv&gt; vec (dim_col A) (\&lt;lambda&gt;j. v \&lt;bullet&gt; col A j)"<br>
Am 2024-11-20 um 11:50 schrieb Lawrence Paulson:</p>
<blockquote>
<p>I ported vast chunks of this library (from HOL Light). But the operative word is “ported”; I didn't change any definitions. This particular file however, lists the author as Amine Chaieb (Who gave us formal power series). Anyway the question is simple: what do textbooks say?</p>
<p>Of course it is not esoteric. This sort of basic definition needs to be correct.</p>
<p>Larry</p>
<blockquote>
<p>On 19 Nov 2024, at 15:38, Manuel Eberl&lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>it might well be that I am the only HOL-Analysis person remaining among the core Isabelle developers. I've never used the matrices in HOL-Analysis, so I am completely unfamiliar with that library. But if I am indeed the only person who is in a position to do anything about it, I will look into it.<br>
Perhaps some more people using that library can chime in?</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>



<a name="483928296"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20HOL-Analysis%20bug%20reminder/near/483928296" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20HOL-Analysis.20bug.20reminder.html#483928296">(Nov 22 2024 at 14:57)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
Thanks both, now installed. </p>
<p>Larry</p>
<blockquote>
<p>On 21 Nov 2024, at 19:47, Stepan Holub &lt;<a href="mailto:holub@karlin.mff.cuni.cz">holub@karlin.mff.cuni.cz</a>&gt; wrote:</p>
<p>Dear Alexander,</p>
<p>thank you very much. Accidentally I have just written almost the same patch (for HOL-Analysis only), attached.</p>
<p>It contains two additional minor suggestions:<br>
-  vector_scalar_commute and scalar_vector_matrix_assoc can be generalized from field to comm_semiring_1<br>
-  vector_matrix_mul_assoc in Cartesian_Space is now a (weaker) duplicate and can be deleted.</p>
<p>Best regards</p>
<p>Stepan</p>
<p>On 21-Nov-24 7:46 PM, Alexander Pach wrote:</p>
<blockquote>
<p>Dear all,<br>
as vector_matrix_mult is surprisingly rarely used, only minor adaptions are needed. See attached file 81471.patch for Isabelle and 15047.patch for the AFP, which also adapts Vector-Matrix-Multiplications for AFP-defined arrays, where necessary. Feel free to use them in any way you see fit.<br>
I have successfully built all sessions using vector_matrix_mult in their theory files, but not all possibly impacted sessions due to performance constraints, so I'd appreciate someone doing a complete build.<br>
Kind regards<br>
Alexander Pach</p>
<p>P.S. Groebner_Bases has a definition with correct term order in Macaulay_Matrix at line 31: <br>
mult_vec_mat :: "'a vec \&lt;Rightarrow&gt; 'a :: semiring_0 mat \&lt;Rightarrow&gt; 'a vec" (infixl "\&lt;^sub&gt;v*" 70)<br>
  where "v \&lt;^sub&gt;v* A \&lt;equiv&gt; vec (dim_col A) (\&lt;lambda&gt;j. v \&lt;bullet&gt; col A j)"<br>
Am 2024-11-20 um 11:50 schrieb Lawrence Paulson:</p>
<blockquote>
<p>I ported vast chunks of this library (from HOL Light). But the operative word is “ported”; I didn't change any definitions. This particular file however, lists the author as Amine Chaieb (Who gave us formal power series). Anyway the question is simple: what do textbooks say?</p>
<p>Of course it is not esoteric. This sort of basic definition needs to be correct.</p>
<p>Larry</p>
<blockquote>
<p>On 19 Nov 2024, at 15:38, Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt; wrote:</p>
<p>it might well be that I am the only HOL-Analysis person remaining among the core Isabelle developers. I've never used the matrices in HOL-Analysis, so I am completely unfamiliar with that library. But if I am indeed the only person who is in a position to do anything about it, I will look into it.<br>
Perhaps some more people using that library can chime in?</p>
</blockquote>
</blockquote>
</blockquote>
<p>&lt;vector_matrix_mult.patch&gt;</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>