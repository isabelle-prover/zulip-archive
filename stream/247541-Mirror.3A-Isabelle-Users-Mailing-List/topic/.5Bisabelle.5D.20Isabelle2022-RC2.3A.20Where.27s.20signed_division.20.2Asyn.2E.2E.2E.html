<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle2022-RC2: Where&#x27;s signed_division *syn... · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2022-RC2.3A.20Where.27s.20signed_division.20.2Asyn.2E.2E.2E.html">[isabelle] Isabelle2022-RC2: Where&#x27;s signed_division *syn...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="301412463"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2022-RC2%3A%20Where%27s%20signed_division%20%2Asyn.../near/301412463" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2022-RC2.3A.20Where.27s.20signed_division.20.2Asyn.2E.2E.2E.html#301412463">(Sep 29 2022 at 10:43)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Where's the <em>syntactic</em> signed_division type class gone.</p>
<p>I remember that it was a convention to have syntactic type-classes that <br>
define the operators, and make no assumptions.</p>
<p>This used to be the case for signed_division <br>
(HOL-Library.Signed_Division), but has changed now, and the sdiv and <br>
smod are defined only in a typeclass with assumptions.</p>
<p>This breaks my formalization, with the only workarounds being to use <br>
different infix operators, or to hide and overload the ones defined by <br>
signed-division</p>
<p>... both inferior solutions to simply using sdiv/smod to express signed <br>
division (however in a type where it's only partially defined, and thus <br>
does not satisfy the class assumptions)</p>
<p>Any particular reason for that change? Or just by accident?</p>



<a name="301785826"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2022-RC2%3A%20Where%27s%20signed_division%20%2Asyn.../near/301785826" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2022-RC2.3A.20Where.27s.20signed_division.20.2Asyn.2E.2E.2E.html#301785826">(Oct 01 2022 at 08:34)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Peter et. al.,</p>
<p>for the moment being it is not a big deal to introduce dedicated <br>
syntactic type classes for _ sdiv _ and _ smod _.</p>
<p>A change is underway, but I have to await the test results of that and a <br>
predecessor; this will hopefully happen during today, otherways I will <br>
send a dedicated change to Makarius.</p>
<p>The state-of-the-art device for managing reusable syntax are bundles, <br>
and some examples can now be found in the distribution, notably the <br>
infix bit operations.  Their applications still requires boilerplate, <br>
and I would definitely not suggest to use them for pervasive syntax like </p>
<ul>
<li>
<ul>
<li>
<ul>
<li>at the moment, but for more exotic notations everything should <br>
work out fine already.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>More instances of that pattern will bring suggestions what is needed to <br>
make it even more convenient. (think loudly – sth. like default bundles <br>
scoped to a theory could be an idea).</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/iKlnkheC5-3CB76_lAY5iimY/OpenPGP_0xA707172232CFA4E9.asc">OpenPGP_0xA707172232CFA4E9.asc</a><br>
<a href="/user_uploads/14278/kg8gF1yRsqnGVkIforY7okcD/OpenPGP_signature">OpenPGP_signature</a></p>



<a name="301790437"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2022-RC2%3A%20Where%27s%20signed_division%20%2Asyn.../near/301790437" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2022-RC2.3A.20Where.27s.20signed_division.20.2Asyn.2E.2E.2E.html#301790437">(Oct 01 2022 at 09:17)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Hi Florian.</p>
<blockquote>
<p>A change is underway,</p>
</blockquote>
<p>great!</p>
<blockquote>
<p>The state-of-the-art device for managing reusable syntax are bundles, <br>
and some examples can now be found in the distribution, notably the <br>
infix bit operations.  Their applications still requires boilerplate, <br>
and I would definitely not suggest to use them for pervasive syntax <br>
like + * - at the moment, but for more exotic notations everything <br>
should work out fine already.</p>
</blockquote>
<p>They have the disadvantage that you cannot have multiple bundles with <br>
the same syntax unbundled.</p>
<p>In my case, I am working with lemmas of the form:</p>
<p>bitsize a = bitsize b ==&gt; a sdiv b = to_int a sdiv to_int b</p>
<p>you could argue that this dual use of sdiv, as partial function and as <br>
total function, might be confusing, and you should introduce another <br>
name. But that's a design decision, and depends on many factors. Not <br>
having a syntactic type-class forces this decision one way.</p>
<p>And, similarly, for other theories (I use regularly), e.g., <br>
Separation_Algebra, where + is overloaded to have partial meaning.</p>
<p>Also an opinion: sdiv and smod being one of the basic operations on <br>
words, I do not consider them particularly 'exotic'.</p>



<a name="301937247"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2022-RC2%3A%20Where%27s%20signed_division%20%2Asyn.../near/301937247" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2022-RC2.3A.20Where.27s.20signed_division.20.2Asyn.2E.2E.2E.html#301937247">(Oct 02 2022 at 13:45)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;</p>
<blockquote>
<p>They have the disadvantage that you cannot have multiple bundles with <br>
the same syntax unbundled.</p>
</blockquote>
<p>That's right. We have no syntactic overloading yet. Until them, we have <br>
to work with funny combinations of lettes and glyphs.</p>
<blockquote>
<p>Also an opinion: sdiv and smod being one of the basic operations on <br>
words, I do not consider them particularly 'exotic'.</p>
</blockquote>
<p>With »exotic« I mean not the the operations are »uncanonical« but are <br>
not pervasively used in arbitrary theories like e. g. addition.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/whudAZ1HbDoKC8vnP79T42Us/OpenPGP_0xA707172232CFA4E9.asc">OpenPGP_0xA707172232CFA4E9.asc</a><br>
<a href="/user_uploads/14278/aUXTcClmrTnRbaQoktivWfBF/OpenPGP_signature">OpenPGP_signature</a></p>



<a name="302008751"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2022-RC2%3A%20Where%27s%20signed_division%20%2Asyn.../near/302008751" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2022-RC2.3A.20Where.27s.20signed_division.20.2Asyn.2E.2E.2E.html#302008751">(Oct 03 2022 at 07:06)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi Florian,</p>
<blockquote>
<p>The state-of-the-art device for managing reusable syntax are bundles, <br>
and some examples can now be found in the distribution, notably the <br>
infix bit operations.  Their applications still requires boilerplate, <br>
and I would definitely not suggest to use them for pervasive syntax <br>
like + * - at the moment, but for more exotic notations everything <br>
should work out fine already.</p>
</blockquote>
<p>I'd like to stress that "syntactic type classes" are not purely useful <br>
for input syntax but can have useful logical implications related to <br>
type-classes.</p>
<p>As a slightly contrived example:</p>
<p>Assume we write a new type class "ordered_enum".</p>
<p>Which has the axioms:</p>
<p>enum_ordered: "forall x,y: x &lt;= y ==&gt; exists i,j with i &lt;= j: enum!i <br>
= x /\ enum!j = y"  (basically: enum is an ordered list of all elements <br>
of the type)</p>
<p>enum_unique: "unique enum" (no duplicates)</p>
<p>If there were a syntactic type class for enum, I could write</p>
<p>class ordered_enum = linorder + *syntactic_enum *+ assumes <br>
enum_ordered: "...." and enum_unique: "...."</p>
<p>and then later prove "subclass ordered_enum &lt;= enum" (because the enum <br>
axioms easily follow from the stronger ones given here).</p>
<p>But since we do not have a syntactic enum, we have to write (as far as I <br>
can tell):</p>
<p>class ordered_enum = linorder + *enum *+ assumes enum_ordered: <br>
"...." and enum_unique: "...."</p>
<p>This gives the same effect in the end, except that now in every instance <br>
proof of ordered_enum, we need to additionally prove the enum axioms. <br>
This increases redundancy unnecessarily.</p>
<p>Even more problematic is when someone wants to introduce additional <br>
typeclasses that have less requirements than the existing ones. Imagine <br>
the syntactic "ord" would not exist (i.e., "order" would be the first <br>
type class defining less_eq), then it would not be possible to introduce <br>
a type-class quasiorder that, say, does not have antisymmetry. (Or, it <br>
would be possible, but it would be impossible to make it a superclass of <br>
"order".)</p>
<p>So I would advocate keeping the syntactic classes even if fancy syntax <br>
extensions become possible in the future.</p>
<p>Best wishes,<br>
Dominique.</p>
<blockquote>
<p>More instances of that pattern will bring suggestions what is needed <br>
to make it even more convenient. (think loudly – sth. like default <br>
bundles scoped to a theory could be an idea).</p>
<p>Cheers,<br>
    Florian</p>
<p>Am 29.09.22 um 12:43 schrieb Peter Lammich:</p>
<blockquote>
<p>Where's the <em>syntactic</em> signed_division type class gone.</p>
<p>I remember that it was a convention to have syntactic type-classes <br>
that define the operators, and make no assumptions.</p>
<p>This used to be the case for signed_division <br>
(HOL-Library.Signed_Division), but has changed now, and the sdiv and <br>
smod are defined only in a typeclass with assumptions.</p>
<p>This breaks my formalization, with the only workarounds being to use <br>
different infix operators, or to hide and overload the ones defined <br>
by signed-division</p>
<p>... both inferior solutions to simply using sdiv/smod to express <br>
signed division (however in a type where it's only partially defined, <br>
and thus does not satisfy the class assumptions)</p>
<p>Any particular reason for that change? Or just by accident?</p>
<p>-- </p>
<p>Peter</p>
</blockquote>
<p>On 18/09/2022 16:04, Makarius wrote:</p>
<blockquote>
<blockquote>
<p>Dear Isabelle users,</p>
<p>we are making quick progress with the Isabelle2022, which is to be <br>
finalized until 23-Oct-2022.</p>
<p>The release process is continuously documented on the blog entry<br>
<a href="https://isabelle-dev.sketis.net/phame/post/view/58/release_candidates_for_isabelle2022">https://isabelle-dev.sketis.net/phame/post/view/58/release_candidates_for_isabelle2022</a> <br>
--- this includes a list of notable changes.</p>
<p>The current release candidate is<br>
<a href="https://isabelle.sketis.net/website-Isabelle2022-RC2">https://isabelle.sketis.net/website-Isabelle2022-RC2</a></p>
<p>A corresponding version of the Archive of Formal Proofs is<br>
<a href="https://isabelle.sketis.net/repos/afp-devel/rev/34a31d29f666">https://isabelle.sketis.net/repos/afp-devel/rev/34a31d29f666</a>.</p>
<p>Any feedback about Isabelle release candidates should be posted with <br>
a meaningful Subject  (not just a clone of the announcement).</p>
<p>Makarius<br>
</p>
</blockquote>
</blockquote>
</blockquote>



<a name="302640555"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2022-RC2%3A%20Where%27s%20signed_division%20%2Asyn.../near/302640555" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2022-RC2.3A.20Where.27s.20signed_division.20.2Asyn.2E.2E.2E.html#302640555">(Oct 06 2022 at 12:28)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Dominique,</p>
<blockquote>
<p>I'd like to stress that "syntactic type classes" are not purely useful <br>
for input syntax but can have useful logical implications related to <br>
type-classes.</p>
</blockquote>
<p>I did not stress that issue in my last e-mail, but I am aware of this<br>
– one concrete example requiring the same pattern in the distribution is <br>
»gcd«.</p>
<blockquote>
<p>So I would advocate keeping the syntactic classes even if fancy syntax <br>
extensions become possible in the future.</p>
</blockquote>
<p>I don't think that there will be even the chance of any massive movement in<br>
the distribution to abolish syntactic type classes.</p>
<p>On the other side I don't think it is a good idea to introduce syntactic<br>
type classes unconditionally, but follow an on-demand approach here.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/_HSsCx5SD21PQg_wHQdTZyud/OpenPGP_0xA707172232CFA4E9.asc">OpenPGP_0xA707172232CFA4E9.asc</a><br>
<a href="/user_uploads/14278/z7QuldLUmGnsypnePM1u891v/OpenPGP_signature">OpenPGP_signature</a></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>