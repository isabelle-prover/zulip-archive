<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle2025-RC1: issues with Command click th... · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2025-RC1.3A.20issues.20with.20Command.20click.20th.2E.2E.2E.html">[isabelle] Isabelle2025-RC1: issues with Command click th...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="498049563"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2025-RC1%3A%20issues%20with%20Command%20click%20th.../near/498049563" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2025-RC1.3A.20issues.20with.20Command.20click.20th.2E.2E.2E.html#498049563">(Feb 06 2025 at 07:05)</a>:</h4>
<p>From: Ian Hayes &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
I'm using MacOS Sequoia 15.3.</p>
<p>Issue 1:<br>
For the attached theory file,<br>
a Command click on the reference to lemma subset in locale test2, it <br>
takes one to the lemma in locale test1, however,<br>
a Command click on the reference to HT_def in locale test2 it takes one <br>
to the head of locale test2.<br>
A Command click on the reference to HT_def in locale test1 it takes one <br>
to the definition (in test1) as expected.<br>
A Command click on the reference to XX_def in locale test2 it takes one <br>
to the definition (outside the locales) as expected.<br>
The difference is that XX is defined outside the locale but HT is <br>
defined inside.<br>
I think same behaviour occurs in Isabelle-2024.</p>
<p>Issue 2: Again this is not a new issue.<br>
A slight movement of the mouse when Command clicking through to a <br>
lemma/definition means it fails and selects the character under the <br>
cursor. I'm guessing this is something to do with the fact that the <br>
Command click occurs, not on pressing the mouse, but when it is then <br>
released. For example, if you Command press and move the mouse a little <br>
and then release, it won't go through to the definition but rather <br>
selects the text under the cursor. And the behaviour is worse when I use <br>
an Apple magic mouse in place of an old mouse -- I suspect because the <br>
Magic mouse will generate a small movement more easily.</p>
<p>A similar issue occurs when clicking on a the output of sledgehammer to <br>
get it to copy the suggested proof into the theory file.</p>
<p>Another issue is double-clicking the name of a theory in the theories <br>
menu is also flaky if the mouse moves slightly between the two clicks, <br>
even if one remains within the same menu item.</p>
<p>Many thanks in advance<br>
Ian</p>
<p>On 4/2/2025 05:22, Makarius wrote:</p>
<blockquote>
<p>Dear Isabelle users,</p>
<p>we are now ready to start the release process for Isabelle2025 (March <br>
2025). See also the continuously updated blog entry <br>
<a href="https://isabelle-dev.sketis.net/phame/post/view/85/release_candidates_for_isabelle2025">https://isabelle-dev.sketis.net/phame/post/view/85/release_candidates_for_isabelle2025</a></p>
<p>The current release candidate is available from <br>
<a href="https://isabelle.in.tum.de/website-Isabelle2025-RC1">https://isabelle.in.tum.de/website-Isabelle2025-RC1</a></p>
<p>A corresponding version of the Archive of Formal Proofs is <br>
<a href="https://isabelle.sketis.net/repos/afp-devel/rev/634f3bc5f94b">https://isabelle.sketis.net/repos/afp-devel/rev/634f3bc5f94b</a></p>
<p>The NEWS and ANNOUNCE files are already up-to-date, but some <br>
documentation still requires update.</p>
<p>The rules of the game are the same as in the past few decades: NOW is <br>
the window of opportunity to discuss observations and problems, in <br>
order to get changes into the code-base. The final release remains <br>
unchangeable, until the next one (8-10 months later).</p>
<p>Any feedback about Isabelle release candidates should be posted with a <br>
meaningful Subject, not just a clone of this announcement.</p>
<p>Makarius</p>
</blockquote>
<p><a href="/user_uploads/14278/v3Va8_-IYVOt6XDoH--2kAfy/test2.thy">test2.thy</a></p>



<a name="498198764"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2025-RC1%3A%20issues%20with%20Command%20click%20th.../near/498198764" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2025-RC1.3A.20issues.20with.20Command.20click.20th.2E.2E.2E.html#498198764">(Feb 06 2025 at 19:48)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 06/02/2025 08:04, Ian Hayes (via cl-isabelle-users Mailing List) wrote:</p>
<blockquote>
<p>Issue 1:<br>
For the attached theory file,<br>
a Command click on the reference to lemma subset in locale test2, it takes one <br>
to the lemma in locale test1, however,<br>
a Command click on the reference to HT_def in locale test2 it takes one to the <br>
head of locale test2.<br>
A Command click on the reference to HT_def in locale test1 it takes one to the <br>
definition (in test1) as expected.<br>
A Command click on the reference to XX_def in locale test2 it takes one to the <br>
definition (outside the locales) as expected.<br>
The difference is that XX is defined outside the locale but HT is defined inside.<br>
I think same behaviour occurs in Isabelle-2024.</p>
</blockquote>
<p>This refers to the attached test2.thy which imports test1, but I did not see <br>
test1.thy: using "imports Main" instead works, but maybe you intended to show <br>
something else in test1.thy?</p>
<p>Anyway, I have clicked through the formal entities as sketched above, and <br>
don't see anything suspicious. Note that "locale test2 = test1 ..." in is not <br>
just a plain import, but a new locale based on existing locale(s) via locale <br>
expressions that are internally turned into morphisms. Formal entities of the <br>
new locale then get the position of the morphism that was applied to the old <br>
entities, instead of the old entities, or both the morphism and entity. That <br>
could be certainly improved at some point, but it is not a regression from <br>
Isabelle versions in the past decade.</p>
<p>Side-remark: mixing up theory names (test1, test2) and local names (test1, <br>
test2) is generally a bad idea: the name-space policies have been specifically <br>
designed some decades ago under the assumption that both kinds are disjoint. <br>
This is easy to achieve by following ancient naming conventions: theory names <br>
capitalized, almost everything inside a theory lower-case (including types, <br>
classes, locales). A rare use of capitalized names inside a theory is OK.</p>
<blockquote>
<p>Issue 2: Again this is not a new issue.<br>
A slight movement of the mouse when Command clicking through to a lemma/ <br>
definition means it fails and selects the character under the cursor. I'm <br>
guessing this is something to do with the fact that the Command click occurs, <br>
not on pressing the mouse, but when it is then released. For example, if you <br>
Command press and move the mouse a little and then release, it won't go <br>
through to the definition but rather selects the text under the cursor. And <br>
the behaviour is worse when I use an Apple magic mouse in place of an old <br>
mouse -- I suspect because the Magic mouse will generate a small movement more <br>
easily.</p>
</blockquote>
<p>It sounds like input device problems. I don't have an Apple mouse nor a <br>
touchpad to test it: I always use an old Logitech wheel-mouse with my test <br>
machine Mac Mini for testing.</p>
<p>I do have macOS Sequoia 15.3 available.</p>
<blockquote>
<p>A similar issue occurs when clicking on a the output of sledgehammer to get it <br>
to copy the suggested proof into the theory file.</p>
<p>Another issue is double-clicking the name of a theory in the theories menu is <br>
also flaky if the mouse moves slightly between the two clicks, even if one <br>
remains within the same menu item.</p>
</blockquote>
<p>I cannot reproduce that with my Apple test equipment.</p>
<p>Can seasoned Apple user confirm any of these problems? Is there anything new <br>
in macOS Sequoia and/or Isabelle2025-RC1?</p>
<p>Makarius</p>



<a name="498361829"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2025-RC1%3A%20issues%20with%20Command%20click%20th.../near/498361829" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2025-RC1.3A.20issues.20with.20Command.20click.20th.2E.2E.2E.html#498361829">(Feb 07 2025 at 15:10)</a>:</h4>
<p>From: "Thiemann, René" &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>
<blockquote>
<blockquote>
<p>Issue 2: Again this is not a new issue.<br>
A slight movement of the mouse when Command clicking through to a lemma/ definition means it fails and selects the character under the cursor. I'm guessing this is something to do with the fact that the Command click occurs, not on pressing the mouse, but when it is then released. For example, if you Command press and move the mouse a little and then release, it won't go through to the definition but rather selects the text under the cursor. And the behaviour is worse when I use an Apple magic mouse in place of an old mouse -- I suspect because the Magic mouse will generate a small movement more easily.</p>
</blockquote>
<p>It sounds like input device problems. I don't have an Apple mouse nor a touchpad to test it: I always use an old Logitech wheel-mouse with my test machine Mac Mini for testing.</p>
<p>I do have macOS Sequoia 15.3 available.</p>
<blockquote>
<p>A similar issue occurs when clicking on a the output of sledgehammer to get it to copy the suggested proof into the theory file.<br>
Another issue is double-clicking the name of a theory in the theories menu is also flaky if the mouse moves slightly between the two clicks, even if one remains within the same menu item.</p>
</blockquote>
<p>I cannot reproduce that with my Apple test equipment.</p>
<p>Can seasoned Apple user confirm any of these problems? Is there anything new in macOS Sequoia and/or Isabelle2025-RC1?</p>
</blockquote>
<p>I can confirm the behaviour: if you move the mouse-pointer between click-and-release or between a double-click, then this<br>
is interpreted differently than a standard click and double-click without movement when running Isabelle 2025-RC1 and Seqouia 15.3.</p>
<p>However, neither with my laptop touchpad nor with a classical (non-magic) mouse I a have a problem that there actually<br>
is movement between click-release or double-click, if I do not (on purpose) move my finger on the touchpad, or move the mouse<br>
during these actions.</p>
<p>Best,<br>
René</p>



<a name="498655252"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2025-RC1%3A%20issues%20with%20Command%20click%20th.../near/498655252" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2025-RC1.3A.20issues.20with.20Command.20click.20th.2E.2E.2E.html#498655252">(Feb 10 2025 at 01:50)</a>:</h4>
<p>From: Ian Hayes &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi Makarius,</p>
<p>Issue 1: Apologies test2 should just include Main (I was experimenting <br>
with references across theory files and found that it was just across <br>
locales so copied test1.thy into test2.thy so there was just a single <br>
file but forgot to replace the import). I agree it is not a regression <br>
and look forward to improvement at some point in the future. <br>
Side-remark: The naming was me being lazy in building a minimal test file.</p>
<p>Issue2: For MacOS for a left mouse click there are the following mouse <br>
events:</p>
<p>* Press down the button:  NSLeftMouseDown which invokes mouseDown<br>
  * Move the mouse while pressing the button: NSLeftMouseDragged which<br>
    invokes mouseDragged</p>
<p>* Release the button:|NSLeftMouseUp which invokesmouseUp|<br>
  * ||Move the mouse without pressing any button: NSMouseMoved which<br>
    invokes mouseMoved</p>
<p>A combination of mouseDown-mouseDragged-mouseUp selects the text between <br>
the coordinates of the mouseDown and mouseUp. The problem with <br>
Command-click would appear to be that the text selection behaviour is <br>
happening when the Command key is held down (for a click through) and <br>
the selection behaviour is taking precedence over the Command click*. If <br>
the selection behaviour was disabled while the Command key is held down <br>
that might fix the problem. Alternatively, the Command click behaviour <br>
should take precedence over selection of text.</p>
<p>*In practice, sometimes it recognises the Command-click and other it <br>
recognises a selection, so this looks like a classic (concurrency) race <br>
between the two actions. With the Command key held down, mouseDown-move <br>
a few characters-mouseUp always selects the text, even if it is in the <br>
one name.</p>
<p>An alternative scenario is the following.<br>
The mouseDown-mouseUp combination (*without *Command key held) moves the <br>
cursor to the location of the mouse. With the Command key held down, it <br>
non-deterministically either moves the cursor or clicks through to the <br>
definition. Again this looks like a race between the two actions. If the <br>
cursor movement action was disabled while the Command key is held down <br>
or the Command-click given precedence that may work.</p>
<p>From my experimentation, it appears the Command-click does not happen <br>
until the mouse is released (mouseUp). If the Command click action was <br>
invoked on mouseDown, the issue might be resolved.</p>
<p>Using the track-pad rather than the mouse is more reliable but can still <br>
exhibit the same behaviour. The detailed behaviour is that with Command <br>
held down, mouseDown moves the cursor to the mouse location and on <br>
mouseUp it moves it to the definition of the item. On some occasions it <br>
just moves the cursor to the mouse location and does not go to the <br>
definition, and on other occasions it moves the cursor to the mouse <br>
position and removes the highlight from the item under the mouse, where <br>
by highlight, I mean the highlighting that occurs when one presses the <br>
Command key.</p>
<p>Another symptom is that if the cursor is on name and the Command key <br>
held, the name is not highlighted, but if one leaves the Command key <br>
held and moves the cursor a little, the name is then highlighted.<br>
A related symptom is that when the Command key is held and the name <br>
highlighted for a couple of seconds, a pop-up window appears and the <br>
highlight is removed from the name until one moves the cursor again.</p>
<p>An old Dell wheel mouse is more reliable than the track-pad, which is in <br>
turn more reliable than a magic mouse. But note that even with the old <br>
Dell mouse a small mouse movement between down and up gives a cursor <br>
move or select text action, and not a click-through to definition <br>
action. The symptoms occur on both my old M1 laptop and a new mini with <br>
a fresh install of everything.</p>
<p>Probably not relevant here but in the Finder under MacOS, if wants to <br>
select multiple files, one holds down the Command key while clicking on <br>
each file.</p>
<p>Disclaimer: I'm not a mouse event handling expert.</p>
<p>Thanks in advance<br>
Ian</p>
<p>On 7/2/2025 05:47, Makarius wrote:</p>
<blockquote>
<p>On 06/02/2025 08:04, Ian Hayes (via cl-isabelle-users Mailing List) <br>
wrote:</p>
<blockquote>
<p>Issue 1:<br>
For the attached theory file,<br>
a Command click on the reference to lemma subset in locale test2, it <br>
takes one to the lemma in locale test1, however,<br>
a Command click on the reference to HT_def in locale test2 it takes <br>
one to the head of locale test2.<br>
A Command click on the reference to HT_def in locale test1 it takes <br>
one to the definition (in test1) as expected.<br>
A Command click on the reference to XX_def in locale test2 it takes <br>
one to the definition (outside the locales) as expected.<br>
The difference is that XX is defined outside the locale but HT is <br>
defined inside.<br>
I think same behaviour occurs in Isabelle-2024.</p>
</blockquote>
<p>This refers to the attached test2.thy which imports test1, but I did <br>
not see test1.thy: using "imports Main" instead works, but maybe you <br>
intended to show something else in test1.thy?</p>
<p>Anyway, I have clicked through the formal entities as sketched above, <br>
and don't see anything suspicious. Note that "locale test2 = test1 <br>
..." in is not just a plain import, but a new locale based on existing <br>
locale(s) via locale expressions that are internally turned into <br>
morphisms. Formal entities of the new locale then get the position of <br>
the morphism that was applied to the old entities, instead of the old <br>
entities, or both the morphism and entity. That could be certainly <br>
improved at some point, but it is not a regression from Isabelle <br>
versions in the past decade.</p>
<p>Side-remark: mixing up theory names (test1, test2) and local names <br>
(test1, test2) is generally a bad idea: the name-space policies have <br>
been specifically designed some decades ago under the assumption that <br>
both kinds are disjoint. This is easy to achieve by following ancient <br>
naming conventions: theory names capitalized, almost everything inside <br>
a theory lower-case (including types, classes, locales). A rare use of <br>
capitalized names inside a theory is OK.</p>
<blockquote>
<p>Issue 2: Again this is not a new issue.<br>
A slight movement of the mouse when Command clicking through to a <br>
lemma/ definition means it fails and selects the character under the <br>
cursor. I'm guessing this is something to do with the fact that the <br>
Command click occurs, not on pressing the mouse, but when it is then <br>
released. For example, if you Command press and move the mouse a <br>
little and then release, it won't go through to the definition but <br>
rather selects the text under the cursor. And the behaviour is worse <br>
when I use an Apple magic mouse in place of an old mouse -- I suspect <br>
because the Magic mouse will generate a small movement more easily.</p>
</blockquote>
<p>It sounds like input device problems. I don't have an Apple mouse nor <br>
a touchpad to test it: I always use an old Logitech wheel-mouse with <br>
my test machine Mac Mini for testing.</p>
<p>I do have macOS Sequoia 15.3 available.</p>
<blockquote>
<p>A similar issue occurs when clicking on a the output of sledgehammer <br>
to get it to copy the suggested proof into the theory file.</p>
<p>Another issue is double-clicking the name of a theory in the theories <br>
menu is also flaky if the mouse moves slightly between the two <br>
clicks, even if one remains within the same menu item.</p>
</blockquote>
<p>I cannot reproduce that with my Apple test equipment.</p>
<p>Can seasoned Apple user confirm any of these problems? Is there <br>
anything new in macOS Sequoia and/or Isabelle2025-RC1?</p>
<p>Makarius<br>
</p>
</blockquote>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>