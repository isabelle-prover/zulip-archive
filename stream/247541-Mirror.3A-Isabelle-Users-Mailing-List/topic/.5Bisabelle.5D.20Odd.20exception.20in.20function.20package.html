<html>
<head><meta charset="utf-8"><title>[isabelle] Odd exception in function package · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Odd.20exception.20in.20function.20package.html">[isabelle] Odd exception in function package</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="433235863"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Odd%20exception%20in%20function%20package/near/433235863" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Odd.20exception.20in.20function.20package.html#433235863">(Apr 15 2024 at 08:55)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Dear list,</p>
<p>I've encountered the following unexpected behavior of the function <br>
package. Defining a primitive recursive function with fun yields a THM <br>
exception, if</p>
<p>the recursion goes through a Bex and an If. Using Ex x. x:A &amp; ... <br>
instead of Bex, or using primrec, works though. Is this behaviour to be <br>
expected?</p>
<p>Broken down example below.</p>
<p>(note, I'm still on Isabelle 2023)</p>



<a name="433280758"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Odd%20exception%20in%20function%20package/near/433280758" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Odd.20exception.20in.20function.20package.html#433280758">(Apr 15 2024 at 12:42)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
For reference, here is the exception trace. Just from looking at it, it <br>
seems to me like this could be an issue with η-expansion. The premise in <br>
the implication is exactly the same as the theorem with which it is to <br>
be eliminated, except for η-expansion.</p>
<p>I don't know that code in the function package at all; I am not even <br>
sure what it does. The obvious solution would be to eta-contract before <br>
applying this elimination, but it would be good to investigate if there <br>
is some deeper systemic problem here. After all, η-expansion/contraction <br>
regularly causes problems like this.</p>
<p>Cheers,</p>
<p>Manuel</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>