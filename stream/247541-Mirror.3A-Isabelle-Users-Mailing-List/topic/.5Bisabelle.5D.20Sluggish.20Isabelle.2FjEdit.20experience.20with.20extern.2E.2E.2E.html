<html>
<head><meta charset="utf-8"><title>[isabelle] Sluggish Isabelle/jEdit experience with extern... · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Sluggish.20Isabelle.2FjEdit.20experience.20with.20extern.2E.2E.2E.html">[isabelle] Sluggish Isabelle/jEdit experience with extern...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="440281292"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Sluggish%20Isabelle/jEdit%20experience%20with%20extern.../near/440281292" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Sluggish.20Isabelle.2FjEdit.20experience.20with.20extern.2E.2E.2E.html#440281292">(May 23 2024 at 09:18)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Can anybody confirm this behaviour, e.g. with a single display and very large <br>
editor view and/or small font?</p>
<p>I cannot really reproduce it, although I see a small slowdown (factor 1.2) of <br>
text area painting after moving from Java 17 to Java 21 (Isabelle/4fb5e6499da9).</p>
<p>My test environment: Macmini M1 with macOS 14.4.1 and two 4K-displays (HDMI <br>
and DisplayPort).</p>
<p>Makarius</p>



<a name="440290496"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Sluggish%20Isabelle/jEdit%20experience%20with%20extern.../near/440290496" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Sluggish.20Isabelle.2FjEdit.20experience.20with.20extern.2E.2E.2E.html#440290496">(May 23 2024 at 10:11)</a>:</h4>
<p>From: "John F. Hughes" &lt;<a href="mailto:jfh@cs.brown.edu">jfh@cs.brown.edu</a>&gt;<br>
I've just tested this on a 2015 Macbook</p>
<p>Model Name: MacBook Pro</p>
<p>Model Identifier: MacBookPro12,1</p>
<p>Processor Name: Dual-Core Intel Core i5</p>
<p>Processor Speed: 2.9 GHz</p>
<p>Number of Processors: 1</p>
<p>Total Number of Cores: 2</p>
<p>L2 Cache (per Core): 256 KB</p>
<p>L3 Cache: 3 MB</p>
<p>Hyper-Threading Technology: Enabled</p>
<p>Memory: 16 GB</p>
<p>System Firmware Version: 481.0.0.0.0</p>
<p>OS Loader Version: 540.120.3~37</p>
<p>SMC Version (system): 2.28f7</p>
<p>using two displays, one Thunderbolt using DP, the other a Dell U2715H using<br>
HDMI, both using "Default for display" resolution.</p>
<p>It's a bit slow (i.e., copy-pasting 2048 lines to get to 4096 took a<br>
half-second or so, and then processing them all took 38 seconds), but the<br>
UI repainting, etc., seemed pretty good even when there were those 4.1K<br>
lines --- it almost kept up with my typing in a new theorem at the bottom<br>
of the file (if x is a positive natural number, then so is 2x), although it<br>
reminded me a little of the 300-baud modem days...I <em>could</em> type ahead a<br>
bit if I tried. And it took 14 seconds for "using assms by auto" to be<br>
accepted as a proof.</p>
<p>Frankly, all that seems like the limitations of this 9-year-old laptop<br>
rather than the software.</p>
<p>I saw no difference in performance between the Thunderbolt screen and the<br>
Dell screen.</p>



<a name="440416189"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Sluggish%20Isabelle/jEdit%20experience%20with%20extern.../near/440416189" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Sluggish.20Isabelle.2FjEdit.20experience.20with.20extern.2E.2E.2E.html#440416189">(May 23 2024 at 23:55)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
I can confirm that behaviour on a recent M3 MacBook Pro + 5k external Thunderbolt Display + MacOS 14.5 + Isabelle2024-RC3. On the laptop screen, the UI is very responsive and fast (faster than on any other machine I have), on the external display scrolling for instance is sluggish in normal use and does show the described symptoms for that specific lemma above repeated about 2000 times. The delay is not long, but noticeable enough to be annoying.</p>
<p>This completely goes away if I move the same window over to the laptop screen.</p>
<p>It does seem to be resolution dependent — if I manually reduce the resolution to something smaller on the external monitor, performance increases. Font size doesn’t seem to make a difference.</p>
<p>The same happens to a lesser extent with a different external 4k monitor over USB-3. On that one I can still see a difference to the internal display, but the delay is no longer that annoying. The resolutions it shows me are</p>
<ul>
<li>laptop: 1512 x 982</li>
<li>4k screen: 1920 x 1080</li>
<li>5k screen: 2560 x 1440</li>
</ul>
<p>(it runs all of these in double resolution in reality)</p>
<p>It doesn’t seem to matter whether both external screens are connected or not. If I extend the display via wifi to an iMac with 1920x1080 (x2) resolution, it performs better than the directly connected external 5k display (but still slower than the directly connected 4k display, of course). </p>
<p>I do not observe that behaviour with other programs/editors, e.g. Safari or VSCode are both smooth and fast on the external displays.</p>
<p>This also does not happen with Isabelle2023. The UI is normally responsive there on the external display.</p>
<p>If I had to guess I would suspect something going wrong with Java and graphics hardware acceleration.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="440472986"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Sluggish%20Isabelle/jEdit%20experience%20with%20extern.../near/440472986" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Sluggish.20Isabelle.2FjEdit.20experience.20with.20extern.2E.2E.2E.html#440472986">(May 24 2024 at 09:26)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Your guess is probably correct. Someone else has pointed to the following <br>
ticket on a private thread: <a href="https://bugs.openjdk.org/browse/JDK-8284378">https://bugs.openjdk.org/browse/JDK-8284378</a></p>
<p>"""<br>
JEP 382 - macOS Metal Rendering Pipeline for Java 2D was delivered in JDK 17, <br>
but it is OFF by default, and OpenGL remains the default rendering pipeline.<br>
Having worked through the critical issues which are specific to the Metal <br>
pipeline, and having it available in two releases of JDK already, it is time <br>
to make Metal the default pipeline.</p>
<p>The benefits should be that the more modern Metal API will be more stable <br>
going forward, be more power friendly, faster on most operations, and will <br>
benefit from increased focus on Metal in future Apple hardware.</p>
<p>It will require macOS 10.14 or later - and all systems capable of running <br>
macOS 10.14 and later automatically support metal.<br>
To the remaining extent that JDK is supported or even functional on macOS <br>
10.13 and earlier, they will continue to remain using OpenGL.</p>
<p>Reversion to OpenGL will be possible so long as it is supported by specifying <br>
-Dsun.java2d.opengl=true as a system property on the command line.<br>
"""</p>
<p>Maybe owners of very high-end Apple hardware can test that and report on the <br>
results.</p>
<p>Makarius</p>



<a name="440677007"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Sluggish%20Isabelle/jEdit%20experience%20with%20extern.../near/440677007" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Sluggish.20Isabelle.2FjEdit.20experience.20with.20extern.2E.2E.2E.html#440677007">(May 26 2024 at 01:39)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>
<blockquote>
<p>On 24 May 2024, at 19:26, Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt; wrote:</p>
</blockquote>
<blockquote>
<p>"""<br>
[..]<br>
Reversion to OpenGL will be possible so long as it is supported by specifying -Dsun.java2d.opengl=true as a system property on the command line.<br>
"""</p>
<p>Maybe owners of very high-end Apple hardware can test that and report on the results.</p>
</blockquote>
<p>Can confirm that adding <code>-Dsun.java2d.opengl=true</code> to JEDIT_JAVA_OPTIONS gives me the fast Isabelle2023 behaviour on the external display.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="440700033"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Sluggish%20Isabelle/jEdit%20experience%20with%20extern.../near/440700033" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Sluggish.20Isabelle.2FjEdit.20experience.20with.20extern.2E.2E.2E.html#440700033">(May 26 2024 at 09:26)</a>:</h4>
<p>From: Clemens Ballarin &lt;<a href="mailto:ballarin@in.tum.de">ballarin@in.tum.de</a>&gt;<br>
Glad to hear that this helps.</p>
<p>Please consider reporting the issue to <br>
<a href="https://bugs.java.com/bugdatabase/">https://bugs.java.com/bugdatabase/</a>, perhaps after enquiring on <br>
<a href="https://mail.openjdk.org/mailman/listinfo/client-libs-dev">https://mail.openjdk.org/mailman/listinfo/client-libs-dev</a> how to best <br>
proceed in this case.</p>
<p>Clemens</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>