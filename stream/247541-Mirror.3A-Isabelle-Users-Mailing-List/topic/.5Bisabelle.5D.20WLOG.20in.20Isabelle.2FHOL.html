<html>
<head><meta charset="utf-8"><title>[isabelle] WLOG in Isabelle/HOL · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html">[isabelle] WLOG in Isabelle/HOL</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="348265834"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/348265834" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#348265834">(Apr 10 2023 at 17:13)</a>:</h4>
<p>From: Marco Maggesi &lt;<a href="mailto:marco.maggesi@unifi.it">marco.maggesi@unifi.it</a>&gt;<br>
Hello,</p>
<p>I'm new to Isabelle.<br>
I'm trying to do some basic plane Euclidean geometry using the HOL-Analysis<br>
session.</p>
<p>Harrison in HOL Light made some tactics for implementing WLOG reasoning<br>
(Without Loss of Generality <a href="https://www.cl.cam.ac.uk/~jrh13/papers/wlog.html">https://www.cl.cam.ac.uk/~jrh13/papers/wlog.html</a><br>
)</p>
<p>Are there similar tactics in Isabelle?</p>
<p>More generally, I'm looking for documents describing the Multivariate<br>
library in Isabelle.<br>
What do you think could be a good place to start?</p>
<p>Thanks,<br>
Marco</p>



<a name="348267968"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/348267968" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#348267968">(Apr 10 2023 at 17:24)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
Hello,</p>
<p>there have been ideas to port this to Isabelle, but so far no one has <br>
(to my knowledge). I don't remember in detail how the WLOG tactic works, <br>
but I think it should be quite feasible to do something like this in <br>
Isabelle, perhaps even with an Eisbach method.</p>
<p>I think I also remember that HOL Light's WLOG reminded me a bit of the <br>
transfer method in Isabelle, so perhaps one could even realise it using <br>
that (not sure if it would actually save work though).</p>
<p>As for the Analysis library, I fear there is no actual documentation of <br>
that. There have been ideas to make one for a long time, but it we all <br>
never really found the time to do that. However, what we at least did <br>
was to tag important theorems and definitions with an "important" tag, <br>
so you can try searching the library for that to find out what's there. <br>
There's also a way to generate a PDF document containing all the <br>
important definitions/theorems (which had several hundred pages if I <br>
recall correctly).</p>
<p>There are some documents explaning particular aspects of the library, <br>
e.g. the PDF on type classes and filters (which are crucial for <br>
topological concepts like limits and open sets, but also e..g <br>
derivatives) or the documentation for the real_asymp method (which <br>
automates real asymptotics). I would just suggest that if you have <br>
concrete questions about something, just ask.</p>
<p>Cheers,</p>
<p>Manuel</p>



<a name="348527633"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/348527633" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#348527633">(Apr 11 2023 at 17:47)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hello,</p>
<p>I did at some point implement a wlog keyword for Isabelle. (Not a tactic <br>
but a structured wlog command.)</p>
<p>This was some years back, I am not sure this still works in current <br>
Isabelle versions.</p>
<p>If there is interest, I would be happy to go through the code and <br>
resuscitate it.</p>
<p>However, my problem (that maybe the Isabelle core team or AFP editors <br>
can answer) is the following:</p>
<p>What would be a place for such a development? If I just keep a Wlog <br>
theory somewhere on my homepage, it is not going to be useful (bitrot, <br>
hard to find, cannot use it in AFP submissions). Can such a thing be <br>
published on AFP? (Considering that it does not contain actual proofs <br>
except maybe an example or two.)</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="348527868"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/348527868" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#348527868">(Apr 11 2023 at 17:48)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
Absolutely! The AFP does have a "Tools" section that is intended <br>
precisely for such entries, and yours would not be the first of its kind.</p>
<p>Manuel</p>



<a name="348534948"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/348534948" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#348534948">(Apr 11 2023 at 18:25)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
If this is a structured Isar proof command, I would be interested to see it <br>
(although I am rarely satisfied with such attempts, because it is very <br>
difficult to get right).</p>
<p>Makarius</p>



<a name="348561585"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/348561585" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#348561585">(Apr 11 2023 at 21:02)</a>:</h4>
<p>From: Marco Maggesi &lt;<a href="mailto:marco.maggesi@unifi.it">marco.maggesi@unifi.it</a>&gt;<br>
Thank you Manuel for your quick and informative response.<br>
For now, I'm just learning the system, so I will do my experiment without<br>
using WLOG.</p>
<p>One quick question: I didn't know this mechanism of "keywords".<br>
Is it possible to filter theorems with the "important" tag in the search<br>
mechanism?</p>
<p>Thank you,<br>
Marco</p>
<p>Il giorno lun 10 apr 2023 alle ore 13:47 Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
ha scritto:</p>



<a name="349198221"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/349198221" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#349198221">(Apr 13 2023 at 19:44)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi,<br>
Then I shall try to resurrect my code.</p>
<blockquote>
<p>[Makarius]: If this is a structured Isar proof command, I would be <br>
interested to see it (although I am rarely satisfied with such attempts, <br>
because it is very difficult to get right).</p>
</blockquote>
<p>I will post a link to the code here first. I'm open for suggestion how <br>
to fix wrong use of Isar-interna (which there will probably be plenty <br>
of) before posting it to AFP.</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="350347304"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/350347304" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#350347304">(Apr 16 2023 at 17:43)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi,</p>
<p>I went through my wlog-code and made a working (and somewhat documented) <br>
version of my wlog command.</p>
<p>The files are here: <br>
<a href="https://github.com/dominique-unruh/isabelle-tidbits/tree/1d00f7f1f2fe76df49f6caeb35d83d2e091470bf/Wlog">https://github.com/dominique-unruh/isabelle-tidbits/tree/1d00f7f1f2fe76df49f6caeb35d83d2e091470bf/Wlog</a></p>
<p>And example of how the command works is this:</p>
<p>text ‹The theorem @{thm [source] Complex.card_nth_roots} has the<br>
    additional assumption \&lt;^term&gt;‹n &gt; 0›.<br>
       We use exactly the same proof except for stating that w.l.o.g.,<br>
    \&lt;^term&gt;‹n &gt; 0›.›<br>
    lemma card_nth_roots_strengthened:<br>
       assumes "c ≠ 0"<br>
       shows   "card {z::complex. z ^ n = c} = n"<br>
    proof -<br>
<em>wlog n_pos: "n &gt; 0"</em>*<br>
    **    using negation by (simp add: infinite_UNIV_char_0)*<br>
       have "card {z. z ^ n = c} = card {z::complex. z ^ n = 1}"<br>
         by (rule sym, rule bij_betw_same_card, rule<br>
    bij_betw_nth_root_unity) fact+<br>
       also have "… = n" by (rule card_roots_unity_eq) fact+<br>
       finally show ?thesis .<br>
    qed</p>
<p>Another example is given in the file Wlog_Examples.thy. (It does not <br>
have a ROOT file at the moment. Just download the files into the current <br>
directory for testing.)</p>
<p>Small syntax explanation: <em>wlog name: "assumption"</em> adds the assumption <br>
<em>assumption</em> without loss of generality. Sometime (e.g., when you want <br>
to make use of symmetries), you need to make some of the variables in <br>
the theorem general. Add <em>generalizing x1 x2 ...</em> for this. (This <br>
affects the proof obligation for the wlog-command.) And finally, <br>
assumptions (using the assume command) you made will vanish, unless you <br>
mark them explicitly as something you want to keep (*keeping assmname1 <br>
assmname2 ...*). This is because sometimes dropping some assumptions <br>
while introducing others wlog can make the proof obligation simpler. <br>
Notice also that in the state window of Isabelle, the wlog-command <br>
outputs some additional helpful information for the proof obligation proof.</p>
<p>I'm happy to hear any feedback (also about the ML-interna and the <br>
realization of the structured command). If it is something that seems <br>
feasible to me, I can then incorporate it in the AFP submission when I <br>
make one.</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="350424920"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/350424920" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#350424920">(Apr 17 2023 at 07:14)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi,</p>
<p>great to hear that it works in your cases. :)</p>
<p>Yes, that is some leftover debug output. I'll remove it before making <br>
the Wlog-theories "official".</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="350426213"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/350426213" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#350426213">(Apr 17 2023 at 07:21)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:holub@karlin.mff.cuni.cz">holub@karlin.mff.cuni.cz</a>&gt;<br>
Hi, Dominique,</p>
<p>of course, it would be lovely to have wlog!</p>
<p>I have been solving the problem by a not very nice scheme:</p>
<p>lemma fact_aux: &lt;with the wlog assumption&gt;<br>
lemma fact: &lt;using fact_aux&gt;<br>
hide_fact fact_aux</p>
<p>I have tried your code to two such cases, and it works well.</p>
<p>Small issue: after wlog is proved I am getting something like<br>
([...], 3) (line 95 of "~/wlog.ML")<br>
([...], 2) (line 95 of "~/wlog.ML")<br>
([...], 1) (line 95 of "~/wlog.ML")</p>
<p>where ... is filled with assumptions that I  kept by<br>
keeping assms</p>
<p>Stepan</p>



<a name="350432030"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/350432030" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#350432030">(Apr 17 2023 at 07:50)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:holub@karlin.mff.cuni.cz">holub@karlin.mff.cuni.cz</a>&gt;<br>
BTW, would it be better, to use standard<br>
from ....<br>
wlog ...<br>
for ...<br>
instead of the new keywords "keeping" and "generalizing"?</p>
<p>Stepan</p>



<a name="350434462"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/350434462" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#350434462">(Apr 17 2023 at 08:01)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi,</p>
<p>Using "for" instead of "generalizing" is possible. But I think it is <br>
still somewhat confusing because "for" usually binds names locally for a <br>
command in Isabelle convention. (I.e., whenever I have a "for x", I <br>
could just replace all the x's in the command by y's, and I would get <br>
the more or less the same effect. But the "generalizing" refers to <br>
existing variables (like arbitrary: in the induction command), and you <br>
cannot change them unless you change the variable names also /before and <br>
after/ the wlog command.)</p>
<p>Using "from" is problematic for two reasons:</p>
<p>* The technical reason is that "from xxx" does not remember the name<br>
    "xxx", only the term of that fact, while the wlog-command needs to<br>
    know the name of the fact. (In order to make the fact available<br>
    again under the same name.)  It's possible to heuristically figure<br>
    out which fact it might have been from the term, but that's a bit of<br>
    a hack.</p>
<p>* And I also feel that "from" does not capture what is happening here.<br>
    "from xxx" usually means "make xxx available for the proof of the<br>
    following theorem", so you would expect the proof of the wlog to<br>
    become /easier/ with more theorems in the from. However, the keeping<br>
    says which assumptions should still be available /after/ the wlog.<br>
    Adding more facts in "keeping" makes the proof of the wlog itself<br>
    /harder!/</p>
<p>But I'm definitely open for ideas for better names. (I tried using the <br>
existing keywords such as "for" etc., but I ended up with something I <br>
could hardly understand myself. The current words aren't optimal but <br>
definitely better than what I had before in terms of understandability.)</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="350442354"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/350442354" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#350442354">(Apr 17 2023 at 08:39)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:holub@karlin.mff.cuni.cz">holub@karlin.mff.cuni.cz</a>&gt;<br>
Hi,</p>
<p>concerning names, I think what you say is not true. The generalized <br>
variables are changed from free to skolem. So, on the contrary, a user <br>
expecting to be able to use the old names will be confused (blue changed <br>
to brown).<br>
Similar remark concerns the kept assumptions (including facts proved <br>
before the use of wlog): unless they are kept explicitly, they are lost. <br>
This a well known trap from induction, where "using" has to be used <br>
before induction method is invoked.</p>
<p>Stepan</p>



<a name="350443252"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20WLOG%20in%20Isabelle/HOL/near/350443252" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20WLOG.20in.20Isabelle.2FHOL.html#350443252">(Apr 17 2023 at 08:43)</a>:</h4>
<p>From: Stepan Holub &lt;<a href="mailto:holub@karlin.mff.cuni.cz">holub@karlin.mff.cuni.cz</a>&gt;<br>
P.S.: I was referring to names of facts. Concerning the names of <br>
variables, we are in agreement, it indeed is the same as "arbitrary". So <br>
perhaps "arbitrary" could be used as the keyword.</p>
<p>Stepan</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>