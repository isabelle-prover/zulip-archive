<html>
<head><meta charset="utf-8"><title>[isabelle] slow &quot;text&quot; in HOL-Analysis.Infinite_Sum · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20slow.20.22text.22.20in.20HOL-Analysis.2EInfinite_Sum.html">[isabelle] slow &quot;text&quot; in HOL-Analysis.Infinite_Sum</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="534210933"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20slow%20%22text%22%20in%20HOL-Analysis.Infinite_Sum/near/534210933" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20slow.20.22text.22.20in.20HOL-Analysis.2EInfinite_Sum.html#534210933">(Aug 13 2025 at 11:31)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 13/08/2025 09:35, Tobias Nipkow wrote:</p>
<blockquote>
<p>I tuned another slow proof in HOL-Analysis.<br>
Using the timimg panel, I was surprised that this showed up:</p>
<ul>
<li>HOL-Analysis.Infinite_Sum<br>
  - 91.8 command "text"</li>
</ul>
<p>Does that have anything to do with the cite command in that text block?</p>
</blockquote>
<p>I cannot reproduce this problem, neither in your version Isabelle/304519f22c2c <br>
nor in official Isabelle2025.</p>
<p>* What happens when you use Isabelle2025, the official download?</p>
<p>* What happens when you delete the cite antiquotation?</p>
<p>Makarius</p>



<a name="534217517"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20slow%20%22text%22%20in%20HOL-Analysis.Infinite_Sum/near/534217517" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20slow.20.22text.22.20in.20HOL-Analysis.2EInfinite_Sum.html#534217517">(Aug 13 2025 at 12:15)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:manuel@pruvisto.org">manuel@pruvisto.org</a>&gt;<br>
Might be obvious, but just in case: did you try running this command a <br>
few more times? If I recall correctly, timings are sometimes spuriously <br>
very high on innocuous commands. Perhaps due to garbage collection.</p>
<p>Manuel</p>
<p>On 13/08/2025 13:30, Makarius wrote:</p>
<blockquote>
<p>On 13/08/2025 09:35, Tobias Nipkow wrote:</p>
<blockquote>
<p>I tuned another slow proof in HOL-Analysis.<br>
Using the timimg panel, I was surprised that this showed up:</p>
<ul>
<li>HOL-Analysis.Infinite_Sum<br>
  - 91.8 command "text"</li>
</ul>
<p>Does that have anything to do with the cite command in that text block?</p>
</blockquote>
<p>I cannot reproduce this problem, neither in your version <br>
Isabelle/304519f22c2c nor in official Isabelle2025.</p>
<p>* What happens when you use Isabelle2025, the official download?</p>
<p>* What happens when you delete the cite antiquotation?</p>
<p>Makarius</p>
</blockquote>



<a name="534225409"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20slow%20%22text%22%20in%20HOL-Analysis.Infinite_Sum/near/534225409" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20slow.20.22text.22.20in.20HOL-Analysis.2EInfinite_Sum.html#534225409">(Aug 13 2025 at 13:02)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Isabelle 2025 behaves the same for me. The way I tested it was to load <br>
Analysis.thy a number of times, without significant other system load. The <br>
actual time for the text block differs but is always in the 20-90 secs range. <br>
However, when I remove the cite, the timing issue disappears.</p>
<p>Tobias</p>
<p>On 13/08/2025 13:30, Makarius wrote:</p>
<blockquote>
<p>On 13/08/2025 09:35, Tobias Nipkow wrote:</p>
<blockquote>
<p>I tuned another slow proof in HOL-Analysis.<br>
Using the timimg panel, I was surprised that this showed up:</p>
<ul>
<li>HOL-Analysis.Infinite_Sum<br>
  - 91.8 command "text"</li>
</ul>
<p>Does that have anything to do with the cite command in that text block?</p>
</blockquote>
<p>I cannot reproduce this problem, neither in your version Isabelle/304519f22c2c <br>
nor in official Isabelle2025.</p>
<p>* What happens when you use Isabelle2025, the official download?</p>
<p>* What happens when you delete the cite antiquotation?</p>
<p>Makarius<br>
</p>
</blockquote>
<p><a href="/user_uploads/14278/swsubyNUoiKaFgzC4SKE6kBK/smime.p7s">smime.p7s</a></p>



<a name="534770460"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20slow%20%22text%22%20in%20HOL-Analysis.Infinite_Sum/near/534770460" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20slow.20.22text.22.20in.20HOL-Analysis.2EInfinite_Sum.html#534770460">(Aug 16 2025 at 15:53)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 13/08/2025 15:02, Tobias Nipkow wrote:</p>
<blockquote>
<p>The way I tested it was to load <br>
Analysis.thy a number of times, without significant other system load. The <br>
actual time for the text block differs but is always in the 20-90 secs range. <br>
However, when I remove the cite, the timing issue disappears.</p>
</blockquote>
<p>That way, I managed to see a reported timing of approx. 60s for the 'text' <br>
command with "cite" antiquotation, but not every time.</p>
<p>Behind the "cite" antiquotation is quite some complexity: Isabelle/ML needs to <br>
ask Isabelle/Scala to parse bibtex files --- but results are made persistent <br>
for the underlying session, and the bibtex parsing is quite fast in the first <br>
place.</p>
<p>After further experimentation with the implementation, it looks like the high <br>
number is caused by lots of proof tasks running in parallel to an asynchronous <br>
request from ML to Scala and back to ML. There is no long-running task behind <br>
it, just delays in elapsed time.</p>
<p>Conclusion: nothing to be seen here; can be ignored.</p>
<p>Makarius</p>



<a name="534776225"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20slow%20%22text%22%20in%20HOL-Analysis.Infinite_Sum/near/534776225" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20slow.20.22text.22.20in.20HOL-Analysis.2EInfinite_Sum.html#534776225">(Aug 16 2025 at 17:49)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;</p>
<blockquote>
<blockquote>
<p>On 16 Aug 2025, at 16:53, Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt; wrote:</p>
<p>After further experimentation with the implementation, it looks like the <br>
high number is caused by lots of proof tasks running in parallel to an <br>
asynchronous request from ML to Scala and back to ML. There is no long-running <br>
task behind it, just delays in elapsed time.<br>
</p>
</blockquote>
</blockquote>
<p>On 16/08/2025 18:09, Lawrence Paulson wrote:</p>
<blockquote>
<p>The timing panel is subject to extreme variations depending on what else is going on. I guess this is part of poly/ML and cannot be fixed.</p>
</blockquote>
<p>We have many things stacked on top of each other: Poly/ML, Isabelle/ML, <br>
Isabelle/Scala.</p>
<p>Timings are expected to occasionally inaccurate, especially in a parallel and <br>
asynchronous system like Isabelle.</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>