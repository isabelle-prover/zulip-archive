<html>
<head><meta charset="utf-8"><title>[isabelle] smt failures on HOL-Analysis on Windows · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html">[isabelle] smt failures on HOL-Analysis on Windows</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="388236651"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388236651" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388236651">(Aug 31 2023 at 03:14)</a>:</h4>
<p>From: "YAMADA, Akihisa" &lt;<a href="mailto:ayamada@trs.cm.is.nagoya-u.ac.jp">ayamada@trs.cm.is.nagoya-u.ac.jp</a>&gt;<br>
Dear developers,</p>
<p>I fail building HOL-Analysis using RC4 on Windows 11 Pro, version 22H2. <br>
It seems smt fails. My processor is 12th Gen Intel(R) Core(TM) i7-1255U <br>
  2.60 GHz, Installed RAM   is 32.0 GB (31.7 GB usable).</p>
<p>Actually, the same seems ocasionally happen in Isabelle 2022, but with <br>
less frequency and often build succeeds.</p>
<p>This is as shown in the window of jEdit:</p>
<hr>
<p>Build started for Isabelle/HOL-Analysis ...<br>
Building HOL-Analysis ...<br>
HOL-Analysis: theory HOL-Library.FuncSet<br>
HOL-Analysis: theory HOL-Combinatorics.Transposition<br>
HOL-Analysis: theory HOL-Library.Cancellation<br>
HOL-Analysis: theory HOL-Library.Infinite_Set<br>
HOL-Analysis: theory HOL-Library.Nat_Bijection<br>
HOL-Analysis: theory HOL-Library.Old_Datatype<br>
HOL-Analysis: theory HOL-Library.Product_Plus<br>
HOL-Analysis: theory HOL-Library.Phantom_Type<br>
HOL-Analysis: theory HOL-Library.Product_Order<br>
HOL-Analysis: theory HOL-Library.Set_Algebras<br>
HOL-Analysis: theory HOL-Analysis.Metric_Arith<br>
HOL-Analysis: theory HOL-Analysis.Inner_Product<br>
HOL-Analysis: theory HOL-Analysis.L2_Norm<br>
HOL-Analysis: theory HOL-Library.Disjoint_Sets<br>
HOL-Analysis: theory HOL-Analysis.Operator_Norm<br>
HOL-Analysis: theory HOL-Library.Countable<br>
HOL-Analysis: theory HOL-Library.Multiset<br>
HOL-Analysis: theory HOL-Analysis.Poly_Roots<br>
HOL-Analysis: theory HOL-Analysis.Product_Vector<br>
HOL-Analysis: theory HOL-Library.Cardinality<br>
HOL-Analysis: theory HOL-Library.Complex_Order<br>
HOL-Analysis: theory HOL-Library.Discrete<br>
HOL-Analysis: theory HOL-Library.Indicator_Function<br>
HOL-Analysis: theory HOL-Library.Liminf_Limsup<br>
HOL-Analysis: theory HOL-Library.Nonpos_Ints<br>
HOL-Analysis: theory HOL-Library.Periodic_Fun<br>
HOL-Analysis: theory HOL-Library.Sum_of_Squares<br>
HOL-Analysis: theory HOL-Library.Numeral_Type<br>
HOL-Analysis: theory HOL-Library.Countable_Set<br>
HOL-Analysis: theory HOL-Library.Countable_Complete_Lattices<br>
HOL-Analysis: theory HOL-Library.Equipollence<br>
HOL-Analysis: theory HOL-Library.Set_Idioms<br>
HOL-Analysis: theory HOL-Analysis.Continuum_Not_Denumerable<br>
HOL-Analysis: theory HOL-Analysis.Euclidean_Space<br>
HOL-Analysis: theory HOL-Analysis.Abstract_Topology<br>
HOL-Analysis: theory HOL-Analysis.Elementary_Topology<br>
HOL-Analysis: theory HOL-Analysis.Norm_Arith<br>
HOL-Analysis: theory HOL-Analysis.Finite_Cartesian_Product<br>
HOL-Analysis: theory HOL-Analysis.Linear_Algebra<br>
HOL-Analysis: theory HOL-Library.Order_Continuity<br>
HOL-Analysis: theory HOL-Computational_Algebra.Factorial_Ring<br>
HOL-Analysis: theory HOL-Combinatorics.Permutations<br>
HOL-Analysis: theory HOL-Library.Extended_Nat<br>
HOL-Analysis: theory HOL-Analysis.Affine<br>
HOL-Analysis: theory HOL-Analysis.Abstract_Limits<br>
HOL-Analysis: theory HOL-Analysis.FSigma<br>
HOL-Analysis: theory HOL-Analysis.Sum_Topology<br>
HOL-Analysis: theory HOL-Analysis.Convex<br>
HOL-Analysis: theory HOL-Analysis.Cartesian_Space<br>
HOL-Analysis: theory HOL-Analysis.Abstract_Topology_2<br>
HOL-Analysis: theory HOL-Library.Extended_Real<br>
HOL-Analysis: theory HOL-Analysis.Determinants<br>
HOL-Analysis: theory HOL-Analysis.Connected<br>
HOL-Analysis: theory HOL-Analysis.Elementary_Metric_Spaces<br>
HOL-Analysis: theory HOL-Analysis.Function_Topology<br>
HOL-Analysis: theory HOL-Analysis.Product_Topology<br>
HOL-Analysis: theory HOL-Library.Extended_Nonnegative_Real<br>
HOL-Analysis: theory HOL-Analysis.T1_Spaces<br>
HOL-Analysis: theory HOL-Analysis.Lindelof_Spaces<br>
HOL-Analysis: theory HOL-Analysis.Elementary_Normed_Spaces<br>
HOL-Analysis: theory HOL-Analysis.Function_Metric<br>
HOL-Analysis: theory HOL-Analysis.Isolated<br>
HOL-Analysis: theory HOL-Analysis.Infinite_Sum<br>
HOL-Analysis: theory HOL-Analysis.Sigma_Algebra<br>
HOL-Analysis: theory HOL-Analysis.Topology_Euclidean_Space<br>
HOL-Analysis: theory HOL-Computational_Algebra.Euclidean_Algorithm<br>
HOL-Analysis: theory HOL-Analysis.Measurable<br>
HOL-Analysis: theory HOL-Analysis.Convex_Euclidean_Space<br>
HOL-Analysis: theory HOL-Analysis.Measure_Space<br>
HOL-Analysis: theory HOL-Analysis.Extended_Real_Limits<br>
HOL-Analysis: theory HOL-Analysis.Line_Segment<br>
HOL-Analysis: theory HOL-Analysis.Tagged_Division<br>
HOL-Analysis: theory HOL-Analysis.Ordered_Euclidean_Space<br>
HOL-Analysis: theory HOL-Analysis.Starlike<br>
HOL-Analysis: theory HOL-Analysis.Summation_Tests<br>
HOL-Analysis: theory HOL-Analysis.Caratheodory<br>
HOL-Analysis: theory HOL-Analysis.Continuous_Extension<br>
HOL-Analysis: theory HOL-Analysis.Path_Connected<br>
HOL-Analysis: theory HOL-Analysis.Uniform_Limit<br>
HOL-Analysis: theory HOL-Analysis.Locally<br>
HOL-Analysis: theory HOL-Analysis.Uncountable_Sets<br>
HOL-Analysis: theory HOL-Analysis.Homotopy<br>
HOL-Analysis: theory HOL-Analysis.Bounded_Continuous_Function<br>
HOL-Analysis: theory HOL-Analysis.Bounded_Linear_Function<br>
HOL-Analysis: theory HOL-Analysis.Abstract_Euclidean_Space<br>
HOL-Analysis: theory HOL-Analysis.Homeomorphism<br>
HOL-Analysis: theory HOL-Analysis.Abstract_Topological_Spaces<br>
HOL-Analysis: theory HOL-Analysis.Derivative<br>
HOL-Analysis: theory HOL-Computational_Algebra.Primes<br>
HOL-Analysis: theory HOL-Computational_Algebra.Formal_Power_Series<br>
HOL-Analysis: theory HOL-Analysis.Arcwise_Connected<br>
HOL-Analysis: theory HOL-Analysis.Borel_Space<br>
HOL-Analysis: theory HOL-Analysis.Cartesian_Euclidean_Space<br>
HOL-Analysis: theory HOL-Analysis.Complex_Analysis_Basics<br>
HOL-Analysis: theory HOL-Analysis.Abstract_Metric_Spaces<br>
HOL-Analysis: theory HOL-Analysis.Brouwer_Fixpoint<br>
HOL-Analysis: theory HOL-Analysis.Weierstrass_Theorems<br>
HOL-Analysis: theory HOL-Analysis.Cross3<br>
HOL-Analysis: theory HOL-Analysis.Polytope<br>
HOL-Analysis: theory HOL-Analysis.Fashoda_Theorem<br>
HOL-Analysis: theory HOL-Analysis.Retracts<br>
HOL-Analysis: theory HOL-Analysis.Complex_Transcendental<br>
HOL-Analysis: theory HOL-Analysis.Nonnegative_Lebesgue_Integration<br>
HOL-Analysis: theory HOL-Analysis.Regularity<br>
HOL-Analysis: theory HOL-Analysis.Smooth_Paths<br>
HOL-Analysis: theory HOL-Analysis.Lipschitz<br>
HOL-Analysis: theory HOL-Analysis.Urysohn<br>
HOL-Analysis: theory HOL-Analysis.Generalised_Binomial_Theorem<br>
HOL-Analysis: theory HOL-Analysis.Harmonic_Numbers<br>
HOL-Analysis: theory HOL-Analysis.Infinite_Products<br>
HOL-Analysis: theory HOL-Analysis.FPS_Convergence<br>
HOL-Analysis: theory HOL-Analysis.Binary_Product_Measure<br>
HOL-Analysis: theory HOL-Analysis.Multivariate_Analysis<br>
HOL-Analysis: theory HOL-Analysis.Embed_Measure<br>
HOL-Analysis: theory HOL-Analysis.Finite_Product_Measure<br>
HOL-Analysis: theory HOL-Analysis.Bochner_Integration<br>
HOL-Analysis: theory HOL-Analysis.Complete_Measure<br>
HOL-Analysis: theory HOL-Analysis.Radon_Nikodym<br>
HOL-Analysis: theory HOL-Analysis.Set_Integral<br>
HOL-Analysis: theory HOL-Analysis.Lebesgue_Measure<br>
HOL-Analysis: theory HOL-Analysis.Infinite_Set_Sum<br>
HOL-Analysis: theory HOL-Analysis.Henstock_Kurzweil_Integration<br>
HOL-Analysis: theory HOL-Analysis.Equivalence_Lebesgue_Henstock_Integration<br>
HOL-Analysis: theory HOL-Analysis.Integral_Test<br>
HOL-Analysis: theory HOL-Analysis.Further_Topology<br>
HOL-Analysis: theory HOL-Analysis.Gamma_Function<br>
HOL-Analysis: theory HOL-Analysis.Improper_Integral<br>
HOL-Analysis: theory HOL-Analysis.Interval_Integral<br>
HOL-Analysis: theory HOL-Analysis.Vitali_Covering_Theorem<br>
HOL-Analysis: theory HOL-Analysis.Equivalence_Measurable_On_Borel<br>
HOL-Analysis: theory HOL-Analysis.Lebesgue_Integral_Substitution<br>
HOL-Analysis: theory HOL-Analysis.Change_Of_Vars<br>
HOL-Analysis: theory HOL-Analysis.Simplex_Content<br>
HOL-Analysis: theory HOL-Analysis.Jordan_Curve<br>
HOL-Analysis: theory HOL-Analysis.Ball_Volume<br>
HOL-Analysis: theory HOL-Analysis.Analysis<br>
HOL-Analysis FAILED (see also "isabelle build_log -H Error HOL-Analysis")<br>
...<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 1195 of "~~/src/HOL/Analysis/Homotopy.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "qed" (line 966 of "~~/src/HOL/Analysis/Locally.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 58 of "~~/src/HOL/Analysis/Locally.thy")<br>
*** Solver z3: Solver "z3" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 1964 of "~~/src/HOL/Analysis/Infinite_Sum.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 286 of "~~/src/HOL/Analysis/Path_Connected.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 649 of "~~/src/HOL/Analysis/Infinite_Sum.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 3216 of "~~/src/HOL/Analysis/Measure_Space.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 3487 of "~~/src/HOL/Analysis/Measure_Space.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 2009 of "~~/src/HOL/Analysis/Tagged_Division.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 583 of "~~/src/HOL/Analysis/Line_Segment.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 1037 of "~~/src/HOL/Analysis/Tagged_Division.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 243 of <br>
"~~/src/HOL/Analysis/Topology_Euclidean_Space.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 244 of "~~/src/HOL/Analysis/Isolated.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 338 of "~~/src/HOL/Analysis/Connected.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for de<br>
[message truncated]</p>



<a name="388348430"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388348430" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388348430">(Aug 31 2023 at 15:20)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
...</p>
<p>This is bad.</p>
<p>On my only real Windows 11 test machine, I get exactly these kind of failures <br>
of veriT. E.g. in the session HOL-SMT_Examples.</p>
<p>On my 3 virtual Windows test machines it all works fine: Windows Server 2012 <br>
R2, Windows 10, Windows 11.</p>
<p>The option "smt_trace" produces more information about the input to veriT, but <br>
no clue about the actual failure.</p>
<p>Maybe an expert on the veriT setup can say more about it (and reproduce it in <br>
the first place).</p>
<p>In the meantime, I have also made a quick experiment with a different Windows <br>
executable from <a href="https://www.verit-solver.org/download">https://www.verit-solver.org/download</a> --- namely <br>
verit-windows-x85_64-2021.06.2-rmx.zip</p>
<p>No difference, same problem ...</p>
<p>(In contrast, our executable has been built from Source via MinGW.)</p>
<p>Makarius</p>



<a name="388464817"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388464817" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388464817">(Sep 01 2023 at 06:54)</a>:</h4>
<p>From: Mathias Fleury &lt;<a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a>&gt;<br>
Hi all,</p>
<p>I have managed to reproduce this in Isabelle/jEdit, but only <br>
non-deterministically and very very rarely (only twice so far) on <br>
Windows: It seems to be related to the number of jobs running in <br>
parallel (rerunning the faulty line always worked in my tests).</p>
<p>I don't really know where to start debugging this :/ but I am <br>
unconvinced that this is veriT problem.</p>
<p>Does anyone have any idea how I can increase the "threading pressure" (I <br>
have no idea how to call that) to make the issue easier to reproduce? I <br>
have tried to copy-paste the faulty line (to have several smt calls <br>
running at the same time) but this was not enough to help me reproduce it.</p>
<p>Mathias</p>



<a name="388465891"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388465891" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388465891">(Sep 01 2023 at 07:02)</a>:</h4>
<p>From: "YAMADA, Akihisa" &lt;<a href="mailto:ayamada@trs.cm.is.nagoya-u.ac.jp">ayamada@trs.cm.is.nagoya-u.ac.jp</a>&gt;<br>
Hi, thank you for debugging this.</p>
<blockquote>
<p>I don't really know where to start debugging this :/ but I am <br>
unconvinced that this is veriT problem.</p>
</blockquote>
<p>I also observe z3 (though rarely) so it's not only for veriT.</p>
<p>Akihisa</p>
<blockquote>
<p>Does anyone have any idea how I can increase the "threading pressure" (I <br>
have no idea how to call that) to make the issue easier to reproduce? I <br>
have tried to copy-paste the faulty line (to have several smt calls <br>
running at the same time) but this was not enough to help me reproduce it.</p>
<p>Mathias</p>
<p>On 8/31/23 17:20, Makarius wrote:</p>
<blockquote>
<p>On 31/08/2023 05:04, YAMADA, Akihisa wrote:</p>
<blockquote>
<p>I fail building HOL-Analysis using RC4 on Windows 11 Pro, version 22H2.</p>
</blockquote>
<blockquote>
<p>HOL-Analysis FAILED (see also "isabelle build_log -H Error <br>
HOL-Analysis")<br>
...<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "by" (line 1195 of "~~/src/HOL/Analysis/Homotopy.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
"smt_trace" option for details<br>
*** At command "qed" (line 966 of "~~/src/HOL/Analysis/Locally.thy")<br>
*** Solver verit: Solver "verit" failed -- enable tracing using the <br>
...</p>
</blockquote>
<p>This is bad.</p>
<p>On my only real Windows 11 test machine, I get exactly these kind of <br>
failures of veriT. E.g. in the session HOL-SMT_Examples.</p>
<p>On my 3 virtual Windows test machines it all works fine: Windows <br>
Server 2012 R2, Windows 10, Windows 11.</p>
<p>The option "smt_trace" produces more information about the input to <br>
veriT, but no clue about the actual failure.</p>
<p>Maybe an expert on the veriT setup can say more about it (and <br>
reproduce it in the first place).</p>
<p>In the meantime, I have also made a quick experiment with a different <br>
Windows executable from <a href="https://www.verit-solver.org/download">https://www.verit-solver.org/download</a> --- <br>
namely verit-windows-x85_64-2021.06.2-rmx.zip</p>
<p>No difference, same problem ...</p>
<p>(In contrast, our executable has been built from Source via MinGW.)</p>
<p>Makarius</p>
</blockquote>
</blockquote>



<a name="388478952"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388478952" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388478952">(Sep 01 2023 at 08:38)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Problems with many parallel processes on Windows have occurred frequently in <br>
the past. So my first test is always with Isabelle system option "threads=1" <br>
for sequential mode, or a high number for more parallelism.</p>
<p>Even in sequential mode, I see this particular problem occur reliably.</p>
<p>Makarius</p>



<a name="388479803"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388479803" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388479803">(Sep 01 2023 at 08:44)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is a very important observation. I derive the following working <br>
hypotheses from it:</p>
<p>(1) There is something wrong with very old executables running on brand-new <br>
Windows 11.</p>
<p>(2) There is something wrong with the Isabelle bash_process wrapper built <br>
on rather old Cygwin.</p>
<p>Or even:</p>
<p>(3) There is something wrong with the Cygwin version that is used in <br>
Isabelle2023-RC1..4.</p>
<p>Makarius</p>



<a name="388484902"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388484902" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388484902">(Sep 01 2023 at 09:17)</a>:</h4>
<p>From: "YAMADA, Akihisa" &lt;<a href="mailto:ayamada@trs.cm.is.nagoya-u.ac.jp">ayamada@trs.cm.is.nagoya-u.ac.jp</a>&gt;<br>
On 2023/09/01 17:44, Makarius wrote:</p>
<blockquote>
<p>On 01/09/2023 09:02, YAMADA, Akihisa wrote:</p>
<blockquote>
<p>Hi, thank you for debugging this.</p>
<blockquote>
<p>I don't really know where to start debugging this :/ but I am <br>
unconvinced that this is veriT problem.</p>
</blockquote>
<p>I also observe z3 (though rarely) so it's not only for veriT.</p>
</blockquote>
<p>That is a very important observation. I derive the following working <br>
hypotheses from it:</p>
<p>(1) There is something wrong with very old executables running on <br>
brand-new Windows 11.</p>
<p>(2) There is something wrong with the Isabelle bash_process wrapper <br>
built on rather old Cygwin.</p>
</blockquote>
<p>Unfortunately, replacing all Cygwin binaries with the current one didn't <br>
solve the problem.</p>
<p>Best - Akihisa</p>
<blockquote>
<p>Or even:</p>
<p>(3) There is something wrong with the Cygwin version that is used in <br>
Isabelle2023-RC1..4.</p>
<p>Makarius</p>
</blockquote>



<a name="388488933"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388488933" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388488933">(Sep 01 2023 at 09:42)</a>:</h4>
<p>From: Mathias Fleury &lt;<a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a>&gt;<br>
On 9/1/23 10:38, Makarius wrote:</p>
<blockquote>
<p>On 01/09/2023 08:53, Mathias Fleury wrote:</p>
<blockquote>
<p>I have managed to reproduce this in Isabelle/jEdit, but only <br>
non-deterministically and very very rarely (only twice so far) on <br>
Windows: It seems to be related to the number of jobs running in <br>
parallel (rerunning the faulty line always worked in my tests).</p>
</blockquote>
<p>Problems with many parallel processes on Windows have occurred <br>
frequently in the past. So my first test is always with Isabelle <br>
system option "threads=1" for sequential mode, or a high number for <br>
more parallelism.</p>
</blockquote>
<p>Maybe. But as far as I understand,  with threads=1 only one thread is <br>
running, but other tasks are scheduled (even though not executed yet). <br>
And this seems to be key here. Otherwise, I cannot explain how hard it <br>
is to reproduce the behavior in Isabelle/jEdit.</p>
<p>My current reproducer is take a goal (proven with an smt call), <br>
duplicate it 30 times (via application of theorem of the form "P ==&gt; P <br>
==&gt; ...==&gt; P"), and running smt in a subgoal (for parallelism). Every <br>
3rd time (or so), I get such an error.</p>
<p>Internally, the following happens:<br>
   1. smt is running solvers on bash by "solver input_file &gt; proof_file <br>
2&gt;&amp;1" (by default with files in the cache).<br>
   2. the output proof_file is read</p>
<p>The issue here is that in 2 the file is empty.</p>
<p>I managed to read the proof_file (by specifying the names of the files <br>
supply [[smt_debug_files="/tmp/test"]] and making sure that the names <br>
are unique!) and the files contain the right proof (md5sum identical to <br>
the working ones).</p>
<p>Mathias</p>
<blockquote>
<p>Even in sequential mode, I see this particular problem occur reliably.</p>
<p>Makarius<br>
</p>
</blockquote>



<a name="388491910"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388491910" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388491910">(Sep 01 2023 at 10:01)</a>:</h4>
<p>From: Mathias Fleury &lt;<a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a>&gt;<br>
I finally got a proper error message:</p>
<p>exception Io {cause =<br>
               SysErr<br>
                 ("The process cannot access the file because it is <br>
being used by another process.",<br>
                  SOME ERROR_SHARING_VIOLATION),<br>
               function = "BinIO.openIn", name =<br>
"C:\\Users\\zmath\\Desktop\\Isabelle2023-RC4\\contrib\\cygwin\\tmp\\X12.smt_out"} <br>
raised (line 116 of "./basis/BinIO.sml")</p>
<p>It seems to be a Windows-only error …</p>
<p>So I guess that the file is still opened by some process (but which? <br>
bash? Windows defender?), explaining why Isabelle considers it as empty <br>
(all errors are swallowed) and checking the proof later works.</p>
<p>Mathias</p>



<a name="388528325"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388528325" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388528325">(Sep 01 2023 at 13:55)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is an important hint. I will dig further into the Isabelle/ML <br>
implementations behind this particular tmp-file management ...</p>
<p>Makarius</p>



<a name="388554098"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388554098" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388554098">(Sep 01 2023 at 16:00)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I was confused by the above /tmp/X12.smt_out, but now I guess it is probably <br>
the result use manual insertion of smt_debug_files="/tmp/X12" --- Is that correct?</p>
<p>Makarius</p>



<a name="388559295"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388559295" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388559295">(Sep 01 2023 at 16:32)</a>:</h4>
<p>From: <a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a><br>
Yes exactly. This is the only way I found to read file in order to check if there is a proof there or not.</p>
<p>Mathias Fleury</p>



<a name="388601903"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388601903" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388601903">(Sep 01 2023 at 21:23)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 01/09/2023 11:41, Mathias Fleury wrote:</p>
<blockquote>
<p>Internally, the following happens:<br>
   1. smt is running solvers on bash by "solver input_file &gt; proof_file 2&gt;&amp;1" <br>
(by default with files in the cache).<br>
   2. the output proof_file is read</p>
<p>The issue here is that in 2 the file is empty.</p>
</blockquote>



<a name="388916949"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20smt%20failures%20on%20HOL-Analysis%20on%20Windows/near/388916949" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20smt.20failures.20on.20HOL-Analysis.20on.20Windows.html#388916949">(Sep 04 2023 at 06:25)</a>:</h4>
<p>From: "YAMADA, Akihisa" &lt;<a href="mailto:ayamada@trs.cm.is.nagoya-u.ac.jp">ayamada@trs.cm.is.nagoya-u.ac.jp</a>&gt;<br>
Dear Makarius, Mathias,</p>
<p>thank you for debugging and fixing this! RC5 works, and I don't <br>
experience any problem so far.</p>
<p>Best,<br>
Akihisa</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>