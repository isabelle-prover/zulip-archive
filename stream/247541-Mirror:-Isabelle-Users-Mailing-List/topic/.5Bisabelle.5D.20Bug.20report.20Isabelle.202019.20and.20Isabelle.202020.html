<html>
<head><meta charset="utf-8"><title>[isabelle] Bug report Isabelle 2019 and Isabelle 2020 · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html">[isabelle] Bug report Isabelle 2019 and Isabelle 2020</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="217487030"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/217487030" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#217487030">(Nov 21 2020 at 05:56)</a>:</h4>
<p>From: Peter Reitinger &lt;<a href="mailto:peter.reitinger@gmail.com">peter.reitinger@gmail.com</a>&gt;<br>
Hi,</p>
<p>sorry for recently reporting just confusing behavior because of<br>
polymorphism as a bug.</p>
<p>But this time, I am very sure to have observed a bug, if creation of a<br>
memory dump characterizes a bug. ;-)</p>
<p>First the screenshot:</p>
<p>[image: image.png]</p>
<p>The theory reproducing this bug is attached. The try at the end of the<br>
experimental proof (sorry about the mess there, I am still experimenting<br>
with Word &amp; Co theories) produces the error.</p>
<p>Best regards<br>
Peter Reitinger<br>
<a href="/user_uploads/14278/4j3DzjEPqn6eMYOedd5kiTl-/image.png">image.png</a><br>
<a href="/user_uploads/14278/2q4cNAbUktf_F_LnoJ2WuVjk/Show_bug2.thy">Show_bug2.thy</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/4j3DzjEPqn6eMYOedd5kiTl-/image.png" title="image.png"><img src="/user_uploads/14278/4j3DzjEPqn6eMYOedd5kiTl-/image.png"></a></div>



<a name="217498957"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/217498957" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#217498957">(Nov 21 2020 at 12:03)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 21/11/2020 06:56, Peter Reitinger wrote:</p>
<blockquote>
<p>sorry for recently reporting just confusing behavior because of<br>
polymorphism as a bug.</p>
<p>But this time, I am very sure to have observed a bug, if creation of a memory<br>
dump characterizes a bug. ;-)</p>
</blockquote>
<p>The "bug" terminology does not make much sense beyond a certain complexity of<br>
systems (or rather a multi-system compound like the Isabelle ecosystem). You<br>
do have a large space that is "inhabitable", but you also have uncharted areas<br>
where things don't work.</p>
<blockquote>
<p>First the screenshot:</p>
<p>image.png</p>
</blockquote>
<p>I recommend to copy paste actual source text and output, unless this is a<br>
problem of GUI rendering or interaction.</p>
<p>The relevant part of the error is this:</p>
<p>/home/makarius/lib/Isabelle2020/contrib/z3-4.4.0pre-3/x86_64-linux/z3<br>
smt.random_seed\=1 smt.refine_inj_axioms\=false -T:10 -smt2<br>
/tmp/isabelle-makarius/process1270985018603270244/cache-io-3287480 &gt;<br>
/tmp/isabelle-makarius/process1270985018603270244/cache-io-3287482 2&gt;&amp;1</p>
<p>So this is a hard crash of the (rather old) version of z3 that we are using.</p>
<p>There have been other z3 inconveniences before, but I guess we can't upgrade<br>
it easily.</p>
<p>Maybe an expert on the Isabelle/z3 can say more about the situation.</p>
<p>Makarius</p>



<a name="217585651"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/217585651" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#217585651">(Nov 23 2020 at 03:23)</a>:</h4>
<p>From: Peter Reitinger &lt;<a href="mailto:peter.reitinger@gmail.com">peter.reitinger@gmail.com</a>&gt;<br>
Hi again,</p>
<p>maybe this helps...</p>
<p>Here I could produce a crash in "cvc4" with modified Word_Examples:</p>
<p>theory Word_Examples<br>
  imports Word_Bitwise<br>
begin<br>
(* commented previous lemmas out *)<br>
lemma "slice 3 (0b101111::6 word) = (0b101::3 word)" by simp<br>
(* BEGIN preitinger *)<br>
declare [[show_sorts]]<br>
lemma "takefill False (size (1::6 word) - (3::nat)) (to_bl (1::6 word)) =<br>
[False, False, False]"<br>
  apply sledgehammer</p>
<p>Sledgehammering...<br>
/tmp/isabelle-peter/process3745657003709610034/bash_script3287864: Zeile 1:<br>
 6505 Abgebrochen             (Speicherabzug geschrieben)<br>
/home/peter/isabelle/Isabelle2020/contrib/cvc4-1.5-5/x86_64-linux/cvc4<br>
--full-saturate-quant --inst-when\=full-last-call --inst-no-entail<br>
--term-db-mode\=relevant --multi-trigger-linear --no-statistics<br>
--random-seed\=1 --lang\=smt2 --continued-execution --tlimit 9990<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3287858 &gt;<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3287860 2&gt;&amp;1<br>
/tmp/isabelle-peter/process3745657003709610034/bash_script3292002: Zeile 1:<br>
 6520 Abgebrochen             (Speicherabzug geschrieben)<br>
/home/peter/isabelle/Isabelle2020/contrib/cvc4-1.5-5/x86_64-linux/cvc4<br>
--full-saturate-quant --inst-when\=full-last-call --inst-no-entail<br>
--term-db-mode\=relevant --multi-trigger-linear --no-statistics<br>
--random-seed\=1 --lang\=smt2 --continued-execution --tlimit 9845<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3291998 &gt;<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3292000 2&gt;&amp;1<br>
/tmp/isabelle-peter/process3745657003709610034/bash_script3298144: Zeile 1:<br>
 6618 Abgebrochen             (Speicherabzug geschrieben)<br>
/home/peter/isabelle/Isabelle2020/contrib/cvc4-1.5-5/x86_64-linux/cvc4<br>
--full-saturate-quant --inst-when\=full-last-call --inst-no-entail<br>
--term-db-mode\=relevant --multi-trigger-linear --no-statistics<br>
--random-seed\=1 --lang\=smt2 --continued-execution --tlimit 3923<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3298140 &gt;<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3298142 2&gt;&amp;1<br>
/tmp/isabelle-peter/process3745657003709610034/bash_script3298666: Zeile 1:<br>
 6626 Abgebrochen             (Speicherabzug geschrieben)<br>
/home/peter/isabelle/Isabelle2020/contrib/cvc4-1.5-5/x86_64-linux/cvc4<br>
--full-saturate-quant --inst-when\=full-last-call --inst-no-entail<br>
--term-db-mode\=relevant --multi-trigger-linear --no-statistics<br>
--random-seed\=1 --lang\=smt2 --continued-execution --tlimit 3827<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3298662 &gt;<br>
/tmp/isabelle-peter/process3745657003709610034/cache-io-3298664 2&gt;&amp;1<br>
"e": Timed out<br>
"cvc4": The prover crashed<br>
"z3": Timed out<br>
"vampire": Timed out</p>



<a name="217596748"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/217596748" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#217596748">(Nov 23 2020 at 07:49)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
Just a hunch, did you get your Isabelle distribtion from the official<br>
website or from a package repository (e.g. installed using apt, pacman,<br>
etc.)?</p>
<p>Manuel</p>



<a name="217598402"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/217598402" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#217598402">(Nov 23 2020 at 08:15)</a>:</h4>
<p>From: Mathias Fleury &lt;<a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a>&gt;<br>
Hi all,</p>
<p>I had a look and the problems comes from the generated SMT file. CVC4 <br>
does not accept a type annotation in the generated problem (and returns <br>
a nice error message), while Z3 accepts it.</p>
<p>I don't know enough about the SMT-lib format to know who is right, but I <br>
have asked experts to see which solver is wrong.</p>
<p>Thanks for reporting,</p>
<p>Mathias</p>



<a name="217609539"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/217609539" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#217609539">(Nov 23 2020 at 10:13)</a>:</h4>
<p>From: Mathias Fleury &lt;<a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a>&gt;<br>
Hi all,</p>
<p>Some explanation on the bug. The SMT-Lib format makes it possible to <br>
write (_ bv4 9) to mean 4 :: 9 word. However, if the word does not fit, <br>
like for 3 :: 1 word, it is not clear what this means.</p>
<p>If the solver accepts it, it has to discard the leftover bits <br>
(truncating the number). But the SMT-Lib format is not explicit about <br>
that and CVC4 rejects the problem file.</p>
<p>The solution is to generate 1:: 1 word (corresponding to _bv1 1) instead <br>
of <code>3 :: 1 word</code> (corresponding to _bv3 1).</p>
<p>I am currently testing a fix for that.</p>
<p>Mathias</p>



<a name="220090358"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/220090358" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#220090358">(Dec 16 2020 at 08:53)</a>:</h4>
<p>From: Mathias Fleury &lt;<a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a>&gt;<br>
Hi all,</p>
<p>the problem is now fixed <br>
(<a href="https://isabelle-dev.sketis.net/rISABELLEf9424ceea3c33538bd3e52a12d9f8225c8256738">https://isabelle-dev.sketis.net/rISABELLEf9424ceea3c33538bd3e52a12d9f8225c8256738</a>).</p>
<p>Best,</p>
<p>Mathias</p>



<a name="221394365"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/221394365" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#221394365">(Jan 02 2021 at 10:40)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Can you try this again with current Isabelle2021-RC1<br>
<a href="https://isabelle.in.tum.de/website-Isabelle2021-RC1">https://isabelle.in.tum.de/website-Isabelle2021-RC1</a> ?</p>
<p>It will require to change the Word setup: the NEWS file contains some hints<br>
about that.</p>
<p>Makarius</p>



<a name="223830685"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Bug%20report%20Isabelle%202019%20and%20Isabelle%202020/near/223830685" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Bug.20report.20Isabelle.202019.20and.20Isabelle.202020.html#223830685">(Jan 24 2021 at 19:29)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Did you try anything in the meantime?</p>
<p>We already have <a href="https://isabelle.sketis.net/website-Isabelle2021-RC3">https://isabelle.sketis.net/website-Isabelle2021-RC3</a> and<br>
approx. 3 weeks left until everything becomes final and unchangeable.<br>
(Isabelle releases don't have "patch-levels" after the deadline.)</p>
<p>Makarius</p>



<hr><p>Last updated: Jul 15 2022 at 23:21 UTC</p>
</html>