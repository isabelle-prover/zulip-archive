<html>
<head><meta charset="utf-8"><title>[isabelle] Cannot build HOL.Complex_Main · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Cannot.20build.20HOL.2EComplex_Main.html">[isabelle] Cannot build HOL.Complex_Main</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="239063021"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Cannot%20build%20HOL.Complex_Main/near/239063021" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Cannot.20build.20HOL.2EComplex_Main.html#239063021">(May 17 2021 at 10:07)</a>:</h4>
<p>From: Yann Leray &lt;<a href="mailto:yann.leray@inria.fr">yann.leray@inria.fr</a>&gt;<br>
Hello,<br>
I am working on Isabelle/Dedukti, a module to output Isabelle proofs in <br>
Dedukti and Lambdapi.<br>
In this context, I want to build the standard library, and I need Pure <br>
as the basis (I think this is important for my problem).<br>
However, the build won't finish for various reasons. (I got 2 different <br>
reasons for 2 tries which I linked).<br>
Can you explain what I may be doing wrong?</p>
<p>I am new to Isabelle and not well acquainted to even the build <br>
mechanism, as I had for a long time good enough sessions/config files, <br>
so I may probably have missed an important setting or done something <br>
blatantly problematic.</p>
<p>Thanks for your time,</p>
<p>Yann Leray</p>
<p>NB: The machine where I'm running this has 64GB of RAM and about 5GB of <br>
free disk space<br>
NB: I'm not exactly running "isabelle build All" but the module <br>
Dedukti_Import calls for a build, and I am convinced this is where my <br>
problem lies</p>
<p>Relevant session definition:</p>
<p>session All in "Ex/All" = Pure +<br>
   options [export_theory, export_proofs, record_proofs = 2]<br>
   sessions HOL<br>
   theories<br>
     HOL.Complex_Main</p>
<p>Standard output:</p>
<p>Started at Thu May 6 01:36:02 GMT 2021</p>
<p>Build started for Isabelle/All ...<br>
Running All ...<br>
All: theory Tools.Code_Generator<br>
All: theory HOL.HOL<br>
All: theory HOL.Argo<br>
All: theory HOL.SAT<br>
[cut ...]<br>
All: theory HOL.Presburger<br>
All: theory HOL.Sledgehammer<br>
All: theory HOL.List<br>
All: theory HOL.Groups_List<br>
All: theory HOL.Factorial<br>
All: theory HOL.Binomial<br>
All: theory HOL.GCD<br>
All: theory HOL.Map<br>
All: theory HOL.Enum<br>
Run out of store - interrupting threads<br>
All FAILED<br>
(see also <br>
/home/ubuntu/.isabelle/Isabelle2021/heaps/polyml-5.8.2_x86_64_32-linux/log/All) </p>
<p>*** exception Fail raised (line 2220 of "proofterm.ML"): Interrupt: <br>
potential resource problems while exporting proof 2562160<br>
*** At command "by" (line 933 of "~~/src/HOL/Enum.thy")<br>
Unfinished session(s): All</p>
<p>Finished at Thu May 6 02:56:39 GMT 2021<br>
1:20:37 elapsed time</p>
<p>Standard error:</p>
<p>*** Failed to build Isabelle/All</p>
<p>Standard output 2:</p>
<p>Started at Thu May 6 15:36:00 GMT 2021</p>
<p>Build started for Isabelle/All ...<br>
Running All ...<br>
All: theory Tools.Code_Generator<br>
All: theory HOL.HOL<br>
All: theory HOL.Argo<br>
All: theory HOL.SAT<br>
[cut ...]<br>
All: theory HOL.Presburger<br>
All: theory HOL.Sledgehammer<br>
All: theory HOL.List<br>
All: theory HOL.Groups_List<br>
All: theory HOL.Factorial<br>
All: theory HOL.Binomial<br>
All: theory HOL.GCD<br>
All: theory HOL.Map<br>
All: theory HOL.Enum</p>
<p>Standard error 2:</p>
<p>Exception in thread "Isabelle.message_output" <br>
java.lang.IndexOutOfBoundsException: Range [0, 0 + -194519867) out of <br>
bounds for length 65536<br>
         at <br>
java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)<br>
         at <br>
java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromIndexSize(Preconditions.java:82)<br>
         at <br>
java.base/jdk.internal.util.Preconditions.checkFromIndexSize(Preconditions.java:343)<br>
         at <br>
java.base/java.util.Objects.checkFromIndexSize(Objects.java:411)<br>
         at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:339)<br>
         at <br>
java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:803)<br>
         at <br>
java.base/java.net.Socket$SocketInputStream.read(Socket.java:981)<br>
         at isabelle.Prover.read_chunk_bytes$1(prover.scala:290)<br>
         at isabelle.Prover.$anonfun$message_output$1(prover.scala:316)<br>
         at <br>
isabelle.Isabelle_Thread$.$anonfun$fork$2(isabelle_thread.scala:65)<br>
         at isabelle.Isabelle_Thread.run(isabelle_thread.scala:141)</p>



<a name="239573925"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Cannot%20build%20HOL.Complex_Main/near/239573925" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Cannot.20build.20HOL.2EComplex_Main.html#239573925">(May 20 2021 at 11:26)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 17/05/2021 06:25, Yann Leray wrote:</p>
<blockquote>
<p>I am working on Isabelle/Dedukti, a module to output Isabelle proofs in<br>
Dedukti and Lambdapi.</p>
</blockquote>
<blockquote>
<p>However, the build won't finish for various reasons.</p>
<p>NB: The machine where I'm running this has 64GB of RAM and about 5GB of free<br>
disk space<br>
NB: I'm not exactly running "isabelle build All" but the module Dedukti_Import<br>
calls for a build, and I am convinced this is where my problem lies</p>
<p>Relevant session definition:</p>
<p>session All in "Ex/All" = Pure +<br>
  options [export_theory, export_proofs, record_proofs = 2]<br>
  sessions HOL<br>
  theories<br>
    HOL.Complex_Main</p>
<p>Standard output:</p>
<p>Started at Thu May 6 01:36:02 GMT 2021</p>
<p>Build started for Isabelle/All ...<br>
Running All ...<br>
All: theory Tools.Code_Generator<br>
All: theory HOL.HOL<br>
All: theory HOL.Argo<br>
All: theory HOL.SAT<br>
[cut ...]<br>
All: theory HOL.Presburger<br>
All: theory HOL.Sledgehammer<br>
All: theory HOL.List<br>
All: theory HOL.Groups_List<br>
All: theory HOL.Factorial<br>
All: theory HOL.Binomial<br>
All: theory HOL.GCD<br>
All: theory HOL.Map<br>
All: theory HOL.Enum<br>
Run out of store - interrupting threads<br>
All FAILED<br>
(see also<br>
/home/ubuntu/.isabelle/Isabelle2021/heaps/polyml-5.8.2_x86_64_32-linux/log/All)<br>
*** exception Fail raised (line 2220 of "proofterm.ML"): Interrupt: potential<br>
resource problems while exporting proof 2562160<br>
*** At command "by" (line 933 of "~~/src/HOL/Enum.thy")<br>
Unfinished session(s): All</p>
</blockquote>
<p>This looks fine so far. The export_proofs option is the result of some<br>
explorative work that I did with Michael Färber approx. 1 year ago, and we<br>
managed to get exactly to HOL.Enum: it requires careful inspection how these<br>
proofs are done internally to get beyond that stage.</p>
<p>Afterwards, additional stages of exploration will be required to export all of<br>
Main or even Complex_Main eventually.</p>
<blockquote>
<p>Exception in thread "Isabelle.message_output"<br>
java.lang.IndexOutOfBoundsException: Range [0, 0 + -194519867) out of bounds<br>
for length 65536<br>
        at<br>
java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)<br>
        at<br>
java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromIndexSize(Preconditions.java:82)</p>
<p>at<br>
java.base/jdk.internal.util.Preconditions.checkFromIndexSize(Preconditions.java:343)</p>
<p>at java.base/java.util.Objects.checkFromIndexSize(Objects.java:411)<br>
        at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:339)<br>
        at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:803)<br>
        at java.base/java.net.Socket$SocketInputStream.read(Socket.java:981)<br>
        at isabelle.Prover.read_chunk_bytes$1(prover.scala:290)<br>
        at isabelle.Prover.$anonfun$message_output$1(prover.scala:316)<br>
        at isabelle.Isabelle_Thread$.$anonfun$fork$2(isabelle_thread.scala:65)<br>
        at isabelle.Isabelle_Thread.run(isabelle_thread.scala:141)</p>
</blockquote>
<p>That is a Java crash, which I have not yet seen before. Maybe it is a<br>
consequence of recent renovations of the underlying socket implementation.</p>
<p>The negative integer looks suspiciously like an overflow of the machine word<br>
type that is historically called "int".</p>
<p>Anyway, I think we should have a private discussion (including Frederic<br>
Blanqui) about the current status of this unfinished research and development<br>
from last year.</p>
<p>I am presently lagging behind many weeks in my mail folder, but this is<br>
sufficiently important to move forward soon.</p>
<p>Makarius</p>



<hr><p>Last updated: Jul 15 2022 at 23:21 UTC</p>
</html>