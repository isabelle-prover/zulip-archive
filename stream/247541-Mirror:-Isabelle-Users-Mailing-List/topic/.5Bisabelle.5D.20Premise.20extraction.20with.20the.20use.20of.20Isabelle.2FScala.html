<html>
<head><meta charset="utf-8"><title>[isabelle] Premise extraction with the use of Isabelle/Scala · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Premise.20extraction.20with.20the.20use.20of.20Isabelle.2FScala.html">[isabelle] Premise extraction with the use of Isabelle/Scala</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="285253990"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Premise%20extraction%20with%20the%20use%20of%20Isabelle/Scala/near/285253990" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Premise.20extraction.20with.20the.20use.20of.20Isabelle.2FScala.html#285253990">(Jun 07 2022 at 13:55)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
The thm_deps command is indeed of relatively little practical relevance: It <br>
inspects the internal derivation, i.e. the low-level implementation of a <br>
proof. This can contain almost arbitrary "rubbish".</p>
<p>Makarius</p>



<a name="285254036"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Premise%20extraction%20with%20the%20use%20of%20Isabelle/Scala/near/285254036" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Premise.20extraction.20with.20the.20use.20of.20Isabelle.2FScala.html#285254036">(Jun 07 2022 at 13:56)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Abstractly, it sounds like you should start within Isabelle/ML, but some <br>
interaction with Isabelle/Scala will be required (e.g. to "see" which facts <br>
were used in the text).</p>
<p>An alternative is to start in Isabelle/Scala (with PIDE context), and interact <br>
with Isabelle/ML via so-called "print functions". E.g. see examples in <br>
Pure/PIDE/query_operation.ML (and .scala).</p>
<p>When you say "visible facts in the current context", what does it mean?</p>
<p>* The proof state (with its formal Proof.context in Isabelle/ML)?</p>
<p>* The surrounding Isar proof text, leading to a goal?</p>
<p>* Something else?</p>
<p>Makarius</p>



<a name="285254098"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Premise%20extraction%20with%20the%20use%20of%20Isabelle/Scala/near/285254098" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Premise.20extraction.20with.20the.20use.20of.20Isabelle.2FScala.html#285254098">(Jun 07 2022 at 13:56)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
The task is certainly difficult, but there are two areas of difficulties that <br>
should be clearly separated:</p>
<p>(1) Conceptual: What are you trying to do? What is the context? What do you <br>
want to achieve?</p>
<p>(2) Technical: Can this be done just with standard Isabelle/ML + <br>
Isabelle/Scala operations? What is the purpose of non-standard python and <br>
scala-isabelle?</p>
<p>Makarius</p>



<a name="285254454"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Premise%20extraction%20with%20the%20use%20of%20Isabelle/Scala/near/285254454" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Premise.20extraction.20with.20the.20use.20of.20Isabelle.2FScala.html#285254454">(Jun 07 2022 at 13:59)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
It seems that you did not answer this back to the mailing list. Thus is will <br>
cause a lot of confusion about "who said what" in the ongoing discussion.</p>
<p>Makarius</p>



<a name="285454426"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Premise%20extraction%20with%20the%20use%20of%20Isabelle/Scala/near/285454426" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Premise.20extraction.20with.20the.20use.20of.20Isabelle.2FScala.html#285454426">(Jun 08 2022 at 21:16)</a>:</h4>
<p>From: Szymon Antoniak &lt;<a href="mailto:sa394197@students.mimuw.edu.pl">sa394197@students.mimuw.edu.pl</a>&gt;<br>
In effort to straighten the email history, I will respond here and hopefully establish some linearity from this point on.<br>
As to the visible facts, what I mean by that is all the possible theorems/lemmas that sledgehammer gets to see before applying the relevance filter (i.e. what could appear at the position of the dots in by (metis ...)).</p>
<p>Szymon</p>
<p>7 czerwca 2022 15:55, "Makarius" &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt; napisał/-a/:</p>



<a name="286640500"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Premise%20extraction%20with%20the%20use%20of%20Isabelle/Scala/near/286640500" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Premise.20extraction.20with.20the.20use.20of.20Isabelle.2FScala.html#286640500">(Jun 18 2022 at 09:11)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;</p>
<blockquote>
<p>On 07/06/2022 15:21, Szymon Antoniak wrote:</p>
<blockquote>
<blockquote>
<p>High-level, we want to be a better premise selector than, say, MePo (or <br>
MePo + Sledgehammer, just<br>
as well). What we want to do is to take all the visible facts in the <br>
current context and select<br>
relevant ones. For that, we have to have a dataset to train our selection <br>
model on, and that<br>
dataset requires that for each step, we specify what facts were used in <br>
that step.<br>
The python part is really just redundant information (we use this to <br>
interact with the environment,<br>
but for this extraction it is absolutely not needed and Isabelle/Scala <br>
suffices), we can only<br>
restrict ourselves to Isabelle/ML and Isabelle/Scala.</p>
</blockquote>
<p>Abstractly, it sounds like you should start within Isabelle/ML, but some <br>
interaction with<br>
Isabelle/Scala will be required (e.g. to "see" which facts were used in <br>
the text).</p>
<p>An alternative is to start in Isabelle/Scala (with PIDE context), and <br>
interact with Isabelle/ML via<br>
so-called "print functions". E.g. see examples in <br>
Pure/PIDE/query_operation.ML (and .scala).</p>
<p>When you say "visible facts in the current context", what does it mean?</p>
<ul>
<li>
<p>The proof state (with its formal Proof.context in Isabelle/ML)?</p>
</li>
<li>
<p>The surrounding Isar proof text, leading to a goal?</p>
</li>
<li>
<p>Something else?</p>
</li>
</ul>
</blockquote>
</blockquote>
<p>(Cleaning up old threads, I've found this one still half-open.)</p>
<p>Reading it again, I would say you should look in Isabelle/ML how sledgehammer <br>
manages its facts. You can browse the thy/ML sources of Isabelle/HOL, by <br>
starting the Prover IDE with Isabelle/Pure and open the sources (first some <br>
theory, then some corresponding ML files).</p>
<p>For example in the main directory of Isabelle2021-1:</p>
<p>isabelle jedit -l Pure src/HOL/Sledgehammer.thy <br>
src/HOL/Tools/Sledgehammer/sledgehammer_tactics.ML</p>
<p>I can take quite some time until everything required for this context is <br>
checked in the Prover IDE. Afterwards you can jump around in the files via <br>
formal links etc.</p>
<p>It could also make sense to open src/HOL/Main.thy e.g. if you need other ML <br>
files with richer theory context.</p>
<p>Makarius</p>



<hr><p>Last updated: Jul 15 2022 at 23:21 UTC</p>
</html>