<html>
<head><meta charset="utf-8"><title>[isabelle] Standard group theory in Isabelle/HOL – Isabel... · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html">[isabelle] Standard group theory in Isabelle/HOL – Isabel...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="204785122"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Standard%20group%20theory%20in%20Isabelle/HOL%20%E2%80%93%20Isabel.../near/204785122" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html#204785122">(Jul 23 2020 at 11:33)</a>:</h4>
<p>From: Ken Kubota &lt;<a href="mailto:mail@kenkubota.de">mail@kenkubota.de</a>&gt;<br>
Where can I find this paper?</p>
<p>How are the type dependencies in expressing group theory covered, as type abstraction, as suggested by Mike Gordon, still isn’t implemented in HOL?</p>
<p><a href="https://owlofminerva.net/kubota/software-implementation-of-the-mathematical-logic-r0-available-for-download/#type_abstraction">https://owlofminerva.net/kubota/software-implementation-of-the-mathematical-logic-r0-available-for-download/#type_abstraction</a><br>
<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2018-September/msg00045.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2018-September/msg00045.html</a><br>
<a href="https://sympa.inria.fr/sympa/arc/coq-club/2020-02/msg00138.html">https://sympa.inria.fr/sympa/arc/coq-club/2020-02/msg00138.html</a> (see section: B. Kevin Buzzard on Isabelle/HOL)</p>
<hr>
<p>Ken Kubota<br>
<a href="https://doi.org/10.4444/100">https://doi.org/10.4444/100</a></p>



<a name="204791257"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Standard%20group%20theory%20in%20Isabelle/HOL%20%E2%80%93%20Isabel.../near/204791257" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html#204791257">(Jul 23 2020 at 12:44)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;</p>
<blockquote>
<p>Where can I find this paper?<br>
See here: <a href="https://doi.org/10.1007/s10817-019-09537-9">https://doi.org/10.1007/s10817-019-09537-9</a></p>
<p>How are the type dependencies in expressing group theory covered, as type abstraction, as suggested by Mike Gordon, still isn’t implemented in HOL?</p>
</blockquote>
<p>I don't know why people keep claiming you need dependent types/type<br>
abstraction/whatever to do abstract algebra.</p>
<p>We've had abstract algebra in Isabelle for well over 10 years (the<br>
HOL-Algebra library, which is distinct from the new experimental<br>
approach presented in the above paper, which is more like a proof of<br>
concept). There was even a paper about the existence of the algebraic<br>
closure of fields at ITP 2020, which is a very advanced result. (I don't<br>
think any other system has that result yet, although Lean is well on its<br>
way and Coq has it at least for countable fields).</p>
<p>We don't have schemes, but that is not, as Kevin suggests, because<br>
Isabelle/HOL is too weak to define schemes – indeed I did it for him a<br>
while ago in response to that very article just to demonstrate that it<br>
can be done and it's not difficult (although whether it is pleasant to<br>
work with them is another matter; I cannot say because I have not<br>
tried). The main reason why we don't have schemes is quite simply<br>
because there are not /that/ many mathematicians in the Isabelle<br>
community and none of the ones who are seemed to care about schemes<br>
enough to formalise them. I barely know what schemes are, and I would<br>
imagine it is the same for most of the Isabelle community, so why should<br>
I formalise something that I know virtually nothing about? In order to<br>
formalise something, it is good to have a good informal understanding of<br>
it first. If I had some concrete goal and schemes were the way to get<br>
there, I would look into it, but otherwise, I'd rather stick to doing<br>
things that are closer to my field of expertise.</p>
<p>That said, it is of course entirely possible that there is some<br>
mathematics that is too tedious to do in Isabelle/HOL due to a lack of<br>
dependent types; some people, like Sébastien Gouëzel, have said<br>
something to that effect. But saying that abstract algebra in general is<br>
not possible without them is certainly a huge overstatement.</p>
<p>The way abstract algebra is done in Isabelle is simply to have some big<br>
enough type and the carrier of your group is then only a subset of that<br>
type and not the entire type. HOL-Algebra additionally also packages the<br>
group operations up into a record and uses locales to bundle all the<br>
group axioms together. It's a bit painful and perhaps not as natural as<br>
it is in Coq and Lean, but it undoubtedly works.</p>
<p>HOL-Analysis has similar "relativised" notions of topologies. Normally,<br>
the topology of a type always spans the entire type and is fixed for<br>
that type using type classes, but one can also have topologies as values<br>
and then say that a set is open w.r.t. a particular topology.</p>
<p>The main disadvantage of this is that you have two parallel<br>
developments: the typeclass-based ones and the relativised ones. That is<br>
certainly a drawback, but people (cf. Mikhail Chekhov) seem to be<br>
working on making this smoother.</p>
<p>Cheers,</p>
<p>Manuel</p>



<a name="204797617"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Standard%20group%20theory%20in%20Isabelle/HOL%20%E2%80%93%20Isabel.../near/204797617" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html#204797617">(Jul 23 2020 at 13:37)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
This is nothing. Too often I hear claims that dependent types are <em>necessary</em> to do formal mathematics. I have seen “proof assistant” defined as “software implementing the propositions-as-types principle". And there is a widespread idea that the “LCF architecture” is an instance of propositions-as-types. Not very long ago, I had to explain at great length how LCF's use of an abstract type eliminated the need to store proofs (to a person exceptionally familiar with functional programming). Such preconceptions seem to be widespread even among some experienced professionals.</p>
<p>Larry</p>



<a name="204801509"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Standard%20group%20theory%20in%20Isabelle/HOL%20%E2%80%93%20Isabel.../near/204801509" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html#204801509">(Jul 23 2020 at 14:07)</a>:</h4>
<p>From: Ken Kubota &lt;<a href="mailto:mail@kenkubota.de">mail@kenkubota.de</a>&gt;<br>
It is not legitimate to mix up the question of dependent types (or type abstraction) with other, obviously wrong approaches.</p>
<p>And I find it difficult to call Mike Gordon's suggestion as well as the clear statements by John Harrison, Freek Wiedijk, and others on the limitations of the HOL type system "nothing".</p>
<p>Often some features can be emulated by auxiliary techniques, as this has already been the case with the traditional HOL system.<br>
But then the mathematical expression is less natural, and usually not all formal statements can be expressed.<br>
If there is an obvious dependency, clearly it is desirable to express this symbolically in formal logic.</p>
<hr>
<p>Ken Kubota<br>
<a href="https://doi.org/10.4444/100">https://doi.org/10.4444/100</a></p>



<a name="204855184"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Standard%20group%20theory%20in%20Isabelle/HOL%20%E2%80%93%20Isabel.../near/204855184" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html#204855184">(Jul 23 2020 at 21:24)</a>:</h4>
<p>From: Ken Kubota &lt;<a href="mailto:mail@kenkubota.de">mail@kenkubota.de</a>&gt;</p>
<blockquote>
<p>Am 23.07.2020 um 14:44 schrieb Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;:</p>
<blockquote>
<p>Where can I find this paper?<br>
See here: <a href="https://doi.org/10.1007/s10817-019-09537-9">https://doi.org/10.1007/s10817-019-09537-9</a></p>
</blockquote>
</blockquote>
<p>Thank you very much.<br>
I will try to have a look at it soon.</p>
<blockquote>
<blockquote>
<p>How are the type dependencies in expressing group theory covered, as type abstraction, as suggested by Mike Gordon, still isn’t implemented in HOL?</p>
</blockquote>
<p>I don't know why people keep claiming you need dependent types/type<br>
abstraction/whatever to do abstract algebra.</p>
<p>The way abstract algebra is done in Isabelle is simply to have some big<br>
enough type and the carrier of your group is then only a subset of that<br>
type and not the entire type. HOL-Algebra additionally also packages the<br>
group operations up into a record and uses locales to bundle all the<br>
group axioms together. It's a bit painful and perhaps not as natural as<br>
it is in Coq and Lean, but it undoubtedly works.</p>
<p>HOL-Analysis has similar "relativised" notions of topologies. Normally,<br>
the topology of a type always spans the entire type and is fixed for<br>
that type using type classes, but one can also have topologies as values<br>
and then say that a set is open w.r.t. a particular topology.</p>
<p>The main disadvantage of this is that you have two parallel<br>
developments: the typeclass-based ones and the relativised ones. That is<br>
certainly a drawback, but people (cf. Mikhail Chekhov) seem to be<br>
working on making this smoother.</p>
</blockquote>
<p>Let me ask directly. Is it possible to:</p>
<ol>
<li>Prove a property in an abstract way for all groups (e.g., the uniqueness of the identity element),</li>
<li>and then, given a certain group, transfer (instantiate) this theorem for that particular group without having to carry out the proof again?<br>
If so, please provide a link.</li>
</ol>
<p>Your description above doesn't look like a natural representation at all.<br>
a) Circumlocations are necessary ("have some big enough type and the carrier of your group is then only a subset of that type").<br>
b) Duplication of structures ("two parallel developments: the typeclass-based ones and the relativised ones").<br>
c) Auxiliary structures like type classes are needed.<br>
d) Extra work is required to unify the parallel developments ("working on making this smoother").</p>
<p>I'm not too familiar with Isabelle's type classes.<br>
But I vaguely remember that in the past they lead to an inconsistency (antinomy: negative self-reference) in Isabelle/HOL, and the way this was fixed was by manually tracking the dependencies, if I'm not mistaken.<br>
However, this clearly contradicts the very idea of type theory, in which the formal language (the syntax: types) prevents the formulation of antinomies from the very beginning.<br>
One may accept the fix as an auxiliary solution, but not more.</p>
<p>So altogether the impression is, that simply because the formal language (the type system) used here is too poor, a lot of problems and extra work are created.<br>
There is no sense in defending an impoverished type system, in which trivial ideas such as the link (the dependency) between the type and the term level cannot be expressed naturally.<br>
In particular, since it can easily be expressed using the lambda variable binder, as suggested by Mike Gordon.</p>
<hr>
<p>Ken Kubota<br>
<a href="https://doi.org/10.4444/100">https://doi.org/10.4444/100</a> &lt;<a href="https://doi.org/10.4444/100">https://doi.org/10.4444/100</a>&gt;</p>



<a name="204886052"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Standard%20group%20theory%20in%20Isabelle/HOL%20%E2%80%93%20Isabel.../near/204886052" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html#204886052">(Jul 24 2020 at 07:22)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
On 23/07/2020 23:24, Ken Kubota wrote:</p>
<blockquote>
<p>Let me ask directly. Is it possible to:<br>
1. Prove a property in an abstract way for all groups (e.g., the<br>
uniqueness of the identity element),</p>
</blockquote>
<p>Of course:</p>
<p>lemma (in monoid) one_unique:<br>
  assumes "u ∈ carrier G"<br>
    and "⋀x. x ∈ carrier G ⟹ u ⊗ x = x"<br>
  shows "u = 𝟭"</p>
<p>What you cannot do (due to lack of type-level quantification) is write<br>
down a statement like "there exists a group G such that …" without<br>
fixing the type of G. But I've never seen that cause problems in practice.</p>
<blockquote>
<ol start="2">
<li>and then, given a certain group, transfer (instantiate) this theorem<br>
for that particular group without having to carry out the proof again?<br>
If so, please provide a link.</li>
</ol>
</blockquote>
<p>All you have to prove is that the structure you're looking at is indeed<br>
a monoid and then you get that theorem. For instance, HOL-Number_Theory<br>
defines</p>
<p>definition residue_ring :: "int ⇒ int ring"<br>
  where<br>
    "residue_ring m =<br>
      ⦇carrier = {0..m - 1},<br>
       mult = λx y. (x * y) mod m,<br>
       one = 1,<br>
       zero = 0,<br>
       add = λx y. (x + y) mod m⦈"</p>
<p>and then proves that this is a commutative ring for "m &gt; 1". That gives<br>
you for free that the additive and multiplicative subgroup are abelian<br>
groups (and therefore monoids) and you can use the above fact. You can<br>
also talk about subgroups of these groups and apply the result to them.</p>
<blockquote>
<p>Your description above doesn't look like a natural representation at all.<br>
a) Circumlocations are necessary ("have some big enough type and the<br>
carrier of your group is then only a subset of that type").<br>
b) Duplication of structures ("two parallel developments: the<br>
typeclass-based ones and the relativised ones").<br>
c) Auxiliary structures like type classes are needed.<br>
d) Extra work is required to unify the parallel developments ("working<br>
on making this smoother").</p>
</blockquote>
<p>Yes, it's not great. But if you want to make a system work for practical<br>
use, you always have to make some compromises and/or do a lot of<br>
engineering. If I recall correctly, the Coq people have been investing a<br>
lot of work into their type classes as well because they were found to<br>
be insufficient for practical use. The Lean people recently overhauled<br>
their system as well because (I think) it was too slow and unpredictable.</p>
<blockquote>
<p>I'm not too familiar with Isabelle's type classes.<br>
But I vaguely remember that in the past they lead to an inconsistency<br>
(antinomy: negative self-reference) in Isabelle/HOL, and the way this<br>
was fixed was by manually tracking the dependencies, if I'm not mistaken.</p>
</blockquote>
<p>The problem wasn't type classes per se, but the low-level mechanism that<br>
they use (overloaded constant definitions). These are now well<br>
understood; I think there's even some kind of mechanised soundness proof<br>
and more is on the way.</p>
<blockquote>
<p>However, this clearly contradicts the very idea of type theory, in which<br>
the formal language (the syntax: types) prevents the formulation of<br>
antinomies from the very beginning.<br>
One may accept the fix as an auxiliary solution, but not more.</p>
</blockquote>
<p>You may oppose this on a philosophical and aesthetic level and that is<br>
fine (I will hardly prescribe you your sense of aesthetics), but I for<br>
one don't care much about such foundational issues as long as things are<br>
sound. I just want a system that allows me to do stuff, and Isabelle/HOL<br>
usually works great in practice.</p>
<blockquote>
<p>So altogether the impression is, that simply because the formal language<br>
(the type system) used here is too poor, a lot of problems and extra<br>
work are created.<br>
There is no sense in defending an impoverished type system, in which<br>
trivial ideas such as the link (the dependency) between the type and the<br>
term level cannot be expressed naturally.<br>
In particular, since it can easily be expressed using the lambda<br>
variable binder, as suggested by Mike Gordon.</p>
</blockquote>
<p>I don't know anything about that lambda variable binder since I am not a<br>
foundational guy; perhaps somebody else can comment on that. But I would<br>
be surprised if it didn't make some things more difficult.</p>
<p>You criticise Isabelle/HOL as unnatural because you sometimes have to<br>
express things in a certain way. But when I look at e.g. Coq<br>
developments like the group theory behind Feit–Thompson, I was told they<br>
restrict everything to finite groups represented them as lists. That<br>
doesn't sound like a natural representation to me either. I'm sure they<br>
/could/ have done it in a different, more natural way, but they chose<br>
not to for some (probably technical) reason, and that's my point.</p>
<p>Systems like Coq and Lean also have the difference between Bool and Prop<br>
and between definitional equality and other types of equality. I'm<br>
pretty sure most mathematician find such distinctions very strange.<br>
Isabelle/HOL also has two kinds of equality and a distinction between<br>
bool and prop, but the logic allows hiding the difference completely in<br>
practice.</p>
<p>(Just in case that your opinion is that Lean and Coq are also bad and<br>
some other system X is the real solution: I am focusing on Lean and Coq<br>
because they are the other two really big systems that have stronger<br>
logics than Isabelle/HOL and it only makes sense to compare Isabelle/HOL<br>
to systems of roughly comparable size.)</p>
<p>The way I see it, theorem proving is not a game of type-theoretic<br>
one-upmanship. The objective is not to just pick the most powerful logic<br>
imaginable and then you win. Expressiveness often comes with a price. I<br>
think it is widely agreed upon that Isabelle has exceptionally good<br>
automation and performance, and I'm sure that has a lot to do with the<br>
LCF approach and the foundational choices (although I am hardly an<br>
expert on this). Some Lean people, for instance, told me that their<br>
simplifier is still very slow.</p>
<p>Another big advantage of Isabelle/HOL is that there is a huge library!<br>
In my opinion, good libraries are far more important in practice than<br>
powerful logical foundations. If you want to do some work requiring<br>
analytic combinatorics (an example chosen because it is close to my<br>
heart), the very expressive type systems of Coq and Lean and Agda will<br>
not be particularly helpful, since none of them have any complex<br>
analysis, let alone analytic combinatorics.</p>
<p>You're certainly right that we Isabelle/HOL people sometimes have to go<br>
out of our way to do certain things (such as the duplication of<br>
HOL-Computational_Algebra vs HOL-Algebra) and we are well aware of that.<br>
Occasionally, you have to take a step back and figure out if the extra<br>
work you have to do is still worth doing or whether you are working<br>
against the system more than you are working with it. If that ever<br>
happens, I might well consider switching to another, more suitable<br>
system, but it hasn't happened so far.</p>
<p>If someone were to come along and make a system that offers the<br>
advantages of Isabelle/HOL (structured proofs, good automation,<br>
scalability) with the addition of dependent types, I would very<br>
seriously consider switching as well (although the library issue remains).</p>
<p>Theorem provers are not artworks to be displayed on a wall in a gallery<br>
for everyone to marvel at their beautiful and elegant design. They are<br>
software intended for practical use by many people for a large variety<br>
of different use cases, and they succeed or fail in practical applications.</p>
<p>Isabelle/HOL has worked well for a lots of practical use cases in<br>
computer science and mathematics. If it will someday be the case that<br>
other systems are clearly and unequivocally better, it will probably<br>
just die.</p>
<p>But I think we're still far away from that.</p>
<p>Cheers,</p>
<p>Manuel</p>



<a name="204892564"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Standard%20group%20theory%20in%20Isabelle/HOL%20%E2%80%93%20Isabel.../near/204892564" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Standard.20group.20theory.20in.20Isabelle.2FHOL.20.E2.80.93.20Isabel.2E.2E.2E.html#204892564">(Jul 24 2020 at 08:50)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
For sure. I have been noticing since the 1990s that with certain well-known systems you have to build a new library for each project. Precisely why isn’t clear; perhaps it is quite difficult to judge how heavy a use to make of dependent types. That the most popular Coq library (SSREFLECT) emphasises computable representations of mathematics seems remarkable, since it goes against the natural objective reasoning abstractly.</p>
<p>We have a similar situation ourselves with the Algebra library, where the use of records may have been a mistake. But at least we don’t feel compelled to throw it away and start fresh.</p>
<p>As I keep saying: the precise role of dependent types in the formalisation of mathematics is one of the key scientific questions of our field. It can only be answered empirically.</p>
<p>Larry</p>



<hr><p>Last updated: Jul 15 2022 at 23:21 UTC</p>
</html>