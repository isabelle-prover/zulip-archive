<html>
<head><meta charset="utf-8"><title>[isabelle] Syntax proposal: multiway if · Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/index.html">Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html">[isabelle] Syntax proposal: multiway if</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="225849319"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/225849319" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#225849319">(Feb 10 2021 at 15:07)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
Hello,</p>
<p>there is a Haskell extension that allows writing nested ifs in the<br>
following nice syntax:</p>
<p>if | P -&gt; a<br>
   | Q -&gt; b<br>
   | R -&gt; c<br>
   | otherwise -&gt; d</p>
<p>I asked around and some people (e.g. Tobias Nipkow) agree that this<br>
might be nice to have. My proposed syntax is inspired by the "case"<br>
syntax and looks like this:</p>
<p>if P ⇒ x | Q ⇒ y | R ⇒ z | otherwise ⇒ u</p>
<p>One could also do</p>
<p>if P ⇒ x | Q ⇒ y | R ⇒ z | _ ⇒ u</p>
<p>instead.</p>
<p>I attached a small theory that implements this.</p>
<p>Not sure if this should be enabled for output by default as well –<br>
probably not. One could switch it on only in a special "multi_if" print<br>
mode, similarly to "do_notation" for monad syntax.</p>
<p>The current implementation has the problem that "if b then x else y"<br>
gets output as "if b ⇒ x | otherwise ⇒ y", which we clearly don't want.<br>
Not sure how to fix that.</p>
<p>Manuel<br>
<a href="/user_uploads/14278/h0M6auKhdr3dbfMvpvegyj5j/Multiway_If.thy">Multiway_If.thy</a><br>
<a href="/user_uploads/14278/sCbMCzIL8tYpElFKNuVYouko/smime.p7s">smime.p7s</a></p>



<a name="225854522"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/225854522" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#225854522">(Feb 10 2021 at 15:41)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Maybe could go to HOL-Library ?</p>



<a name="225856534"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/225856534" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#225856534">(Feb 10 2021 at 15:54)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
It could, but I for one think something like this should either be<br>
enabled by default or not exist at all (at least as input syntax – as<br>
output, it is debatable).</p>
<p>Manuel<br>
<a href="/user_uploads/14278/wNaByEleRXsfmcru6pBgn4i3/smime.p7s">smime.p7s</a></p>



<a name="225889727"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/225889727" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#225889727">(Feb 10 2021 at 18:59)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
On 2/10/21 4:07 PM, Manuel Eberl wrote:</p>
<blockquote>
<p>Hello,</p>
<p>there is a Haskell extension that allows writing nested ifs in the<br>
following nice syntax:</p>
<p>if | P -&gt; a<br>
    | Q -&gt; b<br>
    | R -&gt; c<br>
    | otherwise -&gt; d</p>
<p>I asked around and some people (e.g. Tobias Nipkow) agree that this<br>
might be nice to have. My proposed syntax is inspired by the "case"<br>
syntax and looks like this:</p>
<p>if P ⇒ x | Q ⇒ y | R ⇒ z | otherwise ⇒ u</p>
<p>One could also do</p>
<p>if P ⇒ x | Q ⇒ y | R ⇒ z | _ ⇒ u</p>
<p>instead.</p>
<p>I attached a small theory that implements this.</p>
<p>Not sure if this should be enabled for output by default as well –<br>
probably not. One could switch it on only in a special "multi_if" print<br>
mode, similarly to "do_notation" for monad syntax.</p>
<p>The current implementation has the problem that "if b then x else y"<br>
gets output as "if b ⇒ x | otherwise ⇒ y", which we clearly don't want.<br>
Not sure how to fix that.</p>
</blockquote>
<p>Dear Manuel,</p>
<p>Naive question: What if you would use your own dedicated constant</p>
<p>definition "multi_if == If"</p>
<p>together with some suitable simplification rules and/or other automation?</p>
<p>Then users could decide on their own which syntax to use (for input and <br>
output).</p>
<p>cheers</p>
<p>chris</p>
<blockquote>
<p>Manuel<br>
</p>
</blockquote>



<a name="225890344"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/225890344" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#225890344">(Feb 10 2021 at 19:03)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
One could of course do that. I'm not really sure it's better. I think I<br>
would prefer having it just as notation. But I'm not opposed to it either.</p>
<p>Manuel<br>
<a href="/user_uploads/14278/uargYvul0bH4_0fiDuWE5qhf/smime.p7s">smime.p7s</a></p>



<a name="225912424"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/225912424" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#225912424">(Feb 10 2021 at 21:38)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:kleing@unsw.edu.au">kleing@unsw.edu.au</a>&gt;<br>
I'd be against introducing another If definition. There is a lot of automation that interacts with "If", and if you maintain your own automation, you'd now have to do two sets.</p>
<p>Not opposed to the notation, though. If we can figure out a way to not fire for single "if P =&gt; x | otherwise =&gt; y" case that could be quite nice. It could be part of the standard If as input, and as a bundle for output.</p>
<p>Cheers,<br>
Gerwin<br>
<a href="/user_uploads/14278/texqOIabuspTJZaFs6ezU1b9/signature.asc">signature.asc</a></p>



<a name="226977689"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/226977689" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#226977689">(Feb 19 2021 at 15:20)</a>:</h4>
<p>From: Mikhail Chekhov &lt;<a href="mailto:mikhail.chekhov.w@gmail.com">mikhail.chekhov.w@gmail.com</a>&gt;<br>
Dear Manuel Eberl/All,</p>
<p>Incidentally, I am working on a theory that could greatly benefit from the<br>
use of a multiway if. Given that it is not part of the standard, I am<br>
wondering if there already exist any (third-party) alternatives to this<br>
notation. If not, technically, if I was to (outright) copy a part of a post<br>
on the mailing list into my own library, I believe, I would be violating<br>
copyright laws (please correct me, if I am wrong). Thus, I have to ask you<br>
for explicit permission to reuse this code. Also, what kind of<br>
attribution/license would such reuse require (provided, of course, that you<br>
can grant permission)?</p>
<p>Kind Regards,<br>
Mikhail Chekhov</p>



<a name="226980228"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247541-Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20proposal%3A%20multiway%20if/near/226980228" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247541-Mirror:-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20proposal.3A.20multiway.20if.html#226980228">(Feb 19 2021 at 15:37)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
Hello,</p>
<p>feel free to use whatever you want from me. You can put a short comment<br>
like "contributed by Manuel Eberl, see mailing list post &lt;url&gt;" or<br>
something like that, but you don't have to – it's not a big thing and I<br>
don't <em>need</em> to get attribution for it. :)</p>
<p>Since there seems to be a consensus that this would be nice to have, I<br>
will probably put something like this into the distribution before the<br>
next release anyway though. I would already have done it, had it not<br>
been for the somewhat annoying issue of getting the output right.</p>
<p>Manuel<br>
<a href="/user_uploads/14278/QxENOXBmfMg2mizeBz9Q_3Bb/smime.p7s">smime.p7s</a></p>



<hr><p>Last updated: Jul 15 2022 at 23:21 UTC</p>
</html>