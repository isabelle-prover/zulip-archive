<html>
<head><meta charset="utf-8"><title>[isabelle-dev] New Code Generator Target: F# · Mirror: Isabelle Development Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/index.html">Mirror: Isabelle Development Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html">[isabelle-dev] New Code Generator Target: F#</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294646742"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/294646742" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#294646742">(Aug 22 2022 at 10:33)</a>:</h4>
<p>From: "Achim D. Brucker" &lt;<a href="mailto:adbrucker@0x5f.org">adbrucker@0x5f.org</a>&gt;<br>
Dear Isabelle Developers, <br>
(CC Makarius and Florian - to ensure that you are aware of this email, as I assume you <br>
    are likely to be the most qualified people to advise.)</p>
<p>You might have seen my announcement on the Isabelle User's mailing list: I added F# <br>
as a new target language to the code generator.  This includes initial system tooling <br>
for managing a "sandboxed" dotnet environment within Isabelle (similar to the setup <br>
for, e.g., OCaml). The changeset is available at (I am currently trying to update <br>
it to the latest Isabelle development version every couple of days):</p>
<p><a href="https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp">https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp</a></p>
<p>The current setup successfully passes the "bin/isabelle build -a" test on Linux (well <br>
tested) and Windows (infrequent, tests on a VM running Windows 10). Due to lack of <br>
hardware, I cannot test it on macOS (trusting the documentation from Microsoft, the <br>
macOS setup should work out of the box, sharing the configuration/implementation for <br>
Linux).</p>
<p>I would appreciate your general opinion on F# as a new code generator target and,<br>
in particular, your opinion and recommendations on future maintenance/development<br>
models. I see, in principle two approaches:</p>
<p>1) integrating it into the main distribution of Isabelle or <br>
2) keeping it as a separate "component" (theoretically, it could even be an AFP <br>
   entry, if users install dotnet themselves and configure the ISABELLE_DOTNET <br>
   environment variable - i.e., without the sandboxed dotnet installation) </p>
<p>Integrating it into the main Isabelle distribution has the advantage that the code <br>
generator setup for F# would "live" next to the setup for the other target languages. <br>
This could be beneficial for the future maintenance (if the setup for ML/OCaml changes, <br>
it would be obvious that F# likely needs to be updated as well) and also would allow <br>
for using the "ml_program_of_program" function in the structure Code_ML without duplicating <br>
it. The disadvantage is that it adds quite some weight to the Isabelle distribution and <br>
its release process (i.e., a non-trivial component, namely dotnet, would be added). </p>
<p>Keeping it separate has the advantage that it does not require any changes to the main <br>
distribution. The disadvantage that I see is that maintenance is most likely harder <br>
and more error-prone (in the sense of following the Isabelle development is a more <br>
manual process) and installation for end-users is likely to be more inconvenient as <br>
well. </p>
<p>I consider, personally, F# to be an interesting member of the ML-family, as it provides<br>
a step into the world of dotnet-based frameworks and languages (as Scala opens a door <br>
into the world of JVM-based languages and frameworks).</p>
<p>Thanks a lot!</p>
<p>Best,<br>
    Achim</p>
<p>PS: Just to be clear - my focus is to understand how to maintain such a component <br>
    best, and if there is interest in shipping it as a part of Isabelle itself. My <br>
    focus is not to just "throw-it-over-the-fence" and forget it (i.e., to <br>
    off-load maintenance to somebody else).</p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="294841934"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/294841934" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#294841934">(Aug 23 2022 at 10:50)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Achim, the code generator is part of Isabelle's trusted infrastructure. Thus I <br>
recommend you provide your F# code generator as an AFP entry in the Tools category.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/RtBr1_96KdT-YMFac9nkyRsE/smime.p7s">smime.p7s</a></p>



<a name="294901235"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/294901235" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#294901235">(Aug 23 2022 at 16:13)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Achim and Tobias &amp;al.,</p>
<p>IMHO this argument on its own does not apply here.  The code generator<br>
is modular: adding another target language does not<br>
affect existing target languages and hence does not affect their<br>
trustworthiness, particularly not of Isabelle/ML (»Eval«)<br>
which is at the core of all proof-replacing evaluation mechanisms.</p>
<p>Concerning trustworthiness in general, the code generator by its<br>
architecture can never achieve the trustworthiness of e. g.<br>
the LCF-style inference kernel: you are always free to configure<br>
pointless or »unsound« things, sometimes burdening<br>
users to come up with an appropriate »interpretation« what generated<br>
code means in relaton to its originating theory;<br>
a prominent example from the distribution is<br>
HOL/Library/Code_Real_Approx_By_Float.thy.</p>
<p>Hence from my perspective it is difficult to argue that there are<br>
fundamental differences between distribution<br>
and AFP concerning trustworthiness of code generation.</p>
<p>From a maintenance perspective, integration into the distribution seems<br>
actually to be the more appropriate way:<br>
we have the tradition to setup target-language specific things in<br>
theories where their corresponding logical<br>
notions comes up (e. g. List.thy), and this makes things easier to<br>
maintain and re-check across all target languages.</p>
<p>There might still be other issues suggesting the AFP.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/6R4WfFCup2dliQE_OOMjPj7Z/OpenPGP_signature">OpenPGP_signature</a></p>



<a name="294924328"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/294924328" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#294924328">(Aug 23 2022 at 18:28)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
The code generator is sensitive. Having an external contribution in the AFP <br>
clearly delineates what comes from the core developers and what not.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/iHgmnR4CYFOlqru7LSPnIHyC/smime.p7s">smime.p7s</a></p>



<a name="295169154"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295169154" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295169154">(Aug 25 2022 at 06:27)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;</p>
<blockquote>
<p>Having an external contribution in the<br>
AFP clearly delineates what comes from the core developers and what not.</p>
</blockquote>
<p>That could indeed by a criterion, although it sacrifices some aspects of<br>
maintainability.</p>
<p>Florian</p>
<blockquote>
<p>Tobias</p>
<p>On 23/08/2022 18:13, Florian Haftmann wrote:</p>
<blockquote>
<p>Hi Achim and Tobias &amp;al.,</p>
<blockquote>
<p>I would appreciate your general opinion on F# as a new code generator<br>
target and,<br>
in particular, your opinion and recommendations on future<br>
maintenance/development<br>
models. I see, in principle two approaches:</p>
<p>1) integrating it into the main distribution of Isabelle or<br>
2) keeping it as a separate "component" (theoretically, it could even<br>
be an AFP<br>
    entry, if users install dotnet themselves and configure the<br>
ISABELLE_DOTNET<br>
    environment variable - i.e., without the sandboxed dotnet<br>
installation)</p>
</blockquote>
<blockquote>
<p>the code generator is part of Isabelle's trusted infrastructure. Thus<br>
I recommend you provide your F# code generator as an AFP entry in the<br>
Tools category.</p>
</blockquote>
<p>IMHO this argument on its own does not apply here.  The code generator<br>
is modular: adding another target language does not<br>
affect existing target languages and hence does not affect their<br>
trustworthiness, particularly not of Isabelle/ML (»Eval«)<br>
which is at the core of all proof-replacing evaluation mechanisms.</p>
<p>Concerning trustworthiness in general, the code generator by its<br>
architecture can never achieve the trustworthiness of e. g.<br>
the LCF-style inference kernel: you are always free to configure<br>
pointless or »unsound« things, sometimes burdening<br>
users to come up with an appropriate »interpretation« what generated<br>
code means in relaton to its originating theory;<br>
a prominent example from the distribution is<br>
HOL/Library/Code_Real_Approx_By_Float.thy.</p>
<p>Hence from my perspective it is difficult to argue that there are<br>
fundamental differences between distribution<br>
and AFP concerning trustworthiness of code generation.</p>
<p>From a maintenance perspective, integration into the distribution seems<br>
actually to be the more appropriate way:<br>
we have the tradition to setup target-language specific things in<br>
theories where their corresponding logical<br>
notions comes up (e. g. List.thy), and this makes things easier to<br>
maintain and re-check across all target languages.</p>
<p>There might still be other issues suggesting the AFP.</p>
<p>Cheers,<br>
    Florian<br>
</p>
</blockquote>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a><br>
<a href="/user_uploads/14278/feZEBgZZFIlghv5zxxO_VOmF/OpenPGP_signature">OpenPGP_signature</a></p>
</blockquote>



<a name="295198783"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295198783" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295198783">(Aug 25 2022 at 10:22)</a>:</h4>
<p>From: Burkhart Wolff &lt;<a href="mailto:wolff@lri.fr">wolff@lri.fr</a>&gt;<br>
Hm, ich wusste nicht, das nur “Developer” mit dem Prädikat <br>
IMG (in München gewesen) Beiträge an den Isabelle Bibliotheken<br>
leisten können sollen dürfen. Auch wenn das der Isabelle Philosophie<br>
von Code-follows-Function zuwider läuft wie in diesem Fall.</p>
<p>Da erscheint Larrys Anregung, gewisse Bibliothekskomponenten<br>
in die AFP auszulagern in einem neuen (und vielleicht unerwuenschtem) Licht.</p>
<p>Nun ja, schade. Um so wichtiger wird es, das die AFP zukünftig <br>
Mechanismen hat, wie auch Isabelle Komponenten zugelassen werden <br>
koennen. Vielleicht ist das ja in der Tat der bessere Weg.</p>
<p>@Makarius/Florian: Gibt es diesbezüglich  Neuigkeiten ?<br>
Sollte man eine docker-aehnliche Infrastruktur in der AFP haben ?</p>
<p>Liebe Grüsse aus dem sonnigen Paris,</p>
<p>bu</p>



<a name="295203504"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295203504" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295203504">(Aug 25 2022 at 10:55)</a>:</h4>
<p>From: "Achim D. Brucker" &lt;<a href="mailto:adbrucker@0x5f.org">adbrucker@0x5f.org</a>&gt;<br>
Hi,<br>
Sorry for the longer answer to several aspects. Yesterday was pretty busy <br>
for me.</p>
<p>On Thu, Aug 25, 2022 at 08:27:27AM +0200, Florian Haftmann wrote:</p>
<blockquote>
<blockquote>
<p>Having an external contribution in the<br>
AFP clearly delineates what comes from the core developers and what not.</p>
</blockquote>
</blockquote>
<p>As the trustworthy argument, this is a valid argument.  And, of course, <br>
as core maintainers, you need to decide what contribution you accept or <br>
now. I will not argue on that. </p>
<p>Still, as Isabelle is an Open Source project, I would have hoped that "pull requests"<br>
(to use the github terminology) are, in principle, welcomed. Again, I am happy to commit <br>
to maintaining it and I am also willing to invest work on bringing it up to the <br>
required level of quality.  Or maybe there is room for an 'incubator' concept (to <br>
use Eclipse terminology), i.e., let the code generator print a warning (both in <br>
JEdit/VSCode and the generated code) that this is an externally (less trusted) <br>
contribution, whenever the F# target is used.</p>
<p>If a formal copyright transfer statement needs to be signed (e.g., to assign <br>
copyright to TUM), I am more than happy to sign such an agreement. </p>
<blockquote>
<p>That could indeed by a criterion, although it sacrifices some aspects of<br>
maintainability.</p>
</blockquote>
<p>I thought a lot about this and, frankly speaking, I have right now no idea how an <br>
AFP entry can be maintained while, at the same time, ensuring the required <br>
quality:</p>
<ul>
<li>
<p>the code generator setup for Scala, OCaml, and SML is done locally in<br>
  the theories defining the formal concepts. This makes a lot of sense, as it<br>
  keeps the formal definitions and the code generator setup close together<br>
  and, by that, it is very easy to review that customized code_printings<br>
  are consistent with the formal definitions.</p>
</li>
<li>
<p>as the AFP does not run any generated code, an "Isabelle/F#" in the AFP<br>
  would not benefit from the "AFP as regression test" for Isabelle feature,<br>
  i.e., there would be no notifications whatsoever if changes in Isabelle<br>
  would break anything - actually worse, most likely they would not break<br>
  the F# code generation, they would just diverge silently. Also, users<br>
  will need to follow additional installations steps manually, as Isabelle <br>
  Tools cannot be distributed via the AFP.</p>
</li>
<li>
<p>for me, maintaining an AFP entry would essentially mean that I would need<br>
  to track all commits in the Isabelle repository and manually port changes<br>
  to an external setup that contains a "monolithic" code generator setup.<br>
  This would, IMHO, similar to the old code generator setup for Isabelle <br>
  around 2005ish, when I did my first prototype of an F# target in the context<br>
  of HOL-Testgen. I am sure there have been very good reasons why this<br>
  setup has been phased out. </p>
</li>
<li>
<p>Currently, by having it on a branch in the mercurial repository and providing<br>
  it as deep integration (i.e., next to the SML/OCaml setup), I have the big<br>
  benefit that I get all the updates to the SML/OCaml/Scala setup as hg commits<br>
  and hg points me rather directly to the changes (they usually pop up as merge<br>
  conflicts) and as F# is essentially a ML-dialect, updating the F# Setup only<br>
  takes a few minutes. I do not see (again, help and ideas are appreciated) how<br>
  I get a similar semi-automated setup working for setup that would be<br>
  "AFP ready".</p>
</li>
</ul>
<p>Thus, I fear that there are only two options with a realistic maintenance workload:<br>
either an integration into Isabelle or the distributing as patch that users need<br>
to apply (or, of course, re-packaging a Isabelle fork). The patch/fork option is, <br>
if course, not attractive for regular users of Isabelle. </p>
<p>Best,<br>
        Achim</p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="295216882"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295216882" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295216882">(Aug 25 2022 at 12:28)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
I don't know who you wanted to address when you emailed "Makarius Wenzel <br>
&lt;<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a>&gt;", but please use English on this list.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/hnDn95KMMoSbzBMLDWFyJ5eU/smime.p7s">smime.p7s</a></p>



<a name="295317068"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295317068" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295317068">(Aug 25 2022 at 22:00)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 22/08/2022 12:32, Achim D. Brucker wrote:</p>
<blockquote>
<p>You might have seen my announcement on the Isabelle User's mailing list: I added F#<br>
as a new target language to the code generator.  This includes initial system tooling<br>
for managing a "sandboxed" dotnet environment within Isabelle (similar to the setup<br>
for, e.g., OCaml). The changeset is available at (I am currently trying to update<br>
it to the latest Isabelle development version every couple of days):</p>
<p><a href="https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp">https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp</a></p>
</blockquote>
<p>I don't see an isolated changeset here, only a very complex history, with <br>
branches and merges. Note that the Isabelle development model generally works <br>
without branches (and only trivial merges): it is an easy exercise to do away <br>
with these vices.</p>
<p>After some with your fork experimentation, I did manage to produce an isolated <br>
diff like this (using your version df48d77b38f7:</p>
<p>hg diff --color=never -r default:feature-codegen-fsharp &gt; <br>
feature-codegen-fsharp.diff</p>
<p>The result is attached here, for the record. So it is not that complex, after all.</p>
<blockquote>
<p>The current setup successfully passes the "bin/isabelle build -a" test on Linux (well<br>
tested) and Windows (infrequent, tests on a VM running Windows 10). Due to lack of<br>
hardware, I cannot test it on macOS (trusting the documentation from Microsoft, the<br>
macOS setup should work out of the box, sharing the configuration/implementation for<br>
Linux).</p>
</blockquote>
<p>From my experience, macOS is never "for free". It usually works, but requires <br>
some care and tinkering. It also require a selection of real Mac hardware for <br>
testing: both x86_64-darwin and arm64-darwin.</p>
<p>Looking only briefly at your material, I did not understand where the dotnet / <br>
F# component actually is.</p>
<p>De-facto, I am the universal maintainer of all multiplatform Isabelle <br>
components. At some point, I am certainly interested to understand how F# can <br>
be bundled, but right now is a very bad time for that --- approx. 2 weeks <br>
before RC1 of the Isabelle2022 release.</p>
<blockquote>
<p>I consider, personally, F# to be an interesting member of the ML-family, as it provides<br>
a step into the world of dotnet-based frameworks and languages (as Scala opens a door<br>
into the world of JVM-based languages and frameworks).</p>
</blockquote>
<p>That could be true, but I have not used F# or dotnet so far.</p>
<p>Note that in Isabelle2022 we will have the Node.js world as a newcomer, via <br>
VSCode and Electron. At some later stage, scala.js might follow. So we already <br>
have a lot to digest to absorb such a huge platforms eventually.</p>
<p>It is still unclear to me, how far this can go.</p>
<p>For example, the absorption of GHC stack and OCaml opam some years ago did not <br>
fully work out: these projects have there very own culture that does not fully <br>
fit into Isabelle. We did not gain the stability and self-containedness of GHC <br>
and OCaml that we were hoping for: it still requires manual tinkering <br>
occasionally.</p>
<p>Makarius<br>
<a href="/user_uploads/14278/_npp849X1VxkEAt2MZPKzgXW/feature-codegen-fsharp.diff.gz">feature-codegen-fsharp.diff.gz</a></p>



<a name="295317690"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295317690" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295317690">(Aug 25 2022 at 22:04)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 22/08/2022 12:32, Achim D. Brucker wrote:</p>
<blockquote>
<p>You might have seen my announcement on the Isabelle User's mailing list: I added F#<br>
as a new target language to the code generator.  This includes initial system tooling<br>
for managing a "sandboxed" dotnet environment within Isabelle (similar to the setup<br>
for, e.g., OCaml). The changeset is available at (I am currently trying to update<br>
it to the latest Isabelle development version every couple of days):</p>
<p><a href="https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp">https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp</a></p>
</blockquote>
<p>I don't see an isolated changeset here, only a very complex history, with <br>
branches and merges. Note that the Isabelle development model generally works <br>
without branches (and only trivial merges): it is an easy exercise to do away <br>
with these vices.</p>
<p>After some with your fork experimentation, I did manage to produce an isolated <br>
diff like this (using your version df48d77b38f7:</p>
<p>hg diff --color=never -r default:feature-codegen-fsharp &gt; <br>
feature-codegen-fsharp.diff</p>
<p>The result is attached here, for the record. So it is not that complex, after all.</p>
<blockquote>
<p>The current setup successfully passes the "bin/isabelle build -a" test on Linux (well<br>
tested) and Windows (infrequent, tests on a VM running Windows 10). Due to lack of<br>
hardware, I cannot test it on macOS (trusting the documentation from Microsoft, the<br>
macOS setup should work out of the box, sharing the configuration/implementation for<br>
Linux).</p>
</blockquote>
<p>From my experience, macOS is never "for free". It usually works, but requires <br>
some care and tinkering. It also require a selection of real Mac hardware for <br>
testing: both x86_64-darwin and arm64-darwin.</p>
<p>Looking only briefly at your material, I did not understand where the dotnet / <br>
F# component actually is.</p>
<p>De-facto, I am the universal maintainer of all multiplatform Isabelle <br>
components. At some point, I am certainly interested to understand how F# can <br>
be bundled, but right now is a very bad time for that --- approx. 2 weeks <br>
before RC1 of the Isabelle2022 release.</p>
<blockquote>
<p>I consider, personally, F# to be an interesting member of the ML-family, as it provides<br>
a step into the world of dotnet-based frameworks and languages (as Scala opens a door<br>
into the world of JVM-based languages and frameworks).</p>
</blockquote>
<p>That could be true, but I have not used F# or dotnet so far.</p>
<p>Note that in Isabelle2022 we will have the Node.js world as a newcomer, via <br>
VSCode and Electron. At some later stage, scala.js might follow. So we already <br>
have a lot to digest to absorb such a huge platforms eventually.</p>
<p>It is still unclear to me, how far this can go.</p>
<p>For example, the absorption of GHC stack and OCaml opam some years ago did not <br>
fully work out: these projects have there very own culture that does not fully <br>
fit into Isabelle. We did not gain the stability and self-containedness of GHC <br>
and OCaml that we were hoping for: it still requires manual tinkering <br>
occasionally.</p>
<p>Makarius<br>
<a href="/user_uploads/14278/RE7IKAB_9uP_7f5nXLXXyP3t/feature-codegen-fsharp.diff.gz">feature-codegen-fsharp.diff.gz</a></p>



<a name="295318943"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295318943" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295318943">(Aug 25 2022 at 22:14)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
No, we neither have git nor pull-requests. Instead, README_REPOSITORY and the <br>
actual hg history should tell a lot how things work.</p>
<p>Beyond that, it is better to discuss things with people who are responsible <br>
for the relevant part of the Isabelle platform, before doing too much on your <br>
own account.</p>
<p>Incidently, the Phabricator guys (1-3 people max.) had long texts in a similar <br>
direction (before they had to give up eventually, not being a huge software <br>
corporation): <br>
<a href="https://isabelle-dev.sketis.net/book/phabcontrib/article/contributing_code">https://isabelle-dev.sketis.net/book/phabcontrib/article/contributing_code</a></p>
<p>Note again that I am in release mode, so anything that is not relevant for <br>
this release has to wait until that is published. (I am not going to <br>
fork/branch/merge myself.)</p>
<p>Makarius</p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="295323748"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295323748" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295323748">(Aug 25 2022 at 23:02)</a>:</h4>
<p>From: "Achim D. Brucker" &lt;<a href="mailto:adbrucker@0x5f.org">adbrucker@0x5f.org</a>&gt;<br>
Hi,</p>
<p>On Thu, Aug 25, 2022 at 11:54:39PM +0200, Makarius wrote:</p>
<blockquote>
<p>On 22/08/2022 12:32, Achim D. Brucker wrote:</p>
<blockquote>
<p>You might have seen my announcement on the Isabelle User's mailing list: I added F#<br>
as a new target language to the code generator.  This includes initial system tooling<br>
for managing a "sandboxed" dotnet environment within Isabelle (similar to the setup<br>
for, e.g., OCaml). The changeset is available at (I am currently trying to update<br>
it to the latest Isabelle development version every couple of days):</p>
<p><a href="https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp">https://hg.logicalhacking.com/isabelle/shortlog/feature-codegen-fsharp</a></p>
</blockquote>
<p>I don't see an isolated changeset here, only a very complex history, with<br>
branches and merges. Note that the Isabelle development model generally<br>
works without branches (and only trivial merges): it is an easy exercise to<br>
do away with these vices.</p>
</blockquote>
<p>yes, the link goes to a "living" branch that I keep (currently) in sync with the <br>
development repository of Isabelle. Any isolated diff can only be static, hence, <br>
I thought that a branch is more convenient and a diff can easily obtained from it. <br>
But I am neither a hg expert not do I know all the conventions of the Isabelle <br>
development team.  </p>
<blockquote>
<p>After some with your fork experimentation, I did manage to produce an<br>
isolated diff like this (using your version df48d77b38f7:</p>
<p>hg diff --color=never -r default:feature-codegen-fsharp &gt;<br>
feature-codegen-fsharp.diff</p>
<p>The result is attached here, for the record. So it is not that complex, after all.</p>
</blockquote>
<p>Indeed, the additions to the Isabelle code generator are not that large and also <br>
not that complex. F# is syntax-wise a mix of ML and Ocaml. The main challenge, so <br>
to speak, was that F# requires indentation for block structures. This is implemented <br>
in "print_fsharp_stmt" (which is based on print_ocaml_stmt) in the structure Code_ML.</p>
<blockquote>
<blockquote>
<p>The current setup successfully passes the "bin/isabelle build -a" test on Linux (well<br>
tested) and Windows (infrequent, tests on a VM running Windows 10). Due to lack of<br>
hardware, I cannot test it on macOS (trusting the documentation from Microsoft, the<br>
macOS setup should work out of the box, sharing the configuration/implementation for<br>
Linux).</p>
</blockquote>
<p>From my experience, macOS is never "for free". It usually works, but<br>
requires some care and tinkering. It also require a selection of real Mac<br>
hardware for testing: both x86_64-darwin and arm64-darwin.</p>
</blockquote>
<p>yes, this is what I fear too (while it mostly should work, the occasional <br>
tinkering and testing will be needed). Sadly, I do lack access to this setup <br>
right now ... </p>
<blockquote>
<p>Looking only briefly at your material, I did not understand where the dotnet<br>
/ F# component actually is.</p>
</blockquote>
<p>The dotnet component (actually, the full dotnet SDK) needs to be installed using </p>
<p>isabelle dotnet_setup </p>
<p>This is similar to "isabelle ghc_setup". The ghc_setup tool (in ./lib/Tools/dotnet_setup).<br>
I did not touch the "Admin" component part. Firstly, this really only makes sense if the F# <br>
setup becomes integrated into the Isabelle distribution, and, secondly, the component <br>
registration is an area of Isabelle that I do not know well). </p>
<p>Internally, the "dotnet_setup" tool obtains an installation script from a fixed domain provided <br>
by Microsoft (i.e., this is promised to be a stable URL by Microsoft). There are two version of <br>
this script: a PowerShell script for Windows and a Bash script for Linux/macOS. After downloading <br>
this script, the "dotnet_setup" tool executes the script to install the dotnet runtime (without user <br>
intervention) into $ISABELLE_DOTNET_ROOT (the current default value is <br>
$ISABELLE_HOME_USER/dotnet-$ISABELLE_DOTNET_VERSION). </p>
<p>This is somewhat similar to the ghc/ocaml setup where stack/opam is used for installing the <br>
actual dotnet platform (SDK). The difference is that also the installation script is obtained<br>
"on demand" - this seems to be recommended by Microsoft to ensure that always the latest <br>
dotnet installation script is used (the version of the dotnet framework/SDK that is actually<br>
installed is fixed to the version specified in the Isabelle settings). If this is the <br>
best approach for an Isabelle integration or if, e.g., integrating this install script <br>
as a proper Isabelle component (as opam, if I understood the current setup correctly),<br>
is something where I would love to hear your opinion on (when time permits). </p>
<p>F# is one of the two first-class citizen of dotnet. Hence, as soon as the dotnet SDK <br>
is installed, F# is available (e.g., by invoking "dotnet fsi"). </p>
<p>I hope this clarifies the questions "where the dotnet component actually is" question. </p>
<p>To be clear: I did not register dotnet in Admin/components. My approach is a kind of <br>
"user installation", as I did not want to fiddle around with a part of the Isabelle <br>
repository that I do not understand well enough to do this with the necessary level<br>
of confidence. </p>
<blockquote>
<p>De-facto, I am the universal maintainer of all multiplatform Isabelle<br>
components. At some point, I am certainly interested to understand how F#<br>
can be bundled, but right now is a very bad time for that --- approx. 2<br>
weeks before RC1 of the Isabelle2022 release.</p>
</blockquote>
<p>Happy to postpone the discussion to after the Isabelle 2022 release. And, again, if <br>
there is a good technical setup allowing to maintain such a code generator configuration <br>
outside of the Isabelle main repository - happy to hear about it. </p>
<blockquote>
<p>For example, the absorption of GHC stack and OCaml opam some years ago did<br>
not fully work out: these projects have there very own culture that does not<br>
fully fit into Isabelle. We did not gain the stability and<br>
self-containedness of GHC and OCaml that we were hoping for: it still<br>
requires manual tinkering occasionally.</p>
</blockquote>
<p>I do not want to hide the truth: while dotnet/F# is a stable platform that is used in <br>
production, it has its own culture and tooling. The current setup only uses a tiny bit <br>
of it, namely "F# interactive" (the REPL, so to speak). </p>
<p>Without knowing exactly how much occasional manual tinkering GHC and Ocaml require, my <br>
best guess is that dotnet/F# would be in a similar ball park. Microsoft offers 3 years <br>
of support for LTS releases of dotnet. Thus, some tinkering is required every 2-3 years <br>
to switch to the latest LTS release. As the code generator setup maps to the (stable) <br>
core of the language and does not make use of any additional libraries, this should <br>
still fall into the "little bit of manual tinkering" category, hopefully. </p>
<p>Achim  </p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="295353850"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295353850" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295353850">(Aug 26 2022 at 04:52)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
On 25/08/2022 08:27, Florian Haftmann wrote:</p>
<blockquote>
<blockquote>
<p>Having an external contribution in the<br>
AFP clearly delineates what comes from the core developers and what not.</p>
</blockquote>
<p>That could indeed by a criterion, although it sacrifices some aspects of<br>
maintainability.</p>
</blockquote>
<p>It sounds to me like this could be overcome by a well-defined interface that <br>
allows people to add their own code generator.</p>
<p>Tobias</p>
<blockquote>
<p>Florian</p>
<blockquote>
<p>Tobias<br>
</p>
</blockquote>
<p>On 23/08/2022 18:13, Florian Haftmann wrote:</p>
<blockquote>
<blockquote>
<p>Hi Achim and Tobias &amp;al.,</p>
<blockquote>
<p>I would appreciate your general opinion on F# as a new code generator<br>
target and,<br>
in particular, your opinion and recommendations on future<br>
maintenance/development<br>
models. I see, in principle two approaches:</p>
<p>1) integrating it into the main distribution of Isabelle or<br>
2) keeping it as a separate "component" (theoretically, it could even<br>
be an AFP<br>
     entry, if users install dotnet themselves and configure the<br>
ISABELLE_DOTNET<br>
     environment variable - i.e., without the sandboxed dotnet<br>
installation)</p>
</blockquote>
<blockquote>
<p>the code generator is part of Isabelle's trusted infrastructure. Thus<br>
I recommend you provide your F# code generator as an AFP entry in the<br>
Tools category.</p>
</blockquote>
<p>IMHO this argument on its own does not apply here.  The code generator<br>
is modular: adding another target language does not<br>
affect existing target languages and hence does not affect their<br>
trustworthiness, particularly not of Isabelle/ML (»Eval«)<br>
which is at the core of all proof-replacing evaluation mechanisms.</p>
<p>Concerning trustworthiness in general, the code generator by its<br>
architecture can never achieve the trustworthiness of e. g.<br>
the LCF-style inference kernel: you are always free to configure<br>
pointless or »unsound« things, sometimes burdening<br>
users to come up with an appropriate »interpretation« what generated<br>
code means in relaton to its originating theory;<br>
a prominent example from the distribution is<br>
HOL/Library/Code_Real_Approx_By_Float.thy.</p>
<p>Hence from my perspective it is difficult to argue that there are<br>
fundamental differences between distribution<br>
and AFP concerning trustworthiness of code generation.</p>
<p>From a maintenance perspective, integration into the distribution seems<br>
actually to be the more appropriate way:<br>
we have the tradition to setup target-language specific things in<br>
theories where their corresponding logical<br>
notions comes up (e. g. List.thy), and this makes things easier to<br>
maintain and re-check across all target languages.</p>
<p>There might still be other issues suggesting the AFP.</p>
<p>Cheers,<br>
     Florian<br>
</p>
</blockquote>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>
</blockquote>
<p><a href="/user_uploads/14278/Y3wMn6yNihoowjkIJo0gjg4j/smime.p7s">smime.p7s</a></p>
</blockquote>



<a name="295519235"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295519235" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295519235">(Aug 26 2022 at 21:58)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Thanks. From your explanations, I have learned many things about F# and dotnet.</p>
<p>Can you also say what your applications are?</p>
<p>Dotnet was once positioned as the next big thing, but recently we have seen <br>
more excitement elsewhere (even by Microsoft): e.g. Node.js/Electron.</p>
<p>Makarius</p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="295759992"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/295759992" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#295759992">(Aug 28 2022 at 21:50)</a>:</h4>
<p>From: "Achim D. Brucker" &lt;<a href="mailto:adbrucker@0x5f.org">adbrucker@0x5f.org</a>&gt;<br>
On Fri, Aug 26, 2022 at 11:58:17PM +0200, Makarius wrote:</p>
<blockquote>
<p>Thanks. From your explanations, I have learned many things about F# and dotnet.</p>
<p>Can you also say what your applications are?</p>
</blockquote>
<p>Hard to summarize in a few sentences. My original interest (way back in 2007, when <br>
fiddling with mono was still required on Linux) was driven by the need to interact,<br>
from Isabelle generated code, with Microsoft APIs for which nice packages were only <br>
available on dotnet. Access to Microsoft tooling and APIs is still a big motivation.</p>
<p>England, at least the South West, seems to be in a strong grip by Microsoft, i.e., <br>
the Uni IT and also local project partners (mostly SMEs, which is likely also a <br>
contributing factor) essentially require that one can interact with dotnet for joint <br>
projects. Positively, there is also a quite strong community of F# developers/companies  <br>
(e.g., using the SAFE stack <a href="https://safe-stack.github.io/">https://safe-stack.github.io/</a> that allows developing web <br>
applications type-safe in F#) in England ... </p>
<p>Personally, it's more the "I can program in ML and have easy access to all the shiny <br>
frameworks (via <a href="https://www.nuget.org/">https://www.nuget.org/</a>), a reasonable well working package manager/build <br>
systems, and IDE support (e.g., Ionice in VSCode)" that makes it an attractive platform. <br>
A lot of the problems I solve with F# these days are "mid-size" data processing/conversions <br>
tasks (that other people might solve in Python). </p>
<p>The combination of having a strongly typed programming language with pattern matches <br>
and also having access to databases, type providers for web scraping, and parser/validators<br>
for many formats available as libraries is a nice sweet spot. Overall, very similar <br>
to Scala on the Java platform. Also very similar to Scala, F# also has the "dualism" of <br>
larger compiled programs and scripts that can directly be executed. </p>
<p>While there are good web-stacks for F# (that essentially require nearly no JavaScript<br>
programming), good cross-platform UIs for desktop apps did essentially not exists <br>
(respectively, the ones that did exist were mostly generating Node.js/Electron<br>
applications). This seems to change right now - also Microsoft seems to see a <br>
need for a cross-platform UI framework for dotnet. </p>
<blockquote>
<p>Dotnet was once positioned as the next big thing, but recently we have seen<br>
more excitement elsewhere (even by Microsoft): e.g. Node.js/Electron.</p>
</blockquote>
<p>It's clearly not as hyped as node.js/Electron. On the other hand, upgrades of <br>
project across major versions of the underlying framework have been less painless <br>
for F# than for the few node.js projects I am involved with ;-).</p>
<p>Cheers,<br>
    Achim </p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="297319427"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/297319427" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#297319427">(Sep 06 2022 at 07:53)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
This thread is still unsettled.</p>
<p>Without going into detail, at the moment I think it is best to postpone<br>
the discussion until the next Isabelle release is published.  We<br>
definitely need Makarius have a look on the .NET components integration.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/4lB3Zem-XRWBMcJqXmke7C64/OpenPGP_signature">OpenPGP_signature</a></p>



<a name="308036429"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/308036429" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#308036429">(Nov 04 2022 at 19:40)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi all,</p>
<p>after the Isabelle release there might now be an opportunity to revive <br>
this thread.</p>
<p>Meanwhile in personal conversation Tobias and me finally agreed that, <br>
concerning code generation itself, the best solution is to follow <br>
Achim’s original proposal and put the F# serializer into the distribution.</p>
<p>@Makarius – while the .NET component setup looks promising for me, I am <br>
no expert in that area and I think we need your final judgement on this.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/RioKtmMSierv7hJyiMEp7sTe/OpenPGP_0xA707172232CFA4E9.asc">OpenPGP_0xA707172232CFA4E9.asc</a><br>
<a href="/user_uploads/14278/D209dZaB53oa0ZTL9wX9Tt17/OpenPGP_signature">OpenPGP_signature</a></p>



<a name="308192954"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/308192954" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#308192954">(Nov 05 2022 at 22:29)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I have spent some time with the "isabelle dotnet_setup" script by Achim and <br>
have turned the main ideas into proper "lambda calculus for systems <br>
programming" (aka Scala): <br>
<a href="https://isabelle-dev.sketis.net/source/isabelle/browse/default/src/Pure/Tools/dotnet_setup.scala;da85bffef443">https://isabelle-dev.sketis.net/source/isabelle/browse/default/src/Pure/Tools/dotnet_setup.scala;da85bffef443</a></p>
<p>The key by Microsoft documentation is here: <br>
<a href="https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-install-script">https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-install-script</a></p>
<p>So this is our NEWS entry in Isabelle/da85bffef443:</p>
<p><strong>* System </strong>*</p>
<ul>
<li>The command-line tools "isabelle dotnet_setup" and "isabelle dotnet"<br>
support the Dotnet platform (.NET), which includes Fsharp (F#). This<br>
works uniformly on all Isabelle OS platforms, even as cross-platform<br>
installation: "isabelle dotnet_setup -p linux_arm,linux,macos,windows".</li>
</ul>
<p>Example:</p>
<p>isabelle dotnet_setup<br>
   isabelle dotnet fsi</p>
<blockquote>
<p>1 + 1;;<br>
#quit;;</p>
</blockquote>
<p>The multiplatform installation script from the Dotnet project looks fairly <br>
robust. At least the "1 + 1" example works smoothly on all Isabelle platforms.</p>
<p>For the cross-platform installation of windows on linux, I have used the <br>
"powershell" snap of Ubuntu 22.04 LTS, just for the fun of it.</p>
<p>So the main remaining question for Isabelle/HOL codegen support is the proper <br>
spelling of "F#". I would say it is "Fsharp" for the Isar command syntax and <br>
"fsharp" in plain ML names.</p>
<p>Makarius</p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="308193512"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/308193512" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#308193512">(Nov 05 2022 at 22:37)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I wonder if this is also relevant, but we are not using the regular installer <br>
here: <a href="https://learn.microsoft.com/en-us/dotnet/core/tools/telemetry">https://learn.microsoft.com/en-us/dotnet/core/tools/telemetry</a></p>
<p>Is there anything to do, in order to disable telemetry data sent to Microsoft?</p>
<p>Makarius</p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<a name="308195857"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20New%20Code%20Generator%20Target%3A%20F%23/near/308195857" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20New.20Code.20Generator.20Target.3A.20F.23.html#308195857">(Nov 05 2022 at 23:10)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I have now added this change, hoping that it is sufficient: <br>
<a href="https://isabelle-dev.sketis.net/rISABELLE18c50ff16bbc">https://isabelle-dev.sketis.net/rISABELLE18c50ff16bbc</a></p>
<p>Makarius</p>
<hr>
<p>isabelle-dev mailing list<br>
<a href="mailto:isabelle-dev@in.tum.de">isabelle-dev@in.tum.de</a><br>
<a href="https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>