<html>
<head><meta charset="utf-8"><title>[isabelle-dev] quickcheck throws &quot;Type unification failed... · Mirror: Isabelle Development Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/index.html">Mirror: Isabelle Development Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20quickcheck.20throws.20.22Type.20unification.20failed.2E.2E.2E.html">[isabelle-dev] quickcheck throws &quot;Type unification failed...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="369647344"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20quickcheck%20throws%20%22Type%20unification%20failed.../near/369647344" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20quickcheck.20throws.20.22Type.20unification.20failed.2E.2E.2E.html#369647344">(Jun 26 2023 at 10:36)</a>:</h4>
<p>From: Fabian Huch &lt;<a href="mailto:huch@in.tum.de">huch@in.tum.de</a>&gt;<br>
In the following minimal example:</p>
<p>datatype t = A | B "t × t"</p>
<p>fun f :: "t ⇒ bool" where<br>
   "f A ⟷ True"<br>
| "f _ ⟷ False"</p>
<p>quickcheck throws an error if you invoke it (both Isabelle2022 and <br>
latest devel):</p>
<p>lemma "f x = True" quickcheck</p>
<p>Does anyone have an idea what's going on? The error is as follows:</p>
<p>Type unification failed: No type arity t :: full_exhaustive</p>
<p>Type error in application: incompatible operand type</p>
<p>Operator:  full_exhaustive_class.full_exhaustive :: (??'a × (unit ⇒ <br>
term) ⇒ (bool × term list) option) ⇒ natural ⇒ (bool × term list) option<br>
Operand:<br>
   λ(t, t_t__).<br>
      Quickcheck_Random.catch_match<br>
       (if equal_bool_inst.equal_bool (f t) True then None<br>
        else Some<br>
              (True,<br>
               [t_t__ (),<br>
                Quickcheck_Random.catch_match <br>
(term_of_bool_inst.term_of_bool True)<br>
                 (Code_Evaluation.Const<br>
                   (String.Literal True False False False True False True<br>
                     (String.Literal True False True False True True True<br>
                       (String.Literal True False False True False True True<br>
                         (String.Literal True True False False False <br>
True True<br>
                           (String.Literal True True False True False <br>
True True<br>
                             (String.Literal True True False False False <br>
True True<br>
                               (String.Literal False False False True <br>
False True True<br>
                                 (String.Literal True False True False <br>
False True True<br>
                                   (String.Literal True True False False <br>
False True True<br>
                                     (String.Literal True True False <br>
True False True True<br>
                                       (String.Literal True True True <br>
True True False True<br>
                                         (String.Literal True False True <br>
False False False True<br>
                                           (String.Literal False False <br>
False True True True True<br>
                                             (String.Literal False False <br>
False True False True True<br>
                                               (String.Literal True <br>
False False False False True True<br>
                                                 (String.Literal True <br>
False True False True True True<br>
                                                   (String.Literal True <br>
True False False True True True<br>
(String.Literal False False True False True True True<br>
(String.Literal True False False True False True True<br>
(String.Literal False True True False True True True<br>
(String.Literal True False True False False True True<br>
(String.Literal False True True True False True False<br>
(String.Literal True False True False True True True<br>
(String.Literal False True True True False True True<br>
(String.Literal True True False True False True True<br>
(String.Literal False True True True False True True<br>
(String.Literal True True True True False True True<br>
(String.Literal True True True False True True True<br>
(String.Literal False True True True False True True <br>
zero_literal_inst.zero_literal)))))))))))))))))))))))))))))<br>
                   (typerep.Typerep<br>
                     (String.Literal False False False True False False True<br>
                       (String.Literal True True True True False False True<br>
                         (String.Literal False False True True False <br>
False True<br>
                           (String.Literal False True True True False <br>
True False<br>
                             (String.Literal False True False False <br>
False True True<br>
                               (String.Literal True True True True False <br>
True True<br>
                                 (String.Literal True True True True <br>
False True True (String.Literal False False True True False True True <br>
zero_literal_inst.zero_literal))))))))<br>
                     [])),<br>
                Quickcheck_Random.catch_match <br>
(term_of_bool_inst.term_of_bool (f t))<br>
                 (Code_Evaluation.Const<br>
                   (String.Literal True False False False True False True<br>
                     (String.Literal True False True False True True True<br>
                       (String.Literal True False False True False True True<br>
                         (String.Literal True True False False False <br>
True True<br>
                           (String.Literal True True False True False <br>
True True<br>
                             (String.Literal True True False False False <br>
True True<br>
                               (String.Literal False False False True <br>
False True True<br>
                                 (String.Literal True False True False <br>
False True True<br>
                                   (String.Literal True True False False <br>
False True True<br>
                                     (String.Literal True True False <br>
True False True True<br>
                                       (String.Literal True True True <br>
True True False True<br>
                                         (String.Literal True False True <br>
False False False True<br>
                                           (String.Literal False False <br>
False True True True True<br>
                                             (String.Literal False False <br>
False True False True True<br>
                                               (String.Literal True <br>
False False False False True True<br>
                                                 (String.Literal True <br>
False True False True True True<br>
                                                   (String.Literal True <br>
True False False True True True<br>
(String.Literal False False True False True True True<br>
(String.Literal True False False True False True True<br>
(String.Literal False True True False True True True<br>
(String.Literal True False True False False True True<br>
(String.Literal False True True True False True False<br>
(String.Literal True False True False True True True<br>
(String.Literal False True True True False True True<br>
(String.Literal True True False True False True True<br>
(String.Literal False True True True False True True<br>
(String.Literal True True True True False True True<br>
(String.Literal True True True False True True True<br>
(String.Literal False True True True False True True <br>
zero_literal_inst.zero_literal)))))))))))))))))))))))))))))<br>
                   (typerep.Typerep<br>
                     (String.Literal False False False True False False True<br>
                       (String.Literal True True True True False False True<br>
                         (String.Literal False False True True False <br>
False True<br>
                           (String.Literal False True True True False <br>
True False<br>
                             (String.Literal False True False False <br>
False True True<br>
                               (String.Literal True True True True False <br>
True True<br>
                                 (String.Literal True True True True <br>
False True True (String.Literal False False True True False True True <br>
zero_literal_inst.zero_literal))))))))<br>
                     []))]))<br>
       (if genuine_only__ then None<br>
        else Some<br>
              (False,<br>
               [t_t__ (),<br>
                Quickcheck_Random.catch_match <br>
(term_of_bool_inst.term_of_bool True)<br>
                 (Code_Evaluation.Const<br>
                   (String.Literal True False False False True False True<br>
                     (String.Literal True False True False True True True<br>
                       (String.Literal True False False True False True True<br>
                         (String.Literal True True False False False <br>
True True<br>
                           (String.Literal True True False True False <br>
True True<br>
                             (String.Literal True True False False False <br>
True True<br>
                               (String.Literal False False False True <br>
False True True<br>
                                 (String.Literal True False True False <br>
False True True<br>
                                   (String.Literal True True False False <br>
False True True<br>
                                     (String.Literal True True False <br>
True False True True<br>
                                       (String.Literal True True True <br>
True True False True<br>
                                         (String.Literal True False True <br>
False False False True<br>
                                           (String.Literal False False <br>
False True True True True<br>
                                             (String.Literal False False <br>
False True False True True<br>
                                               (String.Literal True <br>
False False False False True True<br>
                                                 (String.Literal True <br>
False True False True True True<br>
                                                   (String.Literal True <br>
True False False True True True<br>
(String.Literal False False True False True True True<br>
(String.Literal True False False True False True True<br>
(String.Literal False True True False True True True<br>
(String.Literal True False True False False True True<br>
(String.Literal False True True True False True False<br>
(String.Literal True False True False True True True<br>
(String.Literal False True True True False True True<br>
(String.Literal True True False True False True True<br>
(String.Literal False True True True False True True<br>
(String.Literal True True True True False True True<br>
(String.Literal True True True False True True True<br>
(String.Literal False True True True False True True <br>
zero_literal_inst.zero_literal)))))))))))))))))))))))))))))<br>
                   (typerep.Typerep<br>
                     (String.Literal False False False True False False True<br>
                       (String.Literal True True True True False False True<br>
                         (String.Literal False False True True False <br>
False True<br>
                           (String.Literal False True True True False <br>
True False<br>
                             (String.Literal False True False False <br>
False True True<br>
                               (String.Literal True True True True False <br>
True True<br>
                                 (String.Literal True True True Tru<br>
[message truncated]</p>



<a name="369652673"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/%5Bisabelle-dev%5D%20quickcheck%20throws%20%22Type%20unification%20failed.../near/369652673" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/.5Bisabelle-dev.5D.20quickcheck.20throws.20.22Type.20unification.20failed.2E.2E.2E.html#369652673">(Jun 26 2023 at 10:52)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@ifi.lmu.de">jasmin.blanchette@ifi.lmu.de</a>&gt;<br>
Hallo Fabian,</p>
<p>This is the issue that was discussed here:</p>
<p><a href="https://lists.cam.ac.uk/sympa/arc/cl-isabelle-users/2022-03/msg00005.html">https://lists.cam.ac.uk/sympa/arc/cl-isabelle-users/2022-03/msg00005.html</a></p>
<p>In short, I broke this in 2014 when moving to the new datatypes and it's not easy to repair. I doubt I will ever find the time to do it myself -- it requires some concentration. If anybody is interested in repairing this, I would be more than happy to supervise them.</p>
<p>Best,<br>
Jasmin</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>