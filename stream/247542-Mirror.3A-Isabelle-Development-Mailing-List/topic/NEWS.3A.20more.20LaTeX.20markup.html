<html>
<head><meta charset="utf-8"><title>NEWS: more LaTeX markup · Mirror: Isabelle Development Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/index.html">Mirror: Isabelle Development Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html">NEWS: more LaTeX markup</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="487679486"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/487679486" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#487679486">(Dec 11 2024 at 00:53)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
<strong>* Document preparation </strong>*</p>
<ul>
<li>
<p>LaTeX output from printed entities (types, terms, thms) now contains<br>
additional markup as follows:</p>
<p>tclass    -- type class "a"<br>
 tconst    -- type constructor "a"<br>
 tfree     -- free type variable "'a"<br>
 tvar      -- schematic type variable "?'a"<br>
 const     -- constant "a"<br>
 free      -- free variable "a"<br>
 bound     -- bound variable "a"<br>
 skolem    -- skolem variable "a"<br>
 var       -- schematic variable "?a"</p>
</li>
</ul>
<p>These markup names are turned into LaTeX macros using the prefix "\isa",<br>
e.g. "\isaconst{...}" for "const". By default, these macros have no<br>
effect, but may be defined in root.tex like this:</p>
<p>\renewcommand{\isatconst}[1]{{\color{darkgray}#1}}<br>
   \renewcommand{\isaconst}[1]{\textsl{\color{darkgray}#1}}</p>
<p>This refers to Isabelle/f8b28356ab94.</p>
<p>It has required many decades to get to that point: I now recallthat in the <br>
late 1990ies, we could only get free/bound/var etc. but not the consts. Thanks <br>
to major cleanup of the inner-syntax framework some months ago, this now <br>
turned out reasonably easy.</p>
<p>Makarius</p>



<a name="488137887"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/488137887" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#488137887">(Dec 11 2024 at 16:25)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Brilliant, many thanks!</p>
<p>Is there any way to obtain (in the document} \isaconst{Nil} via some antiquotation?</p>
<ul>
<li>@{const Nil} produces []</li>
<li>@{const [source] Nil} produces \isa{Nil}</li>
</ul>
<p>Of course this is just an example standing for the many constants that have <br>
associated syntax.</p>
<p>Tobias</p>
<p>On 10/12/2024 22:13, Makarius wrote:</p>
<blockquote>
<p><strong>* Document preparation </strong>*</p>
<ul>
<li>LaTeX output from printed entities (types, terms, thms) now contains<br>
additional markup as follows:</li>
</ul>
<p>tclass    -- type class "a"<br>
   tconst    -- type constructor "a"<br>
   tfree     -- free type variable "'a"<br>
   tvar      -- schematic type variable "?'a"<br>
   const     -- constant "a"<br>
   free      -- free variable "a"<br>
   bound     -- bound variable "a"<br>
   skolem    -- skolem variable "a"<br>
   var       -- schematic variable "?a"</p>
<p>These markup names are turned into LaTeX macros using the prefix "\isa",<br>
e.g. "\isaconst{...}" for "const". By default, these macros have no<br>
effect, but may be defined in root.tex like this:</p>
<p>\renewcommand{\isatconst}[1]{{\color{darkgray}#1}}<br>
   \renewcommand{\isaconst}[1]{\textsl{\color{darkgray}#1}}</p>
<p>This refers to Isabelle/f8b28356ab94.</p>
<p>It has required many decades to get to that point: I now recallthat in the late <br>
1990ies, we could only get free/bound/var etc. but not the consts. Thanks to <br>
major cleanup of the inner-syntax framework some months ago, this now turned out <br>
reasonably easy.</p>
<p>Makarius</p>
</blockquote>
<p><a href="/user_uploads/14278/s6rZYOvZu2S3BaZHIPVMw_NZ/smime.p7s">smime.p7s</a></p>



<a name="488847339"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/488847339" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#488847339">(Dec 13 2024 at 14:04)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 11/12/2024 17:25, Tobias Nipkow wrote:</p>
<blockquote>
<p>Is there any way to obtain (in the document} \isaconst{Nil} via some <br>
antiquotation?<br>
- @{const Nil} produces []<br>
- @{const [source] Nil} produces \isa{Nil}</p>
<p>Of course this is just an example standing for the many constants that have <br>
associated syntax.</p>
</blockquote>
<p>@{const [source] NAME} presents the original input source, not pretty-printed <br>
output. It would require substantial reworking of the document preparation <br>
system to use PIDE markup there: one happy day that will happen, but not now <br>
and not for the coming release.</p>
<p>If this is actually about printing formal entity names like the term <br>
pretty-printer does (without syntax), you can define a document antiquotation <br>
@{const_name NAME} like this:</p>
<p>setup ‹<br>
   Document_Output.antiquotation_pretty_embedded \&lt;^binding&gt;‹const_name›<br>
     (Args.const {proper = true, strict = false})<br>
     (fn ctxt =&gt; fn c =&gt; Pretty.mark_str (Markup.const, <br>
Proof_Context.extern_const ctxt c))<br>
›</p>
<p>Makarius</p>



<a name="489229754"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/489229754" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#489229754">(Dec 16 2024 at 12:59)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
That was exactly what I needed, many thanks!</p>
<p>Tobias</p>
<p>On 13/12/2024 13:46, Makarius wrote:</p>
<blockquote>
<p>On 11/12/2024 17:25, Tobias Nipkow wrote:</p>
<blockquote>
<p>Is there any way to obtain (in the document} \isaconst{Nil} via some <br>
antiquotation?<br>
- @{const Nil} produces []<br>
- @{const [source] Nil} produces \isa{Nil}</p>
<p>Of course this is just an example standing for the many constants that have <br>
associated syntax.</p>
</blockquote>
<p>@{const [source] NAME} presents the original input source, not pretty-printed <br>
output. It would require substantial reworking of the document preparation <br>
system to use PIDE markup there: one happy day that will happen, but not now and <br>
not for the coming release.</p>
<p>If this is actually about printing formal entity names like the term pretty- <br>
printer does (without syntax), you can define a document antiquotation <br>
@{const_name NAME} like this:</p>
<p>setup ‹<br>
   Document_Output.antiquotation_pretty_embedded \&lt;^binding&gt;‹const_name›<br>
     (Args.const {proper = true, strict = false})<br>
     (fn ctxt =&gt; fn c =&gt; Pretty.mark_str (Markup.const, <br>
Proof_Context.extern_const ctxt c))<br>
›</p>
<p>Makarius<br>
</p>
</blockquote>
<p><a href="/user_uploads/14278/UeRbLiq1X2nkes75EdKMNJmG/smime.p7s">smime.p7s</a></p>



<a name="490475352"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/490475352" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#490475352">(Dec 23 2024 at 08:31)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Hi Makarius,</p>
<p>I am using these new macros to modify the font for constants. This works very <br>
well except for one issue: in latex blocks with line breaks, the \isaindent code <br>
does not utilize these macros but includes the bare names only. As a result, the <br>
indentation is a bit off. Here is an example of the generated latex code</p>
<p>\isaindent{{\isacharequal}{\kern0pt}\ <br>
{\isacharparenleft}{\kern0pt}}\isaconst{LT}\ {\isasymRightarrow}\ <br>
\isakeyword{let}\ \isabound{l{\isacharprime}{\kern0pt}}\ <br>
{\isacharequal}{\kern0pt}\ \isaconst{del}\ \isavar{x}\ \isavar{l}\isanewline<br>
\isaindent{{\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}LT\ <br>
{\isasymRightarrow}\ }</p>
<p>\isaconst{LT} vs plain LT inside an \isaindent a few lines below.</p>
<p>Tobias</p>
<p>On 10/12/2024 22:13, Makarius wrote:</p>
<blockquote>
<p><strong>* Document preparation </strong>*</p>
<ul>
<li>LaTeX output from printed entities (types, terms, thms) now contains<br>
additional markup as follows:</li>
</ul>
<p>tclass    -- type class "a"<br>
   tconst    -- type constructor "a"<br>
   tfree     -- free type variable "'a"<br>
   tvar      -- schematic type variable "?'a"<br>
   const     -- constant "a"<br>
   free      -- free variable "a"<br>
   bound     -- bound variable "a"<br>
   skolem    -- skolem variable "a"<br>
   var       -- schematic variable "?a"</p>
<p>These markup names are turned into LaTeX macros using the prefix "\isa",<br>
e.g. "\isaconst{...}" for "const". By default, these macros have no<br>
effect, but may be defined in root.tex like this:</p>
<p>\renewcommand{\isatconst}[1]{{\color{darkgray}#1}}<br>
   \renewcommand{\isaconst}[1]{\textsl{\color{darkgray}#1}}</p>
<p>This refers to Isabelle/f8b28356ab94.</p>
<p>It has required many decades to get to that point: I now recallthat in the late <br>
1990ies, we could only get free/bound/var etc. but not the consts. Thanks to <br>
major cleanup of the inner-syntax framework some months ago, this now turned out <br>
reasonably easy.</p>
<p>Makarius</p>
</blockquote>
<p><a href="/user_uploads/14278/U7aXds2r6-n2VI_yYt1kQ7Qr/smime.p7s">smime.p7s</a></p>



<a name="491798692"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/491798692" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#491798692">(Jan 03 2025 at 19:03)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 23/12/2024 09:31, Tobias Nipkow wrote:</p>
<blockquote>
<p>I am using these new macros to modify the font for constants. This works very <br>
well except for one issue: in latex blocks with line breaks, the \isaindent <br>
code does not utilize these macros but includes the bare names only.</p>
</blockquote>
<p>This should work better in recent Isabelle/9253dadbd4ac: I had to make <br>
significant changes to pretty-printing with markup for that. A few more <br>
changes might be coming a bit later ...</p>
<p>Makarius</p>



<a name="491942273"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/491942273" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#491942273">(Jan 05 2025 at 06:45)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Thanks Makarius, it works perfectly.</p>
<p>Tobias</p>
<p>On 03/01/2025 20:03, Makarius wrote:</p>
<blockquote>
<p>On 23/12/2024 09:31, Tobias Nipkow wrote:</p>
<blockquote>
<p>I am using these new macros to modify the font for constants. This works very <br>
well except for one issue: in latex blocks with line breaks, the \isaindent <br>
code does not utilize these macros but includes the bare names only.</p>
</blockquote>
<p>This should work better in recent Isabelle/9253dadbd4ac: I had to make <br>
significant changes to pretty-printing with markup for that. A few more changes <br>
might be coming a bit later ...</p>
<p>Makarius<br>
</p>
</blockquote>
<p><a href="/user_uploads/14278/EQe576WcWd68aAO7Q_QBG8NF/smime.p7s">smime.p7s</a></p>



<a name="492256970"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/492256970" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#492256970">(Jan 07 2025 at 07:40)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Makarius,</p>
<p>Just one more thing: the field names in record updates are not enclosed in any <br>
macro, eg the field "front":</p>
<p>\isa{\isafree{q}{\isasymlparr}front\ <br>
{\isacharcolon}{\kern0pt}{\isacharequal}{\kern0pt}\ <br>
{\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isasymrparr}}.</p>
<p>Can you wrap them in \isaconst (because the field selector is a function)?</p>
<p>Thanks<br>
Tobias</p>
<p>On 03/01/2025 20:03, Makarius wrote:</p>
<blockquote>
<p>On 23/12/2024 09:31, Tobias Nipkow wrote:</p>
<blockquote>
<p>I am using these new macros to modify the font for constants. This works very <br>
well except for one issue: in latex blocks with line breaks, the \isaindent <br>
code does not utilize these macros but includes the bare names only.</p>
</blockquote>
<p>This should work better in recent Isabelle/9253dadbd4ac: I had to make <br>
significant changes to pretty-printing with markup for that. A few more changes <br>
might be coming a bit later ...</p>
<p>Makarius<br>
</p>
</blockquote>
<p><a href="/user_uploads/14278/q8LOTurfL0Mi7F3XY6tTak8O/smime.p7s">smime.p7s</a></p>



<a name="492395813"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/492395813" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#492395813">(Jan 07 2025 at 22:04)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 07/01/2025 08:40, Tobias Nipkow wrote:</p>
<blockquote>
<p>Just one more thing: the field names in record updates are not enclosed in any <br>
macro, eg the field "front":</p>
</blockquote>
<blockquote>
<p>Can you wrap them in \isaconst (because the field selector is a function)?</p>
</blockquote>
<p>This turned out quite easy, using mixfix markup for the specific record <br>
syntax: <a href="https://isabelle-dev.sketis.net/rISABELLE4b739ed65946">https://isabelle-dev.sketis.net/rISABELLE4b739ed65946</a></p>
<p>I have also had a look at theory src/HOL/Library/Datatype_Records.thy but its <br>
output syntax appears to be somewhat unfinished anyway.</p>
<p>Makarius</p>



<a name="492471524"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/247542-Mirror%3A%20Isabelle%20Development%20Mailing%20List/topic/NEWS%3A%20more%20LaTeX%20markup/near/492471524" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/247542-Mirror.3A-Isabelle-Development-Mailing-List/topic/NEWS.3A.20more.20LaTeX.20markup.html#492471524">(Jan 08 2025 at 10:06)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Sweet, thanks!</p>
<p>Tobias</p>
<p>On 07/01/2025 23:04, Makarius wrote:</p>
<blockquote>
<p>On 07/01/2025 08:40, Tobias Nipkow wrote:</p>
<blockquote>
<p>Just one more thing: the field names in record updates are not enclosed in any <br>
macro, eg the field "front":</p>
</blockquote>
<blockquote>
<p>Can you wrap them in \isaconst (because the field selector is a function)?</p>
</blockquote>
<p>This turned out quite easy, using mixfix markup for the specific record syntax: <br>
<a href="https://isabelle-dev.sketis.net/rISABELLE4b739ed65946">https://isabelle-dev.sketis.net/rISABELLE4b739ed65946</a></p>
<p>I have also had a look at theory src/HOL/Library/Datatype_Records.thy but its <br>
output syntax appears to be somewhat unfinished anyway.</p>
<p>Makarius<br>
</p>
</blockquote>
<p><a href="/user_uploads/14278/xIDssCqNjD6FZrQzzxLbcVpZ/smime.p7s">smime.p7s</a></p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>