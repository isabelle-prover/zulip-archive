<html>
<head><meta charset="utf-8"><title>Efficient code generator setup for binary operations · Is there code for X? · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html">Efficient code generator setup for binary operations</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="443079904"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443079904" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443079904">(Jun 06 2024 at 14:54)</a>:</h4>
<p>I'm wondering if there is any code generator setup <strong>on type int/nat</strong> for bit operations like AND, OR, XOR, NOT as well as bit shifts, bitlen, etc. Even when I include <code>HOL-Library.Code_Target_Numeral</code> these get translated to horribly inefficient integer arithmetic involving multiplication/division.</p>
<p>I am aware of the word library, which does these things for fixed-width integers, but I need it for arbitrary-precision integers.</p>
<p>I do have a proof-of-concept code generator  setup for SML and Haskell that I could put in the distribution, but I want to make sure I'm not reinventing the wheel here.</p>



<a name="443080776"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443080776" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443080776">(Jun 06 2024 at 14:58)</a>:</h4>
<p>I just found this: <a href="https://www.isa-afp.org/entries/Native_Word.html">https://www.isa-afp.org/entries/Native_Word.html</a></p>
<p>That does include some of the things I want, but not all of them; in particular no support for things like <code>bitlen</code> or <code>floorlog2</code>.</p>
<p>In any case I think this should really go into the distribution.</p>



<a name="443252293"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443252293" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wenda Li <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443252293">(Jun 07 2024 at 09:25)</a>:</h4>
<p>Agreed. On the other hand,  I am always curious why many other more dedicated projects like 'MicroJava' and several protocol verifications are in the distribution. Not sure if they are re-used that often these days.</p>



<a name="443252934"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443252934" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443252934">(Jun 07 2024 at 09:28)</a>:</h4>
<p>Historic reasons. These predate the AFP, I think. The last time I suggested that they be moved to the AFP I think I was told that these are not interesting enough or not "nice" enough to be moved there.</p>



<a name="443256837"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443256837" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wenda Li <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443256837">(Jun 07 2024 at 09:50)</a>:</h4>
<p>I see. Probably something we can do in the future. I do think the standard library should ideally be more actively maintained/reused than an 'archive'~</p>



<a name="443257208"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443257208" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443257208">(Jun 07 2024 at 09:52)</a>:</h4>
<p>I would definitely second that.</p>



<a name="443257278"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443257278" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443257278">(Jun 07 2024 at 09:52)</a>:</h4>
<p>But generally there is the problem that the barrier between the distribution and the AFP is not very well-defined</p>



<a name="443257370"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443257370" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443257370">(Jun 07 2024 at 09:53)</a>:</h4>
<p>There's also all these "ex"/"examples" theories in the distribution, but I think I don't really mind those.</p>



<a name="443257424"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443257424" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443257424">(Jun 07 2024 at 09:53)</a>:</h4>
<p>I did e.g. move Bernoulli from there to the AFP once though because I needed it.</p>



<a name="443257466"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Efficient%20code%20generator%20setup%20for%20binary%20operations/near/443257466" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manuel Eberl <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Efficient.20code.20generator.20setup.20for.20binary.20operations.html#443257466">(Jun 07 2024 at 09:53)</a>:</h4>
<p>(and significantly extended it in the process)</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>