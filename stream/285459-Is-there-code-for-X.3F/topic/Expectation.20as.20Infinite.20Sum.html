<html>
<head><meta charset="utf-8"><title>Expectation as Infinite Sum · Is there code for X? · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/index.html">Is there code for X?</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Expectation.20as.20Infinite.20Sum.html">Expectation as Infinite Sum</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="343753757"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Expectation%20as%20Infinite%20Sum/near/343753757" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ata Keskin <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Expectation.20as.20Infinite.20Sum.html#343753757">(Mar 22 2023 at 18:20)</a>:</h4>
<p>I need to represent the expectation of a pmf as an infinite sum. I have been able to do this somewhat by converting it to a lebesgue integral with the measure (count_space UNIV), however this has proven to be quite cumbersome after a while. I have found the definition "infsetsum" but this seems to be deprecated, and I haven't been able to find anything similar to the lemma "pmf_expectation_eq_infsetsum" there. Any tips?</p>



<a name="343793767"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Expectation%20as%20Infinite%20Sum/near/343793767" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ata Keskin <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Expectation.20as.20Infinite.20Sum.html#343793767">(Mar 22 2023 at 22:00)</a>:</h4>
<p>While searching the library I stumbled upon a total of 3 separate definitions for infinite sums, two of them uses the "limit of partial sums" approach (see Series.thy and Infinite_Sum.thy) and the third uses a measure theoretic approach (integral over count_space). Unfortunately all three of them have lemmas which I need and there doesn't seem to be many ways of converting between them. For example I need to define the exponential function using the term "infsum", so that I can get a series representation for (exp (x) - 1). But I can't do that since it is defined in terms of "suminf", which necessarily sums over the entire UNIV. What would be the recommended approach here? Which one should I use?</p>



<a name="344302199"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Expectation%20as%20Infinite%20Sum/near/344302199" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ata Keskin <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Expectation.20as.20Infinite.20Sum.html#344302199">(Mar 24 2023 at 15:39)</a>:</h4>
<p>I wrote the translation lemmas myself and solved this issue. If anybody else needs them for some reason I'd be glad to share them here, just send me a dm.</p>



<a name="344333593"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/285459-Is%20there%20code%20for%20X%3F/topic/Expectation%20as%20Infinite%20Sum/near/344333593" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan Julian Huerta y Munive <a href="http://isabelle.systems/zulip-archive/stream/285459-Is-there-code-for-X.3F/topic/Expectation.20as.20Infinite.20Sum.html#344333593">(Mar 24 2023 at 17:45)</a>:</h4>
<p>Sorry, I did not see this before. Try looking for this kind of theorems in the AFP. I myself have proved some relationships between sum-operations in <code>Matrices_for_ODEs</code>. Using <code>grep</code> in the command line in the AFP directory (e.g. <code>grep -r "infsum.*=" . </code>)  will show you some of the proved theorems. Although at first glance, it does not look like any of them do what you wanted.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>