<html>
<head><meta charset="utf-8"><title>[isabelle] &quot;and similarly...&quot; · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html">[isabelle] &quot;and similarly...&quot;</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294149643"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%22and%20similarly...%22/near/294149643" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html#294149643">(Aug 18 2022 at 18:53)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
Apart from adhoc-mechanisms on the ML level, there is no such thing in <br>
Isabelle. There have been occasional requests for support of concepts <br>
like 'proof by analogy' or 'without loss of generality'. But to my <br>
knowledge, there haven't been any efforts to implement such a thing.</p>
<p>Support for the really simple cases (like your example, just replace <br>
HeadMap by TailMap everwhere) would probably be just a technical <br>
problem, but often the mathematical notion of "similarly" is quite a bit <br>
wider ...</p>
<p>-- Lars</p>



<a name="294149665"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%22and%20similarly...%22/near/294149665" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html#294149665">(Aug 18 2022 at 18:53)</a>:</h4>
<p>From: Jeremy Dawson &lt;<a href="mailto:jeremy@rsise.anu.edu.au">jeremy@rsise.anu.edu.au</a>&gt;<br>
John Wickerson wrote:<br>
John,</p>
<p>Where what varies is the choice of theorem you could get something like<br>
(and this sort of thing is absolutely routine in my work):</p>
<p>fun mtacs XMap = [ ... ] : tactic list ;</p>
<p>Then use, one time, (EVERY (mtacs HeadMapThm))<br>
and the other time (EVERY (mtacs TailMapThm)).</p>
<p>In your case what differs between the two cases is the choice of the <br>
constant (?)<br>
HeadMap or TailMap, to plug into a particular spot.  You could no doubt <br>
work something out involving a variable ?XMap (in place of HeadMap or <br>
TailMap), a subgoal  ?XMap = ?XMap, and resolve this with theorems such as<br>
HeadMap = HeadMap (in one instance), or TailMap = TailMap (in the other).</p>
<p>Alternatively, what I have also done on occasions is to create different <br>
strings for use in subgoal_tac or similar</p>
<p>fun string1 XMapstr =    .... ^ XMapstr ^ ....<br>
and use<br>
string1 "HeadMap" or string1 "TailMap"</p>
<p>You have to be using the ML interface to Isabelle to do this - which, I <br>
understand, is what ML was originally designed for - and so is <br>
particularly well suited for.</p>
<p>Cheers,</p>
<p>Jeremy</p>



<a name="294151351"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%22and%20similarly...%22/near/294151351" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html#294151351">(Aug 18 2022 at 19:03)</a>:</h4>
<p>From: John Wickerson &lt;<a href="mailto:jpw48@cam.ac.uk">jpw48@cam.ac.uk</a>&gt;<br>
Hello,</p>
<p>Is there a feature in Isabelle that corresponds to writing "and similarly" in an informal pen-and-paper proof? Specifically, here is a fragment of my proof script:</p>
<p>The two blocks here are identical, except one uses "HeadMap" where the other uses "TailMap". (HeadMap and TailMap are both record constructors.) Is there a neat way to remove the duplication here? </p>
<p>Thanks very much,<br>
John</p>



<a name="294151355"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%22and%20similarly...%22/near/294151355" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html#294151355">(Aug 18 2022 at 19:03)</a>:</h4>
<p>From: Steven Obua &lt;<a href="mailto:steven.obua@googlemail.com">steven.obua@googlemail.com</a>&gt;<br>
This question made my day :-)</p>
<p>Cheers,</p>
<p>Steven</p>



<a name="294151381"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%22and%20similarly...%22/near/294151381" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html#294151381">(Aug 18 2022 at 19:03)</a>:</h4>
<p>From: Ramana Kumar &lt;<a href="mailto:rk436@cam.ac.uk">rk436@cam.ac.uk</a>&gt;<br>
If you were writing tactics (i.e. using "apply-style" proofs), you could<br>
use function abstraction. For example:<br>
fun foo m = ...<br>
then in the proof:<br>
apply foo HeadMap<br>
next<br>
apply foo TailMap</p>
<p>But this is not very robust, and I don't know if there's anything<br>
equivalent in "proper" (structured) Isar.</p>



<a name="294151391"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%22and%20similarly...%22/near/294151391" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html#294151391">(Aug 18 2022 at 19:03)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@kit.edu">andreas.lochbihler@kit.edu</a>&gt;<br>
Hi John,</p>
<p>the proofs look to me as if they are completely independent of HeadMap and <br>
TailMap. Hence, Isar allows you to abstract over them and prove both goals in <br>
one go:</p>
<p>next<br>
   fix HeadOrTailMap<br>
   assume "opt1 fN \&lt;circ&gt;  HeadOrTailMap g1 = HeadOrTailMap g2 \&lt;circ&gt;  fA"<br>
      and "opt1 fN' \&lt;circ&gt;  HeadOrTailMap g2 = HeadOrTailMap g3 \&lt;circ&gt;  fA'"<br>
   hence "opt1 fN' \&lt;circ&gt;  opt1 fN \&lt;circ&gt;  HeadOrTailMap g1 =<br>
          HeadOrTailMap g3 \&lt;circ&gt;  fA' \&lt;circ&gt;  fA"<br>
     using o_assoc[of "opt1 fN'" "opt1 fN" "HeadOrTailMap g1"]<br>
     and o_assoc[of "opt1 fN'" "HeadOrTailMap g2" "fA"] by auto<br>
   hence "opt1 (fN' \&lt;circ&gt;  fN) \&lt;circ&gt;  HeadOrTailMap g1 =<br>
          HeadOrTailMap g3 \&lt;circ&gt;  (fA' \&lt;circ&gt;  fA)" (is ?thesis)<br>
     using opt1_o[of "fN'" "fN"] by auto<br>
   thus ?thesis and ?thesis by -<br>
qed</p>
<p>In order to solve both goals, you still must state the "show" or "thus" part <br>
twice, which is why I introduced the ?thesis abbreviation.</p>
<p>Problems with distinct types might cause this approach to fail. In that case, <br>
you can state the above proof as a separate lemma X and then use</p>
<p>qed(erule (2) X)+</p>
<p>instead.</p>
<p>Hope this helps,<br>
Andreas</p>



<a name="294152260"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%22and%20similarly...%22/near/294152260" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.22and.20similarly.2E.2E.2E.22.html#294152260">(Aug 18 2022 at 19:08)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Contemporary Isabelle does not really have anything that could be called <br>
"ML interface".  There is Isabelle/ML and Isabelle/Isar, and both are <br>
intertwined in a certain way: ML is used for the implementation of Isar, <br>
and Isar embeds ML into its formal context later on in the bootstrapping.</p>
<p>The primary "interface" to the user is the Isar source language (by <br>
definition).  It can refer to ML in better ways than ever before in the <br>
history of LCF-style theorem proving.  The current Prover IDE <br>
(Isabelle/jEdit) even provides hyperlinks for ML entities and inferred <br>
types.  The TTY loop is a bit more awkward here, and in fact close to <br>
being useless.</p>
<p>Taking Isabelle/Isar and Isabelle/ML together, it is possible to define <br>
your own proof methods, say to automate certain standard proof schemes. <br>
This transfers the old LCF idea of user-defined tactics into the world of <br>
Isabelle/Isar, but not much more.</p>
<p>What is conceptually missing is a systematic way to define proof patterns <br>
in a more structured language.  Ltac of Coq marks some success in that <br>
respect: it allows users to define tactics quickly without embarking on <br>
details about ML.</p>
<p>Nonetheless, instead of adding a "proof programming language" to Isar, I <br>
conceptually prefer to keep the language as is, and instead empower the <br>
Prover IDE around it.  With serious "proof refactoring", which is a <br>
non-trivial thing to provide, one could imaging certain "and similarly <br>
..." operations on the source.</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>