<html>
<head><meta charset="utf-8"><title>[isabelle] *_sumC generated by function package · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.2A_sumC.20generated.20by.20function.20package.html">[isabelle] *_sumC generated by function package</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294229704"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%2A_sumC%20generated%20by%20function%20package/near/294229704" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.2A_sumC.20generated.20by.20function.20package.html#294229704">(Aug 19 2022 at 09:37)</a>:</h4>
<p>From: Walther Neuper &lt;<a href="mailto:wneuper@ist.tugraz.at">wneuper@ist.tugraz.at</a>&gt;<br>
First steps with the function package were successful.</p>
<p>Now I don't know how to remove a proof obligation containing a function <br>
constant named 'function_id_sumC', where 'function_id' is the function <br>
under consideration:</p>
<p>2. ?primes last_p n primesa last_pa na.<br>
        (primes, last_p, n) = (primesa, last_pa, na) ?<br>
        (if primes ! (length primes - 1) &lt; n<br>
         then<br>
             if is_prime primes (last_p + 2)<br>
             then make_prims_sumC (primes @ [last_p + 2], last_p + 2, n)<br>
             else make_prims_sumC (primes, last_p + 2, n) else primes) =<br>
        (if primesa ! (length primesa - 1) &lt; na<br>
         then<br>
             if is_prime primesa (last_pa + 2)<br>
             then make_prims_sumC (primesa @ [last_pa + 2], last_pa + 2, <br>
na)<br>
             else make_prims_sumC (primesa, last_pa + 2, na)<br>
         else primesa)</p>
<p>Why did the function package generate this 'function_id_sumC' ?<br>
And how can I prove the proof obligation ?</p>
<p>Thanks for your help,<br>
Walther</p>
<p>PS: The function definition is in the attachment.<br>
<a href="/user_uploads/14278/k5L-jEtoyYca-tPLepLDI_bS/GCD_1_Make_Primes.thy">GCD_1_Make_Primes.thy</a></p>



<a name="294229713"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%2A_sumC%20generated%20by%20function%20package/near/294229713" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.2A_sumC.20generated.20by.20function.20package.html#294229713">(Aug 19 2022 at 09:37)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
This is what you get if you unfold function_id_def which is something <br>
you would never do in a normal proof.</p>
<p>Using function_id.{simps,induct,cases} should suffice.</p>
<p>-- Lars</p>



<a name="294229720"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%2A_sumC%20generated%20by%20function%20package/near/294229720" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.2A_sumC.20generated.20by.20function.20package.html#294229720">(Aug 19 2022 at 09:37)</a>:</h4>
<p>From: Johannes Hölzl &lt;<a href="mailto:hoelzl@in.tum.de">hoelzl@in.tum.de</a>&gt;<br>
How does your proof look like?</p>
<p>Do you use make_prims_def ? &lt;func&gt;_def should be only used internally,<br>
to unfold the function you should use make_prims.simps. The ...simps<br>
rules are the one you use in your function specification.</p>
<ul>
<li>Johannes</li>
</ul>



<a name="294229788"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%2A_sumC%20generated%20by%20function%20package/near/294229788" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.2A_sumC.20generated.20by.20function.20package.html#294229788">(Aug 19 2022 at 09:37)</a>:</h4>
<p>From: Alexander Krauss &lt;<a href="mailto:krauss@in.tum.de">krauss@in.tum.de</a>&gt;<br>
Here, unfortunately, the internal encoding shines through. In your <br>
concrete case, the currying was converted to tuples, in other cases, <br>
several mutual recursive functions may be converted to a function on a <br>
sum type (hence the suffix).</p>
<p>In your concrete case, the simplifier loops because the equation for <br>
is_prime loops in the presence of the usual splitting of ifs.<br>
Thus, "by pat_completeness (simp del: is_prime.simps)" does the trick here.</p>
<p>In general, you cannot prove much about the _sumC functions. The goals <br>
are usually provable when treating them as uninterpreted.</p>
<p>Alex</p>



<a name="294232859"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%2A_sumC%20generated%20by%20function%20package/near/294232859" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.2A_sumC.20generated.20by.20function.20package.html#294232859">(Aug 19 2022 at 10:02)</a>:</h4>
<p>From: Walther Neuper &lt;<a href="mailto:wneuper@ist.tugraz.at">wneuper@ist.tugraz.at</a>&gt;<br>
Sorry for not coming with my problem cut down to a minimal example --- <br>
my problem is the mass of tracing output from the simplifier.</p>
<p>In particular, I'd appreciate hints, how to identify the culprit from <br>
the output created by</p>
<p>declare [[simp_trace_depth_limit=9]]<br>
    declare [[simp_trace=true]]</p>
<p>when I activate the outcommented base case in the function below and <br>
thus make the function package loop:</p>
<p>(* dvd for univariate polynomials *)<br>
function dvd_up :: "unipoly ? unipoly ? bool" (infixl "dvd'_up" 70) where<br>
(* FIXME this makes the function package loop ......<br>
   "[d] dvd_up [i] =<br>
     (if (¦d¦ ? ¦i¦) &amp; (i mod d = 0) then True else False)"<br>
|*) "d dvd_up p =<br>
     (let<br>
       d = drop_lc0 d;<br>
       p = drop_lc0 p;<br>
       d000 = (List.replicate (List.length p - List.length d) 0) @ d;<br>
       quot = (lc p) div2 (lc d000);<br>
       rest = drop_lc0 (p minus_up (d000 div_ups quot))<br>
     in<br>
       if rest = [] then True<br>
       else<br>
         (if quot ? 0 &amp; List.length d ? List.length rest<br>
         then d dvd_up rest<br>
         else False))"<br>
by pat_completeness auto<br>
termination sorry</p>
<p>I'd appreciate help not by a solution (like the one below -- thank you, <br>
Alex!), but by hints how to find the culprit for looping myself.</p>
<p>Walther</p>
<p>PS: The auxiliary functions are in the appendix. Of course, they are all <br>
checked, see</p>
<p>[1]https://intra.ist.tugraz.at/hg/isa/raw-file/913483f0582b/src/Tools/isac/Knowledge/GCD_Poly_FP.thy<br>
<a href="/user_uploads/14278/QNWraJ4IplpgRtBkEBE4m5Qv/GCD_Poly_Test3.thy">GCD_Poly_Test3.thy</a></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>