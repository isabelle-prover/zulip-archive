<html>
<head><meta charset="utf-8"><title>[isabelle] [Hol-info]  definability of new types (HOL), o... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.5BHol-info.5D.20.20definability.20of.20new.20types.20.28HOL.29.2C.20o.2E.2E.2E.html">[isabelle] [Hol-info]  definability of new types (HOL), o...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294694629"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%5BHol-info%5D%20%20definability%20of%20new%20types%20%28HOL%29%2C%20o.../near/294694629" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.5BHol-info.5D.20.20definability.20of.20new.20types.20.28HOL.29.2C.20o.2E.2E.2E.html#294694629">(Aug 22 2022 at 14:20)</a>:</h4>
<p>From: Scott Owens &lt;<a href="mailto:S.A.Owens@kent.ac.uk">S.A.Owens@kent.ac.uk</a>&gt;<br>
I don’t want to put words in Rob’s mouth, as he’s far more knowledgable in this area than I am.</p>
<p>As far as I know, there is no mechanised conservativity proof for HOL’s recent generalised constant specification mechanism. (Here I’m in agreement that “conservativity” without any other modification should refer to the proof theoretic notion, and that’s what I mean here.) Rob certainly has a pencil-and-paper proof. Ramana, Rob, Magnus, and I (although mostly Ramana) proved the soundness of a HOL Light-style logical system, including the generalised constant specification mechanism that Rob refers to (and also designed) and type definition mechanism, with respect to a standard model of higher-order logic. I worked on a mechanised conservativity proof for the definition mechanism for a bit two years ago but got distracted and haven’t returned to it. I think it would be a suitable student project, but I’m not convinced that it’s really that interesting — I wouldn’t be bothered by a sound and consistent definition principle that allowed one to prove more things.</p>
<p>Scott</p>



<a name="294694743"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%5BHol-info%5D%20%20definability%20of%20new%20types%20%28HOL%29%2C%20o.../near/294694743" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.5BHol-info.5D.20.20definability.20of.20new.20types.20.28HOL.29.2C.20o.2E.2E.2E.html#294694743">(Aug 22 2022 at 14:21)</a>:</h4>
<p>From: Rob Arthan &lt;<a href="mailto:rda@lemma-one.com">rda@lemma-one.com</a>&gt;<br>
Scott,</p>
<p>Apologies if I claimed you had formalised more than you actually did.</p>
<p>Regards,</p>
<p>Rob.</p>



<a name="294694763"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%5BHol-info%5D%20%20definability%20of%20new%20types%20%28HOL%29%2C%20o.../near/294694763" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.5BHol-info.5D.20.20definability.20of.20new.20types.20.28HOL.29.2C.20o.2E.2E.2E.html#294694763">(Aug 22 2022 at 14:21)</a>:</h4>
<p>From: Rob Arthan &lt;<a href="mailto:rda@lemma-one.com">rda@lemma-one.com</a>&gt;<br>
Ondrej,</p>
<blockquote>
<p>On 22 Oct 2016, at 20:07, Ondřej Kunčar &lt;<a href="mailto:kuncar@in.tum.de">kuncar@in.tum.de</a>&gt; wrote:</p>
<p>Hi Rob,<br>
you are right that we mention only the plain definitions in HOL and not <br>
the implicit ones, when we compare the definitional mechanism of HOL and <br>
Isabelle/HOL. (If this what you meant; I assume you didn't mean to say <br>
that the overloading in Isabelle is 25 years out of date).</p>
</blockquote>
<p>No. I was just referring to new_specification.</p>
<blockquote>
<p>I clearly remember that one of the early versions of our paper contained <br>
the comment that the current HOL provers use the more powerful mechanism <br>
that you mentioned but I guess that it was lost during later editing. We <br>
will include it again into the journal version of the paper.</p>
<p>Thanks. I’m glad I raised my comment in time for you to do that.</p>
</blockquote>
<blockquote>
<p>I wanted to comment on your statement that A. Pitts proved that <br>
definitions in HOL are conservative. Such statements are always a little <br>
bit puzzling to me because when you say conservative (without any <br>
modifier), I always think that you mean the notion that "nothing new can <br>
be proved if you extend your theory (by a definition)". I think a lot of <br>
people (including me) think that this is THE conservativity. There is <br>
also a notion of the model-theoretic conservativity that requires that <br>
every model of the old theory can be expanded to a model of the new <br>
theory. This is a stronger notion and implies the proof conservativity.<br>
</p>
</blockquote>
<p>It’s the other way round. Soundness implies that proof-theoretic<br>
conservativity implies model-theoretic conservativity. In the absence of<br>
completeness, an x with some property phi(x) might exist in every model,<br>
but you might not be able to prove that. Taking phi(c) as the defining<br>
property of a new constant c would then be conservative model-theoretically<br>
but not proof-theoretically.</p>
<blockquote>
<p>As far as I know, A. Pitts considers only a subset of all possible <br>
models (so called standard models) in his proof and he only proves that <br>
these models can be extended from the old to the new theory. But as far <br>
as I know this does not imply the proof conservativity.</p>
</blockquote>
<p>Andy Pitts gives a proof of the model-theoretic conservativity of new_specification<br>
with respect to standard models. You are quite right that in the absence of completeness<br>
this is a weaker result than proof-theoretic completeness.  I don’t think it’s difficult<br>
to extend the result to general models (Henkin models) and so get proof-theoretic conservativity.<br>
I suspect Andy just didn’t want to introduce a lot of extra technical detail.</p>
<p>I proved proof-theoretic conservativity for the new mechanism gen_new_specification.<br>
As new_specification is derivable using gen_new_specification, this gives you<br>
proof-theoretic conservativity for both. (Thanks to Scott for correcting my statement<br>
about what has been formalised so far in HOL4). </p>
<p>Regards,</p>
<p>Rob.</p>



<a name="294694778"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%5BHol-info%5D%20%20definability%20of%20new%20types%20%28HOL%29%2C%20o.../near/294694778" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.5BHol-info.5D.20.20definability.20of.20new.20types.20.28HOL.29.2C.20o.2E.2E.2E.html#294694778">(Aug 22 2022 at 14:21)</a>:</h4>
<p>From: Andrei Popescu &lt;<a href="mailto:A.Popescu@mdx.ac.uk">A.Popescu@mdx.ac.uk</a>&gt;<br>
Hi Rob,</p>
<blockquote>
<blockquote>
<p>It’s the other way round. Soundness implies that proof-theoretic conservativity implies model-theoretic conservativity.</p>
</blockquote>
</blockquote>
<p>Ondra's statement was the correct one.</p>
<p>Let's spell this out, to make sure we are speaking of the same thing. Say you have a signature Sigma' extending a signature Sigma (by adding some constant and type constructor symbols). Then every Sigma'-model M' produces a Sigma-Model, Forget(M'), by forgetting the interpretation of the symbols in Sigma' minus Sigma. Moreover,</p>
<p>(*) For every closed Sigma-formula  phi, we have that M |= phi holds iff Forget(M) |= phi holds.</p>
<p>Let T be a Sigma-theory (i.e., a set of closed Sigma-formulas), and let T' be a Sigma'-theory that includes T.<br>
T' is called:</p>
<p>(A) a model-theoretic conservative extension of T if, for all Sigma-models M of T, there exists a Sigma'-model M' of T' such that Forget(M') = M.</p>
<p>(B) a proof-theoretic conservative extension of T if, for all closed Sigma-formulas phi, T' |- phi implies T |- phi.</p>
<p>Assuming soundness <em>and completeness</em>, we have (A) implies (B). Proof: We can reason about semantic deduction |= instead of syntactic deduction. Assume T'|= phi .To prove T|= phi, let M |= T; by (A), we find M' |= T' such that Forget(M') = M. With T'|= phi, we obtain Forget(M')|= phi. From this and (*), we obtain M' |= phi, as desired.</p>
<p>In general, (B) does not imply (A), and I don't know of interesting sufficient conditions for when it does.</p>
<p>Best,<br>
  Andrei</p>
<hr>
<p>From: Rob Arthan &lt;<a href="mailto:rda@lemma-one.com">rda@lemma-one.com</a>&gt;<br>
Sent: 23 October 2016 12:23<br>
To: Ondřej Kunčar<br>
Cc: Ken Kubota; Prof. Andrew M. Pitts; Prof. Thomas F. Melham; <a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>; Roger Bishop Jones; Prof. Peter B. Andrews; Andrei Popescu; HOL-info list<br>
Subject: Re: [Hol-info] [isabelle] definability of new types (HOL), overloaded constant definitions for axiomatic type classes (Isabelle) - Re: Who is ProofPower "by" (and STT)?</p>
<p>Ondrej,</p>
<blockquote>
<p>On 22 Oct 2016, at 20:07, Ondřej Kunčar &lt;<a href="mailto:kuncar@in.tum.de">kuncar@in.tum.de</a>&gt; wrote:</p>
<p>Hi Rob,<br>
you are right that we mention only the plain definitions in HOL and not<br>
the implicit ones, when we compare the definitional mechanism of HOL and<br>
Isabelle/HOL. (If this what you meant; I assume you didn't mean to say<br>
that the overloading in Isabelle is 25 years out of date).</p>
</blockquote>
<p>No. I was just referring to new_specification.</p>
<blockquote>
<p>I clearly remember that one of the early versions of our paper contained<br>
the comment that the current HOL provers use the more powerful mechanism<br>
that you mentioned but I guess that it was lost during later editing. We<br>
will include it again into the journal version of the paper.</p>
<p>Thanks. I’m glad I raised my comment in time for you to do that.</p>
</blockquote>
<blockquote>
<p>I wanted to comment on your statement that A. Pitts proved that<br>
definitions in HOL are conservative. Such statements are always a little<br>
bit puzzling to me because when you say conservative (without any<br>
modifier), I always think that you mean the notion that "nothing new can<br>
be proved if you extend your theory (by a definition)". I think a lot of<br>
people (including me) think that this is THE conservativity. There is<br>
also a notion of the model-theoretic conservativity that requires that<br>
every model of the old theory can be expanded to a model of the new<br>
theory. This is a stronger notion and implies the proof conservativity.<br>
</p>
</blockquote>
<p>It’s the other way round. Soundness implies that proof-theoretic<br>
conservativity implies model-theoretic conservativity. In the absence of<br>
completeness, an x with some property phi(x) might exist in every model,<br>
but you might not be able to prove that. Taking phi(c) as the defining<br>
property of a new constant c would then be conservative model-theoretically<br>
but not proof-theoretically.</p>
<blockquote>
<p>As far as I know, A. Pitts considers only a subset of all possible<br>
models (so called standard models) in his proof and he only proves that<br>
these models can be extended from the old to the new theory. But as far<br>
as I know this does not imply the proof conservativity.</p>
</blockquote>
<p>Andy Pitts gives a proof of the model-theoretic conservativity of new_specification<br>
with respect to standard models. You are quite right that in the absence of completeness<br>
this is a weaker result than proof-theoretic completeness.  I don’t think it’s difficult<br>
to extend the result to general models (Henkin models) and so get proof-theoretic conservativity.<br>
I suspect Andy just didn’t want to introduce a lot of extra technical detail.</p>
<p>I proved proof-theoretic conservativity for the new mechanism gen_new_specification.<br>
As new_specification is derivable using gen_new_specification, this gives you<br>
proof-theoretic conservativity for both. (Thanks to Scott for correcting my statement<br>
about what has been formalised so far in HOL4).</p>
<p>Regards,</p>
<p>Rob.</p>



<a name="294694814"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20%5BHol-info%5D%20%20definability%20of%20new%20types%20%28HOL%29%2C%20o.../near/294694814" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20.5BHol-info.5D.20.20definability.20of.20new.20types.20.28HOL.29.2C.20o.2E.2E.2E.html#294694814">(Aug 22 2022 at 14:21)</a>:</h4>
<p>From: Andrei Popescu &lt;<a href="mailto:A.Popescu@mdx.ac.uk">A.Popescu@mdx.ac.uk</a>&gt;<br>
Hi Rob,</p>
<blockquote>
<blockquote>
<p>As discussed off-list with you and Ondrej, the case covered by new_specification or gen_new_specification is one where (B) implies (A).</p>
</blockquote>
</blockquote>
<p>Indeed. Many thanks (to you and Roger) for the clarifications.</p>
<blockquote>
<blockquote>
<p>Of course, none of the above works for an extension that introduces new types.<br>
Your paper is a very nice contribution to the problem of defining new types.</p>
</blockquote>
</blockquote>
<p>Thanks. Also, thanks for bringing up new_specification and gen_new_specification. After having a closer look at them, I see that the definitional dependency analysis we introduce in the paper can be easily extended to cope with these mechanisms -- which means that they don't raise additional difficulties in the delicate balance between constant overloading and typedef, and therefore are in principle suitable for Isabelle/HOL. We'll add a discussion of this in the journal version (and point you to it when it's available).</p>
<p>Best,</p>
<p>Andrei</p>
<hr>
<p>From: Rob Arthan &lt;<a href="mailto:rda@lemma-one.com">rda@lemma-one.com</a>&gt;<br>
Sent: 23 October 2016 22:56<br>
To: Andrei Popescu<br>
Cc: Ondřej Kunčar; Prof. Andrew M. Pitts; Prof. Thomas F. Melham; <a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>; Roger Bishop Jones; Prof. Peter B. Andrews; HOL-info list<br>
Subject: Re: [Hol-info] [isabelle] definability of new types (HOL), overloaded constant definitions for axiomatic type classes (Isabelle) - Re: Who is ProofPower "by" (and STT)?</p>
<p>Andrei,</p>
<blockquote>
<p>On 23 Oct 2016, at 14:31, Andrei Popescu &lt;<a href="mailto:A.Popescu@mdx.ac.uk">A.Popescu@mdx.ac.uk</a>&gt; wrote:</p>
<p>Hi Rob,</p>
<blockquote>
<blockquote>
<p>It's the other way round. Soundness implies that proof-theoretic conservativity implies model-theoretic conservativity.</p>
</blockquote>
</blockquote>
<p>Ondra's statement was the correct one.</p>
<p>Let's spell this out, to make sure we are speaking of the same thing. Say you have a signature Sigma' extending a signature Sigma (by adding some constant and type constructor symbols). Then every Sigma'-model M' produces a Sigma-Model, Forget(M'), by forgetting the interpretation of the symbols in Sigma' minus Sigma. Moreover,</p>
<p>(*) For every closed Sigma-formula  phi, we have that M |= phi holds iff Forget(M) |= phi holds.</p>
<p>Let T be a Sigma-theory (i.e., a set of closed Sigma-formulas), and let T' be a Sigma'-theory that includes T.<br>
T' is called:</p>
<p>(A) a model-theoretic conservative extension of T if, for all Sigma-models M of T, there exists a Sigma'-model M' of T' such that Forget(M') = M.</p>
<p>(B) a proof-theoretic conservative extension of T if, for all closed Sigma-formulas phi, T' |- phi implies T |- phi.</p>
<p>Assuming soundness <em>and completeness</em>, we have (A) implies (B). Proof: We can reason about semantic deduction |= instead of syntactic deduction. Assume T'|= phi .To prove T|= phi, let M |= T; by (A), we find M' |= T' such that Forget(M') = M. With T'|= phi, we obtain Forget(M')|= phi. From this and (*), we obtain M' |= phi, as desired.</p>
<p>In general, (B) does not imply (A), and I don't know of interesting sufficient conditions for when it does.</p>
</blockquote>
<p>As discussed off-list with you and Ondrej, the case covered by<br>
new_specification or gen_new_specification is one where (B) implies (A).<br>
The interesting sufficient conditions that apply are; (1) T' is a finitely axiomatizable<br>
expansion of T introducing finitely many new constants and no new types<br>
and (2) the logical language admits an existential quantifier<br>
with the usual proof rules and semantics. For then if T' satisfies (B), let<br>
phi(x_1, ... x_n) denote the result of taking the conjunction of the formulas<br>
that axiomatize T' and replacing the new constants c_1, ..., c_n<br>
by variables x_1, ..., x_n. Then T' proves psi ::= exists x_1, ... , x_n. phi(x_1, ..., x_n).<br>
By (B), T proves psi, but then, by soundness, psi holds in every model of T, which implies (A).</p>
<p>Of course, none of the above works for an extension that introduces new types.<br>
Your paper is a very nice contribution to the problem of defining new types.</p>
<p>Regards,</p>
<p>Rob.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>