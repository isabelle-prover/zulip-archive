<html>
<head><meta charset="utf-8"><title>[isabelle] 2013-1-RC1: how to put generated Scala into a ... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html">[isabelle] 2013-1-RC1: how to put generated Scala into a ...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294250813"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294250813" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294250813">(Aug 19 2022 at 12:04)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Cornelius,</p>
<p>instead of Code_Target.add_include, use Code_Target.set_printings<br>
(Code_Symbol.Module …).</p>
<p>Hope this helps,<br>
    Florian<br>
<a href="/user_uploads/14278/bmpPLQvq4gGY6s5ijo0Qki1k/signature.asc">signature.asc</a></p>



<a name="294250834"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294250834" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294250834">(Aug 19 2022 at 12:04)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
It's correct, although the introducing »No« confuses me.</p>
<p>Florian<br>
<a href="/user_uploads/14278/1Eqluluid3V8yuX7F_kqhk6o/signature.asc">signature.asc</a></p>



<a name="294251431"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294251431" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294251431">(Aug 19 2022 at 12:08)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
Hello Florian,</p>
<p>Could you provide a complete example for me please? And, is it<br>
possible to add some sort of Isabelle version string (such as<br>
"Isabelle2013-1-RC3") to the header?</p>
<p>Thank you very much<br>
  Cornelius</p>



<a name="294251554"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294251554" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294251554">(Aug 19 2022 at 12:08)</a>:</h4>
<p>From: Christoph LANGE &lt;<a href="mailto:math.semantic.web@gmail.com">math.semantic.web@gmail.com</a>&gt;<br>
Dear code generation wizards,</p>
<p>to make generated Scala code more maintainable I would like to have it<br>
in a named package.  (I'm actually making the code even more<br>
maintainable, albeit somewhat fragile, by splitting it into<br>
objects/classes using<br>
<a href="https://github.com/formare/auctions/blob/master/isabelle/Auction/code/split-scala-modules.pl">https://github.com/formare/auctions/blob/master/isabelle/Auction/code/split-scala-modules.pl</a>,<br>
and this script relies on the package name.)</p>
<p>So far I have been using the following setup for this:</p>
<blockquote>
<p>code_include Scala ""<br>
{*package Foo<br>
*}<br>
export_code def1 ... defN in Scala<br>
file "code/Foo.scala"</p>
</blockquote>
<p>Isabelle 2013-1-RC1 now warns me:</p>
<blockquote>
<p>Legacy feature! prefer "code_printing" for custom serialisations</p>
</blockquote>
<p>However code_printing works in the context of symbols IIUC; it can't<br>
just output something at the beginning of the output file.</p>
<p>Should I ignore this warning, or is there a more modern way to achieve<br>
what I want?</p>
<p>Cheers, and thanks in advance,</p>
<p>Christoph</p>



<a name="294251908"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294251908" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294251908">(Aug 19 2022 at 12:11)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Cornelius,</p>
<p>ML {*<br>
fun scala_header thy =<br>
  let<br>
    val date = Date.toString (Date.fromTimeLocal (<a href="http://Time.now">Time.now</a> ()));<br>
    val package = "package Foo";<br>
    val export_file = Context.theory_name thy ^ ".thy";<br>
    val header = package ^ "\n" ^ "// Generated by Isabelle (" ^<br>
Distribution.version ^ ") on " ^ date ^ "\n" ^ "// src: " ^ export_file<br>
^ "\n";<br>
  in<br>
    Code_Target.set_printings (Code_Symbol.Module ("", [("Scala", SOME<br>
(header, []))])) thy<br>
  end<br>
*}<br>
setup {* scala_header *}</p>
<p>export_code distinct in Scala</p>
<p>;-) Florian<br>
<a href="/user_uploads/14278/Yxc3MROi72VkQcPVgw-DLTw9/signature.asc">signature.asc</a></p>



<a name="294252238"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294252238" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294252238">(Aug 19 2022 at 12:13)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
Hi Florian,</p>
<p>Works like charm. Thank you!</p>
<p>Cornelius</p>



<a name="294252475"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294252475" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294252475">(Aug 19 2022 at 12:14)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Hi Christioph,</p>
<p>The new way of writing this is with "code_printing code_module", e.g.:</p>
<p>code_printing code_module "" =&gt; (Scala) {<em>package Foo</em>}</p>
<p>Best,<br>
Andreas</p>



<a name="294253075"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294253075" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294253075">(Aug 19 2022 at 12:18)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
Hi Andreas,</p>
<p>is there a way to translate the following into the new way?<br>
ML {*<br>
val scala_header =<br>
  let<br>
    val package = "package Foo";<br>
    val date = Date.toString (Date.fromTimeLocal (<a href="http://Time.now">Time.now</a> ()))<br>
    val export_file = Context.theory_name @{theory} ^ ".thy"<br>
    val header = package ^ "\n" ^ "// Generated by Isabelle on " ^<br>
date ^ "\n" ^ "// src: " ^ export_file ^ "\n"<br>
  in<br>
    Code_Target.add_include "Scala" ("", SOME (header, []))<br>
  end<br>
*}<br>
 setup {* scala_header *}</p>
<p>Cheers<br>
  Cornelius</p>



<a name="294253145"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202013-1-RC1%3A%20how%20to%20put%20generated%20Scala%20into%20a%20.../near/294253145" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202013-1-RC1.3A.20how.20to.20put.20generated.20Scala.20into.20a.20.2E.2E.2E.html#294253145">(Aug 19 2022 at 12:19)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Hi Cornelius,</p>
<p>No, code_printing code_module can deal only with fixed strings. It is just a new front-end <br>
syntax for the same underlying machinery of code_include.</p>
<p>@Florian: Please correct me if I am wrong.</p>
<p>Best,<br>
Andreas</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>