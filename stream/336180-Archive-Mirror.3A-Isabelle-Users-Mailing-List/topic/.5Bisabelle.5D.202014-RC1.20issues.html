<html>
<head><meta charset="utf-8"><title>[isabelle] 2014-RC1 issues · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html">[isabelle] 2014-RC1 issues</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294285440"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285440" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285440">(Aug 19 2022 at 15:08)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Here is a list of issues that I encountered with RC1:</p>
<ul>
<li>
<p>If a lemma is not properly closed, ie. the done or qed is missing,<br>
  the next command only issues a warning and recovers the state. As<br>
  warnings are omnipresent in Isabelle, it is very hard to spot such<br>
  places when<br>
  developing a theory. This leads to garbage accumulating in theory<br>
  files and probably only being discovered upon batch-build.</p>
<p>This feature may also cause surprises on bigger isar proofs, where it<br>
is (in particuar as code-fold does not work) too easy to forget a qed.</p>
</li>
<li>
<p>In the output buffer, the standard Ctrl-Ins for "copy" does not work,<br>
while it works in the main text area. Can these shortcuts be configured<br>
separately? Or do I have to live with Ctrl-C?</p>
</li>
<li>
<p>Odd behaviour when focus lays in output buffer or any other panel:<br>
Cursor movement and entering newlines still goes to the text area, but<br>
other keyboard input goes to the panel (and may or may not be<br>
interpreted there). The only indication for this is a slightly changed<br>
color of the cursor in the main window. </p>
</li>
<li>
<p>No indentation feature. It is hard to keep track of big proofs and<br>
indent them correctly, in particular as code-folding does not work<br>
reliably.</p>
<p>In PG, there was a nice auto-indentation feature that worked reliable<br>
for (almost) all cases.</p>
</li>
<li>
<p>When developing proofs: <br>
  The output window displays the current position<br>
  by default ... if you are typing a new command, it usually displays<br>
  "Syntax error". <br>
  However, while typing your next method/isar step, you usually want to<br>
  see the current goal state, not a the completely useless information<br>
  "syntax error".</p>
<p>In PG, the output was not updated before you explicitely processed<br>
the command. Maybe, this can be simulated by turning auto-update off<br>
and bind update to a convenient shortcut.</p>
</li>
</ul>



<a name="294285452"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285452" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285452">(Aug 19 2022 at 15:08)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
And a completion-related one: In a string context in a ML-context,<br>
symbol completion is enabled. So, changing</p>
<p>setup {*<br>
  ML_Antiquotation.inline @{binding fundef} (Scan.succeed "raise Undefined")<br>
*}</p>
<p>to</p>
<p>setup {*<br>
  ML_Antiquotation.inline @{binding fundef} (Scan.succeed "fn _ =&gt; raise<br>
Undefined")<br>
*}</p>
<p>yields</p>
<p>setup {*<br>
  ML_Antiquotation.inline @{binding fundef} (Scan.succeed "fn _ ⇒ raise<br>
Undefined")<br>
*}</p>
<p>instead with the default (immediate completion) settings.</p>



<a name="294285468"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285468" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285468">(Aug 19 2022 at 15:08)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
Hi,</p>
<blockquote>
<p>Here is a list of issues that I encountered with RC1:<br>
Another issue I encountered with RC1 today (I didn't encounter the issue<br>
with RC0, but my usage intensity might have been to low): I modified<br>
some file (in a ML block), did some jumping around (through other<br>
buffers), came back to the changed line and didn't see the change<br>
anymore. I redid the change, which lead to an error message which made<br>
it clear that the system saw something else than I was seeing in the<br>
buffer. I reloaded the buffer and the error went away.</p>
</blockquote>
<p>I haven't found a way to reproduce it yet.</p>
<p>BTW: Does someone know a software which is able to record the last n<br>
minutes of a window (basically a screen recorder with a ring buffer)? I<br>
often thought this would be helpful to describe these kind of issues.</p>
<p>-- Lars</p>



<a name="294285487"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285487" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285487">(Aug 19 2022 at 15:08)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
And yet another issue: A method executing</p>
<p>error ""</p>
<p>produces an error marker in the right sidebar. However, the associated<br>
apply command does not get underlined in red and the error marker in the<br>
left sidebar is missing.</p>
<p>Reproduce with:</p>
<p>theory Scratch imports Pure begin</p>
<p>lemma "PROP P"<br>
  apply (tactic {* error "" *})<br>
  oops</p>
<p>end</p>



<a name="294285514"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285514" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285514">(Aug 19 2022 at 15:08)</a>:</h4>
<p>From: Ondřej Kunčar &lt;<a href="mailto:kuncar@in.tum.de">kuncar@in.tum.de</a>&gt;<br>
And you can't see the error in the Output panel either.</p>



<a name="294285525"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285525" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285525">(Aug 19 2022 at 15:08)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
Indeed. All of this is different to</p>
<p>ML {* error "" *}</p>
<p>which at least produces an empty red line as output (and thus gets the<br>
other markers, too).</p>
<p>BTW: I always use(d) "error """ the way one uses "undefined" in Haskell.<br>
The following construct (which Makarius showed me at ITP) is a bit nicer<br>
(you get a trace and can jump to the location of the error), but<br>
requires a few lines of initial setup:</p>
<p>signature UTIL = sig<br>
  exception Undefined<br>
  val setup : theory -&gt; theory<br>
end</p>
<p>structure Util : UTIL = struct</p>
<p>exception Undefined</p>
<p>val setup =<br>
  ML_Antiquotation.inline @{binding undef} (Scan.succeed "raise<br>
Util.Undefined")<br>
  #&gt; ML_Antiquotation.inline @{binding fundef} (Scan.succeed "fn _ =&gt;<br>
raise Util.Undefined")</p>
<p>end</p>
<p>BTW2: I assume there is no easy way to make Isabelle/ML accept ⊥ instead<br>
of @{undef}?</p>
<p>-- Lars</p>



<a name="294285644"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285644" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285644">(Aug 19 2022 at 15:09)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
An another feature request:</p>
<p>The sidekick panel is supposed to show an overview of the theory. <br>
At the top-level of the hierarchy, you can see the first lines of lemma,<br>
definition, etc commands, which may or may not contain useful<br>
information. In the worst case, you just see "lemma" or "definition".</p>
<p>It is even worse if you look under a lemma command. This looks like:<br>
+lemma<br>
|- using<br>
|- case<br>
|- proof<br>
|- apply <br>
|- apply <br>
|- done<br>
|- qed</p>
<p>i.e., almost completely useless information. </p>
<p>The information that might be useful, i.e. the name and the proposition<br>
of the lemma, is displayed nowhere!</p>
<p>Attached is a screenshot from a current development of mine, that<br>
illustrates the problem.<br>
<a href="/user_uploads/14278/MkSmjd8i8fD5Leu31AKxw3MM/shot.png">shot.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/MkSmjd8i8fD5Leu31AKxw3MM/shot.png" title="shot.png"><img src="/user_uploads/14278/MkSmjd8i8fD5Leu31AKxw3MM/shot.png"></a></div>



<a name="294285706"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285706" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285706">(Aug 19 2022 at 15:09)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Wed, 30 Jul 2014, Peter Lammich wrote:</p>
<blockquote>
<ul>
<li>If a lemma is not properly closed, ie. the done or qed is missing, the<br>
  next command only issues a warning and recovers the state. As warnings<br>
  are omnipresent in Isabelle, it is very hard to spot such places when<br>
  developing a theory. This leads to garbage accumulating in theory<br>
  files and probably only being discovered upon batch-build.</li>
</ul>
</blockquote>
<p>That is actually a contribution in Isabelle2014 to make error recovery a <br>
bit more useful, without doing the real job of (sub)structural checking <br>
yet.</p>
<p>What do you mean by "warnings are omnipresent in Isabelle"?  The prover <br>
IDE shows them more prominently than in the TTY past, but that could be <br>
taken as motivation to remove the reasons for warnings.  Not all such <br>
spots are bad, but an avarage theory normally has only few warnings.</p>
<blockquote>
<ul>
<li>In the output buffer, the standard Ctrl-Ins for "copy" does not work,<br>
while it works in the main text area. Can these shortcuts be configured<br>
separately? Or do I have to live with Ctrl-C?</li>
</ul>
</blockquote>
<p>I did not know about Ctrl-Ins yet.  What you observe here is merely the <br>
known and documented difference of the main jEdit text area with its <br>
actions and shortscuts vs. regular Java Swing GUI components.  The latter <br>
only have basic Ctrl-C, and it actually works routinely, which is a big <br>
step forwards to the historic perspective.</p>
<p>If Ctrl-C does <em>not</em> work somewhere, it is actually an issue that needs to <br>
be addressed.</p>
<blockquote>
<ul>
<li>Odd behaviour when focus lays in output buffer or any other panel:<br>
  Cursor movement and entering newlines still goes to the text area, but<br>
  other keyboard input goes to the panel (and may or may not be<br>
  interpreted there). The only indication for this is a slightly changed<br>
  color of the cursor in the main window.</li>
</ul>
</blockquote>
<p>This belongs to normal jEdit policies.  In Isabelle/jEdit for the coming <br>
release I added the faint cursor to emphasize that -- normally it would be <br>
just absent.</p>
<blockquote>
<ul>
<li>No indentation feature. It is hard to keep track of big proofs and<br>
  indent them correctly, in particular as code-folding does not work<br>
  reliably.</li>
</ul>
<p>In PG, there was a nice auto-indentation feature that worked reliable <br>
for (almost) all cases.</p>
</blockquote>
<p>That is indeed a notable omission.  In 1998, I added indentation to PG 2.x <br>
quite early, and earned the name "The indentation Man" in the inner circle <br>
of PG developers.  In Isabelle/jEdit the lack of it has become a running <br>
gag over the years: it needs to come one day, but so far I just wanted to <br>
evade the wrath of users when the Prover IDE suddenly makes <em>standard</em> <br>
indentation of Isar text by default.</p>
<blockquote>
<ul>
<li>When developing proofs:<br>
 The output window displays the current position<br>
 by default ... if you are typing a new command, it usually displays<br>
 "Syntax error".<br>
 However, while typing your next method/isar step, you usually want to<br>
 see the current goal state, not a the completely useless information<br>
 "syntax error".</li>
</ul>
<p>In PG, the output was not updated before you explicitely processed<br>
 the command. Maybe, this can be simulated by turning auto-update off<br>
 and bind update to a convenient shortcut.</p>
</blockquote>
<p>Nothing new about this observation.  It belongs to general mismatch of <br>
TTY/PG mechanics wrt. the document-oriented model.  Note that you can also <br>
use the Query panel to print proof states on demand and only on demand.</p>
<p>Makarius</p>



<a name="294285723"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285723" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285723">(Aug 19 2022 at 15:09)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Why is that an issue?  The language context switches symbols on for ML <br>
strings and comments, since both might use them.</p>
<p>The examples shown here are about embedded ML code, which is not really <br>
the normal use of strings.</p>
<p>In general, the "guess what I mean" functionality of the system will <br>
occasionally guess wrong.  It is sometimes hard to get the defaults right, <br>
but so far I don't see an indication to change them in this case.</p>
<p>Makarius</p>



<a name="294285736"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285736" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285736">(Aug 19 2022 at 15:09)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is an interesting boundary case, but it is the same in <br>
Isabelle2013-2 an no regression.  It remains to be seen if it is an actual <br>
problem.</p>
<p>The invocation of error "" is the same as raise ERROR "", which makes the <br>
ML code fail and the Isar toplevel wrapper print the exeptions.  The error <br>
message is empty, which means it is vacous according to ancient Isabelle <br>
traditions, which hold until today.  The effect was not visible in the old <br>
TTY times, because that adds a prefix of "*** " by default. Note that <br>
there are other situations where ML failure might lead to no error output, <br>
notably involving Exn.Interrupt.</p>
<p>Such non-printing exceptions should not show up under normal circumstances <br>
-- they indicate a programming mistake somewhere.</p>
<p>The "implementation" manual explains the difference of user ERROR vs. <br>
system Fail exceptions explicitly. The error function / ERROR exception <br>
always had the implicit assumption that messages are non-empty, as a <br>
proper human-readable message.</p>
<p>For your application of a meaningless ad-hoc failure, you could raise<br>
Fail "" or even raise Match (which are both printed as usual).  The <br>
"undefined" function also does the latter.</p>
<p>Makarius</p>



<a name="294285781"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285781" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285781">(Aug 19 2022 at 15:10)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
We need to keep an eye (or more) on this.  I've seen myself a situation <br>
some weeks ago were some ML_file was somehow out of sync.</p>
<p>Makarius</p>



<a name="294285811"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285811" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285811">(Aug 19 2022 at 15:10)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Wed, 30 Jul 2014, Lars Noschinski wrote:</p>
<blockquote>
<p>BTW: I always use(d) "error """ the way one uses "undefined" in Haskell.<br>
The following construct (which Makarius showed me at ITP) is a bit nicer<br>
(you get a trace and can jump to the location of the error), but<br>
requires a few lines of initial setup:</p>
<p>signature UTIL = sig<br>
 exception Undefined<br>
 val setup : theory -&gt; theory<br>
end</p>
<p>structure Util : UTIL = struct</p>
<p>exception Undefined</p>
<p>val setup =<br>
 ML_Antiquotation.inline @{binding undef} (Scan.succeed "raise<br>
Util.Undefined")<br>
 #&gt; ML_Antiquotation.inline @{binding fundef} (Scan.succeed "fn _ =&gt;<br>
raise Util.Undefined")</p>
<p>end</p>
</blockquote>
<p>After that ITP session, I recalled the more basic "raise Match" idiom, but <br>
could not tell you about it.  That is sufficiently short to be used <br>
literally.</p>
<blockquote>
<p>I assume there is no easy way to make Isabelle/ML accept ⊥ instead of <br>
@{undef}?</p>
</blockquote>
<p>That is the old questions how much of actual Standard ML we have in <br>
Isabelle/ML.  There is still the claim that there is no fundamental <br>
difference, apart from antiquotations, although many delicate details have <br>
accumulated over the years.</p>
<p>In the past, people have occasionally proposed actual syntactic <br>
variations, like an actual arrow for fun/fn/case =&gt; like in Isabelle/HOL <br>
notation, but I always tried to keep the divergence from actual SML in <br>
check.</p>
<p>Technically, the token language could be "embraced and extended" further, <br>
but I think fringe languages like ML should stay as faithful to their own <br>
standards as possible.  BTW, with symbols inside ML, the question of <br>
language context will show up again: You would probably expect completion <br>
for \&lt;bottom&gt;, but not for =&gt;.</p>
<p>Makarius</p>



<a name="294285833"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285833" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285833">(Aug 19 2022 at 15:10)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Wed, 30 Jul 2014, Peter Lammich wrote:</p>
<blockquote>
<p>The sidekick panel is supposed to show an overview of the theory.<br>
At the top-level of the hierarchy, you can see the first lines of lemma,<br>
definition, etc commands, which may or may not contain useful<br>
information. In the worst case, you just see "lemma" or "definition".</p>
<p>It is even worse if you look under a lemma command. This looks like:<br>
+lemma<br>
|- using<br>
|- case<br>
|- proof<br>
|- apply<br>
|- apply<br>
|- done<br>
|- qed</p>
<p>i.e., almost completely useless information.</p>
</blockquote>
<p>The enumeration of the commands as "sections" is indeed a bit pointless.</p>
<p>The main use of Sidekick / isabelle is for document structure, with <br>
chapter / section / subsection outline etc.  When writing Isabelle <br>
documentation, papers, slides etc. I use that routinely to keep an <br>
overview.</p>
<p>More logical structure could be done in many ways, I have this on my list <br>
for several years already to be revisited eventually.</p>
<blockquote>
<p>The information that might be useful, i.e. the name and the proposition <br>
of the lemma, is displayed nowhere!</p>
</blockquote>
<p>Depends how you write your source text.  jEdit folds and Sidekick trees <br>
assume that the first line provides the main information.  This is also <br>
the reason why I write definitions and theorem statements these days a bit <br>
differently than in the past, when Proof General was still there.</p>
<p>Of course, one could replace SideKick by a quite different Preview panel <br>
for the proof document with its relevant structural information, even <br>
proof state output according to certain policies of incremental editing of <br>
sub-proofs, not scripts. That is just speculative at the moment -- too <br>
many marginal technical problems still in the way of bigger steps <br>
forwards.</p>
<p>Makarius</p>



<a name="294285991"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294285991" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294285991">(Aug 19 2022 at 15:11)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
On 30.07.2014 21:53, Makarius wrote:</p>
<blockquote>
<p>What do you mean by "warnings are omnipresent in Isabelle"?  The<br>
prover IDE shows them more prominently than in the TTY past, but that<br>
could be taken as motivation to remove the reasons for warnings.  Not<br>
all such spots are bad, but an avarage theory normally has only few<br>
warnings.<br>
Often, the "Ignoring duplicate rewrite rule/intro/..." warnings get<br>
annoying, as they are not always meaningful (for example, overwriting<br>
intro by intro! triggers a warning). In particular, in certain<br>
locale-heavy theories (HOL-Algebra comes to mind), interpreting (or<br>
opening) a locale gives you a number of these warning and there is not<br>
always a (nice) way around them (I'd even claim that these warnings are<br>
mostly vacuous for theory interpretations, but this is another topic).</p>
</blockquote>
<p>I had some theories where these warnings were common enough to obscure<br>
the real ones.</p>
<blockquote>
<p>Nothing new about this observation.  It belongs to general mismatch of<br>
TTY/PG mechanics wrt. the document-oriented model.  Note that you can<br>
also use the Query panel to print proof states on demand and only on<br>
demand.<br>
On the topic of the query panel: Some time in the future, I'd like to<br>
see the equivalent of the jEdit action bar (or, to phrase it<br>
differently, a "general" query panel)  for Isabelle, where I enter an<br>
arbitrary (diagnostic) command and get the output in the panel.</p>
</blockquote>
<p>BTW: I just discovered that symbol completion works now in the<br>
text-boxes in the panels, very nice!</p>
<p>-- Lars</p>



<a name="294286005"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294286005" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294286005">(Aug 19 2022 at 15:11)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;</p>
<blockquote>
<p>What do you mean by "warnings are omnipresent in Isabelle"?  The prover <br>
IDE shows them more prominently than in the TTY past, but that could be <br>
taken as motivation to remove the reasons for warnings.  Not all such <br>
spots are bad, but an avarage theory normally has only few warnings.</p>
</blockquote>
<p>I mean that there are many warnings in my theories, usually from the<br>
simplifier/classical reasoner that inform me that I have added rules<br>
that were already present in the simpset/claset (including the spurious<br>
warning when using intro! for an [intro] - rule). </p>
<p>Thus, in my case, it is difficult to write theories without warnings, or<br>
to manually check every single warning whether it is bad (garbage in the<br>
theory) or not (just some spurious simplifier warning). </p>
<p>The surprise will probably come in batch-build mode, as this will be the<br>
time when the garbage will make problems. </p>
<p>I'm already looking forward to the tutorials of the semantics-lecture,<br>
where students will definitely hand in lots of unfinished lemmas, many<br>
of them convinced they actually have proven it ...<br>
In PG, or even in older isabelle/jedits, I could just give them the rule<br>
of thumb: Your theory must not contain errors, sorrys, or oops. </p>
<p>Also, I will have hard times checking the submissions, as I have to<br>
manually check every warning to see wether the proof is actually<br>
closed ...</p>
<blockquote>
<blockquote>
<ul>
<li>In the output buffer, the standard Ctrl-Ins for "copy" does not work,<br>
while it works in the main text area. Can these shortcuts be configured<br>
separately? Or do I have to live with Ctrl-C?</li>
</ul>
</blockquote>
<p>I did not know about Ctrl-Ins yet.  What you observe here is merely the <br>
known and documented difference of the main jEdit text area with its <br>
actions and shortscuts vs. regular Java Swing GUI components.  The latter <br>
only have basic Ctrl-C, and it actually works routinely, which is a big <br>
step forwards to the historic perspective.</p>
<p>If Ctrl-C does <em>not</em> work somewhere, it is actually an issue that needs to <br>
be addressed.</p>
</blockquote>
<p>Looks like I have to lower my expectations to modern user interfaces.<br>
One of these expectations is full configurability, not forcing the user<br>
to some fixed shortcuts that, depending on typing habits, may or may not<br>
be convenient. Btw: the "old-fashioned" "ancient" emacs is fully<br>
configurably in the above sense!</p>
<blockquote>
<blockquote>
<ul>
<li>Odd behaviour when focus lays in output buffer or any other panel:</li>
</ul>
</blockquote>
</blockquote>
<blockquote>
<p>This belongs to normal jEdit policies.  In Isabelle/jEdit for the coming <br>
release I added the faint cursor to emphasize that -- normally it would be <br>
just absent.</p>
</blockquote>
<p>Ok, maybe its a jEdit feature. Personally, I find it very odd and I have<br>
hard times getting used to it: Whenever I used a query/sledgehammer<br>
panel, I regularly forget to click into the text-area before typing ...</p>
<blockquote>
<blockquote>
<p>In PG, there was a nice auto-indentation feature that worked reliable <br>
for (almost) all cases.</p>
</blockquote>
<p>That is indeed a notable omission.  In 1998, I added indentation to PG 2.x <br>
quite early, and earned the name "The indentation Man" in the inner circle <br>
of PG developers.  </p>
</blockquote>
<p>It was a very useful feature, and I'm really missing it. As code-folding<br>
also does not work, there is currently no feature that assists in<br>
keeping track of the structure of big developments.</p>
<blockquote>
<blockquote>
<ul>
<li>When developing proofs:<br>
 The output window displays the current position<br>
 by default ... if you are typing a new command, it usually displays<br>
 "Syntax error".<br>
 However, while typing your next method/isar step, you usually want to<br>
 see the current goal state, not a the completely useless information<br>
 "syntax error".</li>
</ul>
<p>In PG, the output was not updated before you explicitely processed<br>
 the command. Maybe, this can be simulated by turning auto-update off<br>
 and bind update to a convenient shortcut.</p>
</blockquote>
<p>Nothing new about this observation.  It belongs to general mismatch of <br>
TTY/PG mechanics wrt. the document-oriented model.  Note that you can also <br>
use the Query panel to print proof states on demand and only on demand.</p>
</blockquote>
<p>Let's hope I can bind these thing to some shortcuts ...</p>



<a name="294286024"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294286024" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294286024">(Aug 19 2022 at 15:11)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
The question is "why are these errors/interrupts not visible?" <br>
As discussed earlier on this list, they make false theorems look as if<br>
proven, when the proof tactics contain an programming error (or fail due<br>
to a bug in the parallel proof scheduling). This behaviour is contrary<br>
to the spirit of LCF-provers. Moreover, if those things are programming<br>
mistakes and should not show up under normal circumstances anyway, there<br>
is no point in not highlighting them as an error.</p>



<a name="294286046"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294286046" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294286046">(Aug 19 2022 at 15:11)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
My main restriction when writing proof text comes from the document<br>
generation to latex, where I want a readable layout. And this forces me<br>
to have no lines longer than roughly 80 characters. As I have many<br>
longer lemma statements, I need to format them manually into multiple<br>
lines.</p>



<a name="294286058"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294286058" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294286058">(Aug 19 2022 at 15:11)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
I think this was called "issue prover command" in PG ("Ctrl-c v" in<br>
standard config), and I used it from time to time. It only worked for<br>
commands that did not change the prover state, e.g., for all diagnostic<br>
commands. </p>
<p>In jEdit this has been replaced by the more heavyweight query-panels,<br>
that only work for a small subset of the diagnostic commands, and<br>
extending them to new commands is quite a big effort. So I would also<br>
like to have this lightweight low-level possibility of issuing<br>
diagnostic-commands, in addition to the heavyweight, high-level query<br>
panels.</p>



<a name="294286075"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294286075" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294286075">(Aug 19 2022 at 15:11)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
Take it as a data point for the long-term considerations about symbol<br>
completion.</p>
<p>But there is also something not totally smooth outside of strings:<br>
Yesterday, I occasionally had symbols complete in normal ML-code<br>
(outside of strings; in a ML-block in a theory file). Typically, this<br>
seemed to occur when I was typing pretty fast and changing the structure<br>
of the code. It seemed unrelated to string literals.</p>
<p>One way to trigger this is placing the cursor directly after the closing<br>
} of an antiquotation and typing a symbol fast. I can even type a few<br>
spaces before typing the symbol and it will still get completed.</p>
<p>-- Lars</p>



<a name="294286092"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294286092" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294286092">(Aug 19 2022 at 15:11)</a>:</h4>
<p>From: Lars Hupel &lt;<a href="mailto:hupel@in.tum.de">hupel@in.tum.de</a>&gt;<br>
This would also greatly reduce the number of stray "thm" commands in our<br>
theory sources (as in<br>
&lt;<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2014-July/msg00239.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2014-July/msg00239.html</a>&gt;)<br>
:-)</p>



<a name="294287845"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294287845" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294287845">(Aug 19 2022 at 15:20)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
An issue with symlinks:</p>
<p>Given file a file "/home/lars/projekte/test.ML" and symlink<br>
"/home/lars/P" to "projekte" and a theory</p>
<p>theory Scratch imports Pure<br>
begin</p>
<p>ML_file "/home/lars/P/test.ML"</p>
<p>end</p>
<p>Then a click on the file name will open the correct file, but without<br>
any annotations.</p>



<a name="294288050"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294288050" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294288050">(Aug 19 2022 at 15:21)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
A type error in a ML_file disables ctrl+click and hovering for type<br>
annotations. Errors and warnings are still present. This behaviour does<br>
not occur in a ML block.</p>
<p>(Don't know whether this is a regression).</p>



<a name="294289102"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294289102" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294289102">(Aug 19 2022 at 15:27)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
An issue with the precedence of warnings and errors:</p>
<p>Under certain circumstances, if a method emits a warning and the apply<br>
fails (with an error), the line is only marked as a warning in the<br>
theories panel and the right side bar.</p>
<p>Reconstruct with:</p>
<p>theory Scratch imports Main begin</p>
<p>method_setup foo = ‹<br>
  Scan.succeed (fn ctxt =&gt; SIMPLE_METHOD' (warning "warning"; tracing<br>
"trace"; K no_tac))<br>
›</p>
<p>lemma P apply foo</p>
<p>end</p>
<p>-- Lars</p>



<a name="294289945"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294289945" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294289945">(Aug 19 2022 at 15:32)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 31 Jul 2014, Peter Lammich wrote:</p>
<blockquote>
<blockquote>
<p>The invocation of error "" is the same as raise ERROR "", which makes the<br>
ML code fail and the Isar toplevel wrapper print the exeptions.  The error<br>
message is empty, which means it is vacous according to ancient Isabelle<br>
traditions, which hold until today.  The effect was not visible in the old<br>
TTY times, because that adds a prefix of "*** " by default. Note that<br>
there are other situations where ML failure might lead to no error output,<br>
notably involving Exn.Interrupt.</p>
<p>Such non-printing exceptions should not show up under normal circumstances<br>
-- they indicate a programming mistake somewhere.</p>
</blockquote>
<p>The question is "why are these errors/interrupts not visible?"</p>
</blockquote>
<p>Interrupts are not program errors, but physical events.  The <br>
"implementation" manual explains the difference in the important section <br>
0.5, with clear guidelines how user-space tools need to work with <br>
interrupts, such that there are passed-through the code unhindered.  The <br>
system uses interrupts internally in various ways to manage executions, <br>
but for this to work the user-space code needs to be done right.</p>
<p>ERROR "" used to be a semantic ML programming error until yesterday, when <br>
I incorporated the concept into the "user error" notion to simplify life. <br>
Regular Isabelle sources never suffered from that mistake in the past <br>
decades to the best of my knowledge, but there is no problem here to make <br>
the system more resiliant against improper use and declare it proper.  So <br>
in the next Isabelle2014-RC1 the error message will be "Error", both in ML <br>
and Scala.</p>
<p>Nonetheless, it is important that Isabelle/ML users read the <br>
implementation manual carefully, and more than just once in a life-time.</p>
<blockquote>
<p>As discussed earlier on this list, they make false theorems look as if <br>
proven, when the proof tactics contain an programming error (or fail due <br>
to a bug in the parallel proof scheduling). This behaviour is contrary <br>
to the spirit of LCF-provers.</p>
</blockquote>
<p>The LCF approach in its strict sense is based on sucessully produced <br>
values of some abstract datatype of theorems, not the absence of <br>
user-level errors.</p>
<p>There is a general problem to ensure that errors actually reach the <br>
end-user -- despite continuous efforts to make this as robust as feasible, <br>
there are routinely situations where messages get dropped, e.g. by odd <br>
Java/Swing GUI components.</p>
<p>This inherent unreliability of prover interfaces is well-known, it was the <br>
same in the old days of Proof General.</p>
<p>The only official authentic check is a batch build.</p>
<p>Makarius</p>



<a name="294290425"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294290425" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294290425">(Aug 19 2022 at 15:34)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Semantic completion (i.e. the language context) works via the asynchronous <br>
document model, so typing fast means the physical editor state and the <br>
document markup range may disagree.</p>
<p>These delays are system options that may be adjusted as usual: most <br>
notably editor_input_delay and editor_output_delay.  Maybe you want to try <br>
these by a factor of 5 or 10 faster -- results also depend on the amount <br>
of CPU cycles you can spend on interactive document processing and GUI <br>
rendering.</p>
<p>Makarius</p>



<a name="294290862"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294290862" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294290862">(Aug 19 2022 at 15:36)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is a consequence of the redirection of ML reports for external files, <br>
which reuses the asynchronous print infrastructure that I had presented at <br>
ITP2014 in order to swap-in and swap-out massive IDE markups on demand.</p>
<p>By making the print function non-strict wrt. the main eval phase, it can <br>
report static results even in the presence of failure: see d5b0fa6f1f7a, <br>
or the next release candidate.</p>
<p>Makarius</p>



<a name="294291252"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294291252" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294291252">(Aug 19 2022 at 15:38)</a>:</h4>
<p>From: Richard Molitor &lt;<a href="mailto:gattschardo@googlemail.com">gattschardo@googlemail.com</a>&gt;<br>
And yet another issue: A method executing</p>
<p>error ""</p>
<p>produces an error marker in the right sidebar. However, the associated<br>
apply command does not get underlined in red and the error marker in the<br>
left sidebar is missing.</p>
<p>Reproduce with:</p>
<p>theory Scratch imports Pure begin</p>
<p>lemma "PROP P"<br>
  apply (tactic {* error "" *})<br>
  oops</p>
<p>end</p>



<a name="294291452"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294291452" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294291452">(Aug 19 2022 at 15:40)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
The prover will open the wrong file, i.e. the one that is stored on the <br>
file-system, instead of taking the buffer content from the editor as <br>
expected.  After some editing of the buffer, the divergence will become <br>
apparant.  The lack of detailed markup is a consequence of not going <br>
through PIDE.</p>
<p>The superficial reason for that is a small mistake how PIDE document node <br>
names are produced, with a disagreement about canonical forms due to <br>
symblinks.  This will work in the next release candidate.</p>
<p>The deeper problem is a confusion about responsibilities: the prover still <br>
accesses the file-system as a fall-back, when the Prover IDE did not do <br>
that.  Thus mistakes in providing file content are silently turned into <br>
unintended behaviour.</p>
<p>As explained earlier, this mixed responsibility is there to allow <br>
Isabelle/HOL itself to be edited interactively on a small mobile device of <br>
only 4--8 GB.</p>
<p>Makarius</p>



<a name="294291882"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294291882" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294291882">(Aug 19 2022 at 15:42)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
It should we OK in the right side bar -- according to <br>
<a href="http://www.mail-archive.com/isabelle-dev@mailbroy.informatik.tu-muenchen.de/msg05328.html">http://www.mail-archive.com/isabelle-dev@mailbroy.informatik.tu-muenchen.de/msg05328.html</a> <br>
from May 2014. Back then I somehow forgot to apply the analogous change to <br>
the theories panel as well.</p>
<p>My comment from that thread on isabelle-dev about the difficulty to pin <br>
down the notion of "command status" still applies: the Prover IDE merely <br>
visualizes certain aspects of very rich information; sometimes it might <br>
come out in a misleading way.</p>
<p>Makarius</p>



<a name="294291914"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294291914" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294291914">(Aug 19 2022 at 15:42)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 31 Jul 2014, Peter Lammich wrote:</p>
<blockquote>
<blockquote>
<p>On the topic of the query panel: Some time in the future, I'd like to<br>
see the equivalent of the jEdit action bar (or, to phrase it<br>
differently, a "general" query panel)  for Isabelle, where I enter an<br>
arbitrary (diagnostic) command and get the output in the panel.</p>
</blockquote>
<p>I think this was called "issue prover command" in PG ("Ctrl-c v" in <br>
standard config), and I used it from time to time. It only worked for <br>
commands that did not change the prover state, e.g., for all diagnostic <br>
commands.</p>
</blockquote>
<p>Such a mini command-line within Query is an obvious extension, but there <br>
are also conceptual differences.  There is no need to restrict it to <br>
diagnostic command, because it is all stateless anyway.  There is a need <br>
to wrap up the hypothetical "script" a bit differently, to avoid spilling <br>
of messages (wranings etc.) in the wrong place.  This is why it is not <br>
done yet -- the panel is new in the coming release anyway.</p>
<blockquote>
<p>In jEdit this has been replaced by the more heavyweight query-panels</p>
</blockquote>
<p>Again, and hopefully the last time, a quote from the Isabelle/jEdit <br>
manual:</p>
<p>\item [jEdit] is a sophisticated text editor implemented in Java</p>
<p>\item [Isabelle/jEdit] is the main example application of the PIDE<br>
   framework and the default user-interface for Isabelle</p>
<p>If you need a short name for the Prover IDE, you can say "PIDE" -- it is <br>
even easier to pronounce (and spell) than "jEdit".  Yet another <br>
alternative is to say just "Isabelle", according to the toplevel <br>
application name.</p>
<p>Concerning the perceived heavyweightedness of the query panel: it is <br>
actually relative simple, taking the whole conceptual complexity of <br>
timeless/stateless asynchronous parallel document processing into account.</p>
<p>In contrast, issuing a single command on the spot is only simple under the <br>
assumption of an existing TTY loop, which has its own complexities.  Once <br>
the TTY loop can be removed from Isabelle, great weights will disappear <br>
from the overall system implementation.</p>
<blockquote>
<p>that only work for a small subset of the diagnostic commands, and <br>
extending them to new commands is quite a big effort.</p>
</blockquote>
<p>The query panel is based on a general concept of query operation, which <br>
are more flexible than old-style diagnostic commands, but also simpler.</p>
<p>The "Print Context" tab in the Query panel is a restricted application of <br>
the general principle.  The following one-liner installs a new item to be <br>
printed there (without taking any arguments apart from the implicit <br>
state):</p>
<p>ML ‹<br>
     Print_Operation.register "test" "test output" (fn st =&gt; [Pretty.str "test"])<br>
   ›</p>
<p>After emitting that ML snippet in PIDE, the Query panel needs to be <br>
re-docked and will then show another checkbox for "test" than can be <br>
activated on demand.</p>
<p>Makarius</p>



<a name="294291936"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294291936" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294291936">(Aug 19 2022 at 15:42)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Keeping lines short (80-100 chars for source, 60-70 chars for LaTeX <br>
documents) is important, but it is still possible to put relevant <br>
information into the head-line of a fold or sidekick item, e.g. like this:</p>
<p>lemma name: short_statement<br>
     &lt;proof&gt;</p>
<p>lemma name:<br>
     long_statement<br>
     &lt;proof&gt;</p>
<p>definition name :: type_constraints<br>
     where short_definition</p>
<p>definition name :: type_constraints<br>
     where<br>
       short_definition</p>
<p>Proper support for folds is still missing, but the general side-conditions <br>
for it are already given in jEdit.</p>
<p>Makarius</p>



<a name="294291941"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294291941" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294291941">(Aug 19 2022 at 15:42)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 31 Jul 2014, Lars Noschinski wrote:</p>
<blockquote>
<p>Often, the "Ignoring duplicate rewrite rule/intro/..." warnings get <br>
annoying, as they are not always meaningful (for example, overwriting <br>
intro by intro! triggers a warning). In particular, in certain <br>
locale-heavy theories (HOL-Algebra comes to mind), interpreting (or <br>
opening) a locale gives you a number of these warning and there is not <br>
always a (nice) way around them (I'd even claim that these warnings are <br>
mostly vacuous for theory interpretations, but this is another topic).</p>
</blockquote>
<p>This touches general questions about these particular historic warnings.<br>
Many other tools have already become smarter concerning relevance of <br>
messages.  It is a long term effort to sort this out further.</p>
<p>The is already Context_Position.is_visible for tools to check if the <br>
situation is right for warnings.  The system does not always maintain that <br>
properly though, and many tools ignore it.</p>
<blockquote>
<p>BTW: I just discovered that symbol completion works now in the <br>
text-boxes in the panels, very nice!</p>
</blockquote>
<p>Did this behaviour change wrt. Isabelle2013-2?  It should be mostly the <br>
same as before.</p>
<p>Makarius</p>



<a name="294291958"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294291958" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294291958">(Aug 19 2022 at 15:42)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 31 Jul 2014, Peter Lammich wrote:</p>
<blockquote>
<p>Thus, in my case, it is difficult to write theories without warnings, or <br>
to manually check every single warning whether it is bad (garbage in the <br>
theory) or not (just some spurious simplifier warning).</p>
<p>The surprise will probably come in batch-build mode, as this will be the <br>
time when the garbage will make problems.</p>
<p>I'm already looking forward to the tutorials of the semantics-lecture,<br>
where students will definitely hand in lots of unfinished lemmas, many<br>
of them convinced they actually have proven it ...<br>
In PG, or even in older isabelle/jedits, I could just give them the rule<br>
of thumb: Your theory must not contain errors, sorrys, or oops.</p>
<p>Also, I will have hard times checking the submissions, as I have to <br>
manually check every warning to see wether the proof is actually closed <br>
...</p>
</blockquote>
<p>First note that I have changed the regular warning to an error_message in <br>
<a href="https://bitbucket.org/isabelle_project/isabelle-release/commits/ae3eac418c5f">https://bitbucket.org/isabelle_project/isabelle-release/commits/ae3eac418c5f</a> <br>
so it will be in the text release candidate.  Hopefully people will <br>
actually test all that has accumulated.</p>
<p>In general, we have always had the following situation:</p>
<p>* Authentic checking of theories requires a batch build.  It was never<br>
     easier than today to do that (see the "system" manual).</p>
<p>People sometimes "forget" to make a proper ROOT for their stuff, or<br>
     don't know how it is done or that it is important.  Whenever someone<br>
     shows me some theories that are not just small snippets, my first<br>
     reflex is to do the missing "isabelle mkroot" and then the batch<br>
     build to see if they are correct.</p>
<p>* Proof General in the past and Prover IDE front-ends in the present are<br>
     only an approximation, with a lot of conveniences, but without the<br>
     full detail of checking.</p>
<p>Proof General even had quick_and_dirty on by default over most of its<br>
     life time, until that broke by accident in the 3.x to 4.x transition.</p>
<p>In situations where proper builds are too much for small experiments, it <br>
is possible to use the new "isabelle console" together with plain use_thy <br>
in raw ML (which is not Isabelle/ML); see also the "system" manual. Note <br>
that the old "isabelle tty" is already removed, although there is still <br>
"Isar.main()" to invoke the old toplevel.</p>
<blockquote>
<blockquote>
<p>If Ctrl-C does <em>not</em> work somewhere, it is actually an issue that needs <br>
to be addressed.</p>
</blockquote>
<p>Looks like I have to lower my expectations to modern user interfaces. <br>
One of these expectations is full configurability, not forcing the user <br>
to some fixed shortcuts that, depending on typing habits, may or may not <br>
be convenient.</p>
</blockquote>
<p>There is nothing modern about Java/AWT/Swing -- it is in fact legacy for <br>
many years -- like most other GUI frameworks.  Swing does have a lot of <br>
configurability, but a bit too much for my taste, and I don't really <br>
understand most of it.  jEdit has its own Swing add-ons and bypasses to <br>
provide a quite sane environment.</p>
<p>For Isabelle/jEdit, I've spent extra care from the start to make <br>
copy-paste work almost universally.  I remember Proof General / Emacs as <br>
something were this rarely worked on all platforms and all versions; I am <br>
surprised that it is now perceived differently.</p>
<p>When Isabelle/jEdit was young and fresh in 2008/2009, there was a local <br>
presentation of it at TUM.  Someone asked: "What will be its main <br>
features?"  My spontaneous response: "reliable copy-paste".</p>
<blockquote>
<p>It was a very useful feature, and I'm really missing it. As code-folding <br>
also does not work, there is currently no feature that assists in <br>
keeping track of the structure of big developments.</p>
</blockquote>
<p>jEdit also has explicit folds with funny {{{ }}} notation.</p>
<p>Makarius</p>



<a name="294292004"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294292004" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294292004">(Aug 19 2022 at 15:42)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I have completed two rounds through the new auxiliary file management in <br>
the Prover IDE, and robustified it wrt. various fine points.  When the <br>
next release candidate is published, please keep an extra eye on that <br>
aspect.</p>
<p>Makarius</p>



<a name="294292043"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294292043" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294292043">(Aug 19 2022 at 15:42)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
I'm pretty sure, my original case had it wrong on the right side bar,<br>
too. But indeed, my test case doesn't exhibit this behaviour and I<br>
cannot reproduce what I rememeber to have seen. I'll keep an eye on this.</p>



<a name="294292077"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294292077" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294292077">(Aug 19 2022 at 15:43)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
What I meant is that I can place the cursor directly after the closing<br>
brace, wait for an arbitrary amount of time (to give the system time to<br>
converge), and still get symbol completion if I type fast at that point<br>
(see attached video).<br>
<a href="/user_uploads/14278/bxVuE7r2EuHPJo1b085LZsjh/antiquotation-completion.mp4">antiquotation-completion.mp4</a></p>



<a name="294292294"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294292294" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294292294">(Aug 19 2022 at 15:44)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is still within the convergence model sketched here, but there is an <br>
additional coincidence: completion sits right in the input event loop. <br>
When you type something there is always an edit-distance, and the language <br>
context of the closing delimiter is stretched into the new space.  Unless <br>
there is a completion delay, the semantic information needs to be <br>
retrieved on the spot, but it can never be accurate.</p>
<p>You can see the same effect when you insert new material quickly at the <br>
end of some semantically marked up token (e.g. a free or bound variable). <br>
It does not matter so much there, since it is only a transient visual <br>
glitch.</p>
<p>In the next round of completion refinement (not for this release), one <br>
could try to mark only the interior with the specific language context, <br>
not the delimiters.</p>
<p>Makarius</p>



<a name="294292354"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294292354" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294292354">(Aug 19 2022 at 15:44)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
When writing more then a few lines of code, I prefer a separate<br>
"undefined" value -- "raise Match" has a double meaning as telling the<br>
compiler not to bother me with warnings about inexhaustive cases.</p>
<p>-- Lars</p>



<a name="294294002"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294294002" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294294002">(Aug 19 2022 at 15:46)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
On 30.07.2014 22:14, Makarius wrote:</p>
<blockquote>
<p>The invocation of error "" is the same as raise ERROR "", which makes<br>
the ML code fail and the Isar toplevel wrapper print the exeptions. <br>
The error message is empty, which means it is vacous according to<br>
ancient Isabelle traditions, which hold until today.  The effect was<br>
not visible in the old TTY times, because that adds a prefix of "*** "<br>
by default. Note that there are other situations where ML failure<br>
might lead to no error output, notably involving Exn.Interrupt.</p>
<p>Such non-printing exceptions should not show up under normal<br>
circumstances -- they indicate a programming mistake somewhere.<br>
The following is probably not relevant to the 2014 release anymore, but<br>
for the sake of completeness:</p>
</blockquote>
<p>I encountered such a case yesterday (with 2014-RC2) with a tactic with<br>
resulted in a non-productive result sequence, i.e. the equivalent of</p>
<p>ML &lt;<br>
  fun inf_seq () = Seq.cons 0 (inf_seq ())<br>
  val nonprod_seq = Seq.filter (K false) (inf_seq ())<br>
&gt;</p>
<p>After some looking around, I found that I get a little hint in the Raw<br>
Output panel -- if the panel is open while the failing code is executed.<br>
I wonder whether the raw output panel could accumulate, say, the last 8k<br>
worth of messages even if it is closed? Also, a "clear" button would be<br>
nice (although closing/reopening works).</p>
<p>Interestingly, asking for an exception trace (via<br>
[[ML_exception_trace]]) for this code sends polyml into a another<br>
desperate quest for memory: It has been running on my machine a few<br>
minutes with 4086M VIRT and 3956M RES -- so basically exhausting its<br>
full address space -- before giving up:</p>
<p>Welcome to Isabelle/HOL (Isabelle2014-RC2: August 2014)<br>
    Warning - Unable to increase stack - interrupting thread</p>
<p>Warning - Unable to increase stack - interrupting thread</p>
<p>Warning - Unable to increase stack - interrupting thread</p>
<p>Warning - Unable to increase stack - interrupting thread</p>
<p>Run out of store - interrupting threads</p>
<p>Run out of store - interrupting threads</p>
<p>Failed to recover - exiting</p>
<p>message_output terminated<br>
    standard_output terminated<br>
    standard_error terminated<br>
    process terminated<br>
    command_input terminated<br>
    process_manager terminated<br>
    Return code: 1</p>
<p>In these cases I could be useful to get at least at a partial trace<br>
(which would probably already indicate which functions<br>
went into a loop).</p>



<a name="294294103"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294294103" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294294103">(Aug 19 2022 at 15:47)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 7 Aug 2014, Lars Noschinski wrote:</p>
<blockquote>
<p>I encountered such a case yesterday (with 2014-RC2) with a tactic with<br>
resulted in a non-productive result sequence, i.e. the equivalent of</p>
<p>ML &lt;<br>
 fun inf_seq () = Seq.cons 0 (inf_seq ())<br>
 val nonprod_seq = Seq.filter (K false) (inf_seq ())<br>
&gt;</p>
<p>After some looking around, I found that I get a little hint in the Raw<br>
Output panel -- if the panel is open while the failing code is executed.</p>
</blockquote>
<p>The above example provokes a <em>soft</em> breakdown of ML user code.  The <br>
Poly/ML run-time systems maps that to an interrupt, which is not printed <br>
in PIDE. There are other visual clues that something is wrong with the <br>
command transaction. It is then left as an exercise to find section "4.2 <br>
Low-level output" in the Isabelle/jEdit manual, and connect it <br>
semantically to such sitations.</p>
<blockquote>
<p>I wonder whether the raw output panel could accumulate, say, the last 8k <br>
worth of messages even if it is closed?</p>
</blockquote>
<p>There is always the question how much technology is built around low-level <br>
errors.  They occurr so rarely that an incident can become a big desaster <br>
if the error handling infrastructure itself gets overloaded.  This could <br>
lead to spectacular events of "total failure of existence", which we've <br>
had occasionally had in the past.  (That phrase is from Starship Titanic <br>
due to Douglas Adams and Terry Jones, where it is called S.M.E.F. <br>
"Spontaneous Massive Existence Failure".)</p>
<p>Nonetheless, I have made some changes for the Isabelle2014 code base some <br>
months ago concerning Syslog output -- to have a buffer and a limit on it, <br>
with some hope that bombing the front-end is avoided.  So there might be a <br>
chance to print certain low-level messages on Syslog, instead of raw <br>
output, but such experiments are not for this release.</p>
<blockquote>
<p>Also, a "clear" button would be nice (although closing/reopening works).</p>
</blockquote>
<p>The panel is a plain Swing text area, so you can just select all text and <br>
deleted it.</p>
<blockquote>
<p>Interestingly, asking for an exception trace (via<br>
[[ML_exception_trace]]) for this code sends polyml into a another<br>
desperate quest for memory: It has been running on my machine a few<br>
minutes with 4086M VIRT and 3956M RES -- so basically exhausting its<br>
full address space -- before giving up:</p>
<p>In these cases I could be useful to get at least at a partial trace <br>
(which would probably already indicate which functions went into a <br>
loop).</p>
</blockquote>
<p>This looks like a <em>hard</em> breakdown of the ML runtime system.  David <br>
Matthews is the only one who can say more about it.</p>
<p>Note that driving the system against a concrete wall routinely causes big <br>
damage.  In the past couple of years, David Matthews has managed to move <br>
concrete walls many times, but it is a never ending process.  (The JVM is <br>
even more fragile under low-memory situations.)</p>
<p>After 32bit address space is left behind -- presumably soon -- such VM <br>
problems will go away, and the good old disk-thrashing on swap space will <br>
come back.</p>
<p>Makarius</p>



<a name="294294142"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294294142" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294294142">(Aug 19 2022 at 15:47)</a>:</h4>
<p>From: David Matthews &lt;<a href="mailto:dm@prolingua.co.uk">dm@prolingua.co.uk</a>&gt;<br>
I would guess, and it is only a guess since I haven't actually tested <br>
this, is that there is an infinite or at least very deep recursion <br>
there.  The thread stacks are expanded until the process runs out of <br>
space.  The way exception-trace was done changed in Poly/ML 5.5.1. <br>
Exception_trace now builds a list of the functions rather than directly <br>
printing them to standard output as it used to.  There is a problem, <br>
though, if there is no space to build the list.  I don't think there is <br>
a way to limit the size of the stacks (these are the stacks of ML data <br>
managed by the Poly/ML run-time not the C stacks allocated by the <br>
system).  Perhaps there should be.</p>
<p>David</p>



<a name="294294184"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%202014-RC1%20issues/near/294294184" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.202014-RC1.20issues.html#294294184">(Aug 19 2022 at 15:47)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
This is indeed the case, so the the "soft breakdown", as Makarius put<br>
it, is absolutely not surprising. I was mildly surprised when this<br>
prevented the system from giving my some kind of trace.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>