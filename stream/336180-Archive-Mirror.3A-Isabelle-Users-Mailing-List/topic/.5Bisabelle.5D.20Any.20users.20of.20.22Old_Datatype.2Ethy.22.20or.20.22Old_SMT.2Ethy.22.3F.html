<html>
<head><meta charset="utf-8"><title>[isabelle] Any users of &quot;Old_Datatype.thy&quot; or &quot;Old_SMT.thy&quot;? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Any.20users.20of.20.22Old_Datatype.2Ethy.22.20or.20.22Old_SMT.2Ethy.22.3F.html">[isabelle] Any users of &quot;Old_Datatype.thy&quot; or &quot;Old_SMT.thy&quot;?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294701964"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Any%20users%20of%20%22Old_Datatype.thy%22%20or%20%22Old_SMT.thy%22%3F/near/294701964" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Any.20users.20of.20.22Old_Datatype.2Ethy.22.20or.20.22Old_SMT.2Ethy.22.3F.html#294701964">(Aug 22 2022 at 14:44)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Hi all,</p>
<p>The "datatype" command and the "smt" proof method were reimplemented in Isabelle2014. For compatibility, the old constructs are provided by "<del>/src/HOL/Library/Old_Datatype.thy" and "</del>/src/HOL/Library/Old_SMT.thy", as "old_datatype" and "old_smt".</p>
<ol>
<li>
<p>Do you depend on either of these constructs?</p>
</li>
<li>
<p>If so, why?</p>
</li>
<li>
<p>Would you be sorry if "old_datatype", "old_smt", or both were to be missing in the next release (presumably Isabelle2017)?</p>
</li>
</ol>
<p>If the answer to question 3 is yes, please reply.</p>
<p>Jasmin</p>



<a name="294701976"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Any%20users%20of%20%22Old_Datatype.thy%22%20or%20%22Old_SMT.thy%22%3F/near/294701976" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Any.20users.20of.20.22Old_Datatype.2Ethy.22.20or.20.22Old_SMT.2Ethy.22.3F.html#294701976">(Aug 22 2022 at 14:44)</a>:</h4>
<p>From: "Urban, Christian" &lt;<a href="mailto:christian.urban@kcl.ac.uk">christian.urban@kcl.ac.uk</a>&gt;<br>
Dear Jasmin,</p>
<p>I am not sure what the latest states of Nominal1 (in the distribution) and Nominal2 (in the AFP) are? If I remember correctly, they depend internally</p>
<p>on old_datatype (heavily). I am not sure how easy it would be to port</p>
<p>them to (new)datatype. It would certainly be desirable.</p>
<p>Best wishes,</p>
<p>Christian</p>



<a name="294702001"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Any%20users%20of%20%22Old_Datatype.thy%22%20or%20%22Old_SMT.thy%22%3F/near/294702001" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Any.20users.20of.20.22Old_Datatype.2Ethy.22.20or.20.22Old_SMT.2Ethy.22.3F.html#294702001">(Aug 22 2022 at 14:44)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Hi Christian,</p>
<blockquote>
<p>I am not sure what the latest states of Nominal1 (in the distribution) and Nominal2 (in the AFP) are?</p>
</blockquote>
<p>I ported Nominal1 to the new datatypes back in 2014, using the compatibility interfaces (which are almost one-to-one with the old interfaces). As for Nominal2, I had run into a limitation in my code back then and didn't investigate further, but I could easily give it a new try (a lot of bugs were fixed since then). In any case, it's on my radar. I'm more worried about users in the non-Isabelle, non-AFP world.</p>
<p>Jasmin</p>



<a name="294704040"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Any%20users%20of%20%22Old_Datatype.thy%22%20or%20%22Old_SMT.thy%22%3F/near/294704040" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Any.20users.20of.20.22Old_Datatype.2Ethy.22.20or.20.22Old_SMT.2Ethy.22.3F.html#294704040">(Aug 22 2022 at 14:55)</a>:</h4>
<p>From: Burkhart Wolff &lt;<a href="mailto:Burkhart.Wolff@lri.fr">Burkhart.Wolff@lri.fr</a>&gt;<br>
Dear all,</p>
<p>we use indeed in a rather critical way the "~~/src/HOL/Library/Old_Datatype.thy”<br>
package - we need a uniform way to extract splitting rules for arbitrary data-types <br>
and a kind of abstract syntax for data-types to compute cycles in (indirect) type<br>
dependencies. Neither of this is really existing in the 2016 version of the new-datatype<br>
package, although I tried quite hard to reconstruct this information (implicitly<br>
depending on naming conventions for theorems and the like.)</p>
<p>bu</p>



<a name="294704524"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Any%20users%20of%20%22Old_Datatype.thy%22%20or%20%22Old_SMT.thy%22%3F/near/294704524" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Any.20users.20of.20.22Old_Datatype.2Ethy.22.20or.20.22Old_SMT.2Ethy.22.3F.html#294704524">(Aug 22 2022 at 14:57)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Dear Burkhart,</p>
<p>Thanks for answering my email.</p>
<p>You wrote:</p>
<blockquote>
<p>we use indeed in a rather critical way the "~~/src/HOL/Library/Old_Datatype.thy”<br>
package</p>
</blockquote>
<p>The old datatype package consists of several layers of .ML and .thy files. My email concerns only the last layer -- mainly, the "old_datatype" command provided by "Old_Datatype.thy" or the corresponding "Old_Datatype.add_datatype" ML command.</p>
<p>In particular, excluded from the scope of my email are all the ML functions provided by modules called "Old_Datatype_Xxx" (for some nonempty "Xxx", e.g. "Aux"). For these, reform should also come some day, but let's proceed one step at a time.</p>
<blockquote>
<ul>
<li>we need a uniform way to extract splitting rules for arbitrary data-types</li>
</ul>
</blockquote>
<p>The new package certainly offers an interface for doing so:</p>
<p>ML {*<br>
  Ctr_Sugar.ctr_sugar_of @{context} @{type_name list}<br>
  |&gt; the<br>
  |&gt; #split<br>
*}</p>
<p>And if you're porting old code, or are prone to nostalgia, you can use the compatibility interfaces:</p>
<p>ML {*<br>
  BNF_LFP_Compat.the_info @{theory} [] @{type_name list}<br>
  |&gt; #split<br>
*}</p>
<blockquote>
<p>and a kind of abstract syntax for data-types to compute cycles in (indirect) type<br>
dependencies.</p>
</blockquote>
<p>This is too abstract for me to understand what you want. Which old interface do you rely on exactly?</p>
<blockquote>
<p>Neither of this is really existing in the 2016 version of the new-datatype package,</p>
</blockquote>
<p>I can't judge for the "kind of abstract syntax", but for splitting rules they have been around since 2014.</p>
<p>The compatibility interfaces were designed to be comprehensive and allowed us to port Isabelle's own tools and the AFP, and they themselves only use public APIs such as "Ctr_Sugar.ctr_sugar_of" and "BNF_FP_Def_Sugar.fp_sugar_of". Almost everything we know about a datatype is recorded somewhere in there.</p>
<blockquote>
<p>although I tried quite hard to reconstruct this information (implicitly<br>
depending on naming conventions for theorems and the like.)</p>
</blockquote>
<p>Could you tell us concretely what information about, say, "list", you cannot access using the public APIs? This would interest me a lot.</p>
<p>Isabelle's interfaces are not perfect, but we've worked hard to make the new (co)datatype interfaces complete, and we use them ourselves for many tools, so I'm really puzzled by your comments.</p>
<p>Cheers,</p>
<p>Jasmin</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>