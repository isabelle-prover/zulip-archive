<html>
<head><meta charset="utf-8"><title>[isabelle] Automatic indentation behavior · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html">[isabelle] Automatic indentation behavior</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294765428"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765428" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765428">(Aug 22 2022 at 20:55)</a>:</h4>
<p>From: Joshua Chen &lt;<a href="mailto:joshua.chen@uibk.ac.at">joshua.chen@uibk.ac.at</a>&gt;<br>
Dear list,</p>
<p>Can anyone explain the logic behind the behavior of the Isabelle/jEdit<br>
automatic indentation? I've never been able to figure it out and always<br>
have it disabled, from my point of view it indents and unindents with no<br>
rhyme or reason. I'd be grateful to learn how to use it from those who<br>
have it happily turned on in their daily work...</p>
<p>Best,<br>
Josh</p>



<a name="294765439"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765439" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765439">(Aug 22 2022 at 20:55)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
Indentation is a matter of taste, but perhaps you are talking about this phenomenon:</p>
<p>lemma "((P ⟷ Q) ⟷ R) ⟷ (P ⟷ (Q ⟷ R))"<br>
  apply (intro iffI)<br>
       apply simp_all<br>
   apply blast <br>
  apply blast <br>
  done</p>
<p>For apply-proofs, the indentation varies with the number of subgoals, the point being to inform the reader how many subgoals are present at that point in the proof. In the proof above, we can see that the first line generates many subgoals (six in fact) and the second line proves a bunch of them (four in fact), the remaining two proved one at a time. This information can be valuable when you are confronted with a proof that no longer works.</p>
<p>Larry Paulson</p>



<a name="294765459"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765459" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765459">(Aug 22 2022 at 20:55)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
The Isabelle/jEdit documentation has a few explanations about indentation.</p>
<p>Ultimately this is a computer game, and the dynamics of it depends on<br>
many side-conditions how you work with it.</p>
<p>The results should be crisp and clear for 98% of cases, following the<br>
semantics of the language, especially for proofs, especially structured<br>
proofs in Isar.</p>
<p>The less you invent diverging ideas about it, the better it will work.</p>
<p>Makarius</p>



<a name="294765471"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765471" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765471">(Aug 22 2022 at 20:55)</a>:</h4>
<p>From: Joshua Chen &lt;<a href="mailto:joshua.chen@uibk.ac.at">joshua.chen@uibk.ac.at</a>&gt;</p>
<blockquote>
<p>The Isabelle/jEdit documentation has a few explanations about indentation.<br>
Indeed, but unfortunately it's really too sketchy to be understandable<br>
to someone who doesn't already have an idea of the answer.</p>
</blockquote>
<blockquote>
<p>The less you invent diverging ideas about it, the better it will work.<br>
Not to mention that sometimes one works on a new thing, and hence needs<br>
to know the precise workings of things in order to reliably determine if<br>
the pre-existing order is suitable, or if one really needs to diverge<br>
from canon. ;)</p>
</blockquote>
<p>Josh</p>
<p>On 11/11/19 1:46 PM, Makarius wrote:</p>
<blockquote>
<p>On 11/11/2019 12:14, Joshua Chen wrote:</p>
<blockquote>
<p>Can anyone explain the logic behind the behavior of the Isabelle/jEdit<br>
automatic indentation? I've never been able to figure it out and always<br>
have it disabled, from my point of view it indents and unindents with no<br>
rhyme or reason. I'd be grateful to learn how to use it from those who<br>
have it happily turned on in their daily work...<br>
The Isabelle/jEdit documentation has a few explanations about indentation.</p>
</blockquote>
<p>Ultimately this is a computer game, and the dynamics of it depends on<br>
many side-conditions how you work with it.</p>
<p>The results should be crisp and clear for 98% of cases, following the<br>
semantics of the language, especially for proofs, especially structured<br>
proofs in Isar.</p>
<p>The less you invent diverging ideas about it, the better it will work.</p>
<p>Makarius<br>
</p>
</blockquote>



<a name="294765494"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765494" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765494">(Aug 22 2022 at 20:55)</a>:</h4>
<p>From: Joshua Chen &lt;<a href="mailto:joshua.chen@uibk.ac.at">joshua.chen@uibk.ac.at</a>&gt;<br>
(No offense intended Makarius, just teasing you a little) :p</p>
<p>Josh</p>



<a name="294765551"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765551" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765551">(Aug 22 2022 at 20:56)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
We also have this mailing list to work out the details that remain unclear.</p>
<p>Which aspects precisely did you find confusing? The dynamics of<br>
indentation, the result, or both? Proofs, specifications, something else?</p>
<p>Makarius</p>



<a name="294765579"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765579" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765579">(Aug 22 2022 at 20:56)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;</p>
<blockquote>
<p>lemma "((P ⟷ Q) ⟷ R) ⟷ (P ⟷ (Q ⟷ R))"<br>
  apply (intro iffI)<br>
       apply simp_all<br>
   apply blast <br>
  apply blast <br>
  done</p>
<p>For apply-proofs, the indentation varies with the number of subgoals,<br>
the point being to inform the reader how many subgoals are present at<br>
that point in the proof. In the proof above, we can see that the<br>
first line generates many subgoals (six in fact) and the second line<br>
proves a bunch of them (four in fact), the remaining two proved one<br>
at a time. This information can be valuable when you are confronted<br>
with a proof that no longer works.</p>
</blockquote>
<p>This apply-indentation is, imho, also a matter of taste. I think it<br>
looks horrible. Unfortunately, the Isabelle indentation cannot be<br>
configured, but if you enable it, you get it all. This is why I do not<br>
use it, though the indentation for the other commands is good. I use<br>
the generic "simple indentation" mode of jedit, which will just indent<br>
a new line to the indentation level of the last line.</p>
<p>Peter</p>
<blockquote>
<p>Larry Paulson</p>
<p>On 11 Nov 2019, at 11:14, Joshua Chen &lt;<a href="mailto:joshua.chen@uibk.ac.at">joshua.chen@uibk.ac.at</a>&gt;</p>
<blockquote>
<p>wrote:</p>
<p>Can anyone explain the logic behind the behavior of the<br>
Isabelle/jEdit<br>
automatic indentation? I've never been able to figure it out and<br>
always<br>
have it disabled, from my point of view it indents and unindents<br>
with no<br>
rhyme or reason. I'd be grateful to learn how to use it from those<br>
who<br>
have it happily turned on in their daily work...<br>
</p>
</blockquote>
</blockquote>



<a name="294765585"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765585" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765585">(Aug 22 2022 at 20:56)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This is what the Isabelle/jEdit documentation says:</p>
<p>➧[Semantic indentation] adds additional white space to unstructured<br>
proof<br>
    scripts via the number of subgoals. This requires information of ongoing<br>
    document processing and may thus lag behind when the user is editing too<br>
    quickly; see also option @{system_option_def "jedit_script_indent"} and<br>
    @{system_option_def "jedit_script_indent_limit"}.</p>
<p>For me the so-called "apply-style proofs" are not a proper part of the<br>
fine Isar proof language and its high ambitions for style. Nonetheless,<br>
I prefer to have that additional indentation enabled.</p>
<p>Further note that recent updates on Isar (2015/2016) have introduced the<br>
'subgoal' command that gives better structure and less extra indentation<br>
to "unstructured apply scripts".</p>
<p>Makarius</p>



<a name="294765594"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765594" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765594">(Aug 22 2022 at 20:56)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;</p>
<blockquote>
<p>This is what the Isabelle/jEdit documentation says:</p>
<p>➧[Semantic indentation] adds additional white space to<br>
unstructured<br>
proof<br>
    scripts via the number of subgoals. This requires information of<br>
ongoing<br>
    document processing and may thus lag behind when the user is<br>
editing too<br>
    quickly; see also option @{system_option_def<br>
"jedit_script_indent"} and<br>
    @{system_option_def "jedit_script_indent_limit"}.</p>
<p>For me the so-called "apply-style proofs" are not a proper part of<br>
the<br>
fine Isar proof language and its high ambitions for style. </p>
</blockquote>
<p>Fully agree, but apply scripts are very useful in certain situations,<br>
where a simple proof can be done in a few straightforward steps, and an<br>
Isar-script would mainly mean to copy around subgoals and thus<br>
introduce redundancy (goal-cases and symbolic names like goal3(42),<br>
imho, is worse than apply scripts). </p>
<p>Another very important part of apply scripts, that I feel is often<br>
under-estimated, is rapid prototyping of proofs. I use apply scripts a<br>
lot for exploring proofs, including all nasty (improper in Isabelle<br>
parlance) features like <br>
"case_tac [!] xs" or "rule_tac x=foo in exI", and even "back". Once I<br>
have found a proof, I refactor it, either extracting lemmas or going to<br>
an Isar-proof. </p>
<p>Side-note: Winning verification competitions like VerifyThis would not<br>
have been possible without very dirty apply-scripts, as they can be<br>
written much faster than Isar-proofs. For ProofGround, which was<br>
focused on a different type of problems, Manuel  apparently used Isar<br>
from the beginning on, while I used apply-scripts, and both worked.</p>
<blockquote>
<p>Nonetheless,<br>
I prefer to have that additional indentation enabled.<br>
As said, a matter of taste. I prefer a different indentation scheme, in<br>
particular when prototyping.</p>
</blockquote>
<blockquote>
<p>Further note that recent updates on Isar (2015/2016) have introduced<br>
the<br>
'subgoal' command that gives better structure and less extra<br>
indentation<br>
to "unstructured apply scripts".</p>
</blockquote>
<p>I actually use this a lot, and I think it is, next to Eisbach, one of<br>
the greatest features introduced to Isabelle regarding rapid-<br>
prototyping capabilities. The only caveat is that it does not work when<br>
a schematic variable has to be instantiated. Luckily, this will not<br>
occur very often for most proofs.</p>



<a name="294765603"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765603" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765603">(Aug 22 2022 at 20:56)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
However, if you want to submit an entry to the AFP, this style is mandatory. We are the guys who usually end up keeping all the entries running :-)</p>
<p>Larry</p>



<a name="294765627"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765627" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765627">(Aug 22 2022 at 20:56)</a>:</h4>
<p>From: Yakoub Nemouchi &lt;<a href="mailto:y.nemouchi@gmail.com">y.nemouchi@gmail.com</a>&gt;<br>
Hi,</p>
<p>I do agree with Peter on this.<br>
The so called apply-style proofs is very useful in identifying proof<br>
patterns that can be hidden behind a method later.<br>
It is  very useful in teaching as well, since it make the proofs looks like<br>
a program with transitions steps  made over the proof context. Therefore,<br>
it is easier for students with no formal background to learn it (Peter has<br>
a very successful experience by teaching Isabelle that way back in USA)!<br>
Also, it is useful for advanced semantic frameworks with large scale<br>
applications.<br>
For example, projects such as Verisoft and seL4 have very large proofs that<br>
use apply-style proof. The proofs are ugly in this kind of projects because<br>
of the complicated and low level memory models of those systems!<br>
In this kind of projects,  you want to save time, and it is  easier for<br>
proof engineers to progress the proofs and at the same time identify proof<br>
patterns with the so called "apply-style proofs" that can be hidden behind<br>
a single method later in the development.</p>
<p>Best wishes,</p>
<p>Yakoub.</p>



<a name="294765629"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765629" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765629">(Aug 22 2022 at 20:56)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;</p>
<blockquote>
<p>On 12 Nov 2019, at 10:06, Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt; wrote:</p>
<blockquote>
<p>This apply-indentation is, imho, also a matter of taste. I think it<br>
looks horrible. Unfortunately, the Isabelle indentation cannot be<br>
configured, but if you enable it, you get it all. This is why I do not<br>
use it, though the indentation for the other commands is good. I use<br>
the generic "simple indentation" mode of jedit, which will just indent<br>
a new line to the indentation level of the last line.</p>
</blockquote>
</blockquote>



<a name="294765676"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765676" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765676">(Aug 22 2022 at 20:57)</a>:</h4>
<p>From: Joshua Chen &lt;<a href="mailto:josh@joshchen.io">josh@joshchen.io</a>&gt;<br>
For type theory such a <code>schematic_subgoal</code> command is absolutely<br>
indispensible, so allow me to point you to<br>
<a href="https://github.com/jaycech3n/Isabelle-Spartan/blob/master/schematic_subgoal.ML">https://github.com/jaycech3n/Isabelle-Spartan/blob/master/schematic_subgoal.ML</a><br>
:)</p>
<p>This is basically the subgoal command code copy-pasted, with a<br>
single-line tweak to change the proof mode to schematic (and possibly a<br>
couple other small changes, I forget by now). It's been working fine for<br>
me so far, though I'm sure more experienced people can tell me if<br>
anything could go wrong...</p>
<p>Josh</p>



<a name="294765699"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765699" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765699">(Aug 22 2022 at 20:57)</a>:</h4>
<p>From: Wolfgang Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
I tend to use proof method expressions in such situations. If there are<br>
exactly two methods to apply where the first one introduces “boring”<br>
subgoals which are then discharged by the second one, I usually use<br>
<code>by ⟨first-method⟩ ⟨second-method⟩</code>.</p>
<p>All the best,<br>
Wolfgang</p>



<a name="294765716"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765716" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765716">(Aug 22 2022 at 20:57)</a>:</h4>
<p>From: "Klein, Gerwin (Data61, Kensington NSW)" &lt;<a href="mailto:Gerwin.Klein@data61.csiro.au">Gerwin.Klein@data61.csiro.au</a>&gt;<br>
This can work nicely on small goals, but if you start looking into verification of larger programs there is no really usable way around apply scripts in my opinion.   </p>
<p>I don’t agree at all that apply scripts are less maintainable than Isar proofs in general. It is perfectly possible to write brittle and unmaintainable Isar proofs, and we do have some of these in the AFP (as well as in the seL4 verification). It is also perfectly possible to write nicely stable and maintainable apply scripts. I’ve maintained many of both over the last 15 years, and for both it takes work and some experience to write something maintainable.</p>
<p>Not that our seL4 proofs are shining examples of maintainability, there are many things I’d like to improve, but there are over a million lines of apply scripts in them, and while an Isabelle update usually takes us a few weeks, that is a small amount of time compared to the size of the proof. The entire AFP is only about twice the size, and if you add up the update work the Isabelle team puts in incrementally over time, I bet it will be larger even though the AFP has a much higher percentage of Isar proofs. Isar proofs do not necessarily show a greater resilience to change than apply scripts, they just are vulnerable to different kinds of change. </p>
<p>Isar as a language gives you mechanisms for writing proofs that are readable and understandable (which does tend to help with maintenance), but it is up to the user to actually do that properly, and it may not contribute to the purpose of the proof to be readable. There is often no point in making a proof in software verification specifically readable. There is often nothing interesting going on in vcg-style proofs, and their apply-script structure is usually obvious to someone who is used to them. This is different in mathematical-style proofs or maybe even for proofs about small interesting algorithms of some 10s of lines. </p>
<p>Using goal-based indentation is one of the key things in keeping apply scripts maintainable over time. Unless you extensively use Eisbach or other means to make sure that scripts break when goals are solved/not solved when they should, you will waste a lot of time finding the apply command that went wrong if something breaks after an update (I certainly have wasted such time in proofs that haven’t followed the convention). </p>
<p>Cheers,<br>
Gerwin</p>



<a name="294765735"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765735" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765735">(Aug 22 2022 at 20:57)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
When you say "absolutely" my first reflex is to try to disprove that,<br>
and present a proof language with explicit structure <em>and</em> synthesized<br>
parts in the reasoning.</p>
<p>Of course that is non-trivial: it is an open research problem that I<br>
left over in 1999. I did not spend much thought on it in recent years --<br>
in contrast to the other open research problem that is more important:<br>
soft types within Isar proofs.</p>
<p>Just abstractly, scientific progress happens when you stop to accept<br>
well-established workarounds and rethink problems from the ground up.</p>
<p>Makarius</p>



<a name="294765817"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Automatic%20indentation%20behavior/near/294765817" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Automatic.20indentation.20behavior.html#294765817">(Aug 22 2022 at 20:58)</a>:</h4>
<p>From: Joshua Chen &lt;<a href="mailto:joshua.chen@uibk.ac.at">joshua.chen@uibk.ac.at</a>&gt;<br>
The main thing is the dynamics—in particular in theory declarations but<br>
outside proofs. This is what happens to me when full indentation is<br>
turned on:</p>
<ol>
<li>
<p>If I never manually insert indents, new lines are never automatically<br>
indented. This is at first fine. However, once I go to manually insert<br>
an indent, say on line n, complete the line, and press RETURN to start<br>
line n+1, PIDE will immediately unindent line n (to the same level as<br>
line (n-1)). I then have to go back up one line to tell it "no, I<br>
actually want line n indented!".</p>
</li>
<li>
<p>Now, suppose I've indented line n, have an empty line on line (n+1),<br>
and want to start a new definition on line (n+2). Like so:</p>
</li>
</ol>
<div class="codehilite" data-code-language="Isabelle"><pre><span></span><code><span class="k">definition</span> <span class="n">my_def</span> <span class="o">::</span> <span class="s">"some_type"</span>
  <span class="kp">where</span> <span class="s">"my_def == defn"</span>

<span class="k">definition</span> <span class="n">I_want_a_new_def_here</span>
  <span class="ow">...</span>
</code></pre></div>
<p>Now when I first begin <code>definition I_want_...</code>, PIDE automatically<br>
indents to the same level as the "where" statement above it. This<br>
shouldn't happen since I'm starting a completely new logical block with<br>
a new command, but it's not a big deal, I just immediately SHIFT+TAB to<br>
unindent, right? But no, even after doing this, PIDE insists on<br>
indenting (again!) after I RETURN to start line n+3.</p>
<p>All this basically means I have to do a lot of up and down keypressing,<br>
entering content on line (n+1) before PIDE will grudgingly accept the<br>
correct indentation level for line n. This is not a matter of "just<br>
leave the automatic indentation to do its work", because it always<br>
blindly insists on following the indentation level of the previous line,<br>
while making it very difficult to unindent.</p>
<p>Josh</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>