<html>
<head><meta charset="utf-8"><title>[isabelle] Auxiliary context in class target · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Auxiliary.20context.20in.20class.20target.html">[isabelle] Auxiliary context in class target</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294159933"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Auxiliary%20context%20in%20class%20target/near/294159933" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Auxiliary.20context.20in.20class.20target.html#294159933">(Aug 18 2022 at 19:59)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@kit.edu">andreas.lochbihler@kit.edu</a>&gt;<br>
Hi all,</p>
<p>I am having trouble to use Isabelle's new auxiliary contexts inside a class <br>
context, as in the following example:</p>
<p>context ord begin<br>
context fixes x :: 'a begin<br>
definition bar where "bar = x"</p>
<p>The definition is rejected because x is erroneously identified as a free variable:</p>
<p>*** Extra variables on rhs: "x"<br>
*** The error(s) above occurred in definition "ord_class.ord_class.bar_dict":<br>
***   "bar == <a href="http://ord.bar">ord.bar</a> x"<br>
*** At command "definition"</p>
<p>The same error occurs when I use fun with a more complicated function.<br>
I would like to use such a context to emulate the "for" clause of inductive for <br>
function defintions, because the induction rule generated by fun is nicer.</p>
<p>Is this just not yet implemented or am I again abusing things here?</p>
<p>Andreas</p>



<a name="294160187"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Auxiliary%20context%20in%20class%20target/near/294160187" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Auxiliary.20context.20in.20class.20target.html#294160187">(Aug 18 2022 at 20:00)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I still did not find time to look again at this, and probably won't before <br>
getting on 3 weeks vacation at the end of the week.</p>
<p>Generally, context-begin-end needs to interact with various local theory <br>
targets, and some of them might not be ready for the nested context yet. <br>
Above it looks like the canonical interpretation that turns locale into <br>
class does not cope with additional parameters. It will probably take more <br>
than one more release cycle to get an almost complete coverage of all <br>
theses things.</p>
<p>Reporting such problems helps to see where the important applications are, <br>
and to assign priorities where to continue further refinement of nested <br>
context.  Especially the still underdeveloped bundles should join the <br>
target context game at some point.</p>
<p>Makarius</p>



<a name="294165082"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Auxiliary%20context%20in%20class%20target/near/294165082" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Auxiliary.20context.20in.20class.20target.html#294165082">(Aug 18 2022 at 20:27)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Andreas,</p>
<p>this is indeed a current restriction in the class target; it expects all<br>
occuring auxiliary parameters to be class parameters, which is a very<br>
strong assumption.  I am currently testing a patch<br>
(<a href="http://isabelle.in.tum.de/testboard/Isabelle/rev/d4b6b21b75e2">http://isabelle.in.tum.de/testboard/Isabelle/rev/d4b6b21b75e2</a>) which is<br>
supposed to lift this restriction.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/jLWaVriGQeG-2oACk6ms1lVN/signature.asc">signature.asc</a></p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>