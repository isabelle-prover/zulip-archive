<html>
<head><meta charset="utf-8"><title>[isabelle] Beginner&#x27;s struggles · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Beginner.27s.20struggles.html">[isabelle] Beginner&#x27;s struggles</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294114410"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Beginner%27s%20struggles/near/294114410" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Beginner.27s.20struggles.html#294114410">(Aug 18 2022 at 15:50)</a>:</h4>
<p>From: Ian Lynagh &lt;<a href="mailto:igloo@earth.li">igloo@earth.li</a>&gt;<br>
Hi all,</p>
<p>Here are some of the things I have been struggling with as an Isabelle<br>
complete beginner (but with a some knowledge of coq). I hope you will<br>
find this useful in improving the Isabelle language and/or docs.</p>
<p>I have "(Isabelle2009-1: December 2009)".</p>
<p>How does Isabelle know how much to process when I click the "Process the<br>
next proof command" in Proof-General? In coq this is nice and simple: It<br>
processes up to the next "." (that's actually a slight simplification,<br>
but that's not relevant here). With Isabelle, I'm not really sure what<br>
happens. If I have this source:</p>
<p>theory Test<br>
    imports Main<br>
    begin</p>
<p>lemma "A &amp; B ==&gt; B &amp; A"<br>
    proof</p>
<p>and I have processed up to, but not including, "proof", then pressing<br>
the arrow processes "proof" and succeeds. But if I also write "foo"<br>
after "proof", even with some whitespace:</p>
<p>theory Test<br>
    imports Main<br>
    begin</p>
<p>lemma "A &amp; B ==&gt; B &amp; A"<br>
    proof</p>
<p>foo</p>
<p>Isabelle says</p>
<p>*** Unknown proof method: "foo"<br>
    *** At command "proof".</p>
<p>and if I had put a "." after "proof"</p>
<p>theory Test<br>
    imports Main<br>
    begin</p>
<p>lemma "A &amp; B ==&gt; B &amp; A"<br>
    proof.</p>
<p>then now the "lemma" line fails with</p>
<p>*** Outer syntax error: end of input expected,<br>
    *** but command proof was found</p>
<p>I can't emphasise enough just how thoroughly confused I am by this.<br>
===================================================================</p>
<p>It also makes Isabelle hard to use for me. My coq scripts generally look<br>
like:<br>
    &lt;valid proof that I've finished&gt;.<br>
    &lt;the line I'm working on&gt;.<br>
    &lt;invalid stuff, alternate possibilities for the next line, etc&gt;<br>
and the invalid stuff, coming after a ".", doesn't interfere with my<br>
work on the current line. I have to keep fiddling with comments to do<br>
this in Isabelle.</p>
<p>How does one write a comment in Isabelle? If I search for "comment" in<br>
tutorial.pdf then the first real mention is on p67(p57), in the<br>
"Document Preparation" section. Three pages later, in the same section,<br>
says<br>
    Isabelle source comments, which are of the form (* ... *)<br>
and as far as I can see this is the only mention in the document - a<br>
section I didn't look at, as I wasn't concerned with making PDFs at this<br>
stage. "comments" is also not in the index; I would never have thought<br>
to look up "source comments". I would expect to be told what comments<br>
look like around p14-15(p4-5).</p>
<p>Am I right in thinking that "--" does not start a comment in a source<br>
file? Because while trying to copy/paste/run this example:<br>
    lemma assumes P: "! x. P x" shows "! x. P(f x)"<br>
    proof                     -- allI: (!! x. ?P x) = ! x. ?P x<br>
      fix a<br>
      from P show "P(f a)" .. -- allE : [[ x. ?P x; ?P ?x = ?R ]] = ?R<br>
    qed<br>
from p9 of isar-overview.pdf I certainly assumed that it did. Having to<br>
look up the ASCII names of the symbols is annoying enough; why not use<br>
Isabelle comment syntax when putting comments in the middle of example<br>
Isabelle code?</p>
<p>I was very surprised to not find Isabelle packaged in Debian. This was a<br>
significant factor in me not also trying Isabelle about 2 years ago, when<br>
I started with coq, and if coq's Czar showed more signs of life I would<br>
not have considered trying Isabelle. I am sad to see in<br>
<a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=494491">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=494491</a><br>
that this seems to be deliberate.</p>
<p>Thanks for reading, and I hope you found this useful.</p>
<p>Thanks<br>
Ian</p>



<a name="294114429"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Beginner%27s%20struggles/near/294114429" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Beginner.27s.20struggles.html#294114429">(Aug 18 2022 at 15:50)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Sat, 14 Aug 2010, Ian Lynagh wrote:</p>
<blockquote>
<p>I have "(Isabelle2009-1: December 2009)".</p>
</blockquote>
<p>There is no problem with it, but you might want to try the current version <br>
Isabelle2009-2 (June 2010).</p>
<blockquote>
<p>How does Isabelle know how much to process when I click the "Process the <br>
next proof command" in Proof-General?</p>
</blockquote>
<p>It processes the next command, up to the last non-whitespace text before <br>
the following command.  Of course, the question here is what a "command" <br>
actually means in Isabelle/Isar.  The quick reference in Appendix A of the <br>
isar-ref manual might be helpful.</p>
<p>In particular, "." is a command of its own, not a command terminator like <br>
in Coq.  (We have the more conventional ";" for that, but it has almost <br>
come out of use in recent years, since Proof General is good enough to <br>
determine command boundaries from the keywords alone.)</p>
<blockquote>
<p>But if I also write "foo" after "proof", even with some whitespace:</p>
<p>theory Test<br>
   imports Main<br>
   begin</p>
<p>lemma "A &amp; B ==&gt; B &amp; A"<br>
   proof</p>
<p>foo</p>
<p>Isabelle says</p>
<p>*** Unknown proof method: "foo"<br>
   *** At command "proof".</p>
</blockquote>
<p>In Isar 'proof' and 'qed' are not just parentheses, but actually do <br>
something.  See the quick reference again, especially for important <br>
abbreviations like "by m1 m2 == proof m1 qed m2".  Extra whitespace never <br>
makes a difference in syntax recognition.</p>
<blockquote>
<p>and if I had put a "." after "proof"</p>
<p>theory Test<br>
   imports Main<br>
   begin</p>
<p>lemma "A &amp; B ==&gt; B &amp; A"<br>
   proof.</p>
<p>then now the "lemma" line fails with</p>
<p>*** Outer syntax error: end of input expected,<br>
   *** but command proof was found</p>
</blockquote>
<p>Here the confusion is again that "." is completely different from Coq. <br>
Put a space between these two commands, and you should see proper <br>
font-lock highlighting in Emacs and less confusing Isabelle</p>
<blockquote>
<p>It also makes Isabelle hard to use for me. My coq scripts generally look<br>
like:<br>
   &lt;valid proof that I've finished&gt;.<br>
   &lt;the line I'm working on&gt;.<br>
   &lt;invalid stuff, alternate possibilities for the next line, etc&gt;<br>
and the invalid stuff, coming after a ".", doesn't interfere with my<br>
work on the current line. I have to keep fiddling with comments to do<br>
this in Isabelle.</p>
</blockquote>
<p>As mentioned above, Proof General will stop before the next proper command <br>
keyword.  E.g. you can put a dummy stopper like 'done' or '.' before the <br>
invalid stuff to prevent it from running into it.</p>
<blockquote>
<p>How does one write a comment in Isabelle?</p>
</blockquote>
<p>Normally you don't, but you intersperse the formal text with informal one, <br>
using commands like 'text' or 'section' or 'subsection'.  Small marginal<br>
attachments can be written everywhere like this:</p>
<p>assume A  -- "blah blah"</p>
<p>In any case you need to quote such text using "..." or the more convenient <br>
{* ... *}  The latter allows to have quoted text inside without further <br>
escapes.</p>
<blockquote>
<p>Isabelle source comments, which are of the form (* ... *) and as far as <br>
I can see this is the only mention in the document</p>
</blockquote>
<p>Think of these "source comments" like % in LaTeX, i.e. they are not really <br>
part of what you write.</p>
<blockquote>
<p>Am I right in thinking that "--" does not start a comment in a source <br>
file? Because while trying to copy/paste/run this example:</p>
</blockquote>
<p>After all these years, the generated PDF/LaTeX files are still unsuitable <br>
for copy/paste.  There have been some recent movements in the pdflatex <br>
camp towards more serious "tagged PDF", and there is some hope that we <br>
will be able to use it soon.</p>
<p>For now you should start with real example source files, to get an idea <br>
how to type things, especially where to put quotes and where not.</p>
<p>Makarius</p>



<a name="294114445"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Beginner%27s%20struggles/near/294114445" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Beginner.27s.20struggles.html#294114445">(Aug 18 2022 at 15:50)</a>:</h4>
<p>From: Ian Lynagh &lt;<a href="mailto:igloo@earth.li">igloo@earth.li</a>&gt;<br>
Thanks for your reply Makarius. Some helpful tips there, although the<br>
main purpose of my mail was to try to highlight the sorts of<br>
difficulties that beginners (well, at least one beginner!) run into.</p>
<p>Actually, I've just run into something that really does have me stumped:<br>
It seems that "fix a" does nothing at all, yet it can be necessary;<br>
looks like magic to me! e.g. in this proof:</p>
<p>theory Test<br>
    imports Main<br>
    begin</p>
<p>lemma assumes P: "! x. P x" shows "! x. P(f x)"<br>
    proof<br>
      fix a<br>
      from P show "P(f a)" ..<br>
    qed</p>
<p>the "proof state" is the same before and after the "fix a" line (well,<br>
apart from the step counter being incremented, but I assume that's not<br>
relevant), as are the "cases", "facts", and "term bindings". So how am I<br>
meant to know whether I need to fix something, if doing so has no<br>
visible effect? Am I missing something?</p>
<p>This is a real problem for me in the proof I'm trying to write. I have<br>
goals like<br>
    !!bool. principalType (EBool bool) = Some t ==&gt; STyping (EBool bool) t<br>
and I have no idea if the commands I'm giving are taking me in the right<br>
direction or not, as they seemingly do nothing.</p>
<p>I am also surprised that "facts", and perhaps also "term bindings", are<br>
not shown by default. Not only that, but proof general has given me a<br>
toolbar button that tells me "theory Test", but not a toolbar button to<br>
tell me the current facts; is wanting the former really more common than<br>
wanting the latter?</p>
<p>That reminds me of another minor irritation: If I write this partial<br>
proof:</p>
<p>theory Test<br>
    imports Main<br>
    begin</p>
<p>lemma "A &amp; B ==&gt; B &amp; A"<br>
    proof<br>
      assume "A &amp; B" thus B</p>
<p>and then "Process whole buffer", and then complete the proof as:</p>
<p>theory Test<br>
    imports Main<br>
    begin</p>
<p>lemma "A &amp; B ==&gt; B &amp; A"<br>
    proof<br>
      assume "A &amp; B" thus B..<br>
    next<br>
      assume "A &amp; B" thus "A" ..<br>
    qed</p>
<p>then I can "Process whole buffer" again and the proof is accepted. But<br>
if I then "Retract whole buffer" and "Process whole buffer" again then<br>
the proof is now rejected (due to the missing space between "B" and<br>
"..").</p>
<p>Thanks<br>
Ian</p>



<a name="294114517"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Beginner%27s%20struggles/near/294114517" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Beginner.27s.20struggles.html#294114517">(Aug 18 2022 at 15:50)</a>:</h4>
<p>From: Ian Lynagh &lt;<a href="mailto:igloo@earth.li">igloo@earth.li</a>&gt;<br>
Perhaps the question I should really have asked is:</p>
<p>Given a proof state of<br>
    goal (1 subgoal):</p>
<p>1. !!x. P (f x)<br>
why does "fix a" not give a proof state of:<br>
    goal (1 subgoal):</p>
<p>1. P (f a)<br>
?</p>
<p>Thanks<br>
Ian</p>



<a name="294114581"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Beginner%27s%20struggles/near/294114581" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Beginner.27s.20struggles.html#294114581">(Aug 18 2022 at 15:51)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Sun, 15 Aug 2010, Ian Lynagh wrote:</p>
<blockquote>
<p>Some helpful tips there, although the main purpose of my mail was to try <br>
to highlight the sorts of difficulties that beginners (well, at least <br>
one beginner!) run into.</p>
</blockquote>
<p>This is a bidirectional process: While your initial encounter with the <br>
system helps to iron out certain issues eventually (which often takes <br>
years), the immediate tips help you to get forward right now.</p>
<blockquote>
<p>It seems that "fix a" does nothing at all, yet it can be necessary;<br>
looks like magic to me! e.g. in this proof:</p>
<p>theory Test<br>
   imports Main<br>
   begin</p>
<p>lemma assumes P: "! x. P x" shows "! x. P(f x)"<br>
   proof<br>
     fix a<br>
     from P show "P(f a)" ..<br>
   qed</p>
<p>the "proof state" is the same before and after the "fix a" line</p>
</blockquote>
<p>The Isar "context elements" 'fix' and 'assume' mainly act on the proof <br>
context, not the goal state.  In the traditional approach to tactical <br>
theorem proving, all your information was kept in the goal state, <br>
occasionally encoded a bit indirectly.  E.g. the "premises" of a subgoal <br>
of the form A ==&gt; B ==&gt; C would simulate local facts that can be used to <br>
conclude C.  In Isar, local facts are first class in the context outside <br>
of the context.</p>
<p>Incidently, reducing goal states to the bare minumum also improves <br>
performance of proof tools.  Unlike other attempts at human-readable proof <br>
scripts, Isar processing is actually faster than traditional scripting!</p>
<p>The main idea of the interplay of proof contexts vs. goal states is this:</p>
<p>* The system asks you to establish something, e.g. a sub-problem of the<br>
     form !!x. A x ==&gt; B x</p>
<p>* You build up a local context and show something in it, e.g. by saying</p>
<p>fix x assume "A x" show "B x" &lt;proof&gt;</p>
<p>* The system composes this contextual result, typically solving one of<br>
     the pending sub-problems.</p>
<p>The "canonical answer" fix/assume/show above is really just an example. <br>
There is some flexibility here.  See also section "2.2.3 Structured proof <br>
refinement" in the isar-ref manual.</p>
<p>You also need to keep in mind that the goal output follows more the <br>
tactical tradition.  I.e. you should not answer by show "!!x. A x ==&gt; B x"<br>
above, which can also lead to some surprises.</p>
<blockquote>
<p>apart from the step counter being incremented, but I assume that's not <br>
relevant), as are the "cases", "facts", and "term bindings". So how am I <br>
meant to know whether I need to fix something, if doing so has no <br>
visible effect?</p>
</blockquote>
<p>You always need to 'fix' an entity, if it is meant to be "arbitrary, but <br>
fixed", i.e. starting as a local constant and becoming a schematic <br>
variable eventually (after leving the local context).</p>
<p>Sometimes it is convenient to experiment with undeclared free variables. <br>
The system allows this, but uses some extra highlighting (usually yellow) <br>
in the display.  This indicates that you can never generalize such <br>
entities (without violating the Isar structure).</p>
<blockquote>
<p>I am also surprised that "facts", and perhaps also "term bindings", are <br>
not shown by default.</p>
</blockquote>
<p>The Isar proof context contains many things, and can be even arbitrarily <br>
extended in ML user space.  The default output is a bit of a mixture of <br>
historical accidents and traditions from tactical proving (which is the <br>
primary model of Proof General).  At some point, all of this needs some <br>
reconsideration -- I am working on it right now, after Isabelle/Isar has <br>
been locked into Proof General / TTY interaction for more than a decade.</p>
<p>In this new interaction model (i.e. see my paper on UITP 2010) goal state <br>
output actually happens to be a performance bottle-neck for the system, <br>
not just confusing to the user.  All of this needs some careful rethinking <br>
on the system side ...</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>