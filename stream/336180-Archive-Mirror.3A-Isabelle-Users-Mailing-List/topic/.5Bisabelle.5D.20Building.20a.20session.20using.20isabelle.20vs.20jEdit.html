<html>
<head><meta charset="utf-8"><title>[isabelle] Building a session using isabelle vs jEdit · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html">[isabelle] Building a session using isabelle vs jEdit</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294822001"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822001" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822001">(Aug 23 2022 at 08:16)</a>:</h4>
<p>From: Pedro Sánchez Terraf &lt;<a href="mailto:sterraf@famaf.unc.edu.ar">sterraf@famaf.unc.edu.ar</a>&gt;<br>
Dear all,</p>
<p>I've posted &lt;<a href="https://stackoverflow.com/q/59931542/5135870">https://stackoverflow.com/q/59931542/5135870</a>&gt; the following <br>
question on Stackoverflow and there I received the suggestion of <br>
bringing it here. Thanks in advance for any help.</p>
<hr>
<p>I've been working on an Isabelle 2019 session which has grown a bit <br>
large, and at some point I wasn't able to build it anymore using <br>
isabelle build in my 8G RAM machine. Nevertheless, when I open the main <br>
theory file using jEdit (running isabelle jedit -d .), the session is <br>
built with no problems.</p>
<p>/How can I tune the building process so it works as smoothly as the <br>
graphical interface?//<br>
/<br>
Next, I give some more details.</p>
<p>The main symptom is that the Poly/ML process stalls at some point; it <br>
doesn't really fail but does not terminate within a reasonable amount of <br>
time (~20min, when a successful build would take 3' in my computer).</p>
<p>Amidst of the development, adjusting using ML_OPTIONS to "--minheap <br>
5500" was enough to solve this, but afterwards we decided to split the <br>
session in two (no more code added, just a change in the ROOT file) and <br>
after that no further adjustment solved the issue. On the other hand, a <br>
machine with 16G RAM builds with no problem without any further setting.</p>
<p>Later, I checked the options used by jEdit; those relevant (I believe) <br>
are --minheap 500  --gcthreads 0 (the last being a default). I tried <br>
with these with no success. I also noted that the build command has a <br>
distinct --eval Command_Line.tool0 (fn () =&gt; (<a href="http://Build.build">Build.build</a> <br>
"/tmp/isabelle-pedro/buildNNNNNNNNNNNNN")) option, where NNNNNNNNNNNNN <br>
are some numbers.</p>
<p>Finally, I found a post concerning some old behavior of Poly/ML that <br>
might be related: <br>
<a href="https://polyml.inf.ed.ac.narkive.com/wb7p8r1B/heap-does-not-grow-up-to-maxheap">https://polyml.inf.ed.ac.narkive.com/wb7p8r1B/heap-does-not-grow-up-to-maxheap</a>.</p>
<p>PST.-<br>
<a href="http://cs.famaf.unc.edu.ar/~pedro/home_en">cs.famaf.unc.edu.ar/~pedro/home_en</a> <br>
&lt;<a href="https://cs.famaf.unc.edu.ar/~pedro/home_en.html">https://cs.famaf.unc.edu.ar/~pedro/home_en.html</a>&gt;</p>



<a name="294822101"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822101" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822101">(Aug 23 2022 at 08:17)</a>:</h4>
<p>From: Christian Weinz &lt;<a href="mailto:christian.weinz@stud.uni-goettingen.de">christian.weinz@stud.uni-goettingen.de</a>&gt;<br>
Dear Pedro,</p>
<p>I've also had and still have ongoing problems with high memory usage of<br>
Isabelle. The data Isabelle keeps in memory apparently has exploitable<br>
redundancy, and transparently compressing it has solved my memory<br>
problem for now wherever I was able to do so. I accomplish that using<br>
zram in linux.</p>
<p>Picking a higher level theory in the dropdown menu in the panel<br>
"Theories" has helped me reducing the memory usage, too. Note that<br>
changing the selection does not take effect directly. I restart<br>
Isabelle for it to take effect.</p>
<p>Does anybody other ways of working with Isabelle on memory constraints<br>
machines?</p>
<p>Best,<br>
Christian</p>



<a name="294822632"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822632" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822632">(Aug 23 2022 at 08:21)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Add more memory?</p>
<p>Isabelle is a high-end IDE and requires resources above average. As a <br>
rule of thumb:</p>
<p>(1) small examples: 2 cores, 8 GB<br>
   (2) regular applications: 4 cores, 16 GB<br>
   (3) big applications: 8 cores, 32 GB</p>
<p>It also helps a lot to have proper SSD storage instead of old-style HD.</p>
<p>All of this is mid-range hardware and available rather cheaply.</p>
<p>Makarius</p>



<a name="294822644"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822644" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822644">(Aug 23 2022 at 08:21)</a>:</h4>
<p>From: Pedro Sánchez Terraf &lt;<a href="mailto:sterraf@famaf.unc.edu.ar">sterraf@famaf.unc.edu.ar</a>&gt;<br>
Thank you very much for your reply, Makarius.</p>
<p>I only want to emphasize the point that actually the IDE works fine in <br>
my laptop, but the build process is the one that doesn't.</p>
<p>So, either building the session does more things than what the IDE does <br>
while verifying its theories, or there are some parameters that are <br>
optimized when called from the IDE. That I would like to figure out.</p>
<p>Best regards,</p>
<p>PST.-<br>
<a href="http://cs.famaf.unc.edu.ar/~pedro/home_en">cs.famaf.unc.edu.ar/~pedro/home_en</a> <br>
&lt;<a href="https://cs.famaf.unc.edu.ar/~pedro/home_en.html">https://cs.famaf.unc.edu.ar/~pedro/home_en.html</a>&gt;<br>
El 4/2/20 a las 16:42, Makarius escribió:</p>



<a name="294822663"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822663" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822663">(Aug 23 2022 at 08:22)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
There are many differences of PIDE processing (e.g. in Isabelle/jEdit) <br>
vs. batch builds via "isabelle build". Notably, the latter also uses <br>
more parallelism: you may experiment with "isabelle build -o threads=1" <br>
to see if it becomes more stable.</p>
<p>Poly/ML heap management depends on many side-conditions, depending on <br>
total memory and overall timing. You can add something like this in <br>
$ISABELLE_HOME_USER/etc/settings to experiment with it:</p>
<p>ML_OPTIONS="--minheap 1000 --maxheap=4000"</p>
<p>Both sides might require non-obvious adjustments towards the top or the <br>
bottom, to work in such a low-memory situation.</p>
<p>Makarius</p>



<a name="294822807"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822807" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822807">(Aug 23 2022 at 08:22)</a>:</h4>
<p>From: Pedro Sánchez Terraf &lt;<a href="mailto:sterraf@famaf.unc.edu.ar">sterraf@famaf.unc.edu.ar</a>&gt;<br>
El 5/2/20 a las 04:26, Makarius escribió:<br>
Thank you very much. This setting (using one thread) solved the issue. <br>
For two threads, I tried several combinations of heap limits but none of <br>
them worked. Nevertheless, it seems that the PIDE is using two threads.</p>
<p>Best,</p>
<p>PST.-<br>
<a href="http://cs.famaf.unc.edu.ar/~pedro/home_en">cs.famaf.unc.edu.ar/~pedro/home_en</a> <br>
&lt;<a href="https://cs.famaf.unc.edu.ar/~pedro/home_en.html">https://cs.famaf.unc.edu.ar/~pedro/home_en.html</a>&gt;</p>



<a name="294822830"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822830" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822830">(Aug 23 2022 at 08:23)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Yes, both PIDE and build are using multiple threads by default, but the<br>
overall profile of the parallel application comes out quite differently. E.g.<br>
in PIDE proofs are only parallel in terminal positions (e.g. 'by').</p>
<p>You can also try this:</p>
<p>isabelle build -o parallel_proofs=0</p>
<p>I.e. multithreading is enabled, but proofs are not forked.</p>
<p>What is the timing output in your application of "isabelle build" with<br>
threads=1 vs. parallel_proofs=0?</p>
<p>Makarius</p>



<a name="294822903"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Building%20a%20session%20using%20isabelle%20vs%20jEdit/near/294822903" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Building.20a.20session.20using.20isabelle.20vs.20jEdit.html#294822903">(Aug 23 2022 at 08:23)</a>:</h4>
<p>From: Pedro Sánchez Terraf &lt;<a href="mailto:sterraf@famaf.unc.edu.ar">sterraf@famaf.unc.edu.ar</a>&gt;<br>
El 6/2/20 a las 06:52, Makarius escribió:</p>
<blockquote>
<p>Yes, both PIDE and build are using multiple threads by default, but the<br>
overall profile of the parallel application comes out quite differently. E.g.<br>
in PIDE proofs are only parallel in terminal positions (e.g. 'by').</p>
<p>You can also try this:</p>
<p>isabelle build -o parallel_proofs=0</p>
</blockquote>
<p>It also worked.</p>
<blockquote>
<p>I.e. multithreading is enabled, but proofs are not forked.</p>
<p>What is the timing output in your application of "isabelle build" with<br>
threads=1 vs. parallel_proofs=0?</p>
<p>threads=1:<br>
0:03:41 elapsed time, 0:03:36 cpu time, factor 0.98</p>
</blockquote>
<p>parallel_proofs=0:<br>
0:03:02 elapsed time, 0:03:47 cpu time, factor 1.25</p>
<p>So, this seems to be the right setting for me.</p>
<p>PST.-<br>
<a href="http://cs.famaf.unc.edu.ar/~pedro/home_en">cs.famaf.unc.edu.ar/~pedro/home_en</a> <br>
&lt;<a href="https://cs.famaf.unc.edu.ar/~pedro/home_en.html">https://cs.famaf.unc.edu.ar/~pedro/home_en.html</a>&gt;</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>