<html>
<head><meta charset="utf-8"><title>[isabelle] Congruence rules involving image · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Congruence.20rules.20involving.20image.html">[isabelle] Congruence rules involving image</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294749194"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Congruence%20rules%20involving%20image/near/294749194" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Congruence.20rules.20involving.20image.html#294749194">(Aug 22 2022 at 18:59)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi all,</p>
<p>Tobias and I have recently examined the two traditional simplifier<br>
congruence rules</p>
<p>INF_cong_simp:<br>
  A = B ⟹<br>
  (⋀x. x ∈ B =simp=&gt; C x = D x) ⟹<br>
  ⨅ (C <code> A) = ⨅ (D </code> B)</p>
<p>SUP_cong_simp:<br>
  A = B ⟹<br>
  (⋀x. x ∈ B =simp=&gt; C x = D x) ⟹<br>
  ⨆ (C <code> A) = ⨆ (D </code> B)</p>
<p>Those rules (in their particular specialization on sets named INTER and<br>
UNION) date back to those times when INTER and UNION were dedicated<br>
constants up until Isabelle2016.</p>
<p>The problem with those rules is that they destroy the potential redex ‹C<br>
<code> A›, preventing trivial rewrites like ‹C </code> insert x A = …›.</p>
<p>We would suggest to replace those by the more general</p>
<p>image_cong_simp:<br>
  M = N ⟹<br>
  (⋀x. x ∈ N =simp=&gt; f x = g x) ⟹<br>
  f <code> M = g </code> N</p>
<p>which essentially leaves out the leading big operator from any of the<br>
rules above.</p>
<p>After some experiments I think this can be done, and proofs in general<br>
take benefit.  But, depending on the application, the proof text<br>
migration can be involved.</p>
<p>For single entries the former situation can be (almost) restored by<br>
removing image_cong_simp as congruence rule.</p>
<p>I drop this note here</p>
<p>a) to excite feedback before going ahead</p>
<p>b) to set a memory anchor that potentially painstaking migration of<br>
future AFP entries would be simplified by using a declare … [cong del]<br>
workaround.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/ysNsu3iHEITUn3H_69BMPQfW/signature.asc">signature.asc</a></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>