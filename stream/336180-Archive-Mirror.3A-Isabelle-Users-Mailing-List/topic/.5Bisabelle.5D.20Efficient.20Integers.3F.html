<html>
<head><meta charset="utf-8"><title>[isabelle] Efficient Integers? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html">[isabelle] Efficient Integers?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294151753"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Efficient%20Integers%3F/near/294151753" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html#294151753">(Aug 18 2022 at 19:06)</a>:</h4>
<p>From: Thomas Genet &lt;<a href="mailto:Thomas.Genet@irisa.fr">Thomas.Genet@irisa.fr</a>&gt;<br>
Dear Isabelle Users,</p>
<p>I am looking for the equivalent of "Efficient_nat" but for integers, <br>
leading to exported code that uses machine integers rather than a term <br>
representation.</p>
<p>Best regards,</p>
<p>Thomas</p>



<a name="294151818"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Efficient%20Integers%3F/near/294151818" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html#294151818">(Aug 18 2022 at 19:06)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
I believe Library/Code_Integer is what you need to load.</p>
<p>Tobias</p>



<a name="294151832"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Efficient%20Integers%3F/near/294151832" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html#294151832">(Aug 18 2022 at 19:06)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
PS No, you don't get machine integers, that would be unsound. You get<br>
big integers, which are language specific. I assume that in most of the<br>
languages we support big integers are like machine integers plus some<br>
fixed overhead, as long as you stay in the machine integer range.</p>



<a name="294151846"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Efficient%20Integers%3F/near/294151846" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html#294151846">(Aug 18 2022 at 19:06)</a>:</h4>
<p>From: Thomas Genet &lt;<a href="mailto:Thomas.Genet@irisa.fr">Thomas.Genet@irisa.fr</a>&gt;<br>
Thanks a lot Tobias, this is even better that what I expected!</p>
<p>Thomas</p>



<a name="294151957"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Efficient%20Integers%3F/near/294151957" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html#294151957">(Aug 18 2022 at 19:07)</a>:</h4>
<p>From: Filip Maric &lt;<a href="mailto:filip@matf.bg.ac.rs">filip@matf.bg.ac.rs</a>&gt;<br>
Hello,</p>
<p>although it is generally unsound, is there still a simple way to get <br>
machine integers?</p>
<p>I have an application that uses only positive integers between 0 and 2^12 <br>
and the only operation performed on these numbers is bitwise disjunction <br>
(which leaves them in this range). In the logic, I used the nat type and <br>
define the bit-or using div/mod, but, of course, this is very slow when <br>
executed (proof checking takes almost half an hour since there is a lot <br>
computation involved). Since the range is bounded, there is a <br>
"meta-theoretic" argument that machine integers would not introduce <br>
unsoundness, so I wonder if it is possible to "cheat" and use them and <br>
instruct the code generator to call the target-language bit-or in place of <br>
my div/mod defined bit-or (I tried something like code_const "bitor" (SML <br>
"IntInf.orb ((_), (_))") (Haskell infixl 6 "(.|.)"), but it did not give <br>
expected efficiency since big integers are used). Evaluations are used <br>
within a "proof-by-evaluation" paradigm and I use the method "by eval".</p>
<p>I suppose the other option would be not to use nats but machine words in <br>
the logic level, but then the formalization would be a bit more <br>
complicated, and I not sure what theory I should start from (I assume <br>
there is such a formalization in the Library)?</p>
<p>Thank you very much,<br>
Filip</p>



<a name="294151992"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Efficient%20Integers%3F/near/294151992" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html#294151992">(Aug 18 2022 at 19:07)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
You can do anything you want, at your own risk, if you modify what the<br>
code generator turns a certain type into. See the code generation<br>
documentation and see what Code_Integer does.</p>
<p>Tobias</p>



<a name="294152018"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Efficient%20Integers%3F/near/294152018" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Efficient.20Integers.3F.html#294152018">(Aug 18 2022 at 19:07)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Filip,</p>
<p>if you really only need disjunction, I would recommend the following:</p>
<ul>
<li>
<p>define your own type for positive integers between 0 and 2^12;<br>
HOL/Library/Dlist.thy (among others) is a helpful example to glimpse from</p>
</li>
<li>
<p>setup code generation for that type as sketched above.</p>
</li>
</ul>
<p>There is a formalization of bit-arithmetic in HOL/Word, but it is not<br>
very suitable to setup a customary code generation for specific target<br>
languages because the bit length is encoded into a type argument, a<br>
concept which cannot be mapped straighforwardly to target languages.</p>
<p>Hope this helps,<br>
    Florian<br>
<a href="/user_uploads/14278/gu1UNyfhyI8gNWoJDj8hORRs/signature.asc">signature.asc</a></p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>