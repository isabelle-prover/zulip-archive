<html>
<head><meta charset="utf-8"><title>[isabelle] Emacs 23/PG 4 problems on Mac · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html">[isabelle] Emacs 23/PG 4 problems on Mac</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294134751"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134751" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134751">(Aug 18 2022 at 17:32)</a>:</h4>
<p>From: Christoph Sprenger &lt;<a href="mailto:sprenger@inf.ethz.ch">sprenger@inf.ethz.ch</a>&gt;<br>
Hi,</p>
<p>I have recently installed the Isabelle 2011 on Mac Application, which  <br>
includes</p>
<p>Carbon Emacs 23.2, and<br>
   ProofGeneral 4.1pre101216</p>
<p>(before I was using Isabelle 2009-1 with CE 22.3 and PG 3.7.1.1).  <br>
There a number of "features" of this combo that tend to drive me nuts.  <br>
These are:</p>
<p>1) The Emacs Meta modifier is bound to the Option key instead of the  <br>
Command key.</p>
<p>2) The Delete key acts like Backspace.</p>
<p>3) When I point the mouse on a processed part of the input it becomes  <br>
highlighted in yellow and displays a "tooltip" frame with info about  <br>
the underlying object. Inside proofs it shows the proof state at the  <br>
mouse position. While this looks like a cool new feature in PG4, I  <br>
would like to be able to turn both the highlighting and the "tooltips"  <br>
off, when I do not need them. However, I was unable to find an option  <br>
that achieves this.</p>
<p>4) There seem to be some bugs in PG 4 by which</p>
<ul>
<li>
<p>the command processing gets out of sync (previously rare), indicated  <br>
by the highlighting ending in the middle of a syntactic token or input  <br>
sentence,</p>
</li>
<li>
<p>the highlighting is not properly removed and some bits of processed  <br>
input stay yellow, after the mouse is moved away.</p>
</li>
</ul>
<p>1) and 2) seem to be PG-independent "features" of CE 23.2 (does my CE  <br>
22 config possibly disturb CE 23?), while 3) and 4) are PG-specific.   <br>
Point 4) is less of a problem than the others, since it does not occur  <br>
very often.</p>
<p>I would greatly appreciate any help with these issues.</p>
<p>Best wishes,<br>
Christoph</p>



<a name="294134787"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134787" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134787">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@gmail.com">jasmin.blanchette@gmail.com</a>&gt;<br>
Hi Christoph,</p>
<blockquote>
<p>I would greatly appreciate any help with these issues.</p>
</blockquote>
<p>I ran into much the same issues, plus some more, including</p>
<p>5) Windows that appear to prompt the user (e.g., "Do you want to save?") sometimes had absolutely ridiculous geometries, like 1000000 pixels wide. They were so wide that all I saw was a gray panel in the middle of the screen, which I couldn't close (the close button was like 500000 pixels to the left of the screen). I had to kill the app. This happened often enough to make the application totally unusable.</p>
<p>This convinced me very quickly to go back to the "good old" Aquamacs. Not that I'm a big fan of the beast, but at least I know its bugs and I'm used to work around them.</p>
<p>In my .bashrc file, I have the lines</p>
<p>export EMACS=/Applications/Isabelle2009-2.app/Contents/Resources/Emacs.app/Contents/MacOS/Emacs<br>
alias Isabelle="/Applications/Isabelle2011.app/Isabelle/bin/isabelle emacs -p $EMACS"</p>
<p>Then I can launch Isabelle2011 with the Aquamacs from Isabelle2009-2 by entering "Isabelle" on the command line.</p>
<p>Jasmin</p>



<a name="294134796"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134796" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134796">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:brianh@cs.pdx.edu">brianh@cs.pdx.edu</a>&gt;<br>
On Tue, Apr 12, 2011 at 5:38 AM, Christoph Sprenger<br>
&lt;<a href="mailto:sprenger@inf.ethz.ch">sprenger@inf.ethz.ch</a>&gt; wrote:</p>
<blockquote>
<p>Hi,</p>
<p>I have recently installed the Isabelle 2011 on Mac Application, which<br>
includes</p>
<p>Carbon Emacs 23.2, and<br>
 ProofGeneral 4.1pre101216<br>
[...]<br>
2) The Delete key acts like Backspace.</p>
</blockquote>
<p>This one at least is not too hard to fix. You will need to customize<br>
the option "normal-erase-is-backspace", which you can do using</p>
<p>Options &gt; Customize Emacs &gt; Specific Option...</p>
<p>and typing in "normal-erase-is-backspace". Try setting the value to<br>
"On", and see if this solves your problem.</p>
<p>I also have a related-but-different problem with delete vs. backspace<br>
in the same version of ProofGeneral, but on Linux (Ubuntu) with GNU<br>
Emacs 23.2.1. The delete key normally works properly, doing<br>
forward-delete; but the symbol input shortcuts cause problems. For<br>
example, if I have just typed "-" or "--" (which are prefixes of<br>
"--&gt;", the shortcut for the \&lt;longrightarrow&gt; symbol), then my<br>
"delete" key works like "backspace" instead.</p>
<p>Interestingly, Carbon Emacs seems to do the right thing in this<br>
situation once I have "normal-erase-is-backspace" set properly, but<br>
GNU Emacs on Linux gets it wrong no matter how<br>
"normal-erase-is-backspace" is set.</p>
<blockquote>
<p>3) When I point the mouse on a processed part of the input it becomes<br>
highlighted in yellow and displays a "tooltip" frame with info about the<br>
underlying object. Inside proofs it shows the proof state at the mouse<br>
position. While this looks like a cool new feature in PG4, I would like to<br>
be able to turn both the highlighting and the "tooltips" off, when I do not<br>
need them. However, I was unable to find an option that achieves this.</p>
</blockquote>
<p>I would also like to be able to turn this feature off.</p>
<ul>
<li>Brian</li>
</ul>



<a name="294134814"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134814" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134814">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: David Aspinall &lt;<a href="mailto:David.Aspinall@ed.ac.uk">David.Aspinall@ed.ac.uk</a>&gt;<br>
<a href="http://tinyurl.com/pgchap3">http://tinyurl.com/pgchap3</a></p>



<a name="294134821"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134821" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134821">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: David Aspinall &lt;<a href="mailto:David.Aspinall@ed.ac.uk">David.Aspinall@ed.ac.uk</a>&gt;</p>
<blockquote>
<p>4) There seem to be some bugs in PG 4 by which<br>
- the command processing gets out of sync (previously rare), indicated by the highlighting ending in the middle of a syntactic token or input sentence,</p>
</blockquote>
<p>If you can repeat this, please report the bug at <a href="http://proofgeneral.inf.ed.ac.uk/trac">http://proofgeneral.inf.ed.ac.uk/trac</a></p>
<blockquote>
<ul>
<li>the highlighting is not properly removed and some bits of processed input stay yellow, after the mouse is moved away.</li>
</ul>
</blockquote>
<p>Sounds likely to be a Emacs display engine bug rather than PG.  Try searching/reporting at <br>
<a href="http://debbugs.gnu.org/">http://debbugs.gnu.org/</a></p>
<ul>
<li>David</li>
</ul>



<a name="294134842"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134842" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134842">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: Alexander Krauss &lt;<a href="mailto:krauss@in.tum.de">krauss@in.tum.de</a>&gt;<br>
This didn't help me. As I understand it, switching off "Full Annotation" <br>
should prevent saving (and displaying) the prover output. But even when <br>
disabled, I still get the tooltips, and they normally sit right in front <br>
of the text I am trying to read, forcing me to move the mouse.</p>
<p>As a workaround, I discovered that turning off "tooltip-mode" removes <br>
the gigantic tooltips and instead displays the text in the minibuffer, <br>
which is less intrusive.</p>
<p>The yellow highlight can be removed by customizing the appropriate face. <br>
Unfortunately, the syntax highlighting of the normal text (foreground <br>
colour) still disappears on mouseover...</p>
<p>Alex</p>



<a name="294134849"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134849" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134849">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: David Aspinall &lt;<a href="mailto:David.Aspinall@ed.ac.uk">David.Aspinall@ed.ac.uk</a>&gt;</p>
<blockquote>
<p>This didn't help me. As I understand it, switching off "Full Annotation" should prevent saving (and displaying) the prover output. But even when disabled, I still get the tooltips, and they normally sit right in front of the text I am trying to read, forcing me to move the mouse.</p>
</blockquote>
<p>I see your point -- when "full annotation" is switched off, they're only added for incrementally processed steps and won't be removed from already processed portions of the script.  It might be better to have an option to prevent adding them altogether.</p>
<blockquote>
<p>As a workaround, I discovered that turning off "tooltip-mode" removes the gigantic tooltips and instead displays the text in the minibuffer, which is less intrusive.</p>
</blockquote>
<p>You can also customize tooltip-delay and tooltip-short-delay.  </p>
<p>Or use your finger to point at what you're reading, 8-).</p>
<blockquote>
<p>The yellow highlight can be removed by customizing the appropriate face. Unfortunately, the syntax highlighting of the normal text (foreground colour) still disappears on mouseover...</p>
</blockquote>
<p>This is by poor/old design in the Emacs display engine, which replaces (rather than merges) the mouse-over face with the underlying one which doesn't work well with font lock.  You see the same thing in Emacs native modes, e.g. Info.  I reported it as an Emacs bug a while ago.</p>
<ul>
<li>D.</li>
</ul>



<a name="294134870"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134870" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134870">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I have something like this in my <br>
$ISABELLE_HOME_USER/etc/proofgeneral-settings.el, but you can also use the <br>
customization menu in Emacs:</p>
<p>(setq mac-option-modifier nil)</p>
<p>Makarius</p>



<a name="294134894"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134894" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134894">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: Christoph Sprenger &lt;<a href="mailto:sprenger@inf.ethz.ch">sprenger@inf.ethz.ch</a>&gt;<br>
Dear Brian and Makarius,</p>
<p>thank you for your helpful suggestions regarding the Emacs-specific  <br>
problems 1) and 2).</p>
<p>@Brian regarding backspace problem:<br>
Setting normal-erase-is-backspace to On solves my problem.</p>
<p>@Makarius regarding modifier keys:<br>
Your command switches off the interpretation of the Option key by  <br>
Emacs, which is good. But I also and had to set mac-command-modifier  <br>
to meta in order to restore things to "normal". I did this via the  <br>
menus, so my .emacs now contains</p>
<p>(custom-set-variables<br>
   ...<br>
  '(ns-alternate-modifier (quote none))<br>
  '(ns-command-modifier (quote meta))<br>
   ...<br>
)</p>
<p>Here, ... denotes other settings and "ns-command-modifier" is a  <br>
synonym for "mac-command-modifier" and similarly for the other.</p>
<p>Best,<br>
Christoph</p>



<a name="294134913"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Emacs%2023/PG%204%20problems%20on%20Mac/near/294134913" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Emacs.2023.2FPG.204.20problems.20on.20Mac.html#294134913">(Aug 18 2022 at 17:33)</a>:</h4>
<p>From: Christoph Sprenger &lt;<a href="mailto:sprenger@inf.ethz.ch">sprenger@inf.ethz.ch</a>&gt;</p>
<blockquote>
<blockquote>
<p>This didn't help me. As I understand it, switching off "Full  <br>
Annotation" should prevent saving (and displaying) the prover  <br>
output. But even when disabled, I still get the tooltips, and they  <br>
normally sit right in front of the text I am trying to read,  <br>
forcing me to move the mouse.</p>
</blockquote>
<p>I see your point -- when "full annotation" is switched off, they're  <br>
only added for incrementally processed steps and won't be removed  <br>
from already processed portions of the script.  It might be better  <br>
to have an option to prevent adding them altogether.</p>
</blockquote>
<p>Exactly.</p>
<blockquote>
<blockquote>
<p>As a workaround, I discovered that turning off "tooltip-mode"  <br>
removes the gigantic tooltips and instead displays the text in the  <br>
minibuffer, which is less intrusive.</p>
</blockquote>
<p>You can also customize tooltip-delay and tooltip-short-delay.</p>
<p>Or use your finger to point at what you're reading, 8-).</p>
</blockquote>
<p>I have set these two variables to a longer delay (5s) for now, which  <br>
helps.</p>
<blockquote>
<blockquote>
<p>The yellow highlight can be removed by customizing the appropriate  <br>
face. Unfortunately, the syntax highlighting of the normal text  <br>
(foreground colour) still disappears on mouseover...</p>
</blockquote>
<p>This is by poor/old design in the Emacs display engine, which  <br>
replaces (rather than merges) the mouse-over face with the  <br>
underlying one which doesn't work well with font lock.  You see the  <br>
same thing in Emacs native modes, e.g. Info.  I reported it as an  <br>
Emacs bug a while ago.</p>
</blockquote>
<p>I have currently set the following variables</p>
<p>proof-command-mouse-highlight-face<br>
  proof-mouse-highlight-face<br>
  proof-region-mouse-highlight-face</p>
<p>to the same color (lightblue in my case) as</p>
<p>proof-locked-face</p>
<p>In this way, the previous MTV-style flickering while moving the mouse  <br>
is reduced to the disappearing syntax highlighting, which I find less  <br>
distracting.</p>
<p>Thank you all for your helpful hints.</p>
<p>Best,<br>
Christoph</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>