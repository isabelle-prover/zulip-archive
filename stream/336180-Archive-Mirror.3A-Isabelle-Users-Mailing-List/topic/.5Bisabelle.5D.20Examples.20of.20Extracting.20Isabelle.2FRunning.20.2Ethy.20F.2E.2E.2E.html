<html>
<head><meta charset="utf-8"><title>[isabelle] Examples of Extracting Isabelle/Running .thy F... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Examples.20of.20Extracting.20Isabelle.2FRunning.20.2Ethy.20F.2E.2E.2E.html">[isabelle] Examples of Extracting Isabelle/Running .thy F...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294729999"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Examples%20of%20Extracting%20Isabelle/Running%20.thy%20F.../near/294729999" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Examples.20of.20Extracting.20Isabelle.2FRunning.20.2Ethy.20F.2E.2E.2E.html#294729999">(Aug 22 2022 at 17:01)</a>:</h4>
<p>From: Mario Alvarez &lt;<a href="mailto:mmalvare@eng.ucsd.edu">mmalvare@eng.ucsd.edu</a>&gt;<br>
Hi Isabelle-Users,</p>
<p>I'm currently trying to build a compiler in Isabelle, and trying to<br>
determine what the best way to run the compiler is (i.e., to use the code<br>
I've developed in Isabelle to transform concrete compiler inputs to<br>
concrete compiler outputs, ideally using the command line.)</p>
<p>My understanding is that there are two (maybe more) ways to try to go about<br>
doing this. One is what CompCert did - using an extraction mechanism to<br>
build an ML version of the compiler, which can then be run (one downside to<br>
this is that one also needs to implement a parser for input - the<br>
equivalent of CompCert's <em>clightgen</em> utility).</p>
<p>The other is what was done in this paper<br>
&lt;<a href="https://www.microsoft.com/en-us/research/publication/coq-worlds-best-macro-assembler/">https://www.microsoft.com/en-us/research/publication/coq-worlds-best-macro-assembler/</a>&gt;,<br>
where the proof assistant (again Coq) itself acts as the compiler, and the<br>
output of running Coq files <em>as scripts</em> yields the desired output. In this<br>
instance, Coq takes care of all the difficulties of parsing the input,<br>
meaning the user only has to write programs inside the context of Coq ".v"<br>
files.</p>
<p>I am attempting to do something similar to the second use-case for<br>
Isabelle. However, I am struggling to figure out what the right way to do<br>
this in Isabelle. Do you think it would be better to use extraction, or is<br>
there a way I can run my .thy files as scripts to produce output? As far as<br>
options for "running" .thy files, I can only see the "isabelle process"<br>
command, which does not seem to be well documented and seems to struggle<br>
with resolving dependencies.</p>
<p>Any good resources on ways to do this in Isabelle would be much<br>
appreciated. Currently, the only way I have of running the compiler is in<br>
JEdit, and I would really very much like a command-line interface for it.</p>
<p>Best,<br>
Mario</p>



<a name="294731023"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Examples%20of%20Extracting%20Isabelle/Running%20.thy%20F.../near/294731023" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Examples.20of.20Extracting.20Isabelle.2FRunning.20.2Ethy.20F.2E.2E.2E.html#294731023">(Aug 22 2022 at 17:07)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 26/03/18 22:08, Mario Alvarez wrote:</p>
<blockquote>
<p>Hi Isabelle-Users,</p>
<p>I'm currently trying to build a compiler in Isabelle, and trying to<br>
determine what the best way to run the compiler is (i.e., to use the code<br>
I've developed in Isabelle to transform concrete compiler inputs to<br>
concrete compiler outputs, ideally using the command line.)</p>
<p>My understanding is that there are two (maybe more) ways to try to go about<br>
doing this. One is what CompCert did - using an extraction mechanism to<br>
build an ML version of the compiler, which can then be run (one downside to<br>
this is that one also needs to implement a parser for input - the<br>
equivalent of CompCert's <em>clightgen</em> utility).</p>
<p>The other is what was done in this paper<br>
&lt;<a href="https://www.microsoft.com/en-us/research/publication/coq-worlds-best-macro-assembler/">https://www.microsoft.com/en-us/research/publication/coq-worlds-best-macro-assembler/</a>&gt;,<br>
where the proof assistant (again Coq) itself acts as the compiler, and the<br>
output of running Coq files <em>as scripts</em> yields the desired output. In this<br>
instance, Coq takes care of all the difficulties of parsing the input,<br>
meaning the user only has to write programs inside the context of Coq ".v"<br>
files.</p>
<p>I am attempting to do something similar to the second use-case for<br>
Isabelle. However, I am struggling to figure out what the right way to do<br>
this in Isabelle. Do you think it would be better to use extraction, or is<br>
there a way I can run my .thy files as scripts to produce output? As far as<br>
options for "running" .thy files, I can only see the "isabelle process"<br>
command, which does not seem to be well documented and seems to struggle<br>
with resolving dependencies.</p>
</blockquote>
<p>This thread is still open and unanswered, as far as I can see. After<br>
reading the text two times, I can only guess what you are trying to do.</p>
<p>Although Coq and Isabelle have common heritage, and a lot of<br>
similarities until today, there is a cultural gap to be bridged and one<br>
of different terminology. E.g. "code extraction" in Coq (usually from<br>
proofs) becomes "code generation" in Isabelle (from specifications).</p>
<p>Generally, Isabelle is more open and supports more languages within the<br>
same framework: a standard approach is to use Isabelle/ML -- the meta<br>
language around the logical environment -- to do parsing and I/O, but I<br>
have occasionally seen people using Isabelle/HOL specifications as a<br>
starting point and then generate ML or Haskell from it. (Maybe the<br>
IsaFoR project can server as an example for that approach:<br>
<a href="http://cl-informatik.uibk.ac.at/isafor">http://cl-informatik.uibk.ac.at/isafor</a>).</p>
<p>As long as you stay inside Isabelle, everything happens in theory files<br>
within a session (even Isabelle/ML). This explains why the documentation<br>
of "isabelle process" in the "system" manual is relatively terse about<br>
what you can do with it: loading theory files is the main operation<br>
here. The same manual also documents "isabelle build" in chapter 2 --<br>
that is the standard way to run Isabelle sessions without GUI front-end.<br>
In principle, running an Isabelle session can do whatever you like, with<br>
the help of some Isabelle/ML snippets around your formalization, but it<br>
is going to be a bit heavy. A more light-weight way is the forthcoming<br>
Isabelle server, see also<br>
<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2018-March/msg00088.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2018-March/msg00088.html</a></p>
<blockquote>
<p>Any good resources on ways to do this in Isabelle would be much<br>
appreciated. Currently, the only way I have of running the compiler is in<br>
JEdit, and I would really very much like a command-line interface for it.</p>
</blockquote>
<p>This already sounds quite concrete. Are your sources available<br>
somewhere? It would help to get an idea what are the missing bits.</p>
<p>Makarius</p>



<a name="294731891"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Examples%20of%20Extracting%20Isabelle/Running%20.thy%20F.../near/294731891" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Examples.20of.20Extracting.20Isabelle.2FRunning.20.2Ethy.20F.2E.2E.2E.html#294731891">(Aug 22 2022 at 17:12)</a>:</h4>
<p>From: Mario Alvarez &lt;<a href="mailto:mmalvare@eng.ucsd.edu">mmalvare@eng.ucsd.edu</a>&gt;<br>
Hi Makarius,</p>
<p>Thanks for your response. Currently I am using extraction to OCaml, which<br>
has been working OK so far for my purposes - in other words, switching from<br>
the second approach I described in my prior email to the first one. (I've<br>
built unverified OCaml shims to handle the I/O).</p>
<p>Also, thank you for the hint about IsaFoR as an example of using<br>
Isabelle/ML to achieve these goals. I think for now using code extraction<br>
to OCaml (I don't mean synthesizing code from proofs, I just mean<br>
translating executable functions in Isabelle/HOL to executable OCaml<br>
functions) will be a good approach for me as it will let people install my<br>
compiler without installing all of Isabelle. I'll also take a look at the<br>
Isabelle server to see if it meets any of my needs.</p>
<p>If you'd like to take a look at my sources, they are here (in a<br>
subdirectory of my fork of Eth-Isabelle):<br>
<a href="https://github.com/mmalvarez/eth-isabelle/tree/master/elle">https://github.com/mmalvarez/eth-isabelle/tree/master/elle</a><br>
(FourLExtract.thy and <a href="http://FourLShim.ml">FourLShim.ml</a> are probably the most relevant files).</p>
<p>Also, thanks for taking the effort to read and understand my last email<br>
despite the ambiguities. As I get more acculturated to the Isabelle way of<br>
doing and discussing things, hopefully I can improve my communications.</p>
<p>Many thanks,<br>
Mario</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>