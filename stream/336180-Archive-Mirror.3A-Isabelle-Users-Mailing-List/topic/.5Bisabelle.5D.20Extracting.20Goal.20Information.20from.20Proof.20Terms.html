<html>
<head><meta charset="utf-8"><title>[isabelle] Extracting Goal Information from Proof Terms · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Extracting.20Goal.20Information.20from.20Proof.20Terms.html">[isabelle] Extracting Goal Information from Proof Terms</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294640106"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Extracting%20Goal%20Information%20from%20Proof%20Terms/near/294640106" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Extracting.20Goal.20Information.20from.20Proof.20Terms.html#294640106">(Aug 22 2022 at 09:49)</a>:</h4>
<p>From: Colin Farquhar &lt;<a href="mailto:cif30@hw.ac.uk">cif30@hw.ac.uk</a>&gt;<br>
Dear Isabelle users,</p>
<p>Im currently working on something which requires proofs constructed in<br>
Isabelle to be translated into Prolog in order to work with a machine<br>
learning tool. After some testing I have found that using proof terms is the<br>
easiest way to find the structure of a proof and which tactics are being<br>
used and in which order, but I also need the details of the goals the<br>
tactics are applied to.</p>
<p>For example, take the following lemma:</p>
<p>lemma a: A /\ B à B /\ A</p>
<p>apply (rule impI)</p>
<p>apply (erule conjE)</p>
<p>apply (rule conjI)</p>
<p>apply assumption</p>
<p>apply assumption</p>
<p>done</p>
<p>Using full_prf a gives me the proof term, while using val pterm_a =<br>
Proofterm.Proof_of (Proofterm.strip_thm (Thm.proof_body_of @{thm a})) gives<br>
a detailed description. The code I have written already provides a list of<br>
tactics in the order they are used, where each nested list contains the<br>
tactic(s) applied to the subgoal(s) generated by the previous tactic, eg.<br>
here the list would be [impI [conje [conjI [assumption,assumption]]]]. Im<br>
trying to get something similar for goals where each nested list contains<br>
the subgoal(s) generated by applying a tactic to the previous goal ( eg. [A<br>
/\ B à B /\ A [A /\ B è B /\ A [ A è B è B /\ A [A è B è B, A è B è A]]]] )<br>
which I can then map to the list of tactics to get a list of (tactic, goal)<br>
pairs. The problem is, I cant find a way to extract the details of the<br>
subgoals in the middle of the proof. Is this even possible using proof terms<br>
in this way? If so, can anyone help me with where I can find the information<br>
Im looking for?</p>
<p>Thanks,</p>
<p>Colin Farquhar</p>
<hr>
<p>We invite research leaders and ambitious early career researchers to <br>
join us in leading and driving research in key inter-disciplinary themes. <br>
Please see <a href="http://www.hw.ac.uk/researchleaders">www.hw.ac.uk/researchleaders</a> for further information and how<br>
to apply.</p>
<p>Heriot-Watt University is a Scottish charity<br>
registered under charity number SC000278.</p>



<a name="294644682"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Extracting%20Goal%20Information%20from%20Proof%20Terms/near/294644682" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Extracting.20Goal.20Information.20from.20Proof.20Terms.html#294644682">(Aug 22 2022 at 10:19)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I am not sure if you've got any further in this quest in the meantime.</p>
<p>Proof terms are sometimes useful to see the foundational reasoning going <br>
on deep in the bottom of the inference engine, but they are hard to work <br>
with productively.  For two reasons:</p>
<p>(1) Proof terms are very expensive for anything but rather small<br>
     applications of Isabelle/HOL.</p>
<p>(2) Analyzing proof terms is relatively difficult, because most of the<br>
     original resoning structure is lost; in particular, the original<br>
     tactical goal state is no longer there, as you have already noticed.</p>
<p>So we are back to what "proofs constructed in Isabelle to be translated <br>
into Prolog" really means.  Does it refer to arbitrary proofs found in the <br>
wild of actual applications, lets say the Archive of formal Proof?  Or <br>
does it mean some specific proof examples that you construct yourself?</p>
<p>Moreover, when you say "tactic" above, I guess that you mean "theorem". <br>
Is this correct?</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>