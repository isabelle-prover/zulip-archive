<html>
<head><meta charset="utf-8"><title>[isabelle] Formal BNF grammar (possibly for parser genera... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20BNF.20grammar.20.28possibly.20for.20parser.20genera.2E.2E.2E.html">[isabelle] Formal BNF grammar (possibly for parser genera...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294830414"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Formal%20BNF%20grammar%20%28possibly%20for%20parser%20genera.../near/294830414" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20BNF.20grammar.20.28possibly.20for.20parser.20genera.2E.2E.2E.html#294830414">(Aug 23 2022 at 09:19)</a>:</h4>
<p>From: Alex Meyer &lt;<a href="mailto:alex153@outlook.lv">alex153@outlook.lv</a>&gt;<br>
Hello!</p>
<p>I am trying to ignite my framework (in very early, experimental stage, I still don’t know whether I can succeed) for program synthesis/algorithm synthesis and all of that reduces to the generation of the thy files, like one for the insertion sort algorithm <a href="https://www.isa-afp.org/browser_info/current/AFP/Imperative_Insertion_Sort/Imperative_Insertion_Sort.html">https://www.isa-afp.org/browser_info/current/AFP/Imperative_Insertion_Sort/Imperative_Insertion_Sort.html</a> (from <a href="https://www.isa-afp.org/entries/Imperative_Insertion_Sort.html">https://www.isa-afp.org/entries/Imperative_Insertion_Sort.html</a>). For that to happen I am going to try to read thy files, translate concrete syntax to AST, manipulate, translate from AST to concrete Isabelle syntax and write back thy files. To set up such infrastructure more or less automatically, the BNF files for the HOL/Isar grammar should be available. I am trying to find them, so far I have found:</p>
<p><a href="https://isabelle.in.tum.de/dist/Isabelle2020/doc/logics.pdf">https://isabelle.in.tum.de/dist/Isabelle2020/doc/logics.pdf</a></p>
<p>Fig. 2.2. is HOL grammar (inner grammar)</p>
<p><a href="https://isabelle.in.tum.de/dist/Isabelle2020/doc/isar-ref.pdf">https://isabelle.in.tum.de/dist/Isabelle2020/doc/isar-ref.pdf</a></p>
<p>Fig. 2.2 is Isabelle outer grammar, Isar reference contains lot of grammar rules apart from this picture – I wonder – whether they are available as one file.</p>
<p>Repository <a href="https://isabelle-dev.sketis.net/source/isabelle/browse/default/src/HOL/">https://isabelle-dev.sketis.net/source/isabelle/browse/default/src/HOL/</a> (and others) contain BNF_... files that may hint to Backus-Naur Form, but I have heard that BNF can be abbreviation for something else too in Isabelle context.</p>
<p>So – maybe there is some set of complete BNF grammar files for thy files, than contain both inner and outer syntax. E.g. there is <a href="https://github.com/antlr/grammars-v4/blob/master/fol/fol.g4">https://github.com/antlr/grammars-v4/blob/master/fol/fol.g4</a> grammar which ANTLR 4 uses for generation of Java parser for FOL (classical syntax), and from that parser I can easily build processors that extracts AST from the parsed FOL text. I would like to gather full grammar for thy files and use it with ANTLR to generate Java parser for thy files. And then I can write AST manipulate code in Java.</p>
<p>___Is it achievable task, are there similar efforts and are there complete grammars for thy files?___</p>
<p>I guess that already found grammars (HOL and Isar outers syntax) is sufficient for me to continue my effort, but maybe there are some roadblocks ahead?</p>
<p>I have heard about Czech efforts to set up neural theorem provers and possibly they use some custom thy parsers and thy AST manipulators as well.</p>
<p>Thanks, Alex</p>
<p>[https://ipmcdn.avast.com/images/icons/icon-envelope-tick-green-avg-v1.png]&lt;<a href="http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail">http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail</a>&gt;     Virus-free. www.avg.com&lt;<a href="http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail">http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail</a>&gt;</p>



<a name="294830425"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Formal%20BNF%20grammar%20%28possibly%20for%20parser%20genera.../near/294830425" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20BNF.20grammar.20.28possibly.20for.20parser.20genera.2E.2E.2E.html#294830425">(Aug 23 2022 at 09:19)</a>:</h4>
<p>From: Simon Wimmer &lt;<a href="mailto:wimmersimon@gmail.com">wimmersimon@gmail.com</a>&gt;<br>
---------- Forwarded message ---------<br>
Von: Simon Wimmer &lt;<a href="mailto:wimmersimon@gmail.com">wimmersimon@gmail.com</a>&gt;<br>
Date: Do., 9. Juli 2020 um 10:04 Uhr<br>
Subject: Re: [isabelle] Formal BNF grammar (possibly for parser generation,<br>
e.g. with antlr 4) for Isar/HOL, for thy files?<br>
To: Alex Meyer &lt;<a href="mailto:alex153@outlook.lv">alex153@outlook.lv</a>&gt;</p>
<p>Hi Alex,</p>
<p>there is no such thing as a BNF for Isabelle's inner or outer syntax.<br>
To be able to fully parse theory files, you need to have loaded the full<br>
context information by checking the underlying stack of theories first.<br>
This means that theory files can only really be parsed by Isabelle.</p>
<p>You can get various versions of the "AST" by hooking into Isabelle/Scala or<br>
using the "isabelle dump" tool.<br>
However, it seems to me that you have in mind would work much better as a<br>
fancy parser for inner syntax.<br>
You can find examples of this in these AFP entries:</p>
<ul>
<li><a href="https://www.isa-afp.org/entries/Isabelle_C.html">https://www.isa-afp.org/entries/Isabelle_C.html</a></li>
<li><a href="https://www.isa-afp.org/entries/IMP2.htm">https://www.isa-afp.org/entries/IMP2.htm</a><br>
&lt;<a href="https://www.isa-afp.org/entries/IMP2.html">https://www.isa-afp.org/entries/IMP2.html</a>&gt;<br>
Both of them deal with program verification.</li>
</ul>
<p>Simon</p>
<p>Am Do., 9. Juli 2020 um 09:44 Uhr schrieb Alex Meyer &lt;<a href="mailto:alex153@outlook.lv">alex153@outlook.lv</a>&gt;:</p>
<blockquote>
<p>Hello!</p>
<p>I am trying to ignite my framework (in very early, experimental stage, I<br>
still don’t know whether I can succeed) for program synthesis/algorithm<br>
synthesis and all of that reduces to the generation of the thy files, like<br>
one for the insertion sort algorithm<br>
<a href="https://www.isa-afp.org/browser_info/current/AFP/Imperative_Insertion_Sort/Imperative_Insertion_Sort.html">https://www.isa-afp.org/browser_info/current/AFP/Imperative_Insertion_Sort/Imperative_Insertion_Sort.html</a><br>
(from <a href="https://www.isa-afp.org/entries/Imperative_Insertion_Sort.html">https://www.isa-afp.org/entries/Imperative_Insertion_Sort.html</a>).<br>
For that to happen I am going to try to read thy files, translate concrete<br>
syntax to AST, manipulate, translate from AST to concrete Isabelle syntax<br>
and write back thy files. To set up such infrastructure more or less<br>
automatically, the BNF files for the HOL/Isar grammar should be available.<br>
I am trying to find them, so far I have found:</p>
<p><a href="https://isabelle.in.tum.de/dist/Isabelle2020/doc/logics.pdf">https://isabelle.in.tum.de/dist/Isabelle2020/doc/logics.pdf</a></p>
<p>Fig. 2.2. is HOL grammar (inner grammar)</p>
<p><a href="https://isabelle.in.tum.de/dist/Isabelle2020/doc/isar-ref.pdf">https://isabelle.in.tum.de/dist/Isabelle2020/doc/isar-ref.pdf</a></p>
<p>Fig. 2.2 is Isabelle outer grammar, Isar reference<br>
contains lot of grammar rules apart from this picture – I wonder – whether<br>
they are available as one file.</p>
<p>Repository<br>
<a href="https://isabelle-dev.sketis.net/source/isabelle/browse/default/src/HOL/">https://isabelle-dev.sketis.net/source/isabelle/browse/default/src/HOL/</a><br>
(and others) contain BNF_... files that may hint to Backus-Naur Form, but I<br>
have heard that BNF can be abbreviation for something else too in Isabelle<br>
context.</p>
<p>So – maybe there is some set of complete BNF grammar files for thy files,<br>
than contain both inner and outer syntax. E.g. there is<br>
<a href="https://github.com/antlr/grammars-v4/blob/master/fol/fol.g4">https://github.com/antlr/grammars-v4/blob/master/fol/fol.g4</a> grammar which<br>
ANTLR 4 uses for generation of Java parser for FOL (classical syntax), and<br>
from that parser I can easily build processors that extracts AST from the<br>
parsed FOL text. I would like to gather full grammar for thy files and use<br>
it with ANTLR to generate Java parser for thy files. And then I can write<br>
AST manipulate code in Java.</p>
<p>___Is it achievable task, are there similar efforts and are there complete<br>
grammars for thy files?___</p>
<p>I guess that already found grammars (HOL and Isar outers syntax) is<br>
sufficient for me to continue my effort, but maybe there are some<br>
roadblocks ahead?</p>
<p>I have heard about Czech efforts to set up neural theorem provers and<br>
possibly they use some custom thy parsers and thy AST manipulators as well.</p>
<p>Thanks, Alex</p>
<p>[https://ipmcdn.avast.com/images/icons/icon-envelope-tick-green-avg-v1.png<br>
]&lt;<br>
<a href="http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail">http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail</a>&gt;<br>
   Virus-free. www.avg.com&lt;<br>
<a href="http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail">http://www.avg.com/email-signature?utm_medium=email&amp;utm_source=link&amp;utm_campaign=sig-email&amp;utm_content=webmail</a><br>
&gt;</p>
</blockquote>



<a name="294830437"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Formal%20BNF%20grammar%20%28possibly%20for%20parser%20genera.../near/294830437" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20BNF.20grammar.20.28possibly.20for.20parser.20genera.2E.2E.2E.html#294830437">(Aug 23 2022 at 09:19)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
People are also generally discouraged from generating .thy files<br>
textually. It is usually a better approach to write an Isabelle command<br>
that does what the generated theory file is supposed to do (definitions,<br>
proofs, etc.) in ML.</p>
<p>However, generating small snippets (like Sledgehammer does) might be<br>
okay; maybe that's what you were thinking of.</p>
<p>Manuel</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>