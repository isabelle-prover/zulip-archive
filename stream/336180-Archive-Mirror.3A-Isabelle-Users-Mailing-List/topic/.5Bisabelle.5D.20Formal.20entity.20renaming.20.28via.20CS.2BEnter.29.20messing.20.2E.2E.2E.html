<html>
<head><meta charset="utf-8"><title>[isabelle] Formal entity renaming (via CS+Enter) messing ... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20entity.20renaming.20.28via.20CS.2BEnter.29.20messing.20.2E.2E.2E.html">[isabelle] Formal entity renaming (via CS+Enter) messing ...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294722640"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Formal%20entity%20renaming%20%28via%20CS%2BEnter%29%20messing%20.../near/294722640" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20entity.20renaming.20.28via.20CS.2BEnter.29.20messing.20.2E.2E.2E.html#294722640">(Aug 22 2022 at 16:22)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Hi all, </p>
<p>I always thought that the feature "Select all occurrences of formal<br>
entity at caret" (CS+ENTER by default) was intended to easily rename<br>
all occurrences of, e.g., a constant, and it was very useful for me in<br>
the past.</p>
<p>I now ran into the following problem:<br>
It also will select the mixfix syntax referring to the constant,<br>
and typing in a new name does not yield the desired result in this<br>
case, as it replaces the mixfix syntax naively with a new name.</p>
<p>Is there a possibility to only select <em>literal</em> occurrences of an<br>
entity?</p>



<a name="294722769"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Formal%20entity%20renaming%20%28via%20CS%2BEnter%29%20messing%20.../near/294722769" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20entity.20renaming.20.28via.20CS.2BEnter.29.20messing.20.2E.2E.2E.html#294722769">(Aug 22 2022 at 16:23)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
No, I don't know a better way right now.</p>
<p>The documentation of isabelle.select-entity is very careful to say it<br>
"facilitates systematic renaming", without any claims that it works<br>
under all circumstances.</p>
<p>Strictly speaking, there is a mismatch of concepts here: markup for<br>
formal entities does not care about the syntactic appearance in the<br>
text: it could differ wrt. quotes, name space prefixes, mixfix syntax etc.</p>
<p>Actual first-class "refactoring" of names seen in the source would<br>
require a different approach at the bottom of it.</p>
<p>Makarius</p>



<a name="294722779"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Formal%20entity%20renaming%20%28via%20CS%2BEnter%29%20messing%20.../near/294722779" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Formal.20entity.20renaming.20.28via.20CS.2BEnter.29.20messing.20.2E.2E.2E.html#294722779">(Aug 22 2022 at 16:23)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:unruh@ut.ee">unruh@ut.ee</a>&gt;<br>
One hack for solving your problem is the following:</p>
<p>- Select occurrences of my_Ex using CS-Enter<br>
   - Open find with Ctrl-F<br>
   - Type my_Ex and your_Ex into search and replace fields<br>
   - Make sure "Search in: Selection" is checked (I think it is by default).<br>
   - Alt-A for "Replace All"</p>
<p>This will replace only within the selection from CS-Enter, but will also<br>
only replace the literal string, not the syntactic sugar (unless you have a<br>
very exotic syntax).</p>
<p>Of course, it would be nice if this were automated, but I think it's still<br>
quite OK for occasional refactorings.</p>
<p>Best wishes,<br>
Dominique.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>