<html>
<head><meta charset="utf-8"><title>[isabelle] Funny font metrics in the Search and Replace d... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Funny.20font.20metrics.20in.20the.20Search.20and.20Replace.20d.2E.2E.2E.html">[isabelle] Funny font metrics in the Search and Replace d...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294663356"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Funny%20font%20metrics%20in%20the%20Search%20and%20Replace%20d.../near/294663356" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Funny.20font.20metrics.20in.20the.20Search.20and.20Replace.20d.2E.2E.2E.html#294663356">(Aug 22 2022 at 12:19)</a>:</h4>
<p>From: Clemens Ballarin &lt;<a href="mailto:ballarin@in.tum.de">ballarin@in.tum.de</a>&gt;<br>
The font metrics in the Search and Replace dialog has been funny for a while, and this is still the case with RC2's versions of jdk, jedit and fonts.  In the attached screenshot, the entire text is selected but the last 2 1/2 characters are not covered by the box.</p>
<p>MacBook Pro (Retina, 13-inch, Early 2015) and OS X 10.10.5.</p>
<p>Not sure this is something under our control, though.</p>
<p>Clemens<br>
<a href="/user_uploads/14278/jwUIuoqmJ1crc62VOh3WMyq7/Screen-Shot-2016-01-26-at-22.43.46.png">Screen Shot 2016-01-26 at 22.43.46.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/jwUIuoqmJ1crc62VOh3WMyq7/Screen-Shot-2016-01-26-at-22.43.46.png" title="Screen Shot 2016-01-26 at 22.43.46.png"><img src="/user_uploads/14278/jwUIuoqmJ1crc62VOh3WMyq7/Screen-Shot-2016-01-26-at-22.43.46.png"></a></div>



<a name="294663362"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Funny%20font%20metrics%20in%20the%20Search%20and%20Replace%20d.../near/294663362" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Funny.20font.20metrics.20in.20the.20Search.20and.20Replace.20d.2E.2E.2E.html#294663362">(Aug 22 2022 at 12:19)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Is that Isabelle/jEdit in the default configuration?</p>
<p>There should be the IsabelleText font in the main text area, as well as in <br>
the small text field of the search dialog.  jEdit plays some special <br>
tricks to achieve that.</p>
<p>In the screenshot the font in the text field is a different one: it looks <br>
more like the default one by Apple.</p>
<p>Makarius</p>



<a name="294663635"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Funny%20font%20metrics%20in%20the%20Search%20and%20Replace%20d.../near/294663635" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Funny.20font.20metrics.20in.20the.20Search.20and.20Replace.20d.2E.2E.2E.html#294663635">(Aug 22 2022 at 12:21)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
The key parameter is the main text area font.  IsabelleText (in any size) <br>
should be fine.</p>
<p>jEdit pokes into look-and-feel defaults to achieve the trick, e.g. try <br>
this in the Scala console:</p>
<p>view.getTextArea.getPainter.getFont<br>
javax.swing.UIManager.getDefaults().get("TextArea.font")</p>
<p>The first is the jEdit text area font, the second the font of Swing text <br>
areas, as in the search dialog.</p>
<p>It should give the same font.</p>
<p>Or maybe you have an old version of that font installed on the system? An <br>
effect of that might be missing glyphs in the NEWS file or the Symbols / <br>
Document panel: various new symbol interpretations have been added for <br>
Isabelle2016.</p>
<p>Another source of problem could be the Retina display: I don't have that <br>
and can't test it.</p>
<p>Makarius</p>



<a name="294663730"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Funny%20font%20metrics%20in%20the%20Search%20and%20Replace%20d.../near/294663730" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Funny.20font.20metrics.20in.20the.20Search.20and.20Replace.20d.2E.2E.2E.html#294663730">(Aug 22 2022 at 12:21)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 28 Jan 2016, Clemens Ballarin wrote:</p>
<blockquote>
<p>They give the same font:</p>
<p>scala&gt; view.getTextArea.getPainter.getFont<br>
res0: java.awt.Font = java.awt.Font[family=IsabelleText,name=IsabelleText,style=plain,size=14]</p>
<p>scala&gt; javax.swing.UIManager.getDefaults().get("TextArea.font")<br>
res1: Object = java.awt.Font[family=IsabelleText,name=IsabelleText,style=plain,size=14]</p>
</blockquote>
<p>Does that also produce the same font?</p>
<p>(new javax.swing.JTextArea).getFont</p>
<blockquote>
<blockquote>
<p>Another source of problem could be the Retina display: I don't have <br>
that and can't test it.</p>
</blockquote>
<p>If I choose some other font for the text area (such as Courier) that <br>
get's displayed both in the main text area and the search dialog.  Now <br>
the only thing special about IsabelleText (that I can imagine) that its <br>
not installed in the system.  It tried to verify this but FontBook <br>
cannot open *.sfd files, so I couldn't install them...</p>
</blockquote>
<p>The .sfd files are the sources for fontforge.  The TrueType fonts are <br>
Isabelle2016-RC2/contrib/isabelle_fonts-20160102</p>
<p>As a test it is fine to install them on the system, but don't forget to <br>
remove them later.</p>
<p>There could be also something wrong with the generated .ttf fonts by <br>
fontforge: it has many parameters, and some could be wrong for Mac OS X <br>
with Retina.</p>
<p>Makarius</p>



<a name="294663958"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Funny%20font%20metrics%20in%20the%20Search%20and%20Replace%20d.../near/294663958" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Funny.20font.20metrics.20in.20the.20Search.20and.20Replace.20d.2E.2E.2E.html#294663958">(Aug 22 2022 at 12:23)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
What is missing in the main text area is proper bold.  Hopefully this will <br>
display correctly after installing IsabelleTextBold as well.  (Otherwise <br>
we are back to strange Apple/Java font rendering problems from Java 6.)</p>
<p>I am also puzzled that no other OSX Retina user has seen this problem <br>
before (or seen and not reported).</p>
<p>Makarius</p>



<a name="294668390"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Funny%20font%20metrics%20in%20the%20Search%20and%20Replace%20d.../near/294668390" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Funny.20font.20metrics.20in.20the.20Search.20and.20Replace.20d.2E.2E.2E.html#294668390">(Aug 22 2022 at 12:49)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
In the meantime I've had a chance to look at 2-3 Macs with Retina.  The <br>
problem occurs both for Isabelle2015 (with Java 7) and Isabelle2016-RC3 <br>
(with Java 8).</p>
<p>Depending on the point size of the main text area, the deviation in the <br>
text field (e.g. Search dialog) varies.  Sometimes it is hardly visible at <br>
all.</p>
<p>Conclusion for this release: it is not a regression so there are no <br>
further attempts to finish the work of Apple and Oracle.  Instead there is <br>
a bit of documentation in the Isabelle/jEdit manual: <br>
<a href="https://bitbucket.org/isabelle_project/isabelle-release/commits/dfb70abaa3f0">https://bitbucket.org/isabelle_project/isabelle-release/commits/dfb70abaa3f0</a></p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>