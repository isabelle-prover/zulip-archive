<html>
<head><meta charset="utf-8"><title>[isabelle] How can I access a fact statement as a term? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html">[isabelle] How can I access a fact statement as a term?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294749740"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294749740" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294749740">(Aug 22 2022 at 19:02)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Maybe you mean literal fact notation (with old-style ASCII back-quotes)<br>
or new-style cartouche syntax.</p>
<p>It allows to project (unique) facts from the current proof context by<br>
giving a term pattern (most users might think they need to give the full<br>
term).</p>
<p>Alternatively, you can study documentation and examples for proof method<br>
"goal_cases" or the command "subgoal". This is moving towards "improper<br>
Isar", but in some applications it is adequate.</p>
<p>Makarius</p>



<a name="294749791"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294749791" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294749791">(Aug 22 2022 at 19:03)</a>:</h4>
<p>From: Wolfgang Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
I actually mean the opposite: the backquote/cartouche notation turns a<br>
term (pattern) into a fact, but I want to turn a fact into a term, so<br>
that I can write something like the following (with <code>«...»</code> being my<br>
temporary notation for the desired conversion):</p>
<p>let "?x + ?y ≤ ?z" = «assms(1)»</p>
<p>All the best,<br>
Wolfgang</p>



<a name="294749881"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294749881" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294749881">(Aug 22 2022 at 19:03)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This is in conflict with how Isar works: the proof text is turned into<br>
assumptions/goals/facts, but the information flows only forwards in that<br>
direction, not backwards. A fact is somehow opaque to the proof text and<br>
cannot be inspected directly.</p>
<p>The ?case abbreviation of the "induct" family gives the appearance to<br>
allow this, but it is conceptually still the original text statement<br>
that is exposed as term here. (As usual Isar allows a certain degree of<br>
improper use, so this can be stretched a bit further than officially<br>
intended.)</p>
<p>There are other tools to get hold of low-level information, e.g. the<br>
proof method "goal_cases", the command "subgoal", and the Eisbach proof<br>
method "match". All of this is subject to restrictions: proper proof<br>
structure emerges from taking away arbitrary access to internal proof<br>
state information (goals and facts).</p>
<p>Makarius</p>



<a name="294749975"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294749975" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294749975">(Aug 22 2022 at 19:04)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:unruh@ut.ee">unruh@ut.ee</a>&gt;<br>
Hi,</p>
<p>my solution is to create a new command letfact, so that you can write, e.g.,</p>
<p>letfact "_ = ?rhs" = Cons</p>
<p>(if Cons is the name of a fact).</p>
<p>The theory that defines this is attached.</p>
<p>I have not tested it besides what is in that theory, so it might be very <br>
buggy (or not work at all).</p>
<p>Also, I don't know if I am doing something unspeakable to Isabelle's <br>
interna here. But I assume Makarius will speak up if I do. :)</p>
<p>Best wishes,</p>
<p>Dominique.<br>
<a href="/user_uploads/14278/YLnys4xLQTRHjsgEkoGMgjna/Scratch.thy">Scratch.thy</a></p>



<a name="294750097"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294750097" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294750097">(Aug 22 2022 at 19:05)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Well, I have already explained that facts (and goals) are conceptually<br>
opaque from the Isar proof text.</p>
<p>Isar proof structure (with its overall benefits of readability and<br>
maintainability) emerges from taking away arbitrary access to internal<br>
state. It has required many years to achieve a certain balance: I have<br>
even refined and revised it in 2015/2016.</p>
<p>Instead of introducing non-Isar commands in Isar, it is better to look<br>
at the concrete applications and find a style of proof that fits to the<br>
high cultural standards of Isar.</p>
<p>Makarius</p>



<a name="294750161"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294750161" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294750161">(Aug 22 2022 at 19:05)</a>:</h4>
<p>From: Wolfgang Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
I think I’ve found such a style for my particular problem, which was<br>
accessing an induction hypothesis and subsequently parts of it as terms.<br>
Consider the following small example:</p>
<p>lemma "(n :: nat) &lt; 2 * n" (is "?P n")<br>
    proof (induction n)<br>
      case (Suc m)<br>
      let "_ &lt; ?double" = "?P m"<br>
      oops</p>
<p>The construct <code>(is "?P n")</code> in the first line defines <code>?P</code> to be the<br>
“shape” of the statement. The <code>?P m</code> in the <code>let</code> statement further<br>
down is the induction hypothesis (and <code>?P (Suc m)</code> would be the same as<br>
<code>?case</code>. So I’m effectively using higher-order unification to replace<br>
the <code>n</code>s in the lemma statement with a locally available term. The <code>let</code><br>
statement then assigns the right-hand side of the induction hypothesis<br>
(<code>2 * m</code>) to the variable <code>?double</code>, showing that I can turn parts of<br>
the induction hypothesis into terms.</p>
<p>All the best,<br>
Wolfgang</p>



<a name="294750185"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294750185" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294750185">(Aug 22 2022 at 19:05)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Great. This is exactly how it was meant to be in classic Isabelle/Isar,<br>
before various add-on were introduced over the years.</p>
<p>The general principle: you write text (terms) and match against it (via<br>
term patterns) -- before mechanical proof tools operate on your terms.</p>
<p>Makarius</p>



<a name="294751726"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20can%20I%20access%20a%20fact%20statement%20as%20a%20term%3F/near/294751726" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20can.20I.20access.20a.20fact.20statement.20as.20a.20term.3F.html#294751726">(Aug 22 2022 at 19:15)</a>:</h4>
<p>From: Wolfgang Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
Hi!</p>
<p>Say I have a proof method that generates several cases. For each case,<br>
I can access parts of the conclusion via schematic variables. All I have<br>
to do is defining those variables by matching the <code>?case</code> variable<br>
against a pattern, for example like so:</p>
<p>let "?x + ?y ≤ ?z" = ?case</p>
<p>Now I’d like to do the same thing for case premises. The problem is that<br>
there don’t seem to be analogs of <code>?case</code> for the premises. That said,<br>
premises can be referred to as facts, of course. Is it possible to get<br>
the statement of a fact as a term, or is there some other way to achieve<br>
what I want?</p>
<p>All the best,<br>
Wolfgang</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>