<html>
<head><meta charset="utf-8"><title>[isabelle] How do I make notation work only on the consta... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20do.20I.20make.20notation.20work.20only.20on.20the.20consta.2E.2E.2E.html">[isabelle] How do I make notation work only on the consta...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294132588"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20do%20I%20make%20notation%20work%20only%20on%20the%20consta.../near/294132588" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20do.20I.20make.20notation.20work.20only.20on.20the.20consta.2E.2E.2E.html#294132588">(Aug 18 2022 at 17:22)</a>:</h4>
<p>From: Rafal Kolanski &lt;<a href="mailto:rafalk@cse.unsw.edu.au">rafalk@cse.unsw.edu.au</a>&gt;<br>
Dear Isabelle Users,</p>
<p>I'm on Isabelle 2009-2, and I'm stuck with the following problem. I have <br>
a structure whose constructor name is the same as its type. For <br>
presentation in LaTeX I'm using a notation hack which makes constants a <br>
different font than normal isabelle text.</p>
<p>Here's the problem. I define notation as:</p>
<p>notation (output)<br>
   blah_C ("moo")</p>
<p>then:<br>
    typ "('a, 'p, blah_C) ptr_t"<br>
prints:<br>
    ('a,'p,moo) ptr_t</p>
<p>and: term "blah_C x y z" prints: "moo x y z" :: moo</p>
<p>Why does output notation pick up on the type, when I'm not using a type <br>
translation? How do I specify I want the constant blah_C as the target <br>
of my notation and not the type?</p>
<p>I realise that the same constructor and type name is not ideal, but the <br>
output does not come from a tool written by me.</p>
<p>Sincerely,</p>
<p>Rafal Kolanski.</p>



<a name="294132640"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20do%20I%20make%20notation%20work%20only%20on%20the%20consta.../near/294132640" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20do.20I.20make.20notation.20work.20only.20on.20the.20consta.2E.2E.2E.html#294132640">(Aug 18 2022 at 17:22)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is a feature of all Isabelle versions until Isabelle2009-1.  In <br>
Isabelle2009-2 the syntax becaume fully "authentic" after many years of <br>
reforming the system (see also the NEWS for Isabelle2009-2).</p>
<p>So the above should work properly, if this is really Isabelle2009-2.</p>
<p>Makarius</p>



<a name="294132655"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20do%20I%20make%20notation%20work%20only%20on%20the%20consta.../near/294132655" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20do.20I.20make.20notation.20work.20only.20on.20the.20consta.2E.2E.2E.html#294132655">(Aug 18 2022 at 17:22)</a>:</h4>
<p>From: Rafal Kolanski &lt;<a href="mailto:rafalk@cse.unsw.edu.au">rafalk@cse.unsw.edu.au</a>&gt;<br>
Actually, I apologise, that was a typo due to being tired and stressed. <br>
I meant Isabelle 2009-1. Do you know of any way of brute-forcing the <br>
issue on this version? I'm low on time and I don't care about elegance, <br>
especially if the problem no longer exists on 2009-2 and afterwards.</p>
<p>Hats off to whoever solved this in subsequent versions. I didn't even <br>
notice the problem was there until it hit me over the head.</p>
<p>Sincerely,</p>
<p>Rafal Kolanski.</p>



<a name="294132675"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20do%20I%20make%20notation%20work%20only%20on%20the%20consta.../near/294132675" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20do.20I.20make.20notation.20work.20only.20on.20the.20consta.2E.2E.2E.html#294132675">(Aug 18 2022 at 17:23)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Wed, 16 Mar 2011, Rafal Kolanski wrote:</p>
<blockquote>
<p>I meant Isabelle 2009-1. Do you know of any way of brute-forcing the <br>
issue on this version?</p>
</blockquote>
<p>Isabelle2009-1 does provide authentic syntax, but not for certain older <br>
packages.  So it depends what you mean by the following:</p>
<blockquote>
<p>I have a structure whose constructor name is the same as its type.</p>
</blockquote>
<p>Is this a HOL datatype?  This is probably the most delicate situation.</p>
<p>For output of plain constructor terms, you can use 'abbreviation' with its <br>
own notation (the const is authentic here).  It does not work for <br>
patterns, though.  For example:</p>
<p>datatype blah_C = blah_C</p>
<p>abbreviation (output)<br>
   blah_C_syntax ("moo")<br>
   where "blah_C_syntax == blah_C"</p>
<p>typ blah_C  -- "blah_C"<br>
term blah_C  -- "moo"<br>
term "case x of blah_C =&gt; y"  -- "blah_C (!)"</p>
<p>Makarius</p>



<a name="294132699"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20How%20do%20I%20make%20notation%20work%20only%20on%20the%20consta.../near/294132699" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20How.20do.20I.20make.20notation.20work.20only.20on.20the.20consta.2E.2E.2E.html#294132699">(Aug 18 2022 at 17:23)</a>:</h4>
<p>From: Rafal Kolanski &lt;<a href="mailto:rafalk@cse.unsw.edu.au">rafalk@cse.unsw.edu.au</a>&gt;<br>
On 17/03/11 00:57, Makarius wrote:</p>
<blockquote>
<p>On Wed, 16 Mar 2011, Rafal Kolanski wrote:</p>
<blockquote>
<p>I meant Isabelle 2009-1. Do you know of any way of brute-forcing the<br>
issue on this version?</p>
</blockquote>
<p>Isabelle2009-1 does provide authentic syntax, but not for certain older<br>
packages. So it depends what you mean by the following:</p>
<blockquote>
<p>I have a structure whose constructor name is the same as its type.</p>
</blockquote>
<p>Is this a HOL datatype? This is probably the most delicate situation.</p>
</blockquote>
<p>I'm assuming it's something developed based on datatype code. It tries <br>
to mimic a non-extensible recursive record.</p>
<blockquote>
<p>For output of plain constructor terms, you can use 'abbreviation' with<br>
its own notation (the const is authentic here). It does not work for<br>
patterns, though. For example:</p>
<p>datatype blah_C = blah_C</p>
<p>abbreviation (output)<br>
blah_C_syntax ("moo")<br>
where "blah_C_syntax == blah_C"</p>
<p>typ blah_C -- "blah_C"<br>
term blah_C -- "moo"<br>
term "case x of blah_C =&gt; y" -- "blah_C (!)"</p>
</blockquote>
<p>This is perfect for the problem at hand. I don't really care what's <br>
inside the type itself, only its record-like capabilities, so I will <br>
never see a case statement like that, and certainly won't present it in <br>
the document.</p>
<p>The authentic syntax in later versions sounds great too, it means my <br>
"show constant names in a different font" notation hack (you have to <br>
specify a list of them manually, but still) will work in future versions.</p>
<p>Thank you Makarius!</p>
<p>Rafal Kolanski.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>