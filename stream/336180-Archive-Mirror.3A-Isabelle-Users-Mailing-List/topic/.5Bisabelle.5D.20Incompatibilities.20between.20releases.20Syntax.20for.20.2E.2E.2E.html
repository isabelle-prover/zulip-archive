<html>
<head><meta charset="utf-8"><title>[isabelle] Incompatibilities between releases Syntax for ... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html">[isabelle] Incompatibilities between releases Syntax for ...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294066715"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Incompatibilities%20between%20releases%20Syntax%20for%20.../near/294066715" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html#294066715">(Aug 18 2022 at 12:28)</a>:</h4>
<p>From: Alexander Krauss &lt;<a href="mailto:krauss@in.tum.de">krauss@in.tum.de</a>&gt;<br>
Dear Jeremy,</p>
<p>All the worries you describe are definitely serious problems, and most<br>
people on this list have probably experienced this in one or the other<br>
way. Different releases of Isabelle are hardly compatible on the ML<br>
level and even the theory level requires a fair amount of changes from<br>
one release to the next. This is especially true for the transition<br>
2005-&gt;2007, due to the many accumulated changes.</p>
<blockquote>
<p>These issues seem to be capable of causing massive and unnecessary <br>
difficulties.</p>
</blockquote>
<p>However, I cannot agree that these difficulties were unnecessary. How<br>
could they be avoided? Not making any incompatible changes to Isabelle<br>
anymore would essentially stop history and carve the current state of<br>
the art into stone.</p>
<p>The alternative - maintaining various compatibility layers that<br>
implement all interfaces and functionality present in some old versions</p>
<ul>
<li>demands a large amount of resources which we surely don't have. And it<br>
scales badly: Legacy code accumulates over time and leads to a linear<br>
(or worse) increase in maintenance costs, but development resources are<br>
(probably) constant. Companies with lots of money may be able to support<br>
this, but even then the results are not always satisfactory (think of<br>
the compatibility problems between different versions of Microsoft<br>
Office files).</li>
</ul>
<p>So the only realistic chance is that users keep up with the development<br>
and update their theories. Sticking to some old version may seem<br>
convenient for some time but, as you describe, it locks you into a<br>
closed world, where you cannot use other people's work and do not profit<br>
from new developments. Updating your theories is an investment that pays<br>
off finally. I agree that the 2005-&gt;2007 transition is undesirably<br>
painful but we are trying to make releases frequent enough to avoid this<br>
in the future. 2007-&gt;2008 is in fact not such a big deal (even with the<br>
somewhat radical removal of sets as a separate type).</p>
<p>Embrace change!</p>
<p>Alex</p>
<blockquote>
<p>PS.  Anyway, what aspects of the documentation are actually tested?</p>
</blockquote>
<p>The (old) Isabelle Reference Manual and the various "Logics" <br>
descriptions are still plain latex documents and hence cannot be tested. <br>
Everything else is generated from theories.</p>



<a name="294066755"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Incompatibilities%20between%20releases%20Syntax%20for%20.../near/294066755" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html#294066755">(Aug 18 2022 at 12:28)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This is also my experience.  Even though ML interfaces often change <br>
substantially, it is usually reasonable easy to port old code (thanks to <br>
static type-checking in ML).</p>
<p>Proofs are much more fragile, notably unstructured ones.  One way around <br>
this is to submit theory libraries and applications to <br>
<a href="http://afp.sourceforge.net/">http://afp.sourceforge.net/</a> where they get updated to latest Isabelle <br>
automagically.</p>
<p>Makarius</p>



<a name="294066868"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Incompatibilities%20between%20releases%20Syntax%20for%20.../near/294066868" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html#294066868">(Aug 18 2022 at 12:29)</a>:</h4>
<p>From: Jeremy Dawson &lt;<a href="mailto:jeremy@rsise.anu.edu.au">jeremy@rsise.anu.edu.au</a>&gt;<br>
In attempting to run Isabelle 2008, I get</p>
<p>jeremy@stiletto:~/isabelle/2008/gen$ isabelle<br>
Poly/ML RTS version I386-4.1.4 (14:18:30 Nov 14 2005)<br>
Copyright (c) 2002-5 CUTS and contributors.<br>
Running with heap parameters (h=204800K,ib=40960K,ip=100%,mb=45056K,mp=20%)<br>
Mapping <br>
/home/users/jeremy/isabelle/heaps/Isabelle2008/polyml-4.1.4_x86-linux/HOL<br>
Mapping /home/users/jeremy/Isabelle2008/../polyml/x86-linux/ML_dbase<br>
Poly/ML 4.2.0 Release</p>
<blockquote>
<p>Goal "X";<br>
Exception- ERROR "Unknown context" raised</p>
</blockquote>
<p>In Isabelle 2007 (and prior) this works fine</p>
<p>jeremy@stiletto:~/isabelle/2007$ is07<br>
Poly/ML RTS version I386-4.1.4 (14:18:30 Nov 14 2005)<br>
Copyright (c) 2002-5 CUTS and contributors.<br>
Running with heap parameters <br>
(h=512000K,ib=102400K,ip=100%,mb=106496K,mp=20%)<br>
Mapping /home/users/jeremy/Isabelle2007/heaps/polyml-4.1.4_x86-linux/HOL<br>
Mapping /home/users/jeremy/Isabelle2007/../polyml/x86-linux/ML_dbase<br>
Poly/ML 4.2.0 Release</p>
<blockquote>
<p>Goal ;<br>
val it = fn : string -&gt; Thm.thm list<br>
Goal "X";</p>
</blockquote>
<h3>Legacy feature: old goal command</h3>
<p>Level 0 (1 subgoal)<br>
X</p>
<ol>
<li>X<br>
val it = [] : Thm.thm list</li>
</ol>
<p>What has happened here?</p>
<p>Jeremy</p>



<a name="294066932"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Incompatibilities%20between%20releases%20Syntax%20for%20.../near/294066932" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html#294066932">(Aug 18 2022 at 12:29)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Even in Isabelle2007 it clearly says that the old ML Goal command is a <br>
legacy feature -- few contemporary Isabelle users will remember that it <br>
existed.</p>
<p>Legacy features just disappear at some point.  In Isabelle2008 the ML <br>
function still happens to be around, but does not work without a proper <br>
context -- almost everything in Isabelle needs one.</p>
<p>In the forthcoming Isabelle release even plain ML bindings already require <br>
a context -- we will have a purely functional ML toplevel that works <br>
seamlessly with undo and multithreading.</p>
<p>There are two ways to issue ML stuff <em>with</em> a context:</p>
<p>* Either: use the 'ML' command within the Isar toplevel, usually within <br>
    Proof General.  This is the regular, preferred way.</p>
<p>* Or: startup a raw tty Isar loop, e.g. using "isatool tty", enter a <br>
    theory, exit, poke around in ML, re-enter Isar:</p>
<p>$ isatool tty -l HOL<br>
      &gt; theory A imports Maib begin<br>
      &gt; exit<br>
      ML&gt; ...<br>
      ML&gt; Isar.loop ()</p>
<p>This scheme is useful for debugging in rare situations, e.g. when <br>
    there are problems in conjunction with the Isar toplevel itself.</p>
<p>Makarius</p>



<a name="294066953"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Incompatibilities%20between%20releases%20Syntax%20for%20.../near/294066953" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html#294066953">(Aug 18 2022 at 12:29)</a>:</h4>
<p>From: Jeremy Dawson &lt;<a href="mailto:jeremy@rsise.anu.edu.au">jeremy@rsise.anu.edu.au</a>&gt;<br>
Makarius wrote:</p>
<blockquote>
<p>On Wed, 8 Oct 2008, Jeremy Dawson wrote:</p>
<blockquote>
<p>In attempting to run Isabelle 2008, I get</p>
<blockquote>
<p>Goal "X";</p>
<p>Exception- ERROR "Unknown context" raised</p>
</blockquote>
</blockquote>
<blockquote>
<p>In Isabelle 2007 (and prior) this works fine</p>
<blockquote>
<p>Goal "X";<br>
</p>
</blockquote>
<h3>Legacy feature: old goal command</h3>
<p>Level 0 (1 subgoal)<br>
X<br>
1. X<br>
val it = [] : Thm.thm list</p>
<p>What has happened here?<br>
</p>
</blockquote>
<p>Even in Isabelle2007 it clearly says that the old ML Goal command is a <br>
legacy feature -- few contemporary Isabelle users will remember that it <br>
existed.</p>
<p>Makarius,</p>
</blockquote>
<p>The "old" ML Goal command was introduced in October 1998!!  It was said <br>
to _improve_ upon the old "goal" command, which _did_ require a context. </p>
<p>Incidentally, the prove_goal command - which was purely functional, and <br>
the "goal" command, which required specifying the context, were left <br>
unchanged, even though the developers then thought that non purely <br>
functional code was preferable.  Those users who preferred purely <br>
functional ML code were given the option to continue using it.  They <br>
were not compelled to go to the inconvenience of changing all their code <br>
just because the developers then had a different preference. </p>
<p>If few contemporary Isabelle users will remember that the Goal command <br>
existed, that means that, of those who used Isabelle when the Goal <br>
command was in common use, most are no longer Isabelle users.  This may <br>
well be true, I wouldn't be surprised.  But if few people can survive <br>
using Isabelle for more than a few years, that is not a great <br>
recommendation for it.</p>
<p>And what of the proofs those users did using Isabelle?  Pen and paper <br>
proofs, once published, will still be in libraries for a hundred years.  <br>
An Isabelle proof, using "Goal", will, in approach reflected in your <br>
email and other, have had a useful life of only a few years.</p>
<blockquote>
<p>Legacy features just disappear at some point.  In Isabelle2008 the ML <br>
function still happens to be around, but does not work without a proper <br>
context -- almost everything in Isabelle needs one.</p>
<p>In the forthcoming Isabelle release even plain ML bindings already require <br>
a context -- we will have a purely functional ML toplevel that works <br>
seamlessly with undo and multithreading.</p>
<p>Does this mean that all the functions involving an implicit context will <br>
disappear?<br>
eg, Simp_tac, simpset, etc ?  My code is full of these.</p>
</blockquote>
<p>I notice that the_context() has disappeared from Isabelle2008.</p>
<blockquote>
<p>There are two ways to issue ML stuff <em>with</em> a context:</p>
<p>* Either: use the 'ML' command within the Isar toplevel, usually within <br>
    Proof General.  This is the regular, preferred way.</p>
<p>* Or: startup a raw tty Isar loop, e.g. using "isatool tty", enter a <br>
    theory, exit, poke around in ML, re-enter Isar:</p>
<p>$ isatool tty -l HOL<br>
      &gt; theory A imports Maib begin<br>
      &gt; exit<br>
      ML&gt; ...<br>
      ML&gt; Isar.loop ()</p>
<p>This scheme is useful for debugging in rare situations, e.g. when <br>
    there are problems in conjunction with the Isar toplevel itself.</p>
<p>Thanks.  Incidentally, I notice that the_context() has disappeared from <br>
Isabelle2008.<br>
Once one has created the context by entering Isar and exiting it again, <br>
how does one get hold of it?</p>
</blockquote>
<p>Regards,</p>
<p>Jeremy</p>
<blockquote>
<p>Makarius<br>
</p>
</blockquote>



<a name="294067046"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Incompatibilities%20between%20releases%20Syntax%20for%20.../near/294067046" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html#294067046">(Aug 18 2022 at 12:30)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Simp_tac and simpset: unit -&gt; simpset are indeed legacy features, too, <br>
although not explicitly marked as such.  When embedding ML into Isar proof <br>
text, say via the method called "tactic", you can refer to the simpset <br>
from the context via the @{simpset} antiquotation.</p>
<p>Makarius</p>



<a name="294067106"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Incompatibilities%20between%20releases%20Syntax%20for%20.../near/294067106" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Incompatibilities.20between.20releases.20Syntax.20for.20.2E.2E.2E.html#294067106">(Aug 18 2022 at 12:30)</a>:</h4>
<p>From: Jeremy Dawson &lt;<a href="mailto:jeremy@rsise.anu.edu.au">jeremy@rsise.anu.edu.au</a>&gt;<br>
Makarius wrote:<br>
Makarius,</p>
<p>Well, this is all very well, but I have dozens of emails showing that I <br>
tried to understand what these antiquotations do and why I should use <br>
them. </p>
<p>When I failed to achieve any such understanding, I tried using them <br>
anyway, because you and others in Munich were so adamant that I should, <br>
saying that using the alternative calls would lead to errors.</p>
<p>The result of this was that introducing antiquotations into my code <br>
_caused_ errors, which were fixed when I reverted to not using them.</p>
<p>Regards,</p>
<p>Jeremy</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>