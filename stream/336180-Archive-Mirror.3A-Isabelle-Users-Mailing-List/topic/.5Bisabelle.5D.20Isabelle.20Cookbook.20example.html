<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle Cookbook example · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html">[isabelle] Isabelle Cookbook example</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294117345"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20Cookbook%20example/near/294117345" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html#294117345">(Aug 18 2022 at 16:04)</a>:</h4>
<p>From: Steve W &lt;<a href="mailto:s.wong.731@gmail.com">s.wong.731@gmail.com</a>&gt;<br>
Hi all,</p>
<p>I'm reading the Isabelle Cookbook and trying some of the examples provided.<br>
There's something I don't quite understand: I'm looking at the June 8, 2010<br>
version and on page 22, there's an example on implementing a custom<br>
antiquotation:</p>
<p>"let<br>
val parser = Args.context</p>
<p>fun term_pat (ctxt, str) =<br>
...</p>
<p>end"</p>
<p>Then there's an example on calling this antiquotation:</p>
<p>@{term_pat "Suc (?x::nat)"}</p>
<p>Since term_pat takes two arguments ctxt and str, how come the antiquotation<br>
@{term_pat "Suc (?x::nat)"} only has one argument?</p>
<p>Thanks for the help.</p>
<p>Steve</p>



<a name="294117427"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20Cookbook%20example/near/294117427" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html#294117427">(Aug 18 2022 at 16:05)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
The context is implicit here.  The ML compilation takes place in a certain <br>
Isar text, and the formal context (at compile time) is derived from that <br>
position.</p>
<p>Makarius</p>



<a name="294117453"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20Cookbook%20example/near/294117453" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html#294117453">(Aug 18 2022 at 16:05)</a>:</h4>
<p>From: Steve W &lt;<a href="mailto:s.wong.731@gmail.com">s.wong.731@gmail.com</a>&gt;<br>
On Mon, Sep 13, 2010 at 7:32 PM, Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt; wrote:</p>
<blockquote>
<p>On Mon, 13 Sep 2010, Steve W wrote:</p>
<p>there's an example on implementing a custom antiquotation:</p>
<blockquote>
<p>"let<br>
val parser = Args.context</p>
<p>fun term_pat (ctxt, str) =<br>
...</p>
<p>end"</p>
<p>Then there's an example on calling this antiquotation:</p>
<p>@{term_pat "Suc (?x::nat)"}</p>
<p>Since term_pat takes two arguments ctxt and str, how come the<br>
antiquotation<br>
@{term_pat "Suc (?x::nat)"} only has one argument?<br>
</p>
</blockquote>
<p>The context is implicit here.  The ML compilation takes place in a certain<br>
Isar text, and the formal context (at compile time) is derived from that<br>
position.</p>
<p>I see. Even if the context is implicit, does the position of the argument<br>
'str' not matter? 'str' is the second argument of term_pat, but "Suc<br>
(?x::nat)" is in the first position in @{term_pat "Suc (?x::nat)"}.</p>
</blockquote>
<p>Thanks</p>
<blockquote>
<p>Makarius<br>
</p>
</blockquote>



<a name="294117566"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20Cookbook%20example/near/294117566" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html#294117566">(Aug 18 2022 at 16:05)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I do not really understand the question.  The parser for the antiquotation <br>
is defined like this:</p>
<p>val parser = Args.context -- Scan.lift Args.name_source</p>
<p>This means it produces a pair (ctxt, str) in exactly that way.  The <br>
context for Args.context is provided by the infrastructure -- these <br>
parsers are context-sensitive.</p>
<p>Makarius</p>



<a name="294117850"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20Cookbook%20example/near/294117850" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html#294117850">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Steve W &lt;<a href="mailto:s.wong.731@gmail.com">s.wong.731@gmail.com</a>&gt;<br>
On Tue, Sep 14, 2010 at 1:17 PM, Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt; wrote:</p>
<blockquote>
<p>On Mon, 13 Sep 2010, Steve W wrote:</p>
<p>"let</p>
<blockquote>
<blockquote>
<blockquote>
<p>val parser = Args.context</p>
<p>fun term_pat (ctxt, str) =<br>
...</p>
<p>end"</p>
<p>Then there's an example on calling this antiquotation:</p>
<p>@{term_pat "Suc (?x::nat)"}</p>
<p>Since term_pat takes two arguments ctxt and str, how come the<br>
antiquotation<br>
@{term_pat "Suc (?x::nat)"} only has one argument?</p>
<p>The context is implicit here.  The ML compilation takes place in a<br>
certain<br>
Isar text, and the formal context (at compile time) is derived from that<br>
position.</p>
</blockquote>
<p>I see. Even if the context is implicit, does the position of the<br>
argument 'str' not matter? 'str' is the second argument of term_pat, but<br>
"Suc (?x::nat)" is in the first position in @{term_pat "Suc (?x::nat)"}.<br>
</p>
</blockquote>
</blockquote>
<p>I do not really understand the question.  The parser for the antiquotation<br>
is defined like this:</p>
<p>val parser = Args.context -- Scan.lift Args.name_source</p>
<p>This means it produces a pair (ctxt, str) in exactly that way.  The context<br>
for Args.context is provided by the infrastructure -- these parsers are<br>
context-sensitive.</p>
<p>I see. Could you tell me where '--' and the '&gt;&gt;' infix operators are<br>
implemented?</p>
</blockquote>
<p>Thanks<br>
Steve</p>
<blockquote>
<p>Makarius<br>
</p>
</blockquote>



<a name="294117870"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20Cookbook%20example/near/294117870" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html#294117870">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Most of this is in src/Pure/General/scan.ML -- the only non-conventional <br>
extension of well-established ideas of combinator parsing is support for <br>
potentially infinite input.</p>
<p>Many textbooks on functional programming explain the general idea, e.g. <br>
Larry's ML book.  In the end only some notational details differ, i.e. the <br>
names of the usual cominators, such as "--" for pairing and "&gt;&gt;" for <br>
mapping of results.</p>
<p>Makarius</p>



<a name="294117886"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20Cookbook%20example/near/294117886" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20Cookbook.20example.html#294117886">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Christian Urban &lt;<a href="mailto:urbanc@in.tum.de">urbanc@in.tum.de</a>&gt;<br>
Makarius writes:</p>
<blockquote>
<p>On Wed, 15 Sep 2010, Steve W wrote:</p>
<blockquote>
<p>Could you tell me where '--' and the '&gt;&gt;' infix operators are <br>
implemented?</p>
</blockquote>
<p>Most of this is in src/Pure/General/scan.ML -- the only non-conventional <br>
extension of well-established ideas of combinator parsing is support for <br>
potentially infinite input.</p>
<p>Many textbooks on functional programming explain the general idea, e.g. <br>
Larry's ML book.  In the end only some notational details differ, i.e. the <br>
names of the usual cominators, such as "--" for pairing and "&gt;&gt;" for <br>
mapping of results.</p>
</blockquote>
<p>Hi Steve,</p>
<p>These combinators are also explained with examples in the<br>
parsing chapter of the Isabelle programming tutorial.</p>
<p>Hope this helps,<br>
Christian</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>