<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle style guide · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html">[isabelle] Isabelle style guide</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294640963"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294640963" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294640963">(Aug 22 2022 at 09:54)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;<br>
Updating lots of proofs to Isabelle2015-RCx and discussions about submission rules for the AFP inspired me to write up guidelines that may be of more widespread use and interest:</p>
<p><a href="http://proofcraft.org/blog/isabelle-style.html">http://proofcraft.org/blog/isabelle-style.html</a></p>
<p>There’s more to come. Feedback welcome.</p>
<p>Enjoy!<br>
Gerwin</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294641185"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641185" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641185">(Aug 22 2022 at 09:56)</a>:</h4>
<p>From: Larry Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
These are nice guidelines, but there is one difficulty with the idea that “auto” should only be allowed at the end of a proof: it was designed to be used at the start of proofs! It is supposed to solve all the easy parts of the problem, returning the difficult ones to the user.</p>
<p>There is a way out of this paradox: use “auto” to start the proof, but regard the resulting subgoals as separate lemmas that need to be proved first. Combining these proved lemmas with “auto” should solve the problem outright, and you have created a structured proof.</p>
<p>If you have just completed a proof after many hours of effort, it is awfully tempting to leave it in that just-finished state, however messy it may be. But you have already done the hard work, and it’s worth taking another 15 minutes to restructure the proof to make it legible and robust against future changes.</p>
<p>Larry</p>



<a name="294641236"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641236" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641236">(Aug 22 2022 at 09:56)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;<br>
Thanks for putting what I was thinking that a lot more clearly. Peter Gammie had a similar point on the Isar side.</p>
<p>I’ll include your example if that’s fine with you.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="294641278"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641278" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641278">(Aug 22 2022 at 09:56)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
Great guide.</p>
<p>I randomly looked at HOL/MicroJava/Comp/AuxLemmas.thy and<br>
HOL/MicroJava/Comp/Index.thy from the Isabelle2015 distribution.<br>
Those theories definitely need some rework.</p>
<p>Cornelius</p>



<a name="294641290"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641290" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641290">(Aug 22 2022 at 09:56)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Very nice styleguide! It very much matches what I am trying to do in my<br>
proofs, too. Except for the apply-indentation scheme, where I use<br>
somewhat different:</p>
<p>If a method produces n new subgoals, the next apply-steps will be<br>
indented one level, and grouped into n blocks by blank lines, where each<br>
block solves one of the subgoals:</p>
<p>apply (intro conjI)    // produces 3 subgoals<br>
    apply auto []        // Solves first one</p>
<p>apply (cases l)      // Solve 2nd one<br>
      apply clarsimp       // Solve Nil-case<br>
      apply force</p>
<p>apply auto []        // Solve Cons-case</p>
<p>apply force          // Solve 3rd subgoal<br>
  done</p>



<a name="294641375"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641375" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641375">(Aug 22 2022 at 09:57)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;<br>
Good old MicroJava, almost proof archeology now.</p>
<p>At least the type compiler were not my own proofs, otherwise that would be mildly embarrassing :-)</p>
<p>I’ve brushed them off a little in the development repository, but there is easily more modernisation to be done to them if anybody feels like it.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="294641388"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641388" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641388">(Aug 22 2022 at 09:57)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;</p>
<blockquote>
<p>On 27.05.2015, at 19:40, Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt; wrote:</p>
<p>Very nice styleguide!</p>
</blockquote>
<p>Thanks!</p>
<blockquote>
<p>It very much matches what I am trying to do in my<br>
proofs, too. Except for the apply-indentation scheme, where I use<br>
somewhat different:</p>
<p>If a method produces n new subgoals, the next apply-steps will be<br>
indented one level, and grouped into n blocks by blank lines, where each<br>
block solves one of the subgoals:</p>
<p>apply (intro conjI)    // produces 3 subgoals<br>
   apply auto []        // Solves first one</p>
<p>apply (cases l)      // Solve 2nd one<br>
     apply clarsimp       // Solve Nil-case<br>
     apply force</p>
<p>apply auto []        // Solve Cons-case</p>
<p>apply force          // Solve 3rd subgoal<br>
 done</p>
</blockquote>
<p>I use something like this only when I have a large number of subgoals (&gt; 40 or so). Even then, I use the standard indentation within the blocks (with an offset, basically).</p>
<p>In this case, for the “clarsimp", it’s hard to tell that it solves a goal, and for the “cases", it’s hard to tell how many subgoals it produces. Unless you really always have the comments -- then it’s fine, but I’m way too lazy for that many comments...</p>
<p>Cheers,<br>
Gerwin</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294641428"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641428" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641428">(Aug 22 2022 at 09:58)</a>:</h4>
<p>From: Lars Hupel &lt;<a href="mailto:hupel@in.tum.de">hupel@in.tum.de</a>&gt;<br>
Is there a reason why MicroJava isn't an AFP entry? (Same question goes<br>
for some other subdirectories in ~~/src/HOL.)</p>
<p>Cheers<br>
Lars</p>



<a name="294641482"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641482" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641482">(Aug 22 2022 at 09:58)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;<br>
The direct reason is that MicroJava and most of these others predate the AFP by several years.</p>
<p>I think it’s a good idea to have some non-trivial applications directly in the distribution, so people don’t need to download something else before they have larger examples.</p>
<p>Which applications precisely these should be is a different question. The current set is mostly a function of where they came from and how they were developed.</p>
<p>Cheers,<br>
Gerwin</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294641525"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641525" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641525">(Aug 22 2022 at 09:58)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;</p>
<blockquote>
<blockquote>
<p>If a method produces n new subgoals, the next apply-steps will be<br>
indented one level, and grouped into n blocks by blank lines, where each<br>
block solves one of the subgoals:</p>
<p>apply (intro conjI)    // produces 3 subgoals<br>
   apply auto []        // Solves first one</p>
<p>apply (cases l)      // Solve 2nd one<br>
     apply clarsimp       // Solve Nil-case<br>
     apply force</p>
<p>apply auto []        // Solve Cons-case</p>
<p>apply force          // Solve 3rd subgoal<br>
 done<br>
</p>
</blockquote>
</blockquote>
<blockquote>
<p>In this case, for the “clarsimp", it’s hard to tell that it solves a goal, and for the “cases", it’s hard to tell how many subgoals it produces. Unless you really always have the comments -- then it’s fine, but I’m way too lazy for that many comments...<br>
    Actually, it is simple to see, even without the comments: clarsimp does<br>
<em>not</em> solve any subgoal, as there is a next command (force) below it in<br>
the same block. force solves a subgoal, as it is at the end of a block.<br>
The cases produces two subgoals, as there are two indented blocks<br>
following. For the same reason, the "intro conjI" produces 3 subgoals.</p>
</blockquote>



<a name="294641550"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641550" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641550">(Aug 22 2022 at 09:58)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;<br>
Got it. That is indeed enough.</p>
<p>Cheers,<br>
Gerwin</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294641933"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294641933" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294641933">(Aug 22 2022 at 10:01)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This is indeed a quite fitting style guide.  The Prover IDE should <br>
gradually formalize more of such fine points, to make it easier to avoid <br>
bad style by default.  Just some notes in the order of the text:</p>
<ul>
<li>
<p>There is already formal "bad" markup for 'sorry' and 'back' for some<br>
   years, which resulted from earlier AFP recommendations.</p>
</li>
<li>
<p>The formal indentation of 'apply' steps is also supported by some formal<br>
   markup that the referenced BeanShell macro uses.  I hope to have<br>
   something like that as part of the regular indentation in Isabelle/jEdit<br>
   soon, within the Isabelle/Scala codebase.  (In Isabelle2015 systematic<br>
   supports for text folds is new, but systematic indentation once not<br>
   addressed.)</p>
</li>
<li>
<p>Concerning bad internal names like xa, xb, xaa: Isabelle2015 produces<br>
   formal markup for that in the slightly reformed rule_tac family, with<br>
   the faint read color scheme of improper material.  Maybe we should also<br>
   revisit rename_tac at some point, to clarify its meaning in that<br>
   respect, or to eliminate the need for rename_tac / rule_tac altogether<br>
   due to newly emerging subgoal focus in Isar "scripts".</p>
</li>
<li>
<p>Use of unrestricted "auto".  Some years ago the goal restriction form</p>
<p>apply (cases P)<br>
    apply (auto ...)[2]</p>
<p>emerged as a partial solution to old subgoal addressing questions.</p>
<p>In Isabelle2015 more management infrastructure is wrapped around method<br>
 application, such that the new combinator ";" for structured combination<br>
 could be easily provided (it resembles THEN_ALL_NEW of ML tactics).<br>
 Using that, the above can we written in Coq-style like this:</p>
<p>apply (cases P; auto)</p>
<p>A potential disadvantage here is that "auto" is invoked separately on<br>
 each new subgoal, not on all of them simultaneously.  This can make a<br>
 difference, e.g. for implicit proof parallelization inside of "auto".</p>
<p>The difference holds for these two variants:</p>
<p>apply (cases P)<br>
    apply (simp_all ...)[2]</p>
<p>apply (cases P; simp)</p>
</li>
</ul>
<p>I am curious to see part 2, and especially part 3 about layout; the latter <br>
category is more easily accessible in the Prover IDE.</p>
<p>High-end IDEs like IntelliJ IDEA have lots of built-in style and <br>
recommendations, although it looks like big efforts to get to this level <br>
of sophistication, and maintain it in the long run.</p>
<p>Makarius</p>



<a name="294642101"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294642101" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294642101">(Aug 22 2022 at 10:02)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;</p>
<blockquote>
<p>On 28.05.2015, at 22:21, Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt; wrote:</p>
<p>On Sat, 23 May 2015, Gerwin Klein wrote:</p>
<blockquote>
<p>Updating lots of proofs to Isabelle2015-RCx and discussions about submission rules for the AFP inspired me to write up guidelines that may be of more widespread use and interest:</p>
<p><a href="http://proofcraft.org/blog/isabelle-style.html">http://proofcraft.org/blog/isabelle-style.html</a></p>
</blockquote>
<p>This is indeed a quite fitting style guide.  The Prover IDE should gradually formalize more of such fine points, to make it easier to avoid bad style by default.</p>
</blockquote>
<p>I agree, it would be nice to gradually converge to more support for such things over time.</p>
<blockquote>
<ul>
<li>Concerning bad internal names like xa, xb, xaa: Isabelle2015 produces<br>
 formal markup for that in the slightly reformed rule_tac family, with<br>
 the faint read color scheme of improper material.  Maybe we should also<br>
 revisit rename_tac at some point, to clarify its meaning in that<br>
 respect, or to eliminate the need for rename_tac / rule_tac altogether<br>
 due to newly emerging subgoal focus in Isar "scripts”.</li>
</ul>
</blockquote>
<p>The subgoal focus mechanism sounds promising. I didn’t have enough practical experience with it yet to make it a recommendation, but when it has withstood the test of time for a while, that could indeed become the main way of doing things.</p>
<blockquote>
<p>I am curious to see part 2, and especially part 3 about layout; the latter category is more easily accessible in the Prover IDE.</p>
</blockquote>
<p>Part 3 will probably be the most controversial one - not because I’m planning to write anything special, but because layout is the easiest to have strong opinions on.</p>
<p>Cheers,<br>
Gerwin</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294642186"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294642186" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294642186">(Aug 22 2022 at 10:02)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
It is also the easiest to build converters for it.  Have you tried <br>
"isabelle update_cartouches" already?</p>
<p>My impression is that many people just get used to something arbitrary as <br>
a start, and then cannot imagine anything else afterwards.</p>
<p>In the classic times of Isar and Proof General development (in 1998/1999) <br>
a certain canonical indentation emerged and was implemented in the editor, <br>
but in Isabelle/jEdit there is still nothing of it -- it will come one <br>
day. Of course that will be based on the good old standards, although I've <br>
found myself doing a few things differently now, to optimize the content <br>
of the first line of a specification, for the tree-view in SideKick.  E.g.</p>
<p>Bad:</p>
<p>definition foo :: T where<br>
     "foo = ..."</p>
<p>definition<br>
     bar :: T where<br>
     "bar = ..."</p>
<p>Good:</p>
<p>definition foobar :: T<br>
     where "foobar = ..."</p>
<p>Makarius</p>



<a name="294642229"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294642229" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294642229">(Aug 22 2022 at 10:03)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
When definitions get longer, the first bad version (subjectively)<br>
appears more pleasant to me.</p>
<p>definition foo :: T where<br>
  "foo = BlaulichtAufDerDatenautobahn"</p>
<p>definition foo :: T<br>
  where "foo = BlaulichtAufDerDatenautobahn"</p>
<p>Putting the "where" in the first line saves space for the actual definition.</p>
<p>Cornelius</p>



<a name="294642244"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294642244" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294642244">(Aug 22 2022 at 10:03)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;<br>
Not even finished writing yet, and we have already started ;-)</p>
<p>‘definition/where' is actually one of the case I'm having most trouble with.</p>
<p>Personally, I like the most line-consuming form:</p>
<p>definition<br>
  foo :: T<br>
where<br>
  “foo = bar”</p>
<p>because I tend to have long types and long definitions, sometimes both over multiple lines. The <code>where</code> in the same line as the definition adds noise to what I’m most interested in (the definition itself).</p>
<p>The variant</p>
<p>definition foo :: T<br>
where<br>
  “foo = bar”</p>
<p>works more nicely with folding.</p>
<p>definition foo :: "T =&gt; T =&gt; (some, other, 'params) list =&gt;<br>
                   T"<br>
where<br>
  “foo = bar”</p>
<p>forces too much indentation for the line break.</p>
<p>Maybe the solution is simply to have both variants, the folding-friendly variant when everything fits on the line, the multi-line one, when it doesn’t.</p>
<p>What do people think about this one for long types?</p>
<p>definition foo ::<br>
  "T =&gt; T =&gt; (some, other, 'params) list =&gt; T"<br>
where<br>
  “foo = bar”</p>
<p>Cheers,<br>
Gerwin</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294642253"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294642253" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294642253">(Aug 22 2022 at 10:03)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;</p>
<blockquote>
<p>definition foo ::<br>
  "T =&gt; T =&gt; (some, other, 'params) list =&gt; T"<br>
where<br>
  “foo = bar”<br>
</p>
</blockquote>
<p>I usually use, for long types and long definition terms: <br>
  definition foo<br>
  :: "long =&gt; (type, yeah) they =&gt; (can,get) really =&gt; long"<br>
  where<br>
    "foo a b c = do {<br>
      let x = f a;<br>
      y &lt;- g (b,c,x);<br>
      while (...) do {<br>
        ...<br>
        if ... then<br>
          ...<br>
        else<br>
          ...<br>
      } (s_0)<br>
    }"</p>
<p>So I even need apply some indentation inside the definition, and this<br>
simply looks best if the definition term starts at the begining of a<br>
line. I even sometimes think about</p>
<p>"foo a b c = <br>
  do {<br>
    ...<br>
  }"</p>



<a name="294643675"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294643675" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294643675">(Aug 22 2022 at 10:12)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is not a counter-example yet: the material after the 'where' can be <br>
broken up further, of course:</p>
<p>definition foo :: T<br>
where<br>
   "foo =<br>
     let val x = long_material<br>
     in multiple_lines x end"</p>
<p>There are many possibilities.  The main purpose of the exercise is to <br>
follow these principles:</p>
<p>* The first line is restricted to the most relevant information for<br>
     SideKick tree view etc. (keyword 'where' is no relevant information).</p>
<p>* The overall layout follows the structure of nesting and fits into the<br>
     strict line length of 80-100 characters.</p>
<p>Makarius</p>



<a name="294643861"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294643861" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294643861">(Aug 22 2022 at 10:13)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Sun, 31 May 2015, Gerwin Klein wrote:</p>
<blockquote>
<p>Personally, I like the most line-consuming form:</p>
<p>definition<br>
 foo :: T<br>
where<br>
 “foo = bar”</p>
</blockquote>
<p>This form reminds me of ancient times of Proof General 2.0: head keyword <br>
standing alone, then the body below it.  I can't remember why be converged <br>
to that in around 1999.  Today I find it wasteful in vertical space, with <br>
these odd 16x9 displays.  (Apart from the lack of relevant information in <br>
line 1 for SideKick.)</p>
<blockquote>
<p>because I tend to have long types and long definitions, sometimes both <br>
over multiple lines. The <code>where</code> in the same line as the definition adds <br>
noise to what I’m most interested in (the definition itself).</p>
<p>The variant</p>
<p>definition foo :: T<br>
where<br>
 “foo = bar”</p>
<p>works more nicely with folding.</p>
</blockquote>
<p>I am also using this routinely for anything that is not just very short. <br>
Putting the 'where' and the proposition on the same line is actually not <br>
so frequent, since real specifications don't fit there.</p>
<blockquote>
<p>definition foo ::<br>
 "T =&gt; T =&gt; (some, other, 'params) list =&gt; T"<br>
where<br>
 “foo = bar”</p>
</blockquote>
<p>It fits into the principle of having relevant information on line 1, and <br>
breaking the rest according to normal indentation standards.</p>
<p>A definition and a theorem statement are analogous, and we already see <br>
things like this routinely:</p>
<p>theorem a: "short statement"</p>
<p>theorem b:<br>
   "long statement<br>
     broken into<br>
     lines"</p>
<p>theorem c:<br>
   fixes ...<br>
   assumes ...<br>
   shows ...</p>
<p>Makarius</p>



<a name="294644387"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294644387" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294644387">(Aug 22 2022 at 10:17)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
This is the form I use most. It only uses two lines and keeps as much<br>
space as possible for the actual definition. I don't mind seeing the<br>
unnecessary "where" in the sidekick -- it is at the end of the line,<br>
after all. Also, seeing the name suffices for my purposes, so even the<br>
type is unnecessary (for me).</p>
<p>I mostly use the sidekick to see the section structure. I would like to<br>
see more information about my lemmas there (instead of just the name),<br>
but I almost always state my lemmas in structured form, so I have a line<br>
break after name.</p>
<p>-- Lars</p>



<a name="294644567"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294644567" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294644567">(Aug 22 2022 at 10:18)</a>:</h4>
<p>From: Christine Sherif Rizkallah &lt;<a href="mailto:christine2711987@gmail.com">christine2711987@gmail.com</a>&gt;<br>
definition<br>
 foo :: T<br>
where<br>
 “foo = bar”</p>
<p>Its nice to have a line to separate the type and the actual definition.</p>
<p>A more important issue though is recommending always explicitly writing the<br>
types.</p>



<a name="294645863"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle%20style%20guide/near/294645863" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle.20style.20guide.html#294645863">(Aug 22 2022 at 10:27)</a>:</h4>
<p>From: Holger Blasum &lt;<a href="mailto:hbl@sysgo.com">hbl@sysgo.com</a>&gt;<br>
[..]</p>
<p>The availability of the EURO-MILS deliverable "Used Formal Methods" <br>
<a href="http://www.euromils.eu/downloads/Deliverables/Y2/2015-EM-UsedFormalMethods-WhitePaper.pdf">http://www.euromils.eu/downloads/Deliverables/Y2/2015-EM-UsedFormalMethods-WhitePaper.pdf</a><br>
might an on-topic contribution to this thread (discussions on Isabelle style).</p>
<p>best,</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>