<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle2014-RC0: lift_definition ignores no_code · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2014-RC0.3A.20lift_definition.20ignores.20no_code.html">[isabelle] Isabelle2014-RC0: lift_definition ignores no_code</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294283995"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2014-RC0%3A%20lift_definition%20ignores%20no_code/near/294283995" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2014-RC0.3A.20lift_definition.20ignores.20no_code.html#294283995">(Aug 19 2022 at 15:00)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
With Isabelle2014-RC1 approaching, I would like to revive this questions<br>
as I am also, so to speak, a »stake holder« of the theories where this<br>
problem occurs.</p>
<p>So,<br>
a) is this a deliberate change? (There is however no entry containing<br>
»lift« in the NEWS).<br>
b) if not, what shall we do about it?  Someone must put on the helmet<br>
and dig into to investigate,</p>
<p>Florian<br>
<a href="/user_uploads/14278/NNJC1jCB1fiGSdGafoblOZJI/signature.asc">signature.asc</a></p>



<a name="294284048"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2014-RC0%3A%20lift_definition%20ignores%20no_code/near/294284048" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2014-RC0.3A.20lift_definition.20ignores.20no_code.html#294284048">(Aug 19 2022 at 15:00)</a>:</h4>
<p>From: Ondřej Kunčar &lt;<a href="mailto:kuncar@in.tum.de">kuncar@in.tum.de</a>&gt;<br>
I'll do it.</p>



<a name="294284586"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2014-RC0%3A%20lift_definition%20ignores%20no_code/near/294284586" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2014-RC0.3A.20lift_definition.20ignores.20no_code.html#294284586">(Aug 19 2022 at 15:03)</a>:</h4>
<p>From: Ondřej Kunčar &lt;<a href="mailto:kuncar@in.tum.de">kuncar@in.tum.de</a>&gt;<br>
Was addressed in b590fcd03a4a. Andreas, please, double-check that it <br>
works for you. I tested it only on your minimal example.</p>
<p>Ondrej</p>



<a name="294284689"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2014-RC0%3A%20lift_definition%20ignores%20no_code/near/294284689" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2014-RC0.3A.20lift_definition.20ignores.20no_code.html#294284689">(Aug 19 2022 at 15:04)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Hi Ondrej,</p>
<p>Thanks. It also works in my real case.</p>
<p>Best,<br>
Andreas</p>



<a name="294286397"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2014-RC0%3A%20lift_definition%20ignores%20no_code/near/294286397" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2014-RC0.3A.20lift_definition.20ignores.20no_code.html#294286397">(Aug 19 2022 at 15:13)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
In Isabelle2014-RC0, lift_definition sometimes forgets that the setup_lifting declaration <br>
has been given the (no_code) option. When that happens, I get bogus code equations in the <br>
code generator setup which break the value command, because even NBE then complains about <br>
sort constraints being violated. Below is an example that works in Isabelle2013-2, but not <br>
in Isabelle2014-RC0. Of course, I can manually delete the code equations, but it would be <br>
nicer if lift_definition could just stick to what setup_lifting has been told.</p>
<p>theory Scratch imports "~~/src/HOL/Main" begin</p>
<p>typedef ('a, 'b) foo = "{f :: 'a ⇒ 'b. ∀x. f x = undefined}" sorry<br>
setup_lifting (no_code) type_definition_foo</p>
<p>lift_definition make :: "('a ⇒ 'b) ⇒ ('a, 'b) foo"<br>
   is "λg. if ∀x. g x = undefined then g else (λ_. undefined)" sorry</p>
<p>definition bar where "bar = make (λx :: nat. 0 :: nat)"</p>
<p>value "bar"</p>
<p>(* evaluates in Isabelle2013-2 to "make (λu. 0)",<br>
but raises the following error message in Isabelle2014-RC0:</p>
<p>Wellsortedness error<br>
(in code equation bar ≡ make (λx. zero_nat_inst.zero_nat),<br>
with dependency "Pure.dummy_pattern" -&gt; "bar"):<br>
Type nat not of sort enum<br>
No type arity nat :: enum</p>
<p>*)</p>
<p>Best,<br>
Andreas</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>