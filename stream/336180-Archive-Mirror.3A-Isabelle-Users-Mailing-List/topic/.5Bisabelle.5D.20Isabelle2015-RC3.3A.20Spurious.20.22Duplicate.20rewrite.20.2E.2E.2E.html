<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle2015-RC3: Spurious &quot;Duplicate rewrite ... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html">[isabelle] Isabelle2015-RC3: Spurious &quot;Duplicate rewrite ...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294639210"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639210" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639210">(Aug 22 2022 at 09:42)</a>:</h4>
<p>From: bnord &lt;<a href="mailto:bnord01@gmail.com">bnord01@gmail.com</a>&gt;<br>
I observed the following confusing behaviour while porting part of my <br>
development from I14 to I15RC3:</p>
<p>I had some broken mentis calls in some "don't care proofs" so I simply <br>
invoked Sledgehammer there. While Sledgehammer was running the "apply <br>
auto" or "using" right in front of it suddenly was underlined orange and <br>
a couple of "ignoring duplicate rewrite rule" warnings (listing local <br>
facts) popped up in the output. After Sledgehammer finished running the <br>
warning disappeared again.</p>
<p>Another small focus problem which I find confusing: When the <br>
Sledgehammer panel isn't in focus you can mouse over a suggested proof <br>
and it will be highlighted but when you click on it nothing happens <br>
besides switching focus.</p>
<p>Best<br>
     Benedikt</p>



<a name="294639233"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639233" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639233">(Aug 22 2022 at 09:43)</a>:</h4>
<p>From: bnord &lt;<a href="mailto:bnord01@gmail.com">bnord01@gmail.com</a>&gt;<br>
Small follow up,</p>
<p>when selecting a found proof Sledgehammer keeps running and during this <br>
time the syntax highlighting is wrong (apply blue instead of red) and <br>
the inserted command isn't processed until Sledgehammer finished <br>
running/cancelled.</p>
<p>Best<br>
     Benedikt</p>



<a name="294639264"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639264" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639264">(Aug 22 2022 at 09:43)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Just as a further hint. I experienced the same (only with RC3).</p>
<p>On a (maybe) related note. Whenever I start sledgehammer (through the <br>
panel) and want to do a query (for finding theorems) at the same time, <br>
it seems that I have to wait until sledgehammer is finished before I <br>
obtain any results (this is without moving the cursor after starting <br>
sledgehammer).</p>
<p>Maybe this is just because sledgehammer takes up so many resources that <br>
find_theorems is much slower, or is there a real sequential dependency?</p>
<p>cheers</p>
<p>chris</p>



<a name="294639304"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639304" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639304">(Aug 22 2022 at 09:43)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This should work in parallel, assuming that free worker threads are <br>
available.  Sledgehammer uses as many threads as there are provers.</p>
<p>Find theorems also uses <a href="http://Par_List.map">Par_List.map</a>, so it benefits from extra threads, <br>
but does not require them.  1 thread should be sufficient.</p>
<p>Makarius</p>



<a name="294639334"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639334" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639334">(Aug 22 2022 at 09:43)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This sounds like another episode of the game "funny window managers <br>
against Java/AWT".  Just the standard questions:</p>
<p>OS platform?</p>
<p>Window manager?</p>
<p>Java/Swing Look-and-feel?</p>
<p>Makarius</p>



<a name="294639357"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639357" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639357">(Aug 22 2022 at 09:43)</a>:</h4>
<p>From: bnord &lt;<a href="mailto:bnord01@gmail.com">bnord01@gmail.com</a>&gt;<br>
Am 08.05.15 um 14:38 schrieb Makarius:</p>
<blockquote>
<p>OS platform?<br>
OS X 10.10<br>
  Window manager?<br>
the "default"<br>
  Java/Swing Look-and-feel? <br>
the "default"</p>
</blockquote>



<a name="294639451"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639451" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639451">(Aug 22 2022 at 09:44)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This is an artifact of the internal protocol: Sledgehammer runs as a PIDE <br>
print command, the result is captured by the panel, the print command is <br>
removed.  Any uncontrolled warnings that are emitted by the tool in <br>
between are shown in the document view, just like for Auto Sledgehammer, <br>
for example.</p>
<p>The following changesets tighten that aspect of Sledgehammer<br>
<a href="https://bitbucket.org/isabelle_project/isabelle-release/commits/d8a4fe35da00">https://bitbucket.org/isabelle_project/isabelle-release/commits/d8a4fe35da00</a><br>
<a href="https://bitbucket.org/isabelle_project/isabelle-release/commits/bcd9a70342be">https://bitbucket.org/isabelle_project/isabelle-release/commits/bcd9a70342be</a><br>
so it should look nicer in the next release candiate.</p>
<p>Makarius</p>



<a name="294639460"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639460" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639460">(Aug 22 2022 at 09:44)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That is actually a portable cross-platform feature of JDialog.</p>
<p>The easiest way to see the effect is to use the 'help' command and detach <br>
the result as Info window.  The main window focused, the detached window <br>
unfocused, a mouse click into the detached window produces a mouse event <br>
on the main window (!), just before transferring focus. Only Oracle knows <br>
what are the reasons for that.</p>
<p>Note that floating doackables used to be based on JFrame in the past, but <br>
that can be much worse: window unreachable behind the main window.</p>
<p>I did not find any further advice on the Web of this focus effect of <br>
JDialog, and the last time I asked about JDialog vs. JFrame vs. JWindow on <br>
stackoverflow, I got removed in a brutal way.</p>
<p>The situation is the same in Isabelle2014, so there won't be any attempts <br>
to refine that detail further in Isabelle2015.</p>
<p>Makarius</p>



<a name="294639468"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639468" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639468">(Aug 22 2022 at 09:44)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Fri, 8 May 2015, bnord wrote:</p>
<blockquote>
<p>when selecting a found proof Sledgehammer keeps running and during this <br>
time the syntax highlighting is wrong (apply blue instead of red)</p>
</blockquote>
<p>I guess that it is right, and the observation merely a change of semantics <br>
in Isabelle2015-RC3 compared to Isabelle2014.</p>
<p>Improper Isar commands like 'apply' are now syntactically like other <br>
commands (blue-ish), and semantically marked-up as "improper" (red-ish). <br>
There is further semantic markup of the same kind for other things, e.g. <br>
rule_tac references to implicit goal parameters.</p>
<p>So I guess that above some 'apply' command in the text became somehow <br>
inactive due to editing, lacking its semantic markup.  It should regain <br>
the red hue when it is processed later.</p>
<blockquote>
<p>the inserted command isn't processed until Sledgehammer finished <br>
running/cancelled.</p>
</blockquote>
<p>I would expect that this works, but there are not enough ML threads ready. <br>
I've just tried it with threads=2 vs. threads=12 on the now infamous <br>
example</p>
<p>lemma "m &lt; n + 1 ⟹ setsum f {m..n + 1} = setsum f {m..n} + f (n + 1 :: int)"</p>
<p>with its rather long-running provers in the background.</p>
<p>Playing with it for a minute, I was satisfied with the scheduling.</p>
<p>Makarius</p>



<a name="294639499"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639499" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639499">(Aug 22 2022 at 09:44)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
These stray warnings had a nice little side-effect for me: They notified<br>
me that sledgehammer had found a proof. As I often switch to the output<br>
or query panels when sledgehammer is busy, this was often useful.</p>
<p>-- Lars</p>
<p>BTW: <a href="https://xkcd.com/1172/">https://xkcd.com/1172/</a> ;)</p>



<a name="294639524"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2015-RC3%3A%20Spurious%20%22Duplicate%20rewrite%20.../near/294639524" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2015-RC3.3A.20Spurious.20.22Duplicate.20rewrite.20.2E.2E.2E.html#294639524">(Aug 22 2022 at 09:45)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This well-known cartoon proves that the words "bug" and "feature" are <br>
meaningless.</p>
<p>A problem with the current situation is that we still have too many <br>
"modes" of sledgehammer, some obsolete after the removal of TTY / Proof <br>
General.</p>
<p>Before the change bcd9a70342be, I did not know that the main entry point <br>
of sledgehammer has moved elsewhere.  There are more details like <br>
treatment of "using" facts that are unified by it, not just disabling <br>
warnings.</p>
<p>Incremental results can be emitted indepently of that as official <br>
information messages.  I don't know why this was not tried before, <br>
probably also because of too much "modes" confusion.</p>
<p>Presently on the release ramp, we should concentrate on the real problems, <br>
such as robust Windows support.</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>