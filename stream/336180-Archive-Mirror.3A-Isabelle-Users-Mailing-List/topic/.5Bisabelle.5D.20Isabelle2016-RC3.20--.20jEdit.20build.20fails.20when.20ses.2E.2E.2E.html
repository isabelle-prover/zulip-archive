<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle2016-RC3 -- jEdit build fails when ses... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html">[isabelle] Isabelle2016-RC3 -- jEdit build fails when ses...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294666532"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294666532" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294666532">(Aug 22 2022 at 12:39)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
Hi,</p>
<p>I'm trying to start RC3 jEdit with Collections pre-loaded. I'm using<br>
afp-devel 138306721319. I also tried it with a less recent version<br>
which worked on RC2.</p>
<p>For a fresh start, I deleted my .isabelle/Isabelle-2016-RC3 directory.</p>
<p>I started Isabelle from the afp-devel toplevel with<br>
  ~/Downloads/Isabelle2016-RC3/bin/isabelle jedit -d thys/ -l Collections</p>
<p>It starts building everything, starting from session HOL in the jEdit window.<br>
At some point (Collections), the build just fails. These are the last<br>
parts of the output:</p>
<p>...<br>
Collections: theory Refine_Monadic_Userguide</p>
<p>Collections FAILED<br>
(see also /home/diekmann/.isabelle/Isabelle2016-RC3/heaps/polyml-5.6_x86-linux/log/Collections)</p>
<p>Int_of_integer 3072, (),<br>
                   Branch<br>
                    (B, Branch (..., ...), Int_of_integer 3584, ...))),<br>
            Int_of_integer 4096, (),<br>
            Branch<br>
             (B, Branch<br>
                  (B, Branch<br>
                       (B, Branch (..., ...), Int_of_integer 4608, ...),<br>
                   Int_of_integer 5120, (),<br>
                   Branch (B, Branch (..., ...), Int_of_integer 5632, ...)),<br>
              Int_of_integer 6144, (),<br>
              Branch<br>
               (B, Branch (B, Branch (..., ...), Int_of_integer 6656, ...),<br>
                Int_of_integer 7168, (),<br>
                Branch (B, Branch (..., ...), Int_of_integer 7680, ...))))<br>
          ):<br>
   (Isabelle1955749.Generated_Code.inta, unit)<br>
   Isabelle1955749.Generated_Code.rbt<br>
val it = (): unit<br>
ML&gt; Exception- Fail "Insufficient memory" raised<br>
Unfinished session(s): Collections<br>
Return code: 1</p>
<p>Session build failed -- prover process remains inactive!</p>
<p>When the build is at "Collections: theory Refine_Monadic_Userguide",<br>
at most 5.8GB RAM of 7.8GB RAM are used on my system (tested three<br>
times).</p>
<p>However, when I cd to thys and start isabelle with<br>
  ~/Downloads/Isabelle2016-RC3/bin/isabelle jedit -d . -l Collections<br>
it works fine.</p>
<p>I could reproduce this  several times (3 tests each, always the same<br>
behavior). It does not look like a _random_ memory shortage to me. The<br>
whole thing worked fine with the previous RCs.</p>
<p>This behavior does not occur with the command line build. I.e.<br>
  ~/Downloads/Isabelle2016-RC3/bin/isabelle build -d thys -v Collections<br>
works fine.</p>
<p>My system has 8GB of RAM, 2 physical cores + hyperthreading, Linux<br>
ubuntu 14.04, unity.</p>
<p>Best Regards,<br>
  Cornelius</p>



<a name="294667551"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667551" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667551">(Aug 22 2022 at 12:44)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
This error is strange, and we should be careful not to rule out building<br>
big sessions without really big machines. Btw Collections is of moderate<br>
size, compared to, eg, JinjaThreads. </p>
<p>Is there any way to measure how "close" a build comes to an<br>
out-of-memory error, to figure out whether something serious happened<br>
between RC2 and RC3, or whether on RC2 the build ran at 99% of available<br>
memory, on on RC3 it happens to be 101%.</p>



<a name="294667568"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667568" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667568">(Aug 22 2022 at 12:44)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
2016-02-02 18:45 GMT+01:00 Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;:</p>
<blockquote>
<p>This error is strange, and we should be careful not to rule out building<br>
big sessions without really big machines.</p>
</blockquote>
<p>I agree. My office laptop has 8GB of RAM. It would be really hard if<br>
this is not enough for Isabelle. Students often have laptops with less<br>
RAM.</p>
<p>This thread should be called: Isabelle2016 uses too much RAM.</p>
<p>For the way I (personally) use Isabelle, this would be release-critical.</p>
<p>&lt;off topic&gt;<br>
I started buying big machines after I got familiar with Isabelle. I<br>
was a happy intel atom 1GM RAM user before that. But Isabelle was<br>
working okay in 2012 on that device. I understand that these times are<br>
long gone. But requiring more that a common, up-to-date, medium-class,<br>
off-the-shelf laptop to run Isabelle will make it really hard to get<br>
new users or to use Isabelle in a lecture.<br>
&lt;/off topic&gt;</p>
<blockquote>
<p>Btw Collections is of moderate<br>
size, compared to, eg, JinjaThreads.</p>
</blockquote>
<p>&lt;more off topic&gt;<br>
If Collections is medium-sized, does this mean this theory can<br>
determine the minimum amount of RAM necessary to do something useful<br>
with Isabelle? Should this information be on the website?<br>
&lt;/more off topic&gt;</p>
<blockquote>
<p>Is there any way to measure how "close" a build comes to an<br>
out-of-memory error, to figure out whether something serious happened<br>
between RC2 and RC3, or whether on RC2 the build ran at 99% of available<br>
memory, on on RC3 it happens to be 101%.</p>
</blockquote>
<p>I booted my machine with only 6BG of ram (kernel option) and now the<br>
build also fails at the same position with RC2.</p>
<p>Isabelle 2015 (with my 2015 snapshot of the afp, which makes the whole<br>
measurement not comparable) can build Collection on 6GB RAM. But there<br>
was a moment where it "felt like" I almost ran out of RAM.</p>
<p>Cornelius</p>
<blockquote>
<p>On Di, 2016-02-02 at 18:26 +0100, C. Diekmann wrote:</p>
<blockquote>
<p>Thanks.</p>
<p>If I build it with "isabelle build -d . -b Collections", I also get<br>
the "Insufficient memory" error.</p>
<p>With RC2, the same works fine. I can run the following without any problems:<br>
  $ISABELLE build -d $AFP -v -b Collections<br>
  $ISABELLE jedit -d $AFP -l Collections</p>
<p>It should be possible to build Collections with only 8GB of RAM,<br>
right? I know that a student used this entry in 2015 with a 4GB RAM<br>
laptop. Something seems to eat up the RAM in RC3 when finalizing* the<br>
session image.</p>
<p>*) I'm just guessing that it happens at finalizing because the<br>
out-of-memory occurs at the last theory and does not occur if I omit<br>
the "-b" option.</p>
<p>Best Regards,<br>
  Cornelius</p>
<p>2016-02-02 17:04 GMT+01:00 Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;:</p>
<p>On Tue, 2 Feb 2016, C. Diekmann wrote:</p>
<blockquote>
<blockquote>
<p>Now I also get the error when I build from the current directory.<br>
~/Downloads/Isabelle2016-RC3/bin/isabelle jedit -d . -l Collections</p>
<p>If I build Collections first on the command line<br>
 ~/Downloads/Isabelle2016-RC3/bin/isabelle build -d . -v Collections<br>
the build works.<br>
If I try to load it in jEdit (previous command), it is building<br>
Collections again, but not its dependencies. Shouldn't it load<br>
Collections now without building? The jEdit build fails with the<br>
previously mentioned error.</p>
</blockquote>
<p>You need to build a session image using "isabelle build -b".</p>
<p>That also makes a difference in resource requirements.</p>
<p>Makarius<br>
</p>
</blockquote>
</blockquote>
</blockquote>



<a name="294667604"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667604" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667604">(Aug 22 2022 at 12:45)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Have you used 64bit poly? What happens on 32bit poly?</p>
<p>\-------- Originalnachricht --------</p>



<a name="294667616"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667616" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667616">(Aug 22 2022 at 12:45)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
The NEWS file says again that resource requirements have been reduced. <br>
Interestingly that has been a theme of all releases of the last years.</p>
<p>Whenever the resource requirements of the systems are reduced, <br>
applications fill up the free space again.</p>
<p>I don't complain about that, it is just how things work. You merely need <br>
to be slightly above average in hardware capacities to cope with that.<br>
8 GB is below that average.  Further below are small mobile devices, not <br>
proper computers.</p>
<p>Makarius</p>



<a name="294667644"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667644" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667644">(Aug 22 2022 at 12:45)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Using Poly/ML with x86_64 is actually a common mistake -- it is the <br>
default on most Linux installations, but the Isabelle installation <br>
instructions say explicitly that 32bit libraries should be installed.</p>
<p>We are back to the question how much documentation people want to use. <br>
Anybody with higher-than average requirements should peek at advanced <br>
texts occasionally.</p>
<p>What also helps under tight ML heap conditions to is vary the ML_OPTIONS a <br>
bit, concerning the initial heap size.  This changes the way how Poly/ML <br>
grows and shrinks the heap, and sometimes it makes a difference.</p>
<p>Makarius</p>



<a name="294667655"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667655" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667655">(Aug 22 2022 at 12:45)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I’ve used an 8 GB laptop (Macbook Pro) for years, generally with success. Of course things are better with a bigger machine, but it’s not essential.</p>
<p>Larry</p>



<a name="294667670"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667670" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667670">(Aug 22 2022 at 12:45)</a>:</h4>
<p>From: Matthew Fernandez &lt;<a href="mailto:matthew.fernandez@nicta.com.au">matthew.fernandez@nicta.com.au</a>&gt;<br>
On 03/02/16 09:35, Makarius wrote:</p>
<blockquote>
<p>On Tue, 2 Feb 2016, Peter Lammich wrote:</p>
<blockquote>
<p>Have you used 64bit poly? What happens on 32bit poly?</p>
</blockquote>
<p>Using Poly/ML with x86_64 is actually a common mistake -- it is the default on most Linux installations, but the<br>
Isabelle installation instructions say explicitly that 32bit libraries should be installed.</p>
</blockquote>
<p>Maybe I'm missing some context for this statement, but why is using 64-bit Poly/ML a mistake? This is what I use and, as<br>
far as I'm aware, is the default configuration in the l4.verified proofs setup [0]. I don't have a deep knowledge of the<br>
Poly/ML implementation but my understanding is that, while the 64-bit version uses more memory to accomplish the same<br>
thing, you <em>must</em> use it if you want to use more than N bytes of RAM (for some N; 4GB?). If this is not the case, I<br>
would love to be enlightened as to how to better configure my system.</p>
<p>[0]: <a href="https://github.com/seL4/l4v/blob/master/misc/etc/settings#L19">https://github.com/seL4/l4v/blob/master/misc/etc/settings#L19</a></p>
<blockquote>
<p>We are back to the question how much documentation people want to use. Anybody with higher-than average requirements<br>
should peek at advanced texts occasionally.</p>
<p>What also helps under tight ML heap conditions to is vary the ML_OPTIONS a bit, concerning the initial heap size.  This<br>
changes the way how Poly/ML grows and shrinks the heap, and sometimes it makes a difference.</p>
<p>Makarius</p>
</blockquote>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294667689"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667689" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667689">(Aug 22 2022 at 12:45)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
2016-02-02 23:35 GMT+01:00 Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;:</p>
<blockquote>
<p>On Tue, 2 Feb 2016, Peter Lammich wrote:</p>
<blockquote>
<p>Have you used 64bit poly? What happens on 32bit poly?</p>
</blockquote>
<p>Using Poly/ML with x86_64 is actually a common mistake -- it is the default<br>
on most Linux installations, but the Isabelle installation instructions say<br>
explicitly that 32bit libraries should be installed.</p>
</blockquote>
<p>I'm not getting the "bulky 64bit version" warning when i start jEdit<br>
or build, so I guess that I'm using the 32bit library.</p>
<blockquote>
<p>We are back to the question how much documentation people want to use.<br>
Anybody with higher-than average requirements should peek at advanced texts<br>
occasionally.</p>
</blockquote>
<p>Is Isabelle2016 still issuing a warning on startup if the 64bit<br>
libraries are used?</p>
<p>Cornelius</p>



<a name="294667924"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667924" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667924">(Aug 22 2022 at 12:46)</a>:</h4>
<p>From: David Matthews &lt;<a href="mailto:dm@prolingua.co.uk">dm@prolingua.co.uk</a>&gt;<br>
Actually, that used to be the case.  At one time the initial heap size <br>
was also used to calculate the increment if the heap needed to be <br>
expanded.  Since Poly/ML 5.5 the heap sizing is adjusted depending on <br>
the GC load.  The heap size is only adjusted after a major GC so if you <br>
know you're going to need a large heap it may help to set the minimum <br>
size before you start.</p>
<p>David</p>



<a name="294667951"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667951" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667951">(Aug 22 2022 at 12:47)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
For more than 3 years big Isabelle applications are usually run in <br>
constant space of approx. 3.5 GB, i.e. the maximum on 32bit.  This applies <br>
to all of Isabelle + AFP, and is usually the most efficient way on small <br>
and big machines.</p>
<p>Applications that really need more GBs -- presumably l4.verified is the <br>
only one on the planet -- there is no other way than to move on to bigger <br>
machines and the 64bit model.</p>
<p>What kind of hardware do l4.verified people use for that?</p>
<p>Makarius</p>



<a name="294667975"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667975" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667975">(Aug 22 2022 at 12:47)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Not any longer.  This warning usually showed up in unexpected situations, <br>
and did not show up when the standard Isabelle application wrapper was <br>
used.</p>
<p>There were various changes in the auto-configuration of 32bit vs. 64bit <br>
platforms, both for the ML system and the JVM.  You now get this <br>
information in the title of the build dialog on the first startup, but it <br>
is possible to overlook it. (And sometimes people think that 64bit is <br>
always better than 32bit.)</p>
<p>I was thinking of an additional warning dialog for a situation where the <br>
option ML_system_64 is not set (i.e. the default of Isabelle), but the <br>
result forced to x86_64-linux due to lack of 32bit g++ libraries (i.e. the <br>
default of most Linux installations).  I did not do it, because it may <br>
cause puzzlement to new users or casual users, e.g. of introductory <br>
Isabelle tutorials.  The difference is only relevant to really big <br>
applications.</p>
<p>Isabelle power users, especially on Linux, need to do some more <br>
fine-tuning to get various side-conditions right.  The details are listed <br>
here: <a href="http://isabelle.in.tum.de/website-Isabelle2016-RC3/installation.html">http://isabelle.in.tum.de/website-Isabelle2016-RC3/installation.html</a></p>
<p>Makarius</p>



<a name="294667993"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294667993" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294667993">(Aug 22 2022 at 12:47)</a>:</h4>
<p>From: Matthew Fernandez &lt;<a href="mailto:matthew.fernandez@nicta.com.au">matthew.fernandez@nicta.com.au</a>&gt;<br>
Raf Kolanski can probably provide details about our server, but for my own desktop machine I have an Intel i7 with 32GB<br>
RAM. On my current proofs I regularly exceed 20GB.</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294668004"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668004" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668004">(Aug 22 2022 at 12:47)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;<br>
The standard desktop setup is 32GB RAM with a higher-end quadcore i7. This allow you to run 2 sessions in parallel without too much trouble. Without memory pressure it’ll take about 20GB, but with GC it should fit into 16GB (it’s very close to that 16GB limit, sometimes over sometimes under, depending on changes in proofs, Isabelle, polyml, Linux or Mac, etc).</p>
<p>Server side we’re currently running an 8-core i7 with 128GB, but it’s getting a bit old and is in need of a refresh.</p>
<p>Most of the proofs do actually run fine on a 8GB laptop. It’s only the later stages and C-level proofs that need that much memory.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="294668063"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668063" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668063">(Aug 22 2022 at 12:47)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Make this at least 2. IsaFoR already fails to build its session HOL-AFP<br>
(which just brings together all the necessary theories from the AFP) in<br>
32bit mode.</p>
<p>We are using the following hardware (our "build server", a workstation<br>
especially for people in my lab working on IsaFoR):<br>
cpu: i7 (12 Cores a la 3.5 Ghz)<br>
mem: 32 GB</p>
<p>In principle it is also possible to build IsaFoR on my "laptop" (due to<br>
its weight you might argue that it classifies as such):<br>
cpu: i7 (4 Cores a la 2.4 Ghz)<br>
mem: 16 GB</p>
<p>However, this makes my laptop completely unusable for about 1h and thus<br>
I usually prefer to build heap images on the "build server" and then<br>
rsync them over onto my laptop.</p>
<p>cheers</p>
<p>chris</p>
<p>PS: HOL-AFP pulls in the following theories</p>
<p>Building HOL-AFP ...<br>
HOL-AFP: theory AssocList<br>
HOL-AFP: theory Bit<br>
HOL-AFP: theory Bits<br>
HOL-AFP: theory Boolean_Algebra<br>
HOL-AFP: theory Comparator<br>
HOL-AFP: theory Derive_Manager<br>
HOL-AFP: theory Equal<br>
HOL-AFP: theory Divmod_Int<br>
HOL-AFP: theory Error_Syntax<br>
HOL-AFP: theory Extend_Partial_Order<br>
HOL-AFP: theory Foldi<br>
HOL-AFP: theory Missing_Ring<br>
HOL-AFP: theory Closure_Set<br>
HOL-AFP: theory FunctionLemmas<br>
HOL-AFP: theory Generator_Aux<br>
HOL-AFP: theory IArray<br>
HOL-AFP: theory ICF_Tools<br>
HOL-AFP: theory Infinite_Sequences<br>
HOL-AFP: theory Omega_Words_Fun<br>
HOL-AFP: theory Least_Enum<br>
HOL-AFP: theory List_Fusion<br>
HOL-AFP: theory Misc_Numeric<br>
HOL-AFP: theory Misc_Typedef<br>
HOL-AFP: theory Bit_Representation<br>
HOL-AFP: theory Containers_Auxiliary<br>
HOL-AFP: theory Error_Monad<br>
HOL-AFP: theory Efficient_Sort<br>
HOL-AFP: theory Bits_Bit<br>
HOL-AFP: theory Equality_Generator<br>
HOL-AFP: theory List_More<br>
HOL-AFP: theory Compare<br>
HOL-AFP: theory Comparator_Generator<br>
HOL-AFP: theory IArray_Addenda<br>
HOL-AFP: theory Missing_Multiset<br>
HOL-AFP: theory Quicksort<br>
HOL-AFP: theory IArray_Haskell<br>
HOL-AFP: theory Nat_Bijection<br>
HOL-AFP: theory Old_Datatype<br>
HOL-AFP: theory Option_ord<br>
HOL-AFP: theory Equality_Instances<br>
HOL-AFP: theory Ord_Code_Preproc<br>
HOL-AFP: theory Bits_Int<br>
HOL-AFP: theory Partial_Function_MR<br>
HOL-AFP: theory Numeral_Type<br>
HOL-AFP: theory Locale_Code<br>
HOL-AFP: theory Containers_Generator<br>
HOL-AFP: theory Improved_Code_Equations<br>
HOL-AFP: theory Check_Monad<br>
HOL-AFP: theory Strict_Sum<br>
HOL-AFP: theory Collection_Enum<br>
HOL-AFP: theory Collection_Eq<br>
HOL-AFP: theory Lexicographic_Order<br>
HOL-AFP: theory Missing_Polynomial<br>
HOL-AFP: theory Compare_Generator<br>
HOL-AFP: theory Neville_Aitken_Interpolation<br>
HOL-AFP: theory Set_Linorder<br>
HOL-AFP: theory Compare_Instances<br>
HOL-AFP: theory Compare_Rat<br>
HOL-AFP: theory Compare_Real<br>
HOL-AFP: theory Type_Length<br>
HOL-AFP: theory DList_Set<br>
HOL-AFP: theory Prio_List<br>
HOL-AFP: theory Lagrange_Interpolation<br>
HOL-AFP: theory Product_Lexorder<br>
HOL-AFP: theory RBT_Comparator_Impl<br>
HOL-AFP: theory Bool_List_Representation<br>
HOL-AFP: theory RBT_Compare_Order_Impl<br>
HOL-AFP: theory RBT_ext<br>
HOL-AFP: theory Record_Intf<br>
HOL-AFP: theory Refine_Chapter<br>
HOL-AFP: theory Compare_Order_Instances<br>
HOL-AFP: theory Misc<br>
HOL-AFP: theory Countable<br>
HOL-AFP: theory Refine_Util<br>
HOL-AFP: theory Anti_Unification<br>
HOL-AFP: theory Attr_Comb<br>
HOL-AFP: theory Autoref_Data<br>
HOL-AFP: theory Mk_Term_Antiquot<br>
HOL-AFP: theory Missing_Permutations<br>
HOL-AFP: theory Mpat_Antiquot<br>
HOL-AFP: theory Named_Sorted_Thms<br>
HOL-AFP: theory Tagged_Solver<br>
HOL-AFP: theory Regular_Set<br>
HOL-AFP: theory Restricted_Predicates<br>
HOL-AFP: theory Indep_Vars<br>
HOL-AFP: theory More_Bits_Int<br>
HOL-AFP: theory Mk_Record_Simp<br>
HOL-AFP: theory RingModuleFacts<br>
HOL-AFP: theory Select_Solve<br>
HOL-AFP: theory Seq<br>
HOL-AFP: theory Show<br>
HOL-AFP: theory Countable_Generator<br>
HOL-AFP: theory Minimal_Elements<br>
HOL-AFP: theory Regular_Exp<br>
HOL-AFP: theory Multiset_Extension<br>
HOL-AFP: theory Sublist<br>
HOL-AFP: theory Poly_Deriv<br>
HOL-AFP: theory Conjugate<br>
HOL-AFP: theory Missing_Unsorted<br>
HOL-AFP: theory CauchysMeanTheorem<br>
HOL-AFP: theory Parser_Monad<br>
HOL-AFP: theory MonoidSums<br>
HOL-AFP: theory Show_Instances<br>
HOL-AFP: theory Show_Real<br>
HOL-AFP: theory Bits_Integer<br>
HOL-AFP: theory Misc_Polynomial<br>
HOL-AFP: theory Show_Complex<br>
HOL-AFP: theory LinearCombinations<br>
HOL-AFP: theory Sqrt_Babylonian_Auxiliary<br>
HOL-AFP: theory Sturm_Library<br>
HOL-AFP: theory Sturm_Theorem<br>
HOL-AFP: theory Xml<br>
HOL-AFP: theory Transitive_Closure_Impl<br>
HOL-AFP: theory Utility<br>
HOL-AFP: theory Order_Polynomial<br>
HOL-AFP: theory Is_Rat_To_Rat<br>
HOL-AFP: theory Prime_Field<br>
HOL-AFP: theory Show_Poly<br>
HOL-AFP: theory NthRoot_Impl<br>
HOL-AFP: theory NDerivative<br>
HOL-AFP: theory Relation_Interpretation<br>
HOL-AFP: theory Transitive_Closure_List_Impl<br>
HOL-AFP: theory Missing_List<br>
HOL-AFP: theory Word_Miscellaneous<br>
HOL-AFP: theory Ring_Hom<br>
HOL-AFP: theory Prime_Factorization<br>
HOL-AFP: theory Polynomial_Field<br>
HOL-AFP: theory Matrix<br>
HOL-AFP: theory Missing_Fraction_Field<br>
HOL-AFP: theory Word<br>
HOL-AFP: theory Sqrt_Babylonian<br>
HOL-AFP: theory Ring_Hom_Poly<br>
HOL-AFP: theory Explicit_Roots<br>
HOL-AFP: theory SetIterator<br>
HOL-AFP: theory Digraph_Basic<br>
HOL-AFP: theory Bivariate_Polynomials<br>
HOL-AFP: theory Xmlt<br>
HOL-AFP: theory Complex_Roots_Real_Poly<br>
HOL-AFP: theory Dvd_Int_Poly<br>
HOL-AFP: theory Gauss_Lemma<br>
HOL-AFP: theory Refine_Lib<br>
HOL-AFP: theory Newton_Interpolation<br>
HOL-AFP: theory SetIteratorOperations<br>
HOL-AFP: theory Unique_Factorization_Domain<br>
HOL-AFP: theory Autoref_Phases<br>
HOL-AFP: theory Autoref_Tagging<br>
HOL-AFP: theory Refine_Mono_Prover<br>
HOL-AFP: theory Relators<br>
HOL-AFP: theory Equivalence_Checking<br>
HOL-AFP: theory Code_Target_Bits_Int<br>
HOL-AFP: theory Rational_Root_Test<br>
HOL-AFP: theory Code_Target_ICF<br>
HOL-AFP: theory Regexp_Method<br>
HOL-AFP: theory Gauss_Jordan<br>
HOL-AFP: theory Show_Matrix<br>
HOL-AFP: theory Ring_Hom_Matrix<br>
HOL-AFP: theory Param_Tool<br>
HOL-AFP: theory Abstract_Rewriting<br>
HOL-AFP: theory Almost_Full<br>
HOL-AFP: theory Param_HOL<br>
HOL-AFP: theory Collection_Order<br>
HOL-AFP: theory RTrancl<br>
HOL-AFP: theory Minimal_Bad_Sequences<br>
HOL-AFP: theory Parametricity<br>
HOL-AFP: theory Proper_Iterator<br>
HOL-AFP: theory Autoref_Id_Ops<br>
HOL-AFP: theory SetIteratorGA<br>
HOL-AFP: theory Almost_Full_Relations<br>
HOL-AFP: theory Polynomial_Interpolation<br>
HOL-AFP: theory Column_Operations<br>
HOL-AFP: theory It_to_It<br>
HOL-AFP: theory Well_Quasi_Orders<br>
HOL-AFP: theory Gauss_Jordan_Field<br>
HOL-AFP: theory Polynomial_Divisibility<br>
HOL-AFP: theory Autoref_Fix_Rel<br>
HOL-AFP: theory Derivation_Bound<br>
HOL-AFP: theory Relative_Rewriting<br>
HOL-AFP: theory RBT_Mapping2<br>
HOL-AFP: theory SN_Orders<br>
HOL-AFP: theory Decreasing_Diagrams_II_Aux<br>
HOL-AFP: theory Kruskal<br>
HOL-AFP: theory Word_Misc<br>
HOL-AFP: theory Determinant<br>
HOL-AFP: theory Square_Free_Factorization<br>
HOL-AFP: theory Unique_Factorization_Poly<br>
HOL-AFP: theory Autoref_Translate<br>
HOL-AFP: theory Autoref_Relator_Interface<br>
HOL-AFP: theory Autoref_Gen_Algo<br>
HOL-AFP: theory Decreasing_Diagrams_II<br>
HOL-AFP: theory Autoref_Tool<br>
HOL-AFP: theory Uint32<br>
HOL-AFP: theory SumSpaces<br>
HOL-AFP: theory RBT_Set2<br>
HOL-AFP: theory Autoref_Bindings_HOL<br>
HOL-AFP: theory Char_Poly<br>
HOL-AFP: theory Determinant_Impl<br>
HOL-AFP: theory Ordered_Semiring<br>
HOL-AFP: theory Polynomials<br>
HOL-AFP: theory SN_Order_Carrier<br>
HOL-AFP: theory VectorSpace<br>
HOL-AFP: theory HashCode<br>
HOL-AFP: theory Berlekamp_Hensel_Factorization<br>
HOL-AFP: theory Precomputation<br>
HOL-AFP: theory Set_Impl<br>
HOL-AFP: theory Matrix_Comparison<br>
HOL-AFP: theory Jordan_Normal_Form<br>
HOL-AFP: theory Hash_Generator<br>
HOL-AFP: theory Kronecker_Factorization<br>
HOL-AFP: theory Hash_Instances<br>
HOL-AFP: theory Derive<br>
HOL-AFP: theory Automatic_Refinement<br>
HOL-AFP: theory Idx_Iterator<br>
HOL-AFP: theory Refine_Misc<br>
HOL-AFP: theory RefineG_Domain<br>
HOL-AFP: theory RefineG_Transfer<br>
HOL-AFP: theory Show_Arctic<br>
HOL-AFP: theory Complexity_Carrier<br>
HOL-AFP: theory RefineG_Assert<br>
HOL-AFP: theory RefineG_Recursion<br>
HOL-AFP: theory Refine_Basic<br>
HOL-AFP: theory RefineG_While<br>
HOL-AFP: theory Rational_Factorization<br>
HOL-AFP: theory Refine_Det<br>
HOL-AFP: theory Matrix_Complexity<br>
HOL-AFP: theory Refine_Heuristics<br>
HOL-AFP: theory Refine_Leof<br>
HOL-AFP: theory Refine_Pfun<br>
HOL-AFP: theory Refine_While<br>
HOL-AFP: theory Algebraic_Numbers_Prelim<br>
HOL-AFP: theory Refine_Transfer<br>
HOL-AFP: theory Autoref_Monadic<br>
HOL-AFP: theory Refine_Automation<br>
HOL-AFP: theory Refine_Foreach<br>
HOL-AFP: theory Missing_VectorSpace<br>
HOL-AFP: theory VS_Connect<br>
HOL-AFP: theory Sturm_Rat<br>
HOL-AFP: theory Refine_Monadic<br>
HOL-AFP: theory Gen_Iterator<br>
HOL-AFP: theory Iterator<br>
HOL-AFP: theory ICF_Spec_Base<br>
HOL-AFP: theory RBT_add<br>
HOL-AFP: theory Gram_Schmidt<br>
HOL-AFP: theory Matrix_Kernel<br>
HOL-AFP: theory MapSpec<br>
HOL-AFP: theory SetSpec<br>
HOL-AFP: theory Mapping_Impl<br>
HOL-AFP: theory Compare_Complex<br>
HOL-AFP: theory Matrix_IArray_Impl<br>
HOL-AFP: theory Schur_Decomposition<br>
HOL-AFP: theory Jordan_Normal_Form_Uniqueness<br>
HOL-AFP: theory Map_To_Mapping<br>
HOL-AFP: theory Resultant<br>
HOL-AFP: theory Containers<br>
HOL-AFP: theory Compatibility_Containers_Regular_Sets<br>
HOL-AFP: theory SetIteratorCollectionsGA<br>
HOL-AFP: theory MapGA<br>
HOL-AFP: theory SetGA<br>
HOL-AFP: theory Jordan_Normal_Form_Existence<br>
HOL-AFP: theory RBTMapImpl<br>
HOL-AFP: theory Algebraic_Numbers<br>
HOL-AFP: theory Real_Algebraic_Numbers<br>
HOL-AFP: theory SetByMap<br>
HOL-AFP: theory RBTSetImpl<br>
HOL-AFP: theory Matrix_Impl<br>
HOL-AFP: theory RBT_Map_Set_Extension<br>
HOL-AFP: theory Transitive_Closure_RBT_Impl<br>
HOL-AFP: theory Real_Roots<br>
HOL-AFP: theory Show_Real_Alg<br>
HOL-AFP: theory Show_Real_Precise<br>
HOL-AFP: theory Complex_Algebraic_Numbers<br>
Timing HOL-AFP (12 threads, 231.218s elapsed time, 2018.896s cpu time,<br>
437.292s GC time, factor 8.73)<br>
HOL-AFP FAILED</p>



<a name="294668131"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668131" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668131">(Aug 22 2022 at 12:48)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
2016-02-03 21:54 GMT+01:00 Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;:</p>
<blockquote>
<p>On Wed, 3 Feb 2016, C. Diekmann wrote:</p>
<blockquote>
<p>I'm not getting the "bulky 64bit version" warning when i start jEdit or<br>
build, so I guess that I'm using the 32bit library.</p>
</blockquote>
<blockquote>
<p>Is Isabelle2016 still issuing a warning on startup if the 64bit libraries<br>
are used?</p>
</blockquote>
<p>Not any longer.  This warning usually showed up in unexpected situations,<br>
and did not show up when the standard Isabelle application wrapper was used.</p>
<p>There were various changes in the auto-configuration of 32bit vs. 64bit<br>
platforms, both for the ML system and the JVM.  You now get this information<br>
in the title of the build dialog on the first startup, but it is possible to<br>
overlook it. (And sometimes people think that 64bit is always better than<br>
32bit.)</p>
</blockquote>
<p>Is there a way to check my setup after the first startup?</p>
<blockquote>
<p>I was thinking of an additional warning dialog for a situation where the<br>
option ML_system_64 is not set (i.e. the default of Isabelle), but the<br>
result forced to x86_64-linux due to lack of 32bit g++ libraries (i.e. the<br>
default of most Linux installations).  I did not do it, because it may cause<br>
puzzlement to new users or casual users, e.g. of introductory Isabelle<br>
tutorials.  The difference is only relevant to really big applications.</p>
<p>Isabelle power users, especially on Linux, need to do some more fine-tuning<br>
to get various side-conditions right.  The details are listed here:<br>
<a href="http://isabelle.in.tum.de/website-Isabelle2016-RC3/installation.html">http://isabelle.in.tum.de/website-Isabelle2016-RC3/installation.html</a></p>
</blockquote>
<p>Where can I find the documentation how I can set the ML settings such<br>
that I can build Collections again?</p>
<blockquote>
<p>For more than 3 years big Isabelle applications are usually run in constant space of approx. 3.5 GB, i.e. the maximum on 32bit.</p>
</blockquote>
<p>If the build of a session image fails with an out of memory error, is<br>
it possible to do the build again with only one core/process to limit<br>
the memory usage to 3.5GB?</p>
<p>Cheers,<br>
  Cornelius</p>



<a name="294668158"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668158" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668158">(Aug 22 2022 at 12:48)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 4 Feb 2016, C. Diekmann wrote:</p>
<blockquote>
<p>Is there a way to check my setup after the first startup?</p>
</blockquote>
<p>E.g. like this:</p>
<p>ML "open ML_System"</p>
<blockquote>
<p>Where can I find the documentation how I can set the ML settings such<br>
that I can build Collections again?</p>
</blockquote>
<p><a href="http://isabelle.in.tum.de/installation.html">http://isabelle.in.tum.de/installation.html</a> / Linux / Requirements:</p>
<p>32-bit C/C++ standard libraries on 64-bit Linux (optional, for improved performance of Poly/ML)</p>
<p>The details depend on the Linux distribution. On Ubuntu it is probably <br>
just the "g++-multilib" package.</p>
<blockquote>
<p>If the build of a session image fails with an out of memory error, is it <br>
possible to do the build again with only one core/process to limit the <br>
memory usage to 3.5GB?</p>
</blockquote>
<p>You need to provide the 32-bit C/C++ standard libraries first, and then <br>
restart the whole application.  This allows to use the 32-bit version of <br>
Poly/ML, which is separate from the 64-bit version.</p>
<p>Afterwards you can switch back to 64-bit via Plugin Options / Isabelle / <br>
General / ML System 64, although that is practically irrelevant on only <br>
8GB.</p>
<p>Makarius</p>



<a name="294668172"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668172" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668172">(Aug 22 2022 at 12:48)</a>:</h4>
<p>From: Matthew Fernandez &lt;<a href="mailto:matthew.fernandez@nicta.com.au">matthew.fernandez@nicta.com.au</a>&gt;<br>
I think Cornelius was asking for a way to limit parallelism while still using 64-bit Poly/ML in order to reduce the<br>
maximum amount of memory required over the course of a build. If so, then yes:</p>
<p>isabelle build -o threads=1 ...</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294668378"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668378" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668378">(Aug 22 2022 at 12:49)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I have experimented with this a bit in the vicinity of Isabelle2016-RC. <br>
The precise versions are as follows:</p>
<p>IsaFoR:   61d9e42449c2<br>
Isabelle: dfb70abaa3f0<br>
AFP:      522c6c87f51e</p>
<p>HOL-AFP still works with x86-linux, leading to a heap image of 577M.  Here <br>
are more details:</p>
<p>ML_PLATFORM="x86-linux"<br>
ML_OPTIONS="-H 1500 --gcthreads 12"<br>
isabelle build -b -o threads=12<br>
Finished HOL-AFP (0:06:21 elapsed time, 0:47:49 cpu time, factor 7.53)</p>
<p>ML_PLATFORM="x86-linux"<br>
ML_OPTIONS="-H 1500 --gcthreads 6"<br>
isabelle build -b -o threads=6<br>
Finished HOL-AFP (0:07:34 elapsed time, 0:37:10 cpu time, factor 4.91)</p>
<p>Trying "make all" of IsaFoR produces this result:</p>
<p>Building QTRS ...<br>
Finished QTRS (0:02:02 elapsed time, 0:07:36 cpu time, factor 3.73)<br>
Building Check-NT ...<br>
Finished Check-NT (0:05:17 elapsed time, 0:22:26 cpu time, factor 4.24)<br>
Building Processors ...</p>
<p>Processors FAILED<br>
ML&gt; Exception- SysErr ("Cannot allocate memory", SOME ENOMEM) raised<br>
Proof-Checker CANCELLED<br>
CeTA CANCELLED<br>
Code CANCELLED</p>
<p>Makarius</p>



<a name="294668465"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668465" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668465">(Aug 22 2022 at 12:50)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Here are the results of further experiments.  For Isabelle2016, I've <br>
introduced certain "trim_context" operations that are mentioned in the <br>
NEWS as follows:</p>
<ul>
<li>Heap images are 10-15% smaller due to less wasteful persistent theory<br>
content (using ML type theory_id instead of theory);</li>
</ul>
<p>For HOL-AFP this yields on x86-linux:</p>
<p>Finished HOL (0:02:58 elapsed time, 0:10:58 cpu time, factor 3.69)      218M<br>
Finished HOL-Lib (0:01:24 elapsed time, 0:05:45 cpu time, factor 4.10)  281M<br>
Finished HOL-AFP (0:07:37 elapsed time, 0:37:15 cpu time, factor 4.89)  577M</p>
<p>Disabling the mechanism here <br>
<a href="https://bitbucket.org/isabelle_project/isabelle-release/src/f4baefee57768cf00b1a9e003770c7573b5d7378/src/Pure/thm.ML?at=default&amp;fileviewer=file-view-default#thm.ML-410">https://bitbucket.org/isabelle_project/isabelle-release/src/f4baefee57768cf00b1a9e003770c7573b5d7378/src/Pure/thm.ML?at=default&amp;fileviewer=file-view-default#thm.ML-410</a><br>
yields the following:</p>
<p>Finished HOL (0:03:06 elapsed time, 0:11:21 cpu time, factor 3.66)      245M<br>
Finished HOL-Lib (0:01:26 elapsed time, 0:05:54 cpu time, factor 4.11)  315M<br>
Finished HOL-AFP (0:08:30 elapsed time, 0:39:52 cpu time, factor 4.69)  643M</p>
<p>Interestingly, the main HOL image has the same size of 218M in <br>
Isabelle2015.  So the extra space provided by the system has been exactly <br>
consumed by the application -- this is a perfectly normal situation in <br>
Isabelle development.</p>
<p>I guess that on average bigger applications did not grow that much.  For <br>
HOL-AFP, though, there seems to be a substantial increase in imports <br>
compared to Isabelle2015, but I did not check this systematically.</p>
<p>Makarius</p>



<a name="294668584"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668584" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668584">(Aug 22 2022 at 12:51)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
I'm happy to tell that Collections builds again with RC4 on my 8GB RAM<br>
laptop. Is this just a coincidence or did you fine-tune something?</p>
<p>Best,<br>
  Cornelius</p>



<a name="294668615"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2016-RC3%20--%20jEdit%20build%20fails%20when%20ses.../near/294668615" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2016-RC3.20--.20jEdit.20build.20fails.20when.20ses.2E.2E.2E.html#294668615">(Aug 22 2022 at 12:51)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I did not change anything.</p>
<p>It was working all the time in all my tests during this discussion.</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>