<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle2017-RC0: jEdit plugin insists all fil... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html">[isabelle] Isabelle2017-RC0: jEdit plugin insists all fil...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294715605"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294715605" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294715605">(Aug 22 2022 at 15:54)</a>:</h4>
<p>From: <a href="mailto:Matthew.Brecknell@data61.csiro.au">Matthew.Brecknell@data61.csiro.au</a><br>
Hi Makarius,</p>
<p>I've run into the first hurdle updating the l4-verified proofs for Isabelle2017-RC0.</p>
<p>We have many theories and other source files which are generated at various times during our lengthy build process. It seems that before I can use <code>isabelle jedit -d</code> to load even our very first session, I must first generate all files mentioned in all sessions accessible from the ROOTS file, and all their theories.</p>
<p>Otherwise, I get errors like this, with a corresponding error dialog:</p>
<p>$ isabelle jedit -d .<br>
4:00:38 PM [main] [error] PluginJAR: Error while starting plugin isabelle.jedit.Plugin<br>
4:00:38 PM [main] [error] PluginJAR: *** No such file: "/home/matthewb/verification/isa2017/l4v/spec/machine/ARM/MachineTypes.thy"<br>
4:00:38 PM [main] [error] PluginJAR: *** The error(s) above occurred for theory "CKernel.MachineTypes"<br>
4:00:38 PM [main] [error] PluginJAR: *** (required by "CKernel.Kernel_C") (line 13 of "/home/matthewb/verification/isa2017/l4v/spec/cspec/ARM/Kernel_C.thy")<br>
4:00:38 PM [main] [error] PluginJAR: *** The error(s) above occurred in session "CKernel" (line 84 of "/home/matthewb/verification/isa2017/l4v/spec/ROOT")<br>
&lt;snip&gt;<br>
4:00:38 PM [main] [error] PluginJAR:  at isabelle.Sessions$.deps(sessions.scala:144)<br>
4:00:38 PM [main] [error] PluginJAR:  at isabelle.Sessions$.session_base(sessions.scala:280)<br>
4:00:38 PM [main] [error] PluginJAR:  at isabelle.jedit.JEdit_Sessions$.session_base(jedit_sessions.scala:59)<br>
4:00:38 PM [main] [error] PluginJAR:  at isabelle.jedit.Plugin.init_resources(plugin.scala:74)<br>
4:00:38 PM [main] [error] PluginJAR:  at isabelle.jedit.Plugin.start(plugin.scala:415)<br>
4:00:38 PM [main] [error] PluginJAR:  at org.gjt.sp.jedit.PluginJAR.startPlugin(PluginJAR.java:1740)<br>
4:00:38 PM [main] [error] PluginJAR:  at org.gjt.sp.jedit.PluginJAR.activatePlugin(PluginJAR.java:951)<br>
4:00:38 PM [main] [error] PluginJAR:  at org.gjt.sp.jedit.PluginJAR.activatePluginIfNecessary(PluginJAR.java:1021)<br>
4:00:38 PM [main] [error] PluginJAR:  at org.gjt.sp.jedit.jEdit.main(jEdit.java:550)<br>
&lt;snip&gt;<br>
4:00:38 PM [main] [error] PluginJAR:  at isabelle.Main.main(main.scala)<br>
4:00:38 PM [main] [error] ErrorListDialog$ErrorEntry: /home/matthewb/verification/isa2017/isabelle/src/Tools/jEdit/dist/jars/Isabelle-jEdit.jar:<br>
4:00:38 PM [main] [error] ErrorListDialog$ErrorEntry: Cannot start:<br>
4:00:38 PM [main] [error] ErrorListDialog$ErrorEntry: *** No such file: "/home/matthewb/verification/isa2017/l4v/spec/machine/ARM/MachineTypes.thy"<br>
4:00:38 PM [main] [error] ErrorListDialog$ErrorEntry: *** The error(s) above occurred for theory "CKernel.MachineTypes"<br>
4:00:38 PM [main] [error] ErrorListDialog$ErrorEntry: *** (required by "CKernel.Kernel_C") (line 13 of "/home/matthewb/verification/isa2017/l4v/spec/cspec/ARM/Kernel_C.thy")<br>
4:00:38 PM [main] [error] ErrorListDialog$ErrorEntry: *** The error(s) above occurred in session "CKernel" (line 84 of "/home/matthewb/verification/isa2017/l4v/spec/ROOT")</p>
<p>Can this requirement be relaxed again, so that I only need the files for the session I want to load?</p>
<p>Regards,<br>
Matthew</p>



<a name="294715631"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294715631" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294715631">(Aug 22 2022 at 15:54)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 22/08/17 09:01, <a href="mailto:Matthew.Brecknell@data61.csiro.au">Matthew.Brecknell@data61.csiro.au</a> wrote:</p>
<blockquote>
<p>We have many theories and other source files which are generated at various times during our lengthy build process. It seems that before I can use <code>isabelle jedit -d</code> to load even our very first session, I must first generate all files mentioned in all sessions accessible from the ROOTS file, and all their theories.</p>
</blockquote>
<p>This sounds like a conflict of a legacy build process based on "make"<br>
versus Isabelle session structure with "isabelle build" and now<br>
increasingly inside Isabelle/jEdit.</p>
<p>At some point you should try to overcome this tension, and do it all<br>
within static theory sources (by loading other files into a theory from<br>
within).</p>
<blockquote>
<p>Can this requirement be relaxed again, so that I only need the files for the session I want to load?</p>
</blockquote>
<p>See the following NEWS entry:</p>
<ul>
<li>Command-line invocation "isabelle jedit -R -l SESSION" uses the parent<br>
image of the SESSION, with qualified theory imports restricted to that<br>
portion of the session graph. Moreover, the ROOT entry of the SESSION is<br>
opened in the editor.</li>
</ul>
<p>Note that after Isabelle2017-RC0 (e.g. in current snapshots from<br>
<a href="http://isabelle.in.tum.de/devel/release_snapshot">http://isabelle.in.tum.de/devel/release_snapshot</a>) the session-qualified<br>
imports are even more rigorous. It might cause additional problems for<br>
your setup.</p>
<p>Makarius</p>



<a name="294715637"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294715637" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294715637">(Aug 22 2022 at 15:54)</a>:</h4>
<p>From: Lars Hupel &lt;<a href="mailto:hupel@in.tum.de">hupel@in.tum.de</a>&gt;<br>
Dear Matthew, Makarius,<br>
I'd like to add another (tangential) observation to this thread.</p>
<p>Previously, when editing some theories in the AFP, it was sufficient to<br>
just open Isabelle/jEdit – no special command line flags required<br>
(assuming HOL as a base image). To ensure this, AFP policy states that<br>
imports from other entries should be relative (i.e.<br>
"../Other_Entry/Thy") instead of absolute (i.e. "$AFP/Other_Entry/Thy").</p>
<p>While I appreciate the sentiment behind qualified imports (no more<br>
incoherent imports!), this workflow doesn't work anymore. It is<br>
necessary to start Isabelle/jEdit from the command line as follows:</p>
<p>isabelle jedit -d 'path/to/afp/thys' ...</p>
<p>Even if the AFP is registered as a component, this is still necessary.<br>
While components are automatically registered as session roots, the AFP<br>
base directory is not a session root.</p>
<p>I'd like to make a suggestion to mitigate this situation: make the AFP<br>
base directory a session root, by adding a "ROOTS" file pointing to<br>
"thys" [0]. This might come with a performance penalty because on every<br>
tool invocation, Isabelle/Scala has to traverse the sessions graph.<br>
Makarius might be able to estimate that penalty.</p>
<p>Maybe there is also another way to include session roots.</p>
<p>Cheers<br>
Lars</p>
<p>[0] This is basically the approach I took in<br>
&lt;<a href="https://github.com/larsrh/afp">https://github.com/larsrh/afp</a>&gt;.</p>



<a name="294715654"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294715654" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294715654">(Aug 22 2022 at 15:54)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On 22/08/17 12:15, Lars Hupel wrote:</p>
<blockquote>
<p>Previously, when editing some theories in the AFP, it was sufficient to<br>
just open Isabelle/jEdit – no special command line flags required<br>
(assuming HOL as a base image). To ensure this, AFP policy states that<br>
imports from other entries should be relative (i.e.<br>
"../Other_Entry/Thy") instead of absolute (i.e. "$AFP/Other_Entry/Thy").</p>
</blockquote>
<p>This actually needs to be updated for Isabelle2017:</p>
<p>* Users of AFP need to formally provide its session name space to<br>
Isabelle tools, e.g. via "isabelle build -d 'path/to/afp/thys'" or<br>
"isabelle jedit -d 'path/to/afp/thys'" or by adding a line with<br>
"path/to/afp/thys" to $ISABELLE_HOME_USER/ROOTS to make this persistent.</p>
<p>* Imports of theories from other sessions should always use the formal<br>
session-qualified name, e.g. "HOL-Library.AList" or<br>
"Coinductive.Coinductive_List". This requires to specify the other<br>
sessions as parent or as imported 'sessions' in ROOT.</p>
<p>* The command-line tool "isabelle imports -U -d ... My_Session" helps<br>
to standardize imports in .thy and ROOT files in this respect.</p>
<blockquote>
<p>While I appreciate the sentiment behind qualified imports (no more<br>
incoherent imports!), this workflow doesn't work anymore. It is<br>
necessary to start Isabelle/jEdit from the command line as follows:</p>
<p>isabelle jedit -d 'path/to/afp/thys' ...</p>
</blockquote>
<p>It is <em>possible</em> to use option -d, and there are other ways.</p>
<p>Maybe we should advertize $ISABELLE_HOME_USER/ROOTS to users more<br>
prominently. At some point the Prover IDE might provide an editor for<br>
that: at the moment it just means to open that text file directly using<br>
the above symbolic name (maybe I should add a menu item for that).</p>
<blockquote>
<p>Even if the AFP is registered as a component, this is still necessary.<br>
While components are automatically registered as session roots, the AFP<br>
base directory is not a session root.</p>
</blockquote>
<p>The component has de-facto no relevance to AFP users. It merely contains<br>
various administrative settings and tools that have accumulated over<br>
time, without a specific plan behind it.</p>
<p>I am using the component myself only to get a symbolic handle $AFP for<br>
various command-line invocations like "isabelle build -d '$AFP' -a" to<br>
build Isabelle + AFP as a whole.</p>
<blockquote>
<p>I'd like to make a suggestion to mitigate this situation: make the AFP<br>
base directory a session root, by adding a "ROOTS" file pointing to<br>
"thys" [0]. This might come with a performance penalty because on every<br>
tool invocation, Isabelle/Scala has to traverse the sessions graph.<br>
Makarius might be able to estimate that penalty.</p>
</blockquote>
<p>Performance is one problem, and polluting the logical session name space<br>
another (i.e. the important option "-a" becomes hardly usable).</p>
<p>Since the component is not required to refer to path/to/afp/thys, it can<br>
be ignored for this purpose (and maybe not even advertized to users<br>
anymore).</p>
<p>Makarius</p>



<a name="294715669"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294715669" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294715669">(Aug 22 2022 at 15:54)</a>:</h4>
<p>From: Lars Hupel &lt;<a href="mailto:hupel@in.tum.de">hupel@in.tum.de</a>&gt;</p>
<blockquote>
<p>Maybe we should advertize $ISABELLE_HOME_USER/ROOTS to users more<br>
prominently. At some point the Prover IDE might provide an editor for<br>
that: at the moment it just means to open that text file directly using<br>
the above symbolic name (maybe I should add a menu item for that).</p>
</blockquote>
<p>Alternatively, another possibility could be to provide an Isabelle tool<br>
and/or jEdit action to do it automatically. It could be as simple as</p>
<p>isabelle add_root /path/to/afp</p>
<p>... and/or a corresponding action in jEdit. I posit that that could be<br>
useful to many users. Using the AFP is a disruption to the otherwise<br>
quite nice workflow of "extract Isabelle and it just works".</p>
<blockquote>
<p>Performance is one problem, and polluting the logical session name space<br>
another (i.e. the important option "-a" becomes hardly usable).</p>
</blockquote>
<p>Is the latter really a problem? I thought this is what session groups<br>
are for, i.e. "build -g afp" instead of "build -D $AFP".</p>
<p>But surely adding the AFP to "$ISABELLE_HOME_USER/ROOTS" would also give<br>
these drawbacks.</p>
<p>Cheers<br>
Lars</p>



<a name="294715703"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294715703" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294715703">(Aug 22 2022 at 15:55)</a>:</h4>
<p>From: <a href="mailto:Matthew.Brecknell@data61.csiro.au">Matthew.Brecknell@data61.csiro.au</a><br>
Right, thanks. I had seen this, but misunderstood its purpose. I see<br>
now that it should allow us to proceed with updating our proofs for<br>
Isabelle2017, independently of any examination of our build process.</p>
<p>Regards,<br>
Matthew</p>



<a name="294715726"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294715726" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294715726">(Aug 22 2022 at 15:55)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Not quite. The session groups are more like "tags" that mark certain<br>
aspects of sessions. Directory structure is more rigid than that<br>
(structurally more reliable for exhaustive testing).</p>
<p>In recent years, I have increasingly understood directories (with their<br>
internal wiring of ROOTS and ROOT files) for composition of big<br>
projects, via options like -d or -D or entries in $ISABELLE_HOME_USERS/ROOTS</p>
<p>This explains the general direction of the system implementation in the<br>
past 5 years.</p>
<p>Makarius</p>



<a name="294719927"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC0%3A%20jEdit%20plugin%20insists%20all%20fil.../near/294719927" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC0.3A.20jEdit.20plugin.20insists.20all.20fil.2E.2E.2E.html#294719927">(Aug 22 2022 at 16:07)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I've tried with a menu, i.e. "Favorites" in the jEdit file dialog, but<br>
it did not work for $ISABELLE_HOME_USER/ROOTS as plain file, as opposed<br>
to the existing $ISABELLE_HOME_USER for the directory.</p>
<p>So users need to be directed to that important file by other means.</p>
<p>Note that the Isabelle/jEdit startup sequence already generates a<br>
template for the file if it does not exists yet (see Isabelle/6e35cf3ce869).</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>