<html>
<head><meta charset="utf-8"><title>[isabelle] Isabelle2017-RC1 Monad_Syntax dependencies · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html">[isabelle] Isabelle2017-RC1 Monad_Syntax dependencies</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294719164"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC1%20Monad_Syntax%20dependencies/near/294719164" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html#294719164">(Aug 22 2022 at 16:02)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
Dear Makarius,</p>
<p>I just loaded Monad_Syntax in Isabelle2017-RC1 and observed that it pulls<br>
in many dependencies. In particular, it transitively depends<br>
on Old_Datatype. This is not a bug, but very surprising behavior to me: I<br>
would expect only additional syntactic sugar from a theory that calls<br>
itself _Syntax and not a huge set of Old_ functionality.</p>
<p>Best,<br>
  Cornelius</p>



<a name="294719179"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC1%20Monad_Syntax%20dependencies/near/294719179" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html#294719179">(Aug 22 2022 at 16:03)</a>:</h4>
<p>From: Lars Hupel &lt;<a href="mailto:hupel@in.tum.de">hupel@in.tum.de</a>&gt;<br>
That is partly my fault.</p>
<p>changeset:   66260:466d8e7ed170<br>
user:        Lars Hupel &lt;<a href="mailto:lars.hupel@mytum.de">lars.hupel@mytum.de</a>&gt;<br>
date:        Mon Jul 10 23:21:54 2017 +0200<br>
summary:     FSet is monadic</p>
<p>Monad_Syntax sets up sugar for finite sets, which pulls in "Countable",<br>
which provides a tactic that works on "Old_Datatype".</p>
<p>A quick grep over distribution+AFP suggests that that tactic is not used<br>
on old datatypes.</p>
<p>Cheers<br>
Lars</p>



<a name="294719232"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC1%20Monad_Syntax%20dependencies/near/294719232" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html#294719232">(Aug 22 2022 at 16:03)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Is there a genuine problem behind it? Otherwise I would say we leave it<br>
like that for the release.</p>
<p>Makarius</p>



<a name="294719255"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC1%20Monad_Syntax%20dependencies/near/294719255" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html#294719255">(Aug 22 2022 at 16:03)</a>:</h4>
<p>From: "C. Diekmann" &lt;<a href="mailto:diekmann@in.tum.de">diekmann@in.tum.de</a>&gt;<br>
2017-09-06 21:56 GMT+02:00 Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;:</p>
<blockquote>
<p>On 06/09/17 18:44, Lars Hupel wrote:</p>
<blockquote>
<blockquote>
<p>I just loaded Monad_Syntax in Isabelle2017-RC1 and observed that it<br>
pulls<br>
in many dependencies. In particular, it transitively depends<br>
on Old_Datatype. This is not a bug, but very surprising behavior to<br>
me: I<br>
would expect only additional syntactic sugar from a theory that calls<br>
itself _Syntax and not a huge set of Old_ functionality.</p>
</blockquote>
<p>That is partly my fault.</p>
<p>changeset:   66260:466d8e7ed170<br>
user:        Lars Hupel &lt;<a href="mailto:lars.hupel@mytum.de">lars.hupel@mytum.de</a>&gt;<br>
date:        Mon Jul 10 23:21:54 2017 +0200<br>
summary:     FSet is monadic</p>
<p>Monad_Syntax sets up sugar for finite sets, which pulls in "Countable",<br>
which provides a tactic that works on "Old_Datatype".</p>
</blockquote>
<p>Is there a genuine problem behind it? Otherwise I would say we leave it<br>
like that for the release.</p>
</blockquote>
<p>If we keep FSet in Monad_Syntax, then everybody who uses Monad_Syntax also<br>
gets all the lemmata, tactics, simpset (if it changes anything) from FSet,<br>
Countable, and Old_Datatype into its namespace. This may change the<br>
behavior of sledgehammer and other automated tools. This may make certain<br>
things harder to reproduce. I don't know of any particular issue, but I may<br>
think of a future issue like "sledgehammer and auto can only solve a<br>
subgoal if I include Monad_Syntax. But I don't have any monad syntax in my<br>
thy." As I said, my feeling about a theory which is named *_Syntax is that<br>
it should not provide more than syntactic sugar.</p>
<p>My personal feeling is that FSet should get removed from Monad_Syntax.<br>
Currently, we should be able to do this without breaking any dependencies<br>
for users of the stable release.</p>
<p>In Isabelle2016-1 we have<br>
theory Monad_Syntax<br>
imports Main "~~/src/Tools/Adhoc_Overloading"</p>
<p>In Isabelle2017-RC1 we have<br>
theory Monad_Syntax<br>
imports FSet "~~/src/Tools/Adhoc_Overloading"</p>
<p>Maybe one could add the monad syntax to FSet. But then FSet would depend on<br>
Monad_Syntax, ... a chicken-or-egg dilemma.</p>
<p>Maybe we we need a theory similar to</p>
<p>theory FSet_Monad_Syntax<br>
  imports FSet Monad_Syntax<br>
  begin<br>
  adhoc_overloading FSet.fbind<br>
  end</p>
<p>This would also be a really helpful example. It took me more than one hour<br>
to understand how I can get the monad syntax to work with my custom bind<br>
function for my custom datatype.</p>
<p>But maybe I'm overfitting stuff here according to my personal preferences.<br>
But I guess once we have FSet as dependency in Monad_Syntax (which is<br>
currently NOT the case for Isabelle2016-1), we can nevever go back (without<br>
breaking anything).</p>
<p>Cheers,<br>
  Cornelius</p>



<a name="294719267"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC1%20Monad_Syntax%20dependencies/near/294719267" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html#294719267">(Aug 22 2022 at 16:03)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
I agree with Cornelius. If possible the dependency on FSet should be removed <br>
before the release. If not, I assume Lars will remove it afterwards, which may <br>
then create new complications for the release after this one.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/D6U-deG-XQlfnJrQRq4rU5Lm/smime.p7s">smime.p7s</a></p>



<a name="294719282"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC1%20Monad_Syntax%20dependencies/near/294719282" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html#294719282">(Aug 22 2022 at 16:03)</a>:</h4>
<p>From: Lars Hupel &lt;<a href="mailto:hupel@in.tum.de">hupel@in.tum.de</a>&gt;<br>
I have no strong opinion. I also don't think anybody uses this yet, so<br>
Makarius, please back out 466d8e7ed170 from the release fork.</p>
<p>Cheers<br>
Lars</p>



<a name="294719300"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Isabelle2017-RC1%20Monad_Syntax%20dependencies/near/294719300" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Isabelle2017-RC1.20Monad_Syntax.20dependencies.html#294719300">(Aug 22 2022 at 16:03)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I am about to do this, but note that the release fork did not happen<br>
yet. (I am still waiting for some updates on Nunchaku.)</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>