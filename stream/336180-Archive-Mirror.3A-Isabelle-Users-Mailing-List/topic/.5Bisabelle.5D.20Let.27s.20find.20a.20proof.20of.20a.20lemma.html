<html>
<head><meta charset="utf-8"><title>[isabelle] Let&#x27;s find a proof of a lemma · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Let.27s.20find.20a.20proof.20of.20a.20lemma.html">[isabelle] Let&#x27;s find a proof of a lemma</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294123228"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Let%27s%20find%20a%20proof%20of%20a%20lemma/near/294123228" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Let.27s.20find.20a.20proof.20of.20a.20lemma.html#294123228">(Aug 18 2022 at 16:34)</a>:</h4>
<p>From: Victor Porton &lt;<a href="mailto:porton@narod.ru">porton@narod.ru</a>&gt;<br>
Let's find a proof of the following lemma, which is forgotten in ZF theory:</p>
<p>lemma right_comp_id_any: "r&lt;=Sigma(A,B) ==&gt; r O id(C) = restrict(r,C)"</p>
<p>I think I can, spending some time, find a proof myself, but I suspect my proof won't be optimal.</p>
<p>Note that you have asked me to not send anymore missing lemmas in ZF. But this my message serves a different purpose, not to suggest its addition to ZF but to ask to help to find an elegant proof. (If you'll ask to not send messages like this, this will be the last.)</p>



<a name="294123243"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Let%27s%20find%20a%20proof%20of%20a%20lemma/near/294123243" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Let.27s.20find.20a.20proof.20of.20a.20lemma.html#294123243">(Aug 18 2022 at 16:34)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:brianh@cs.pdx.edu">brianh@cs.pdx.edu</a>&gt;<br>
On Mon, Dec 20, 2010 at 1:33 PM, Victor Porton &lt;<a href="mailto:porton@narod.ru">porton@narod.ru</a>&gt; wrote:</p>
<blockquote>
<p>Let's find a proof of the following lemma, which is forgotten in ZF theory:</p>
<p>lemma right_comp_id_any: "r&lt;=Sigma(A,B) ==&gt; r O id(C) = restrict(r,C)"</p>
<p>I think I can, spending some time, find a proof myself, but I suspect my proof won't be optimal.</p>
</blockquote>
<p>This trivial lemma has a trivial proof. Just unfold the definitions<br>
and apply auto:</p>
<p>lemma right_comp_id_any: "r O id(C) = restrict(r,C)"<br>
unfolding restrict_def comp_def by auto</p>
<p>Notice that your assumption "r&lt;=Sigma(A,B)" is completely irrelevant<br>
to the conclusion, which mentions neither A nor B.</p>
<blockquote>
<p>Note that you have asked me to not send anymore missing lemmas in ZF. But this my message serves a different purpose, not to suggest its addition to ZF but to ask to help to find an elegant proof. (If you'll ask to not send messages like this, this will be the last.)</p>
</blockquote>
<p>You have called this lemma "forgotten"; does this mean something<br>
different to you than "missing"?</p>
<p>You might think this lemma would be a useful addition to the<br>
Isabelle/ZF libraries, but I would suggest waiting to make such<br>
judgments: Getting more experience writing nontrivial proofs in<br>
Isabelle will give you a better idea of what kinds of library lemmas<br>
are really useful. Working on a submission to the AFP would be a very<br>
good idea.</p>
<ul>
<li>Brian</li>
</ul>



<a name="294123256"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Let%27s%20find%20a%20proof%20of%20a%20lemma/near/294123256" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Let.27s.20find.20a.20proof.20of.20a.20lemma.html#294123256">(Aug 18 2022 at 16:34)</a>:</h4>
<p>From: Victor Porton &lt;<a href="mailto:porton@narod.ru">porton@narod.ru</a>&gt;<br>
21.12.2010, 00:58, "Brian Huffman" &lt;<a href="mailto:brianh@cs.pdx.edu">brianh@cs.pdx.edu</a>&gt;:</p>
<blockquote>
<p>On Mon, Dec 20, 2010 at 1:33 PM, Victor Porton &lt;<a href="mailto:porton@narod.ru">porton@narod.ru</a>&gt;; wrote:</p>
<blockquote>
<p>Let's find a proof of the following lemma, which is forgotten in ZF theory:</p>
<p>lemma right_comp_id_any: "r&lt;=Sigma(A,B) ==&gt; r O id(C) = restrict(r,C)"</p>
<p>I think I can, spending some time, find a proof myself, but I suspect my proof won't be optimal.</p>
</blockquote>
<p>This trivial lemma has a trivial proof. Just unfold the definitions<br>
and apply auto:</p>
<p>lemma right_comp_id_any: "r O id(C) = restrict(r,C)"<br>
unfolding restrict_def comp_def by auto</p>
</blockquote>
<p>Thanks for your proof. I would not find a short proof myself.<br>
Can you teach me how to find such short proofs? Has it appeared as a simple experiment (let's try "unfolding restrict_def comp_def by auto") or there are some deep magic behind?</p>
<blockquote>
<blockquote>
<p>Note that you have asked me to not send anymore missing lemmas in ZF. But this my message serves a different purpose, not to suggest its addition to ZF but to ask to help to find an elegant proof. (If you'll ask to not send messages like this, this will be the last.)</p>
</blockquote>
<p>You have called this lemma "forgotten"; does this mean something<br>
different to you than "missing"?</p>
</blockquote>
<p>It is the same.</p>
<blockquote>
<p>You might think this lemma would be a useful addition to the<br>
Isabelle/ZF libraries, but I would suggest waiting to make such<br>
judgments: Getting more experience writing nontrivial proofs in<br>
Isabelle will give you a better idea of what kinds of library lemmas<br>
are really useful. Working on a submission to the AFP would be a very<br>
good idea.</p>
</blockquote>
<p>I consider submission to AFP. But first I will try to submit to IsarMathLib, there my works are suitable. (Well, there are a problem: Larry Paulson's proofs with apply-style in my ZF_Addons.thy while IsarMathLib requires ISAR proofs. Maybe later I will ask for help transforming short apply-style proofs into not too long ISAR proofs.) I recall that I am accumulating my own theory with missing ZF theory lemmas, which I use in my logic research.)</p>



<a name="294123263"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Let%27s%20find%20a%20proof%20of%20a%20lemma/near/294123263" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Let.27s.20find.20a.20proof.20of.20a.20lemma.html#294123263">(Aug 18 2022 at 16:34)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:brianh@cs.pdx.edu">brianh@cs.pdx.edu</a>&gt;<br>
There is no magic; this proof was practically the first thing I tried.</p>
<p>In general it is often a good idea to start by trying an automatic<br>
tactic like "auto"; sometimes you will get lucky. If "auto" can't<br>
succeed on its own, then unfolding some definitions first often helps.<br>
Here auto doesn't know any rules about "restrict", so we need to<br>
unfold its definition. It turns out that auto <em>does</em> have some rules<br>
about "O", so we don't really need to unfold that one (see compI and<br>
compE from ZF/Perm.thy).</p>
<p>lemma right_comp_id_any: "r O id(C) = restrict(r,C)"<br>
unfolding restrict_def by auto</p>
<p>A useful addition to the ZF libraries might be to add rules about<br>
"restrict" so that auto can do this proof all by itself. Here are some<br>
new lemmas restrictI and restrictE (compare these to compI and compE):</p>
<p>lemma restrictI [intro!]:<br>
  "[| &lt;x, y&gt; : r; x : A |] ==&gt; &lt;x, y&gt; : restrict(r, A)"<br>
unfolding restrict_def by auto</p>
<p>lemma restrictE [elim!]:<br>
  "[| xy : restrict(r, A);<br>
      !!x y. [| xy = &lt;x, y&gt;; &lt;x, y&gt; : r; x : A |] ==&gt; P<br>
   |] ==&gt; P"<br>
unfolding restrict_def by auto</p>
<p>With these rules declared with the intro and elim attributes, auto can<br>
now prove your lemma in one step:</p>
<p>lemma right_comp_id_any: "r O id(C) = restrict(r,C)"<br>
by auto</p>
<p>Rules restrictI and restrictE are the kinds of lemmas that make good<br>
additions to libraries: they make other proofs easier and more<br>
automatic. Learning to recognize and create useful lemmas like this<br>
will come with experience.</p>
<ul>
<li>Brian</li>
</ul>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>