<html>
<head><meta charset="utf-8"><title>[isabelle] Macro to comment and uncomment selected text s... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Macro.20to.20comment.20and.20uncomment.20selected.20text.20s.2E.2E.2E.html">[isabelle] Macro to comment and uncomment selected text s...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294219691"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Macro%20to%20comment%20and%20uncomment%20selected%20text%20s.../near/294219691" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Macro.20to.20comment.20and.20uncomment.20selected.20text.20s.2E.2E.2E.html#294219691">(Aug 19 2022 at 08:13)</a>:</h4>
<p>From: Gottfried Barrow &lt;<a href="mailto:gottfried.barrow@gmx.com">gottfried.barrow@gmx.com</a>&gt;<br>
That's the solution. Commenting and uncommenting with that plugin <br>
produces no error, unlike "Edit / Source / Range comment".</p>
<p>It doesn't take any practice at all. I assign a shortcut to it, <br>
highlight the commented or uncommented text, and toggle the commenting.</p>
<p><em>OTHER PLUGINS</em></p>
<p>I also found another good plugin when going to get TextTools, which is <br>
XSearch: <a href="http://plugins.jedit.org/plugins/?XSearch">http://plugins.jedit.org/plugins/?XSearch</a></p>
<p>I have java.util.regex with jEdit search, or gnu.regexp with XSearch.</p>
<p>It also allows me to put the search field in the bottom panel, so I can <br>
get rid of the normal search field at the top, with "Global Options/ <br>
jEdit / View". I include a screen shot to show my use of the three <br>
panels, like putting XSearch at the bottom, and its hypersearch results <br>
in the right panel.</p>
<p>Then there's always the Console plugin, where I can do something like <br>
"grep lemma %f", and it'll search on the current edit buffer. Details <br>
are in "Help / Plugins / Console" for anyone interested in more details. <br>
I attach a screen shot of grep in action through the Console plugin. <br>
People should see these things so they know what they're missing out on.</p>
<p>For plugins seekers, one of the most useful is the the Optional plugin, <br>
which combines the three plugin windows into one window, which are <br>
normally accessed through different menus: <br>
<a href="http://plugins.jedit.org/plugins/?Optional">http://plugins.jedit.org/plugins/?Optional</a></p>
<p><em>UNRELATED EXTERNAL-ISAR EMAIL COMMENT</em></p>
<p>I got some good vocabulary from that other email.</p>
<p><a href="https://lists.cam.ac.uk/mailman/htdig/cl-isabelle-users/2012-August/msg00037.html">https://lists.cam.ac.uk/mailman/htdig/cl-isabelle-users/2012-August/msg00037.html</a></p>
<p>Trying to talk about Pure intelligently can be an elusive thing.</p>
<p>There's the "Isar source language", which makes sense of the "Isar proof <br>
language" as a "sub-language"; after all, Isar has a lot of non-proof <br>
related commands.</p>
<p>At some point I start accepting things axiomatically; "Let it be known, <br>
a principle developer has said that what is between 'theory' and 'end' <br>
is all Isar". But having good language makes it easier for me to process <br>
difficult ideas.</p>
<p>People wouldn't want to argue about it here, but I tend towards a <br>
variation of this following idea:</p>
<p>The  strong form of Sapir-Whorf Hypothesis proposes that language determines<br>
thought; therefore they are identical in nature. This argument in fact <br>
implies that<br>
thought is impossible without language.<br>
<a href="http://www.thomastsoi.com/wp-content/downloads/The%20Relationship%20between%20Language%20and%20Thought.pdf">http://www.thomastsoi.com/wp-content/downloads/The%20Relationship%20between%20Language%20and%20Thought.pdf</a></p>
<p>I never heard of the "Sapir-Whorf Hypothesis" before I did the Google <br>
search just now, but I did take a course that influenced me called "The <br>
structure of the English language", where the author of the textbook was <br>
a linguist.</p>
<p>I would only say that efficient and clear thought is impossible without <br>
efficient and clear language, which brings up the subject of the need <br>
for good mathematical notation as a language. Ideas that are fuzzy <br>
become clear when formalized with good language.</p>
<p>There's "the self-defining self-embedding game of  formal languages", <br>
and so, related to that, HOL being embedded in Isar would be part of the <br>
game of embedding one language into another. If I find the right pithy <br>
phrases, I can be perfectly content keeping my thoughts at a high level, <br>
while allowing the backend prover to do its low-level magic.</p>
<p>Regards,<br>
GB<br>
<a href="/user_uploads/14278/UvVoJ7HbRpmZHZoMnkoQHfxk/3_panels.png">3_panels.png</a><br>
<a href="/user_uploads/14278/TqKjTvui61XjJTqbRh78Met4/grep_in_console.png">grep_in_console.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/14278/UvVoJ7HbRpmZHZoMnkoQHfxk/3_panels.png" title="3_panels.png"><img src="/user_uploads/14278/UvVoJ7HbRpmZHZoMnkoQHfxk/3_panels.png"></a></div><div class="message_inline_image"><a href="/user_uploads/14278/TqKjTvui61XjJTqbRh78Met4/grep_in_console.png" title="grep_in_console.png"><img src="/user_uploads/14278/TqKjTvui61XjJTqbRh78Met4/grep_in_console.png"></a></div>



<a name="294219715"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Macro%20to%20comment%20and%20uncomment%20selected%20text%20s.../near/294219715" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Macro.20to.20comment.20and.20uncomment.20selected.20text.20s.2E.2E.2E.html#294219715">(Aug 19 2022 at 08:13)</a>:</h4>
<p>From: Gottfried Barrow &lt;<a href="mailto:gottfried.barrow@gmx.com">gottfried.barrow@gmx.com</a>&gt;<br>
Actually, an example of the "one language embedded into another game" <br>
would be FOL embedded in HOL. In the process of building up HOL, you get <br>
primitive type variables, the standard logical connectives and <br>
quantifiers, the ability to define predicates, and the enforcement of <br>
standard FOL formula-making rules. If you get rid of that part of HOL, <br>
then you lose FOL too.</p>
<p>At some point, standard dictionary definitions don't completely <br>
translate the meaning of formal, programming languages, on the other <br>
hand, there's many times a strong relationship.</p>
<p>So, I'm deciding that I shouldn't confuse the "embedded game" with the <br>
"framework game"; frameworks can be taken down, where embeddings <br>
generally remain embedded.</p>
<p>I'm back to contemplating what may be involved with the Isar and HOL <br>
"framework game", at least until I click the send button.</p>



<a name="294222149"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Macro%20to%20comment%20and%20uncomment%20selected%20text%20s.../near/294222149" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Macro.20to.20comment.20and.20uncomment.20selected.20text.20s.2E.2E.2E.html#294222149">(Aug 19 2022 at 08:34)</a>:</h4>
<p>From: Gottfried Barrow &lt;<a href="mailto:gottfried.barrow@gmx.com">gottfried.barrow@gmx.com</a>&gt;<br>
Hi,</p>
<p>This email is about me trying to find a macro to comment out text and <br>
uncomment text, so I don't get the error where I have to reload the <br>
file. It's also a request for someone to write a new macro or modify <br>
"Add_Prefix_and_Suffix.bsh" to uncomment selected text that's commented out.</p>
<p>First, I thought if "(<em>" and "</em>)" are inserted fast enough, then I won't <br>
get the error, but speed of insertion is not the issue.</p>
<p>As a test case, I'm using:</p>
<p>theory test imports Complex_Main begin<br>
value "string"<br>
value "string"<br>
end</p>
<p>I highlight lines 2 and 3, and I use the jEdit menu command "Edit / <br>
Source / Range Comment". It comments out the two lines, and I'm left <br>
with an error. I save the file, and it goes away.</p>
<p>If I only highlight one line and use the command, then I don't get the <br>
error.</p>
<p>I've modified <br>
"Isabelle2012\src\Tools\jEdit\dist\macros\Text\Add_Prefix_and_Suffix.bsh" and <br>
attached the modified macro. The difference is that my modified macro <br>
only adds the prefix to the first line and the suffix to the last line. <br>
The original macro comments out each line individually.</p>
<p>I can comment out lines 2 and 3 with the macro, and I get no error.</p>
<p>The idea is, in the future, to be able to experiment with commenting out <br>
and uncommenting text with a macro to try and figure out if there's a <br>
workaround that always works, and to see if the problem is text getting <br>
parsed that has unmatched delimiters.</p>
<p>My attached macro will comment out selected text. I can modify the <br>
attached macro to automatically use one of 4 different ways to comment <br>
out text, which are (<em>...</em>), --"...", --{<em>...</em>}, and text{<em>...</em>}.</p>
<p>If someone wants to modify the attached macro to uncomment highlighted <br>
text that's enclosed in comment delimiters, that would be useful. The <br>
macro code I modified is below the original code, which I marked <br>
"ORIGINAL START".</p>
<p>In general, I have some macros that insert matched delimiters to try and <br>
prevent parsing of unmatched delimiters, such as the attached "comment <br>
(star-star).bsh".</p>
<p>Regards,<br>
GB<br>
<a href="/user_uploads/14278/B7VifgZQPTy92qHbZ3QmdCmT/Add_Prefix_First_and_Suffix_Last.bsh">Add_Prefix_First_and_Suffix_Last.bsh</a><br>
<a href="/user_uploads/14278/QZWHbEZPKn3sJSjFElurGwQk/comment-star-star.bsh">comment (star-star).bsh</a></p>



<a name="294222151"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Macro%20to%20comment%20and%20uncomment%20selected%20text%20s.../near/294222151" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Macro.20to.20comment.20and.20uncomment.20selected.20text.20s.2E.2E.2E.html#294222151">(Aug 19 2022 at 08:34)</a>:</h4>
<p>From: Gottfried Barrow &lt;<a href="mailto:gottfried.barrow@gmx.com">gottfried.barrow@gmx.com</a>&gt;<br>
At least part of the problem is a "(<em>" and "</em>)" (or other sets of <br>
matched delimiters) not being inserted on the same line.</p>
<p>I do this with my modified "Add_Prefix_and_Suffix.bsh" or with "Edit / <br>
Source / Range Comment",</p>
<p>(*<br>
     find_consts name:List.list.Nil<br>
     value "a # b # List.Nil"<br>
     *)</p>
<p>and it results in an error until I save the file or delete the block and <br>
reinsert it.</p>
<p>I do this with "Add_Prefix_and_Suffix.bsh" or "Edit / Source / Line <br>
Comment",</p>
<p>(<em>find_consts name:List.list.Nil</em>)<br>
     (<em>value "a # b # List.Nil"</em>)</p>
<p>and I get no errors.</p>
<p>That's a workaround to commenting out code, but only if I have a macro <br>
that will uncomment it line by line.</p>
<p>More details. I do this with my modified "Add_Prefix_and_Suffix.bsh", <br>
and I get no errors:</p>
<p>text{*value "a # b # List.Nil"<br>
     value "a # b # List.Nil"*}</p>
<p>I do this, and I get errors:</p>
<p>text{*value "a # b # List.Nil"<br>
     value "a # b # List.Nil"<br>
     value "a # b # List.Nil"*}</p>
<p>So if the "text{<em>" and "</em>} get inserted over more than two lines, then I <br>
get the error, and the same thing with "(<em>" and "</em>)".</p>
<p>It's never simple. Using my modified macro, this gets no error with the <br>
blank line in between:</p>
<p>(*value "a # b # List.Nil"</p>
<p>value "a # b # List.Nil"*)</p>
<p>Regards,<br>
GB</p>



<a name="294222170"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Macro%20to%20comment%20and%20uncomment%20selected%20text%20s.../near/294222170" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Macro.20to.20comment.20and.20uncomment.20selected.20text.20s.2E.2E.2E.html#294222170">(Aug 19 2022 at 08:34)</a>:</h4>
<p>From: Gottfried Barrow &lt;<a href="mailto:gottfried.barrow@gmx.com">gottfried.barrow@gmx.com</a>&gt;<br>
I have the macro to comment out code down to what's below. Surely all I <br>
have to do is cut what I had selected and then insert it back in. That's <br>
what I manually do to get rid of the error after commenting it out, cut <br>
and reinsert. I'm looking here to see if I can find a quick way to <br>
figure out how to do that: <br>
<a href="http://community.jedit.org/?q=filestore/browse/31">http://community.jedit.org/?q=filestore/browse/31</a></p>
<p>Deleting the "(<em>" and "</em>)" manually to uncomment the code doesn't seem <br>
to cause problems. I'm not inclined to learn how to do it with regular <br>
expressions with jEdit, so that may have to be good enough.</p>
<p>void commentOutText()<br>
{<br>
     selectedLines = textArea.getSelectedLines();<br>
     for(i = 0; i &lt; selectedLines.length; ++i)<br>
     {<br>
         offsetBOL = textArea.getLineStartOffset(selectedLines[i]);<br>
         textArea.setCaretPosition(offsetBOL);<br>
         textArea.goToStartOfWhiteSpace(false);<br>
         textArea.goToEndOfWhiteSpace(true);<br>
         text = textArea.getSelectedText();<br>
         if(text == null) text = "";<br>
         if(i==0) textArea.setSelectedText("(*" + text);<br>
         if(i==(selectedLines.length - 1)) textArea.setSelectedText(text </p>
<ul>
<li>"*)");<br>
     }<br>
}</li>
</ul>
<p>if(buffer.isReadOnly())<br>
     Macros.error(view, "Buffer is read-only.");<br>
else<br>
     commentOutText();</p>



<a name="294222266"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Macro%20to%20comment%20and%20uncomment%20selected%20text%20s.../near/294222266" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Macro.20to.20comment.20and.20uncomment.20selected.20text.20s.2E.2E.2E.html#294222266">(Aug 19 2022 at 08:35)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
You can also try the "TextTools" plugin of jEdit, with its action<br>
"Toggle Range Comment":</p>
<p>Toggle Range Comment by Robert Fletcher &lt;<a href="mailto:rfletch6@yahoo.co.uk">rfletch6@yahoo.co.uk</a>&gt;</p>
<p>Toggles the state of range comments in the selection. Any text currently<br>
   commented out will become uncommented and vice-versa. If there is no<br>
   selection the command acts on the entire line at the caret position.<br>
   Supports all edit modes with defined range comment symbols and works<br>
   with embedded modes such as JavaScript within HTML.</p>
<p>It looks not so bad at first sight, but might require some practice to <br>
work with it smoothly.</p>
<p>BTW, when things go amiss, one needs to keep in mind that there are two <br>
different notions of quoted regions and comments: one of jEdit (according <br>
to the token marker) and another of the prover process.</p>
<p>This can sometimes lead to extra confusion, due to disagreement of the <br>
syntax highlighting.  I will try harder next time to make this agree, <br>
especially since the jEdit token marker for Isabelle mode is also my <br>
responsibilty.</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>