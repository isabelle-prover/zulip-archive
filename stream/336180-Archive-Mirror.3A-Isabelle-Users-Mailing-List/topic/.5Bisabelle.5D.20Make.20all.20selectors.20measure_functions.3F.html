<html>
<head><meta charset="utf-8"><title>[isabelle] Make all selectors measure_functions? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Make.20all.20selectors.20measure_functions.3F.html">[isabelle] Make all selectors measure_functions?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294665836"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Make%20all%20selectors%20measure_functions%3F/near/294665836" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Make.20all.20selectors.20measure_functions.3F.html#294665836">(Aug 22 2022 at 12:35)</a>:</h4>
<p>From: Dmitriy Traytel &lt;<a href="mailto:traytel@inf.ethz.ch">traytel@inf.ethz.ch</a>&gt;<br>
Hi Joachim,</p>
<p>that indeed would be a nice feature, not only for product types but for all non-recursive arguments of a (co)datatype constructor. Similarly for records.</p>
<p>I guess one non-invasive to implement this would be via a plugin to the free_constructors abstraction (c.f. Ctr_Sugar.ctr_sugar_interpretation). Jasmin and me are putting this on some low-priority feature request list. But if you really want the functionality (i.e. want to do it by yourself), we would be happy to give more guidance.</p>
<p>Cheers,<br>
Dmitriy</p>



<a name="294666076"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Make%20all%20selectors%20measure_functions%3F/near/294666076" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Make.20all.20selectors.20measure_functions.3F.html#294666076">(Aug 22 2022 at 12:36)</a>:</h4>
<p>From: Richard Molitor via Cl-isabelle-users &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi Dmitriy,</p>
<p>I talked to Joachim yesterday, he said he was not interested at the<br>
moment, but if you want to provide some pointers I would like to give it<br>
a shot!</p>
<p>A bit of background maybe: I did spend some time implementing an<br>
extension to inductive predicates for Isabelle for my masters thesis<br>
(Joachim was my supervisor).[1] -- What I am trying to say is that I am<br>
somewhat proficient in digging around in Isabelle-style ML-code and<br>
making some sense of what I read, so if you provide me with some<br>
guidance your time wont be wasted :)</p>
<p>Best regards<br>
Richard</p>
<p>[1] I originally intended to get it into the AFP, but then never pushed<br>
it when I got busy with applying for jobs and other things. The code is<br>
on github though (<a href="https://github.com/gattschardo/open-inductive">https://github.com/gattschardo/open-inductive</a>) and I<br>
made it work with Isabelle2015 (and this week Isabelle2016-RC4).</p>



<a name="294666100"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Make%20all%20selectors%20measure_functions%3F/near/294666100" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Make.20all.20selectors.20measure_functions.3F.html#294666100">(Aug 22 2022 at 12:36)</a>:</h4>
<p>From: Dmitriy Traytel &lt;<a href="mailto:traytel@inf.ethz.ch">traytel@inf.ethz.ch</a>&gt;<br>
Hi Richard,</p>
<blockquote>
<p>On 12 Feb 2016, at 06:58, Richard Molitor &lt;<a href="mailto:gattschardo@googlemail.com">gattschardo@googlemail.com</a>&gt; wrote:</p>
<p>Hi Dmitriy,</p>
<p>On Thu, 11 Feb 2016, Dmitriy Traytel wrote:</p>
<blockquote>
<blockquote>
<p>On 05 Feb 2016, at 14:59, Joachim Breitner &lt;<a href="mailto:breitner@kit.edu">breitner@kit.edu</a>&gt; wrote:<br>
Concrete proposal for your consideration: For product data types</p>
<p>datatype t = C t₁ ... tₙ</p>
<p>automatically generate the equivalent of</p>
<p>lemma measure_t[measure_function]:<br>
    "is_measure f ⟹ is_measure (λ t. case t of C t₁ ... tₙ ⇒ (t₁,...,tₙ)"..</p>
</blockquote>
<p>I guess one non-invasive to implement this would be via a plugin to<br>
the free_constructors abstraction (c.f.<br>
Ctr_Sugar.ctr_sugar_interpretation). Jasmin and me are putting this on<br>
some low-priority feature request list. But if you really want the<br>
functionality (i.e. want to do it by yourself), we would be happy to<br>
give more guidance.</p>
</blockquote>
<p>I talked to Joachim yesterday, he said he was not interested at the<br>
moment, but if you want to provide some pointers I would like to give it<br>
a shot!</p>
</blockquote>
<p>Great to hear. I’ll provide some pointers in a separate mail (sent a bit later today) off this list.</p>
<blockquote>
<p>A bit of background maybe: I did spend some time implementing an<br>
extension to inductive predicates for Isabelle for my masters thesis<br>
(Joachim was my supervisor).[1] -- What I am trying to say is that I am<br>
somewhat proficient in digging around in Isabelle-style ML-code and<br>
making some sense of what I read, so if you provide me with some<br>
guidance your time wont be wasted :)</p>
<p>Best regards<br>
Richard</p>
<p>[1] I originally intended to get it into the AFP, but then never pushed<br>
it when I got busy with applying for jobs and other things. The code is<br>
on github though (<a href="https://github.com/gattschardo/open-inductive">https://github.com/gattschardo/open-inductive</a>) and I<br>
made it work with Isabelle2015 (and this week Isabelle2016-RC4).</p>
</blockquote>
<p>Yes, I’ve came across your nice work at some point (I don’t remember the occasion). It certainly belongs into the AFP.</p>
<p>Actually, putting the thing into the AFP will reduce your work in the long term. Basically, you’ll almost never again will have to make it work with IsabelleXXX. This is particularly true for Isabelle/ML code which changes more rapidly than well-established concepts from HOL-Main.</p>
<p>Dmitriy</p>



<a name="294666337"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Make%20all%20selectors%20measure_functions%3F/near/294666337" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Make.20all.20selectors.20measure_functions.3F.html#294666337">(Aug 22 2022 at 12:38)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I've already commented on an earlier version of this material, and you <br>
seem to have improved it further. It generally looks good -- above the <br>
average of various ML experiments that are already in AFP.</p>
<p>Some years ago, the AFP editors did not want to see actual ML tools there, <br>
but de-facto we have that already.</p>
<p>Note that the "auto-magic" maintenance in AFP means that someone changing <br>
certain Isabelle/ML things in Pure or HOL also goes through applications <br>
in AFP and tries to adapt them. This sometimes requires to go over it with <br>
the lawn-mower first, to put it into maintainable form. (Your sources look <br>
quite maintainable already.)</p>
<p>I cannot say anything about the application, i.e. the problem that is <br>
addressed here from a user perspective.</p>
<p>Makarius</p>



<a name="294668350"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Make%20all%20selectors%20measure_functions%3F/near/294668350" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Make.20all.20selectors.20measure_functions.3F.html#294668350">(Aug 22 2022 at 12:49)</a>:</h4>
<p>From: Joachim Breitner &lt;<a href="mailto:breitner@kit.edu">breitner@kit.edu</a>&gt;<br>
Dear Isabelle list,</p>
<p>I was surprised to find that one function definition involving a type<br>
(t1 × t2) would work, but the equivalent function definition involving<br>
a custom data type isomorphic to (t1 × t2) (i.e. one constructor with<br>
two fields) would not work. See<br>
<a href="http://stackoverflow.com/questions/35225110/termination-checking-for-product-types">http://stackoverflow.com/questions/35225110/termination-checking-for-product-types</a><br>
for the example.</p>
<p>The reason is, of course, that the selectors of the pair type are set<br>
up as measure functions:</p>
<p>lemma measure_fst[measure_function]: "is_measure f ⟹ is_measure (λp. f (fst p))"<br>
    by (rule is_measure_trivial)<br>
    lemma measure_snd[measure_function]: "is_measure f ⟹ is_measure (λp. f (snd p))"<br>
    by (rule is_measure_trivial)</p>
<p>and doing something similar for my custom type solves the problem.</p>
<p>But it was still surprising, so I wonder if there is a reason not to<br>
register a similar measure function for product data types by default.</p>
<p>Concrete proposal for your consideration: For product data types</p>
<p>datatype t = C t₁ ... tₙ</p>
<p>automatically generate the equivalent of</p>
<p>lemma measure_t[measure_function]:<br>
     "is_measure f ⟹ is_measure (λ t. case t of C t₁ ... tₙ ⇒ (t₁,...,tₙ)"..</p>
<p>Greetings,<br>
Joachim<br>
<a href="/user_uploads/14278/ecfd8SzFk5qFFWdC16DRlqvV/signature.asc">signature.asc</a></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>