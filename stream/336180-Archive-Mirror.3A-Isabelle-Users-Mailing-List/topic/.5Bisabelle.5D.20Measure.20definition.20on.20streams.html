<html>
<head><meta charset="utf-8"><title>[isabelle] Measure definition on streams · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Measure.20definition.20on.20streams.html">[isabelle] Measure definition on streams</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294326459"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Measure%20definition%20on%20streams/near/294326459" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Measure.20definition.20on.20streams.html#294326459">(Aug 19 2022 at 17:04)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Dear probability experts,</p>
<p>I have a possibly infinite nesting of discrete probability distributions, i.e., a <br>
codatatype of the form</p>
<p>codatatype foo = Foo "(nat * foo) pmf"</p>
<p>where pmf is the type of discrete probability distributions (probability mass functions, <br>
PMF). Now, I would like to measure unrollings of some "foo :: foo", which are infinite <br>
streams of naturals. The streams are generated by picking a element (n, foo') from the <br>
support of foo's PMF, use n as the head of the stream and continue corecursively with <br>
foo'. The probability of a single stream should intuitively be the product of all the <br>
probabilities of the random choices according to the PMFs. This is only the intuition, as <br>
the stream is infinite and the resulting distribution is continuous, so the density given <br>
by the product does not exist.</p>
<p>I now want to construct the measure space with the associated measure on the sigma algebra <br>
generated by the usual cylinders on streams. I tried to define the measure on the <br>
cylinders (which can be indexed all finite lists of naturals) and found the function <br>
extend_measure for that. Unfortunately, I have not found many usable theorems about <br>
extend_measure. In the theorem emeasure_extend_measure, e.g., I have to provide a positive <br>
and countably-additive function mu' on the sigma algebra of the cylinders, which is just <br>
what I want to construct. Am I overlooking the obvious? Are there better ways to construct <br>
the measure function I want? The sigma algebra is isomorphic to the infinite indexed <br>
product. My problem is just assigning the right probability to the sets of streams.</p>
<p>Thanks in advance for any pointers and suggestions,<br>
Andreas</p>
<p>PS: I am hooked in a recent snapshot of the development version, so I am happy to use all <br>
the new stuff that will be only available in Isabelle2015. I still post on isabelle-users <br>
as this is a general question about measures in Isabelle which will still be relevant <br>
after the next release.</p>



<a name="294326511"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Measure%20definition%20on%20streams/near/294326511" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Measure.20definition.20on.20streams.html#294326511">(Aug 19 2022 at 17:05)</a>:</h4>
<p>From: Johannes Hölzl &lt;<a href="mailto:hoelzl@in.tum.de">hoelzl@in.tum.de</a>&gt;<br>
Hi Andreas,</p>
<p>I think you can use the formalization of Markov chains in the locale<br>
MC_syntax in $AFP/Markov_Models/Discrete_Time_Markov_Chain. Here a<br>
Markov chain K is given as the Markov kernel (i.e. transition system)<br>
K :: 's =&gt; 's pmf.</p>
<p>In your case the state space is nat * foo, so MC_syntax can be<br>
instantiated with<br>
  K == un_Foo o snd<br>
then you get a trace space "T s :: (nat * foo) stream measure". With<br>
  T' s == distr (T s) (stream_space (count_space UNIV)) (smap fst)<br>
you construct a "nat stream space". But be aware: you lost some<br>
information, so T' is not the trace space of a Markov chain anymore!</p>
<p>Does this answer your question?</p>
<ul>
<li>Johannes</li>
</ul>
<p>PS: If you want to construct the trace space yourself you want to use<br>
Caratheodories extension theorem in the form of<br>
extend_measure_caratheodory.<br>
But generally I would suggest to avoid this and use the product measure<br>
or the trace space of Markov chains.</p>



<a name="294326554"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Measure%20definition%20on%20streams/near/294326554" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Measure.20definition.20on.20streams.html#294326554">(Aug 19 2022 at 17:05)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Dear Johannes,</p>
<p>Thanks for the quick answer. Building on your work seems easier than redoing everything <br>
from scratch. I still have some trouble to define the distribution T', because T' should <br>
have type "foo =&gt; ..." rather than "nat * foo =&gt; ...". I tried to define T' as</p>
<p>T' s = distr (T (undefined, s)) (stream_space (count_space UNIV)) (smap fst)</p>
<p>but then I have trouble to get a nice recursion equation in the style of <br>
MC_Syntax.nn_integral_T, because I don't know how to show "MC_syntax.walk K (n, foo) = <br>
MC_syntax.walk K (undefined, foo)" for K = "un_Foo o snd". Can you give me a hint?</p>
<p>I also looked at your theory on Markov Decision Processes, which look very interesting. <br>
Unfortunately, I have not been able to really understand them. Can you give me a reference <br>
where I can read up on that? The paper linked from the AFP entry's abstract does not cover <br>
MDPs.</p>
<p>Best,<br>
Andreas</p>



<a name="294326566"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Measure%20definition%20on%20streams/near/294326566" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Measure.20definition.20on.20streams.html#294326566">(Aug 19 2022 at 17:05)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Dear Johannes,</p>
<p>Meanwhile, I found a way to prove this using MC_syntax.T_eq_T'.</p>
<p>Sorry for the noise,<br>
Andreas</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>