<html>
<head><meta charset="utf-8"><title>[isabelle] Multiple simultaneous interpretations of a locale · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiple.20simultaneous.20interpretations.20of.20a.20locale.html">[isabelle] Multiple simultaneous interpretations of a locale</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294052307"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiple%20simultaneous%20interpretations%20of%20a%20locale/near/294052307" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiple.20simultaneous.20interpretations.20of.20a.20locale.html#294052307">(Aug 18 2022 at 10:54)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:lochbihl@infosun.fim.uni-passau.de">lochbihl@infosun.fim.uni-passau.de</a>&gt;<br>
Hello all,</p>
<p>I'm working with a development snapshot of Isabelle (15 Oct 2007) and<br>
got stuck when trying to employ locales with definitions inside.<br>
My problem is how to refer to different interpretations of a single<br>
locale in one lemma.</p>
<p>The following example, which heavily simplifies the situation in my<br>
theory, illustrates my problem:</p>
<p>Suppose, I have a locale a which fixes a parameter function P and<br>
defines a lift operator to lift the predicate to maps.</p>
<p>locale a =<br>
  fixes P :: "'a =&gt; bool"<br>
  fixes lift :: "('b =&gt; 'a option) =&gt; bool"<br>
  defines lift_def: "lift as == !b. case as b of None =&gt; True | Some a<br>
=&gt; P a" begin</p>
<p>lemma liftI: "(!!a b. as b = Some a ==&gt; P a) ==&gt; lift as"<br>
apply(clarsimp simp: lift_def)<br>
by(case_tac "as b", auto)</p>
<p>(* ... *)<br>
end</p>
<p>Also, there is predicate P, e.g.</p>
<p>definition P :: "nat =&gt; bool"<br>
where "P n == n &gt; 0"</p>
<p>which we want to lift:</p>
<p>interpretation a [P] .</p>
<p>Then, there is another predicate, say Q, which also must be lifted.</p>
<p>definition Q :: "nat =&gt; bool"<br>
where "Q n == n = 0"</p>
<p>interpretation a [Q] .</p>
<p>Strangely, Isabelle issues a warning at this point, saying that it<br>
replaces oly copies of the theorems Xpl.P_lift.lift_def and<br>
Xpl.P_lift.liftI, i.e. if I refer to theorems generated by the<br>
interpretation of a with parameter P, this now gives those for parameter Q.</p>
<p>Now I want to prove that if Q lifted to a map as holds, then P does not<br>
hold when lifted to the same map, i.e. I would like to write something like</p>
<p>lemma "Q.lift as ==&gt; ~P.lift as"</p>
<p>Is there any syntax to write this or is it just impossible to refer to<br>
different interpretations of a locale in a single lemma? Is there<br>
another concept in Isabelle which would serve my purposes better?</p>
<p>Regards,<br>
Andreas Lochbihler</p>



<a name="294052408"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiple%20simultaneous%20interpretations%20of%20a%20locale/near/294052408" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiple.20simultaneous.20interpretations.20of.20a.20locale.html#294052408">(Aug 18 2022 at 10:54)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Fri, 19 Oct 2007, Andreas Lochbihler wrote:</p>
<blockquote>
<p>I'm working with a development snapshot of Isabelle (15 Oct 2007) and<br>
got stuck when trying to employ locales with definitions inside.<br>
My problem is how to refer to different interpretations of a single<br>
locale in one lemma.</p>
<p>The following example, which heavily simplifies the situation in my<br>
theory, illustrates my problem:</p>
<p>Suppose, I have a locale a which fixes a parameter function P and<br>
defines a lift operator to lift the predicate to maps.</p>
<p>locale a =<br>
  fixes P :: "'a =&gt; bool"<br>
  fixes lift :: "('b =&gt; 'a option) =&gt; bool"<br>
  defines lift_def: "lift as == !b. case as b of None =&gt; True | Some a<br>
=&gt; P a" begin</p>
<p>lemma liftI: "(!!a b. as b = Some a ==&gt; P a) ==&gt; lift as"<br>
apply(clarsimp simp: lift_def)<br>
by(case_tac "as b", auto)</p>
<p>(* ... *)<br>
end</p>
<p>Also, there is predicate P, e.g.</p>
<p>definition P :: "nat =&gt; bool"<br>
where "P n == n &gt; 0"</p>
<p>which we want to lift:</p>
<p>interpretation a [P] .</p>
<p>Then, there is another predicate, say Q, which also must be lifted.</p>
<p>definition Q :: "nat =&gt; bool"<br>
where "Q n == n = 0"</p>
<p>interpretation a [Q] .</p>
</blockquote>
<blockquote>
<p>Strangely, Isabelle issues a warning at this point, saying that it <br>
replaces oly copies of the theorems Xpl.P_lift.lift_def and <br>
Xpl.P_lift.liftI, i.e. if I refer to theorems generated by the <br>
interpretation of a with parameter P, this now gives those for parameter <br>
Q.</p>
</blockquote>
<p>This works by using separate name prefixes each interpretations. Moreover, <br>
local definitions are better expressed as definitions within the locale <br>
context, not as "defines" which are slightly outdated.   Here is my <br>
version of the above:</p>
<p>locale a =<br>
    fixes P :: "'a =&gt; bool"<br>
  begin</p>
<p>definition lift :: "('b =&gt; 'a option) =&gt; bool"<br>
  where "lift as &lt;-&gt; (ALL b. case as b of None =&gt; True | Some a =&gt; P a)"</p>
<p>lemma liftI: "(!!a b. as b = Some a ==&gt; P a) ==&gt; lift as"<br>
    unfolding lift_def by (auto split: option.splits)</p>
<p>end</p>
<p>definition P :: "nat =&gt; bool"<br>
  where "P = (%n. n &gt; 0)"</p>
<p>interpretation P: a [P] .</p>
<p>definition Q :: "nat =&gt; bool"<br>
  where "Q = (%n. n = 0)"</p>
<p>interpretation Q: a [Q] .</p>
<blockquote>
<p>Now I want to prove that if Q lifted to a map as holds, then P does not <br>
hold when lifted to the same map, i.e. I would like to write something <br>
like</p>
<p>lemma "Q.lift as ==&gt; ~P.lift as"</p>
</blockquote>
<p>You can now write this, but cannot prove it.  In fact the following holds:</p>
<p>lemma "as = empty ==&gt; Q.lift as &lt;-&gt; P.lift as"<br>
    unfolding P.lift_def Q.lift_def by auto</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>