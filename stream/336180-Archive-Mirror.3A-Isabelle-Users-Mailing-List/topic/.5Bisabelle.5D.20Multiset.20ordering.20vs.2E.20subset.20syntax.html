<html>
<head><meta charset="utf-8"><title>[isabelle] Multiset ordering vs. subset syntax · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html">[isabelle] Multiset ordering vs. subset syntax</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294331494"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294331494" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294331494">(Aug 19 2022 at 17:33)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Hi all,</p>
<p>In private discussion with Tobias, René T., and Chris S., we agreed that the current syntax for (multiplicity-aware) multiset inclusion and the multiset (Dershowitz-Manna) ordering is confusing.</p>
<p>Focusing on the strict operators, the current situation is</p>
<p>&lt; and ⊂ for multiset inclusion<br>
   &lt;# and ⊂# for the multiset ordering</p>
<p>Our proposal:</p>
<p>&lt; for the multiset ordering<br>
   &lt;# and ⊂# for subset with multiplicities</p>
<p>(and analogously for the nonstrict operators). Apart from being less confusing (in our opinion), the new syntax would ensure the nice multiset ordering is used by the “ord” type class, which would be useful to some of us. Indeed if &lt; is a linear order on 'a, with this change so would &lt; be on multisets, or on multisets of multisets, etc.</p>
<p>Because the proposal is essentially a swapping (except for ⊂, which is no longer assigned), we would need to proceed in two steps.</p>
<p>First step (for Isabelle2015):</p>
<p>&lt; and ⊂ for multiset inclusion<br>
   #&lt;# and #⊂# for the multiset ordering</p>
<p>The symbols “#&lt;#” and “#⊂#” are ugly, but they would vanish with the expected Isabelle2016 release, at which point our proposal would be fully implemented. [*]</p>
<p>Let us know if you have strong opinions on this, ideally as soon as possible, since we soon have to slow down development toward the next release.</p>
<p>Cheers,</p>
<p>Jasmin</p>
<p>[*] For isabelle-dev readers: In the Isabelle repository, the ugly symbols would appear in the coming days and vanish soon after the Isabelle2015 release.</p>



<a name="294634058"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294634058" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294634058">(Aug 22 2022 at 09:10)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Jasmin,</p>
<p>I am not sure whether it would be best to do the swap in one step.</p>
<p>In earlier days, we provided funny fix_foo tools (mostly perl scripts)<br>
which would assist in performing such transitions, and the multiset<br>
syntax IMHO looks feasible for this also.</p>
<p>Florian<br>
<a href="/user_uploads/14278/K09D4R_cScpwqOBTt_vGvK1P/signature.asc">signature.asc</a></p>



<a name="294634422"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294634422" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294634422">(Aug 22 2022 at 09:12)</a>:</h4>
<p>From: Johannes Hölzl &lt;<a href="mailto:hoelzl@in.tum.de">hoelzl@in.tum.de</a>&gt;<br>
Hm, maybe nowadays a Scala or ML script can do the job? How do you<br>
otherwise distinguish btw. &lt; for orders and &lt; for multiset?</p>
<ul>
<li>Johannes</li>
</ul>



<a name="294634785"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294634785" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294634785">(Aug 22 2022 at 09:14)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Johannes,</p>
<blockquote>
<p>Hm, maybe nowadays a Scala or ML script can do the job? How do you<br>
otherwise distinguish btw. &lt; for orders and &lt; for multiset?</p>
</blockquote>
<p>thanks for the hint.  Of course bare &lt; etc. is not suitable for perl<br>
magic.  And this would surely be a candidate for a first<br>
source-modifying tool using Isabelle/Scala.</p>
<p>Florian<br>
<a href="/user_uploads/14278/WVrJpOS5eN1StmZdYKHl5giX/signature.asc">signature.asc</a></p>



<a name="294634963"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294634963" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294634963">(Aug 22 2022 at 09:15)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Hi Florian,</p>
<blockquote>
<p>I am not sure whether it would be best to do the swap in one step.</p>
</blockquote>
<p>Well, I am sure that I don’t want to do the swap in one step.</p>
<blockquote>
<p>In earlier days, we provided funny fix_foo tools (mostly perl scripts)<br>
which would assist in performing such transitions, and the multiset<br>
syntax IMHO looks feasible for this also.</p>
</blockquote>
<p>I don’t know how your fancy Perl scripts will deal with &lt; and ⊂, based on the type.</p>
<p>Jasmin</p>



<a name="294635161"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294635161" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294635161">(Aug 22 2022 at 09:17)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Perl is indeed mostly out -- Isabelle/Scala has token over regex <br>
operations quite successfully in recent years, together with convenient <br>
I/O operations that follow Isabelle/ML customs.</p>
<p>The problem to operate on sources systematically, based on actual formal <br>
content is rather old and well-known, but not yet done routinely.  In <br>
principle, the PIDE markup could be used to guide the text replacement -- <br>
some genuine "refactoring" of theories.</p>
<p>I am not proposing this concretely right now, but the technology is pretty <br>
close to that.</p>
<p>Makarius</p>



<a name="294635856"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294635856" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294635856">(Aug 22 2022 at 09:21)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Hi all,</p>
<blockquote>
<p>I am not sure whether it would be best to do the swap in one step.</p>
</blockquote>
<p>Actually, Florian’s email made me rethink about this, and maybe as many as three steps will be necessary (leading us to Isabelle2016-1 or Isabelle2017):</p>
<ol>
<li>Rename &lt;# etc. to #&lt;# (or whatever odd syntax).</li>
<li>Rename &lt; and \&lt;subset&gt; to &lt;# and \&lt;subset&gt;#.</li>
<li>Rename #&lt;# to &lt;.</li>
</ol>
<p>My goal is to maximize the number of cases where changes trigger clear errors when processing theories, and minimize subtle change of semantics. Even in a theorem prover, semantic changes can be difficult to debug. Combining steps 2 and 3 would lead to some confusion — a term like “A &lt; B” would suddenly change semantics, without giving an immediate error.</p>
<p>Anyway, we will see. For the moment, if there are no voices against my implementing step 1, I will go ahead (e.g. next week).</p>
<p>Thanks to all for your feedback!</p>
<p>Jasmin</p>



<a name="294636032"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294636032" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294636032">(Aug 22 2022 at 09:22)</a>:</h4>
<p>From: Larry Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
It would be great to get some feedback from the mailing list as to who would be affected by this change.</p>
<p>Existing users of multiset orderings, please speak up!</p>
<p>If hardly anybody is going to be affected, then the change should be implemented in full for the next release.</p>
<p>Larry</p>



<a name="294636361"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Multiset%20ordering%20vs.%20subset%20syntax/near/294636361" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Multiset.20ordering.20vs.2E.20subset.20syntax.html#294636361">(Aug 22 2022 at 09:25)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Good point. We’ve had some off-lists discussions with the IsaFoR developers, who use multisets and multiset orderings heavily. But since they are currently based on the repository version, we could do the three-step transition there, all in time for Isabelle2015. Mathias, Dmitriy, and I are in a similar situation. Anybody else?</p>
<p>Jasmin</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>