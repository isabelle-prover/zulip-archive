<html>
<head><meta charset="utf-8"><title>[isabelle] My unforgivable soundness issue with a locale · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20My.20unforgivable.20soundness.20issue.20with.20a.20locale.html">[isabelle] My unforgivable soundness issue with a locale</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294260846"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20My%20unforgivable%20soundness%20issue%20with%20a%20locale/near/294260846" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20My.20unforgivable.20soundness.20issue.20with.20a.20locale.html#294260846">(Aug 19 2022 at 13:05)</a>:</h4>
<p>From: "Yannick Duchêne (Hibou57 )" &lt;<a href="mailto:yannick_duchene@yahoo.fr">yannick_duchene@yahoo.fr</a>&gt;<br>
Hi guys'n gals,</p>
<p>I feel ashamed now, while I feel it's so funny as much as useful enough to  <br>
be narrated, I'm telling the story here.</p>
<p>Say I had a local with “assumes A and B”. The most important stuff was in  <br>
A, so I was mainly busy proving theorems derived from A. One of those was  <br>
hard to me (I'm not a guru, and I'm as slow as a snail), and I multiple  <br>
times requested the help of Try/Sledgehammer and others. I was never happy  <br>
with the produced Isar proof, and to make it more clear, I wanted to  <br>
understand one I picked, expecting to make it more readable.</p>
<p>I was astonished to noticed one of the intermediate goal generated by  <br>
Sledgehammer, should have been impossible to prove according to my intents  <br>
and interpretations of A and B. I forked my investigations toward this new  <br>
case, and discovered I could both prove this goal and disprove it. Yes, I  <br>
could prove P and ¬ P! You guess I was rather frightened, while not  <br>
willing to believe in an Isabelle bug.</p>
<p>I finally understood: you could only prove ¬ P if you used A and B from  <br>
the locale's premisses and you could only prove P if you used only A and  <br>
don't bother about B; and as you could either bother or not about B, you  <br>
could prove both P and ¬ P one next to the other. So I changed the  <br>
locale's premisses into “assumes B and B ⟹ A” instead of “assumes A and  <br>
B”. I also have to add “using B” in most proofs about A targeting that  <br>
locale.</p>
<p>I was doing as if B was implicitly there everywhere; but it's not.</p>
<p>Moral of the story: don't forget the premisses, it's not enough to have it  <br>
in the locale's “assumes”, it probably also have to be there at the left  <br>
of an ⟹, in some propositions of the “assumes” section.</p>
<p>By the way, a question aside: is there a way to refer to a proposition  <br>
 from another proposition? I mean so that I would not have to copy/paste  <br>
the premiss of “(text of B) ⟹ (text of A)” and just refer to B, as “B ⟹  <br>
(text of A)” instead of the latter.</p>



<a name="294260909"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20My%20unforgivable%20soundness%20issue%20with%20a%20locale/near/294260909" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20My.20unforgivable.20soundness.20issue.20with.20a.20locale.html#294260909">(Aug 19 2022 at 13:05)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Hi.</p>
<p>Already years ago, I got used to always provide some model for any<br>
locale that contains "final results" of my formalization, just to make<br>
sure that I have not introduced inconsistent assumptions by mistake. And<br>
this is, unfortunately, easier than one may think. E.g., a simple typo<br>
is already enough:</p>
<p>definition P :: "nat =&gt; bool" [...]</p>
<p>locale foo = assumes A: "j&gt;0 ==&gt; p j" (* &lt;-- note the lower-case typo<br>
here, p is actually a free variable! *)</p>
<p>inside the locale, you can prove everything you expect with A (and much<br>
more ;) ). Only when interpreting the locale you will realize the<br>
mistake. </p>
<p>Best,<br>
  Peter</p>



<a name="294260920"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20My%20unforgivable%20soundness%20issue%20with%20a%20locale/near/294260920" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20My.20unforgivable.20soundness.20issue.20with.20a.20locale.html#294260920">(Aug 19 2022 at 13:05)</a>:</h4>
<p>From: "Yannick Duchêne (Hibou57 )" &lt;<a href="mailto:yannick_duchene@yahoo.fr">yannick_duchene@yahoo.fr</a>&gt;<br>
Hello Johannes,</p>
<p>I already tried this one. It seems to be allowed by Isar‑Ref, but Isabelle  <br>
reject it with this message: “Illegal term bindings in context element”.</p>



<a name="294260940"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20My%20unforgivable%20soundness%20issue%20with%20a%20locale/near/294260940" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20My.20unforgivable.20soundness.20issue.20with.20a.20locale.html#294260940">(Aug 19 2022 at 13:06)</a>:</h4>
<p>From: "Yannick Duchêne (Hibou57 )" &lt;<a href="mailto:yannick_duchene@yahoo.fr">yannick_duchene@yahoo.fr</a>&gt;<br>
That's what I would like to avoid, as I would like to be able to predict  <br>
such issues. I'm still investigating the case, as the problem finally  <br>
remains unsolved: adding the premiss directly in the proposition did not  <br>
solve everything.</p>
<p>Some sanity theorems may help (successful in one case at least), but I  <br>
don't know any kind of general theorem which could assert there is no  <br>
possible contradictions. I guess this is feasible, as that must be  <br>
something close people do when they check a logic is sound and claim they  <br>
proved it.</p>



<a name="294260995"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20My%20unforgivable%20soundness%20issue%20with%20a%20locale/near/294260995" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20My.20unforgivable.20soundness.20issue.20with.20a.20locale.html#294260995">(Aug 19 2022 at 13:06)</a>:</h4>
<p>From: "Yannick Duchêne (Hibou57 )" &lt;<a href="mailto:yannick_duchene@yahoo.fr">yannick_duchene@yahoo.fr</a>&gt;<br>
I was wrong, Isar‑Ref disallows it. Printed page 89 it says:</p>
<p>“Note that "(is p 1 . . . p n )" patterns given in the syntax of<br>
      assumes and defines above are illegal in locale definitions.”</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>