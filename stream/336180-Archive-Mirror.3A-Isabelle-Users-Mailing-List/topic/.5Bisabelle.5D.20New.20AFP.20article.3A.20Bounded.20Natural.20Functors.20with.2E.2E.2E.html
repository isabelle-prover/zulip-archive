<html>
<head><meta charset="utf-8"><title>[isabelle] New AFP article: Bounded Natural Functors with... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20New.20AFP.20article.3A.20Bounded.20Natural.20Functors.20with.2E.2E.2E.html">[isabelle] New AFP article: Bounded Natural Functors with...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294731029"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20New%20AFP%20article%3A%20Bounded%20Natural%20Functors%20with.../near/294731029" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20New.20AFP.20article.3A.20Bounded.20Natural.20Functors.20with.2E.2E.2E.html#294731029">(Aug 22 2022 at 17:07)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Bounded Natural Functors with Covariance and Contravariance<br>
Andreas Lochbihler and Joshua Schneider</p>
<p>Bounded natural functors (BNFs) provide a modular framework for the construction <br>
of (co)datatypes in higher-order logic. Their functorial operations, the mapper <br>
and relator, are restricted to a subset of the parameters, namely those where <br>
recursion can take place. For certain applications, such as free theorems, data <br>
refinement, quotients, and generalised rewriting, it is desirable that these <br>
operations do not ignore the other parameters. In this article, we formalise the <br>
generalisation BNF_CC that extends the mapper and relator to covariant and <br>
contravariant parameters. We show that</p>
<ol>
<li>BNF_CCs are closed under functor composition and least and greatest fixpoints,</li>
<li>
<p>subtypes inherit the BNF_CC structure under conditions that generalise those <br>
for the BNF case, and</p>
</li>
<li>
<p>BNF_CCs preserve quotients under mild conditions.</p>
</li>
</ol>
<p>These proofs are carried out for abstract BNF_CCs similar to the AFP entry BNF <br>
Operations. In addition, we apply the BNF_CC theory to several concrete functors.</p>
<p><a href="https://www.isa-afp.org/entries/BNF_CC.html">https://www.isa-afp.org/entries/BNF_CC.html</a></p>
<p>Enjoy!<br>
<a href="/user_uploads/14278/2M5-FjYYiTD0XDUi_N8tdLbg/smime.p7s">smime.p7s</a></p>



<a name="294731063"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20New%20AFP%20article%3A%20Bounded%20Natural%20Functors%20with.../near/294731063" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20New.20AFP.20article.3A.20Bounded.20Natural.20Functors.20with.2E.2E.2E.html#294731063">(Aug 22 2022 at 17:07)</a>:</h4>
<p>From: Bertram Felgenhauer via Cl-isabelle-users &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Tobias Nipkow wrote:</p>
<blockquote>
<p>Bounded Natural Functors with Covariance and Contravariance<br>
Andreas Lochbihler and Joshua Schneider<br>
[...]</p>
</blockquote>
<p>I'm not sure if I understand this correctly. Could this bring us closer<br>
to obtaining a map function for 'a set, and hence for datatypes<br>
involving sets?</p>
<p>datatype 'a foo = foo "('a × 'a) set"</p>
<p>(* no map_foo is provided since none of the arguments admit recursion *)</p>
<p>(The argument of set is special in that it admits both a contravariant<br>
view (by viewing sets as predicates) and a covariant view with the<br>
f ` X being corresponding map function -- it's the latter that I would<br>
like to have as a map function...)</p>
<p>Cheers,</p>
<p>Bertram</p>



<a name="294731072"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20New%20AFP%20article%3A%20Bounded%20Natural%20Functors%20with.../near/294731072" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20New.20AFP.20article.3A.20Bounded.20Natural.20Functors.20with.2E.2E.2E.html#294731072">(Aug 22 2022 at 17:07)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:mail@andreas-lochbihler.de">mail@andreas-lochbihler.de</a>&gt;<br>
Dear Bertram,</p>
<p>You are right. This entry provides exactly the theory for getting such a map function (and <br>
also a relator). For your example, you would precisely get the covariant map (but you <br>
still cannot do (co)datatype recursion through such non-live covariant arguments). You can <br>
also go crazy as in</p>
<p>datatype ('a, 'b) bar = Bar "(('a * 'a) set =&gt; 'b) =&gt; 'a list"</p>
<p>The construction gives you a map function that is covariant in 'a and contravariant in 'b.</p>
<p>The entry formalises the constructions for an abstract functor and for a few examples. <br>
There's no automation yet, so you have to intelligently copy-n-paste. I have used these <br>
constructions and proofs for quite complicated (co)datatypes. Joshua and I have a paper on <br>
the theory at ITP this year. A preliminary draft is available on my homepage:</p>
<p><a href="http://www.andreas-lochbihler.de/pub/lochbihlerschneider2018.pdf">http://www.andreas-lochbihler.de/pub/lochbihlerschneider2018.pdf</a></p>
<p>Best,<br>
Andreas</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>