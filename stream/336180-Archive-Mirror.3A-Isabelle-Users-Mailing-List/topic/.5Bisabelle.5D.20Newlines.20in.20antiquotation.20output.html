<html>
<head><meta charset="utf-8"><title>[isabelle] Newlines in antiquotation output · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Newlines.20in.20antiquotation.20output.html">[isabelle] Newlines in antiquotation output</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294161950"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Newlines%20in%20antiquotation%20output/near/294161950" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Newlines.20in.20antiquotation.20output.html#294161950">(Aug 18 2022 at 20:10)</a>:</h4>
<p>From: Daniel Schoepe &lt;<a href="mailto:daniel@schoepe.org">daniel@schoepe.org</a>&gt;<br>
Hi,</p>
<p>I was wondering if there was a way to have more fine-grained control<br>
over how newlines are inserted when using antiquotations:<br>
When using something like @{thm foo} (or @{thm foo_def}) in my case,<br>
no newlines are inserted at all. This can be corrected by<br>
using [display] as an option to the antiquotation, but this causes<br>
the newlines to be inserted at places that seem to be chosen<br>
automatically.</p>
<p>This result is not always ideal: In my specific case, I'm trying to<br>
get nice-looking representation of terms in a programming language whose<br>
terms are represented by an Isabelle data type with some infix<br>
annotations. For example, I'd like a term like the following to be<br>
printed with linebreaks at the same position as in the Isabelle/HOL<br>
source.</p>
<p>definition foo :: Stmt<br>
  where "foo =<br>
x &lt;- 1;<br>
y &lt;- 2;<br>
z &lt;- x + y"</p>
<p>(where -&gt; and ; are infix notations for constructors of Stmt)</p>
<p>I'd like to keep these definitions separate from the place where I am<br>
using the antiquotation, so putting the definition in the place of the<br>
antiquotation is not an ideal solution for me. Of course, I could copy<br>
the generated latex output into my document manually, but this is<br>
horrible in terms of maintainability. Using some perl to automate this<br>
may be an option, but I'm hoping that there's a more elegant way.</p>
<p>Regards,<br>
Daniel</p>



<a name="294161974"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Newlines%20in%20antiquotation%20output/near/294161974" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Newlines.20in.20antiquotation.20output.html#294161974">(Aug 18 2022 at 20:11)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c-sterna@jaist.ac.jp">c-sterna@jaist.ac.jp</a>&gt;<br>
Hi,</p>
<p>you can read the section on Inner syntax of the Isabelle Reference <br>
Manual (isabelle doc isar-ref). There it is described how to use mixfix <br>
annotations (which can be installed just for certain output modes, e.g., <br>
like (latex)) to configure pretty printing. Something very similar to <br>
your example is available as part of Monad_Syntax.thy from <br>
Isabelle/HOL's library:</p>
<p><a href="http://isabelle.in.tum.de/dist/library/HOL/HOL-Library/Monad_Syntax.html">http://isabelle.in.tum.de/dist/library/HOL/HOL-Library/Monad_Syntax.html</a></p>
<p>(note that you have to use the output mode "do_notation" to actually <br>
activate this syntax in your output).</p>
<p>For a full example consider the attached file.</p>
<p>cheers</p>
<p>chris<br>
<a href="/user_uploads/14278/QGa9--wg-DJ0p_hpz7XnU3Er/Test.thy">Test.thy</a></p>



<a name="294161987"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Newlines%20in%20antiquotation%20output/near/294161987" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Newlines.20in.20antiquotation.20output.html#294161987">(Aug 18 2022 at 20:11)</a>:</h4>
<p>From: Daniel Schoepe &lt;<a href="mailto:daniel@schoepe.org">daniel@schoepe.org</a>&gt;<br>
Hi Chris,</p>
<p>Thank you, that seems work nicely. I ended up defining the notations I<br>
wanted myself instead of using do notation though, but the Monad_Syntax<br>
theory is a nice example of how to do that.</p>
<p>Regards,<br>
Daniel</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>