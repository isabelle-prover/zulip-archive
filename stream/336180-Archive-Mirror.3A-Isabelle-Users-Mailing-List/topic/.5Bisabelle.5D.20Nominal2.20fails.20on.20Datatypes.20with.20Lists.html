<html>
<head><meta charset="utf-8"><title>[isabelle] Nominal2 fails on Datatypes with Lists · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html">[isabelle] Nominal2 fails on Datatypes with Lists</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294764179"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764179" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764179">(Aug 22 2022 at 20:45)</a>:</h4>
<p>From: "Jackson, Vincent (Data61, Kensington NSW)" &lt;<a href="mailto:Vincent.Jackson@data61.csiro.au">Vincent.Jackson@data61.csiro.au</a>&gt;<br>
Hello All,</p>
<p>I have been recently experimenting with Nominal2&lt;<a href="https://www.isa-afp.org/entries/Nominal2.html">https://www.isa-afp.org/entries/Nominal2.html</a>&gt;, but have run into a problem with lists in datatypes.</p>
<p>The datatype</p>
<p>nominal_datatype ty</p>
<p>= TRecord ‹ty list›</p>
<p>| TVar typevar</p>
<p>fails with</p>
<p>Proof failed.</p>
<ol>
<li>⋀x. TRecord_raw (map (permute p_) (- p_ ∙ x)) = TRecord_raw x</li>
</ol>
<p>The error(s) above occurred for the goal statement⌂:</p>
<p>p_ ∙ TRecord_raw = TRecord_raw</p>
<p>presumably because the automation does not know (or use) the fact that ‹map (permute p) xs = p ∙ xs›.<br>
Further, although I can prove the lemma, I am unsure how (or if it is possible) to 'inject' the fact into the automation.</p>
<p>Any advice on how to proceed would be appreciated.</p>
<p>Thank you,<br>
Vincent Jackson</p>



<a name="294764184"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764184" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764184">(Aug 22 2022 at 20:45)</a>:</h4>
<p>From: "Urban,   Christian via Cl-isabelle-users" &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Dear Vincent,</p>
<p>I have to check what is going on. Would you be able top send me a slimmed-down theory where I can see what the problem is?</p>
<p>Also what is typevar in the TVar constructor?</p>
<p>Thanks,<br>
Christian</p>



<a name="294764213"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764213" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764213">(Aug 22 2022 at 20:45)</a>:</h4>
<p>From: Wolfgang Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
Hi, Christian!</p>
<p>Is Nominal2 somehow production-ready? From its website I got the<br>
impression that it had been developed only half-way and then development<br>
had halted.</p>
<p>All the best,<br>
Wolfgang</p>



<a name="294764242"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764242" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764242">(Aug 22 2022 at 20:45)</a>:</h4>
<p>From: "Urban,   Christian via Cl-isabelle-users" &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi Wolfgang,</p>
<blockquote>
<p>Is Nominal2 somehow production-ready?</p>
</blockquote>
<p>This depends on your point of view. ;o) It is certainly true that it quite rough and not all features are implemented. And it was aeons ago I have done things with it. But at the same time people have found it useful and have used it in interesting formalisations, for example</p>
<p><a href="https://www.isa-afp.org/browser_info/current/AFP/Incompleteness/">https://www.isa-afp.org/browser_info/current/AFP/Incompleteness/</a></p>
<p>It really depends on what your point of view is and what you want to do.</p>
<p>Christian</p>



<a name="294764300"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764300" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764300">(Aug 22 2022 at 20:46)</a>:</h4>
<p>From: Wolfgang Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
Hi, Christian!</p>
<p>So did I get this correctly that Nominal2 isn’t further developed<br>
anymore?</p>
<p>By the way, is the restriction that values of a nominal data type may<br>
not contain functions also in place in Nominal2?</p>
<p>All the best,<br>
Wolfgang</p>



<a name="294764310"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764310" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764310">(Aug 22 2022 at 20:46)</a>:</h4>
<p>From: "Jackson, Vincent (Data61, Kensington NSW)" &lt;<a href="mailto:Vincent.Jackson@data61.csiro.au">Vincent.Jackson@data61.csiro.au</a>&gt;<br>
A small theory that produces the error is</p>
<p>theory SmallLang<br>
  imports Nominal2.Nominal2<br>
begin</p>
<p>nominal_datatype ty = TRecord ‹ty list›</p>
<p>end</p>
<p>the typevar was just an</p>
<p>atom_decl typevar</p>
<p>but this seems to be unrelated to the error.</p>
<p>I'm using the AFP Isabelle2019 version of Nominal2, if that helps.</p>
<p>Thanks,<br>
Vincent</p>



<a name="294764315"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764315" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764315">(Aug 22 2022 at 20:46)</a>:</h4>
<p>From: "Urban,   Christian via Cl-isabelle-users" &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Dear Vincent,</p>
<p>Sorry, I should have seen this problem earlier. While the datatype package acquired the possibility to have nested datatypes where you can define</p>
<p>datatype ty = TRecord ‹ty list›</p>
<p>the Nominal2 package is still from a time where this was not possible. This means you would have to write something like this</p>
<p>nominal_datatype<br>
      ty = TRecord ty_list<br>
  and ty_list = Nil2<br>
              | Cons2 ty ty_list</p>
<p>Unfortunately this means you define a "copy" of the list-datatype and you would have to reprove the facts you need for this copy.</p>
<p>Hope this helps,<br>
Christian</p>



<a name="294764320"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Nominal2%20fails%20on%20Datatypes%20with%20Lists/near/294764320" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Nominal2.20fails.20on.20Datatypes.20with.20Lists.html#294764320">(Aug 22 2022 at 20:46)</a>:</h4>
<p>From: "Urban,   Christian via Cl-isabelle-users" &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Hi Wolfgang,</p>
<blockquote>
<p>So did I get this correctly that Nominal2 isn’t further developed<br>
anymore?</p>
</blockquote>
<p>Yes, it is true that it is not currently on the top of my<br>
to-do list. Sorry. I am also not aware whether anybody else<br>
is tinkering with the code. It is part of the AFP and so<br>
will be maintained and kept in a working state.</p>
<blockquote>
<p>By the way, is the restriction that values of a nominal data type may<br>
not contain functions also in place in Nominal2?</p>
</blockquote>
<p>Yes, unless the function is "trivial" such as</p>
<p>nominal_datatype<br>
      ty = TRecord "bool \&lt;Rightarrow&gt; char"<br>
         | Test</p>
<p>Hope this helps,<br>
Christian</p>
<hr>
<p>From: <a href="mailto:cl-isabelle-users-bounces@lists.cam.ac.uk">cl-isabelle-users-bounces@lists.cam.ac.uk</a> &lt;<a href="mailto:cl-isabelle-users-bounces@lists.cam.ac.uk">cl-isabelle-users-bounces@lists.cam.ac.uk</a>&gt; on behalf of Wolfgang Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
Sent: 17 October 2019 16:31<br>
To: <a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a> &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Subject: Re: [isabelle] Nominal2 fails on Datatypes with Lists</p>
<p>Hi, Christian!</p>
<p>So did I get this correctly that Nominal2 isn’t further developed<br>
anymore?</p>
<p>By the way, is the restriction that values of a nominal data type may<br>
not contain functions also in place in Nominal2?</p>
<p>All the best,<br>
Wolfgang</p>
<p>Am Donnerstag, den 17.10.2019, 12:35 +0000 schrieb Urban, Christian:</p>
<blockquote>
<p>Hi Wolfgang,</p>
<p>Is Nominal2 somehow production-ready?</p>
<p>This depends on your point of view. ;o) It is certainly true that it<br>
quite rough and not all features are implemented. And it was aeons ago<br>
I have done things with it. But at the same time people have found it<br>
useful and have used it in interesting formalisations, for example</p>
<p><a href="https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.isa-afp.org%2Fbrowser_info%2Fcurrent%2FAFP%2FIncompleteness%2F&amp;data=01%7C01%7Cchristian.urban%40kcl.ac.uk%7Cbac0eaf2865d405c566a08d75317466a%7C8370cf1416f34c16b83c724071654356%7C0&amp;sdata=s6JMWrL4auiYJIzYkyFs9HEwE6maeSio%2Bdp7OWMnTv8%3D&amp;reserved=0">https://eur03.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.isa-afp.org%2Fbrowser_info%2Fcurrent%2FAFP%2FIncompleteness%2F&amp;data=01%7C01%7Cchristian.urban%40kcl.ac.uk%7Cbac0eaf2865d405c566a08d75317466a%7C8370cf1416f34c16b83c724071654356%7C0&amp;sdata=s6JMWrL4auiYJIzYkyFs9HEwE6maeSio%2Bdp7OWMnTv8%3D&amp;reserved=0</a></p>
<p>It really depends on what your point of view is and what you want to<br>
do.</p>
<p>Christian</p>
<hr>
<p>From: <a href="mailto:cl-isabelle-users-bounces@lists.cam.ac.uk">cl-isabelle-users-bounces@lists.cam.ac.uk</a> &lt;<br>
<a href="mailto:cl-isabelle-users-bounces@lists.cam.ac.uk">cl-isabelle-users-bounces@lists.cam.ac.uk</a>&gt; on behalf of Wolfgang<br>
Jeltsch &lt;<a href="mailto:wolfgang-it@jeltsch.info">wolfgang-it@jeltsch.info</a>&gt;<br>
Sent: 16 October 2019 22:04<br>
To: <a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a> &lt;<br>
<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Subject: Re: [isabelle] Nominal2 fails on Datatypes with Lists</p>
<p>Hi, Christian!</p>
<p>Is Nominal2 somehow production-ready? From its website I got the<br>
impression that it had been developed only half-way and then<br>
development had halted.</p>
<p>All the best,<br>
Wolfgang</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>