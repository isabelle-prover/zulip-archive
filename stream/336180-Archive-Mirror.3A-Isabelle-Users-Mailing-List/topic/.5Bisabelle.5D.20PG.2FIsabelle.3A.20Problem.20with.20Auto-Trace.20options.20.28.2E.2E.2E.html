<html>
<head><meta charset="utf-8"><title>[isabelle] PG/Isabelle: Problem with Auto-Trace options (... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html">[isabelle] PG/Isabelle: Problem with Auto-Trace options (...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294222687"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294222687" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294222687">(Aug 19 2022 at 08:39)</a>:</h4>
<p>From: René Neumann &lt;<a href="mailto:rene.neumann@in.tum.de">rene.neumann@in.tum.de</a>&gt;<br>
Humm. The ProofGeneral-Devs have now closed this issue with a "it's<br>
Isabelle's fault"-message. So who is correct here?</p>
<ul>
<li>René</li>
</ul>



<a name="294222703"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294222703" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294222703">(Aug 19 2022 at 08:39)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
That was "da", i.e. David Aspinall himself.  And he did not formulate it <br>
that way -- assigning the blame or fault to someone or some of the systems <br>
involved is irrelevant for resolving the issue. The code used here on the <br>
Isabelle side is by David Aspinall himself anyway, going back to his PGIP <br>
experiments with Isabelle around 2005/2006.</p>
<p>I think the deeper probelm is a misunderstanding what the PGIP messages <br>
"askprefs" vs. "setpref" mean, notably the "default" field of "askprefs".</p>
<p>In classic ProofGeneral-3.7.1.1 / XEmacs 21.4, the prover would report <br>
static defaults stemming from "askprefs", and Proof General react with <br>
further "setpref" messages to adapt to the dynamic values on either side, <br>
such that the persistent preferences from Emacs are transferred to the <br>
prover at run time.</p>
<p>In PG 4.0 or so, it would depend on the Emacs version if this worked out <br>
or not.</p>
<p>Now in PG 4.1 with GNU Emacs 23.x it seems that it never works: I see only <br>
the initial askprefs by the prover, without any readjustments by PG. <br>
This means that more basic things like quick-and-dirty also don't work, <br>
i.e. it is off (the usual default of Isabelle), but Proof General displays <br>
it as on, while leaving it de-facto off.</p>
<p>PG 4.2 is about to be released soon, so this is the chance to disentangle <br>
PGIP preference messages.</p>
<p>This discussion should probably continued on the above PG trac thread or <br>
the proofgeneral-devel mailing list, which is dangerously unpopulated in <br>
relation to the number of people who have now publicly confessed that they <br>
are still using Proof General Emacs.</p>
<p>Makarius</p>



<a name="294222721"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294222721" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294222721">(Aug 19 2022 at 08:39)</a>:</h4>
<p>From: René Neumann &lt;<a href="mailto:rene.neumann@in.tum.de">rene.neumann@in.tum.de</a>&gt;<br>
Am 19.09.2012 14:41, schrieb Makarius:</p>
<blockquote>
<p>I think the deeper probelm is a misunderstanding what the PGIP messages<br>
"askprefs" vs. "setpref" mean, notably the "default" field of "askprefs".</p>
<p>In classic ProofGeneral-3.7.1.1 / XEmacs 21.4, the prover would report<br>
static defaults stemming from "askprefs", and Proof General react with<br>
further "setpref" messages to adapt to the dynamic values on either<br>
side, such that the persistent preferences from Emacs are transferred to<br>
the prover at run time.</p>
<p>In PG 4.0 or so, it would depend on the Emacs version if this worked out<br>
or not.</p>
<p>Now in PG 4.1 with GNU Emacs 23.x it seems that it never works: I see<br>
only the initial askprefs by the prover, without any readjustments by<br>
PG. This means that more basic things like quick-and-dirty also don't<br>
work, i.e. it is off (the usual default of Isabelle), but Proof General<br>
displays it as on, while leaving it de-facto off.</p>
</blockquote>
<p>So in essence Isabelle states some setting being defaulted to, but<br>
relies on an explicit message to actually set it to this default? And PG<br>
4.x does not send this message anymore?</p>
<blockquote>
<p>This discussion should probably continued on the above PG trac thread</p>
</blockquote>
<p>So I may paste your message there?</p>
<ul>
<li>René</li>
</ul>



<a name="294222738"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294222738" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294222738">(Aug 19 2022 at 08:39)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I don't know for sure.  This part of PGIP is due to David Aspinall, both <br>
the older and newer behaviour.</p>
<p>Makarius</p>



<a name="294222752"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294222752" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294222752">(Aug 19 2022 at 08:39)</a>:</h4>
<p>From: René Neumann &lt;<a href="mailto:rene.neumann@in.tum.de">rene.neumann@in.tum.de</a>&gt;<br>
Ok - I skimmed the sources in Isabelle. And as far as I see it, the<br>
defaults of boolean preferences are the actual values of the variables.<br>
Hence this should be ok. BUT: Some preferences are set in an<br>
Unsynchronized.setmp block which cancels this assumption.</p>
<p>So probably the easiest solution would be to just cycle through the<br>
preferences on PG-startup and set them explicitly to their default.</p>
<p>This I did in the attached patch and it fixes the issue :). It is<br>
probably saner to actually ensure defaults are set, instead of relying<br>
on the other side to explicitly set them.</p>
<ul>
<li>René</li>
</ul>
<p>P.S.: I'm not sure, whether the call of 'enforce_preference_defaults' is<br>
actually at the right place in the whole startup process. So it probably<br>
needs to be moved around.<br>
<a href="/user_uploads/14278/q63Qc11dCGpDfD187IbzwFj4/isabelle-enforce-defaults.patch">isabelle-enforce-defaults.patch</a></p>



<a name="294222808"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294222808" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294222808">(Aug 19 2022 at 08:40)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Yes, these setmps are the right thing in terms of the classic <br>
interpretation of PGIP askprefs/setpref messages -- whatever that was <br>
exactly.  You still have that classic behaviour in ProofGeneral-3.7.1.1, <br>
which is still the standard version of many Proof General users.</p>
<p>Before changing anything on the Isabelle side, I need an explanation if <br>
PGIP has changed in recent years, or if it is just an accident of the <br>
PG-4.x line.</p>
<p>This is particularly relevant since I am about to revisit the PGIP <br>
preferences implementation soon, to unify it with the standard Isabelle <br>
options/preferences mechanism that will be in the next release. Otherwise <br>
the "fix" will become loose again and just fall off.</p>
<p>Makarius</p>



<a name="294223165"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294223165" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294223165">(Aug 19 2022 at 08:43)</a>:</h4>
<p>From: René Neumann &lt;<a href="mailto:rene.neumann@in.tum.de">rene.neumann@in.tum.de</a>&gt;<br>
Hi,</p>
<p>(some of) the options set for Isabelle in ProofGeneral (like "Auto Solve<br>
Direct", "Auto Quickcheck") are not active, even though they are<br>
enabled. I don't know whether this bug lives in PG or in Isabelle...</p>
<p>Anyways: A normal workaround is to disable and enable these options<br>
again in the menu -- which is cumbersome.</p>
<p>Hence: Find attached an Elisp-function 'isabelle-repair', which does<br>
this toggling for you after Isabelle startup. Perhaps somebody finds<br>
this useful :)</p>
<p>This function can then be called for each parameter that matters for you:</p>
<p>(isabelle-repair "auto solve direct" "tracing")<br>
(isabelle-repair "auto quickcheck" "tracing")</p>
<p>Probably, this could be expanded to repair every option that has the<br>
problem, but I don't know on how to collect them.</p>
<ul>
<li>René<br>
<a href="/user_uploads/14278/7-YIZsfH9eLEvzgd2G1yG4nS/isabelle-repair.el">isabelle-repair.el</a></li>
</ul>



<a name="294223207"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294223207" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294223207">(Aug 19 2022 at 08:43)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
As far as I know this "feature" of Proof General has been always there in <br>
the 4.x line of versions.  You should put this on the regular Proof <br>
General tracker and maybe also raise some attention on the Proof General <br>
proofgeneral-devel mailing list.</p>
<p>I am myself no longer involved in Proof General maintenance since almost 1 <br>
year.  Larry Paulson and Jasmin Blanchette have taken over <br>
responsibilities to organize and motivate continued support for that <br>
classic Isabelle interface.</p>
<p>Right now the few active people on the proofgeneral-devel mailing list <br>
have switched into PG 4.2 release mode, so it is the right time to make <br>
some progress, not just keeping the status quo (where the above issue is a <br>
well-known part of).</p>
<p>Makarius</p>



<a name="294223220"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294223220" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294223220">(Aug 19 2022 at 08:43)</a>:</h4>
<p>From: René Neumann &lt;<a href="mailto:rene.neumann@in.tum.de">rene.neumann@in.tum.de</a>&gt;<br>
Am 05.09.2012 15:42, schrieb Makarius:</p>
<blockquote>
<p>On Wed, 5 Sep 2012, René Neumann wrote:</p>
<blockquote>
<p>(some of) the options set for Isabelle in ProofGeneral (like "Auto<br>
Solve Direct", "Auto Quickcheck") are not active, even though they are<br>
enabled. I don't know whether this bug lives in PG or in Isabelle...</p>
<p>Anyways: A normal workaround is to disable and enable these options<br>
again in the menu -- which is cumbersome.</p>
</blockquote>
<p>I am myself no longer involved in Proof General maintenance since almost<br>
1 year. </p>
</blockquote>
<p>I know this. My mail was just in line of "I coded a workaround; whoever<br>
might need it, can use it".</p>
<blockquote>
<p>Right now the few active people on the proofgeneral-devel mailing list<br>
have switched into PG 4.2 release mode, so it is the right time to make<br>
some progress, not just keeping the status quo (where the above issue is<br>
a well-known part of).</p>
</blockquote>
<p>This is of course reasonable. I'll see what kind of awareness can be raised.</p>
<ul>
<li>René</li>
</ul>



<a name="294223229"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20PG/Isabelle%3A%20Problem%20with%20Auto-Trace%20options%20%28.../near/294223229" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20PG.2FIsabelle.3A.20Problem.20with.20Auto-Trace.20options.20.28.2E.2E.2E.html#294223229">(Aug 19 2022 at 08:43)</a>:</h4>
<p>From: René Neumann &lt;<a href="mailto:rene.neumann@in.tum.de">rene.neumann@in.tum.de</a>&gt;<br>
<a href="http://proofgeneral.inf.ed.ac.uk/trac/ticket/452">http://proofgeneral.inf.ed.ac.uk/trac/ticket/452</a></p>
<ul>
<li>René</li>
</ul>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>