<html>
<head><meta charset="utf-8"><title>[isabelle] Poor man&#x27;s LaTeX markup for Isabelle listings · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Poor.20man.27s.20LaTeX.20markup.20for.20Isabelle.20listings.html">[isabelle] Poor man&#x27;s LaTeX markup for Isabelle listings</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294250853"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Poor%20man%27s%20LaTeX%20markup%20for%20Isabelle%20listings/near/294250853" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Poor.20man.27s.20LaTeX.20markup.20for.20Isabelle.20listings.html#294250853">(Aug 19 2022 at 12:04)</a>:</h4>
<p>From: Christoph LANGE &lt;<a href="mailto:math.semantic.web@gmail.com">math.semantic.web@gmail.com</a>&gt;<br>
Dear Isabelle community,</p>
<p>I frequently need to include Isabelle source code listings in my LaTeX<br>
documents.  However I have not yet figured out how to make Isabelle's<br>
document preparation machinery export LaTeX snippets.  I know it's<br>
possible, but I haven't had the time.  Moreover I often need to deviate<br>
from my verbatim formalisation for didactic purposes.</p>
<p>I'm sure this has been done before, and I'm sure one could realise a<br>
more advanced solution by reusing parts of the *.sty files that come<br>
with Isabelle, but anyway I quickly hacked this LaTeX package together<br>
from scratch, which does part of the job:</p>
<p><a href="https://github.com/clange/latex/blob/master/pmisabelle.sty">https://github.com/clange/latex/blob/master/pmisabelle.sty</a></p>
<p>If you check out <a href="https://github.com/clange/latex">https://github.com/clange/latex</a> you may find a few more<br>
useful LaTeX packages.  In<br>
<a href="https://github.com/clange/latex/blob/master/lstsemantic.sty#L20">https://github.com/clange/latex/blob/master/lstsemantic.sty#L20</a> you will<br>
see that I have also tried this with the "listings" package, but gave up<br>
quite soon, because the result didn't look nice.</p>
<p>Cheers,</p>
<p>Christoph</p>



<a name="294253104"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Poor%20man%27s%20LaTeX%20markup%20for%20Isabelle%20listings/near/294253104" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Poor.20man.27s.20LaTeX.20markup.20for.20Isabelle.20listings.html#294253104">(Aug 19 2022 at 12:19)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I continue to struggle with this machinery myself.</p>
<p>Some people use this system to write entire papers based upon their theory development. But this isn't very practical if your development takes 40 minutes to run, as in a recent one I completed. Instead I use the document preparation system to convert the theory files into .tex files, which I then insert into my document within the brackets \begin{isabelle} … \end{isabelle} or simply \isa{…}.</p>
<p>I pre-process these files using a shell script (attached) in order to replace some of the numerous macros by the character equivalents, in order to make them more compact unreadable.</p>
<p>Larry Paulson<br>
<a href="/user_uploads/14278/gowq8AhXUileuy_fcTC5A7ZH/cleanTeX.pl">cleanTeX.pl</a></p>



<a name="294253186"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Poor%20man%27s%20LaTeX%20markup%20for%20Isabelle%20listings/near/294253186" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Poor.20man.27s.20LaTeX.20markup.20for.20Isabelle.20listings.html#294253186">(Aug 19 2022 at 12:19)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Are saying you need to run the whole development every time you latex your<br>
paper? This is only the case if you want to include literally (some of) the text<br>
of your theories. Which doesn't work very well anyway because you have to stick<br>
to the order in which the material is presented in the theories.</p>
<p>The normal way to write a paper with Isabelle is to build on an image that<br>
contains all the theories, start from that image and use antiquotation to<br>
display material.</p>
<p>If for formatting reasons you absolutely need some fragment of the source text,<br>
the LaTeX sugar document contains a section Theory Snippets describing how to do<br>
that in a selective manner.</p>
<p>Tobias</p>



<a name="294253236"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Poor%20man%27s%20LaTeX%20markup%20for%20Isabelle%20listings/near/294253236" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Poor.20man.27s.20LaTeX.20markup.20for.20Isabelle.20listings.html#294253236">(Aug 19 2022 at 12:20)</a>:</h4>
<p>From: Christoph LANGE &lt;<a href="mailto:math.semantic.web@gmail.com">math.semantic.web@gmail.com</a>&gt;<br>
Thanks, Larry and Tobias, for sharing your experience on including<br>
Isabelle sources in LaTeX.  I see that one has more flexibility in using<br>
the document preparation system than I had thought.</p>
<p>Nevertheless I wonder whether is also offers an easy solution for the<br>
problem that I tried to solve with my pmisabelle.sty, i.e. a solution<br>
that addresses the following requirements:</p>
<p>My papers consist of a lot of LaTeX and a few short Isabelle listings;<br>
therefore:</p>
<ol>
<li>I'd like to write them in my favourite LaTeX editor.</li>
<li>
<p>They sometimes deviate from my actual formalisation for readability<br>
or didactic purposes.</p>
</li>
<li>
<p>It is not absolutely essential that these listings are syntactically<br>
and semantically correct.  "Correct to the eye of a proof-reader" is<br>
good enough; "correct to Isabelle's verification engine" is nice to have<br>
but not essential.</p>
</li>
<li>
<p>Exporting LaTeX snippets from my actual Isabelle sources is merely<br>
nice to have.  I wouldn't mind copy/pasting snippets from my *.thy files<br>
into the LaTeX editor and applying minor adaptations manually or via a<br>
script to make them render as nice LaTeX.</p>
</li>
<li>
<p>I don't want to invest a lot into the formalisation (such as<br>
inserting special markup) to make it "exportable".</p>
</li>
</ol>
<p>pmisabelle.sty satisfies these requirements, except that the adaptations<br>
required in step (4) are a bit more than minor, which is mainly because<br>
I am not experienced with modifying the behaviour of the LaTeX parser<br>
(catcodes etc.).  My approach to use a math align environment requires<br>
me, e.g., to manually escape underscores in identifiers and to make sure<br>
I insert the right amount of &amp; and \\.  The alternative approach to use<br>
listings.sty would require me to explicitly wrap terms into $…$, to<br>
manually pretty-print "…" into ``…'', plus possibly some more work to<br>
get the spacing as right as you could do it in math mode, and it would<br>
not accept Unicode input, which LaTeX allows<br>
(<a href="http://tex.stackexchange.com/questions/110042/entering-unicode-math-symbols-into-latex-direct-from-keyboard-on-a-mac">http://tex.stackexchange.com/questions/110042/entering-unicode-math-symbols-into-latex-direct-from-keyboard-on-a-mac</a><br>
– actually written by Isabelle user John Wickerson :-))</p>
<p>What would you suggest?</p>
<p>Christoph</p>



<a name="294253393"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Poor%20man%27s%20LaTeX%20markup%20for%20Isabelle%20listings/near/294253393" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Poor.20man.27s.20LaTeX.20markup.20for.20Isabelle.20listings.html#294253393">(Aug 19 2022 at 12:20)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
The way I do markup is undoubtedly viewed by some as an abuse of the document preparation system, but I have exactly the same goals as you list below. An example of a paper written in that style can be found here, starting on page 5:</p>
<p><a href="http://www.cl.cam.ac.uk/~lp15/Pages/Gödel-ar.pdf">http://www.cl.cam.ac.uk/~lp15/Pages/Gödel-ar.pdf</a></p>
<p>I didn't understandThe following paragraph, were you wrote about modifying the behaviour of the LaTeX parser. I never do that. Equally there's no need to manually escape anything. The main trick is to let the document preparation system translate your theory files into LaTeX. This is not something you are supposed to do, so the way of doing it seems to change every year or two.</p>
<p>Larry Paulson</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>