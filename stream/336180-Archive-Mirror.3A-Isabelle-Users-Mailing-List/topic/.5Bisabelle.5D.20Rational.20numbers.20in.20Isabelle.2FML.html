<html>
<head><meta charset="utf-8"><title>[isabelle] Rational numbers in Isabelle/ML · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html">[isabelle] Rational numbers in Isabelle/ML</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294671252"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671252" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671252">(Aug 22 2022 at 13:04)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I have nothing against just one high-quality Rat module in Isabelle/ML, <br>
one that takes all previous experience into account and uses the current <br>
possibilities of Poly/ML and Isabelle/ML.</p>
<p>Looking briefly through the sources raises the following questions:</p>
<p>* Is MyRat based on the existing Rat, or an independent development?</p>
<p>* What is the relation of Integer.lcm/gcd, PolyML.IntInf.lcm/gcd versus<br>
     MyRat.gcd? Could it be all based on PolyML.IntInf.lcm/gcd (taking care<br>
     about the proper sign)?  PolyML.IntInf.lcm/gcd might lead to much<br>
     better performance, because it uses GMP operations directly.</p>
<p>* Rat.inv and MyRat.inv look odd to me, but for different reasons.  Are<br>
     these actually correct?</p>
<p>How about a formally specified and verified implementation? It should be <br>
mostly trivial with all the algebraic tools in Isabelle/HOL.</p>
<p>Some of the authors of the existing rat.ML should get involved.</p>
<p>Makarius</p>



<a name="294671345"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671345" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671345">(Aug 22 2022 at 13:04)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
a theorem prover.</p>
<p>It would be great to see a fully verified CakeML compiler + runtime system</p>
<ul>
<li>proof checker, and Isabelle export to that for independent checking.</li>
</ul>
<p>As a start, someone could put the old Isabelle/OpenTheory implementation <br>
by Brian Huffman into shape.</p>
<p>Makarius</p>



<a name="294671364"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671364" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671364">(Aug 22 2022 at 13:04)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
There are two syntax questions here:</p>
<p>* Overloaded +, -, *, / etc. as for the other SML Basis number<br>
     implementations. Poly/ML provides an internal operation for that,<br>
     which happens to be publicly available, at least during Isabelle/Pure<br>
     bootstrap.</p>
<p>* Notation for literals. We have already antiquotations in Isabelle/ML,<br>
     even short forms with control symbols and cartouches. This could be<br>
     probably stretched one step further to introduce the following syntax:</p>
<p>#DIGITS/DIGITS   or   #~DIGITS/DIGITS</p>
<p>As abbreviation for @{rational ...} with the usual meaning of<br>
     antiquotations.  In particular, a "value" antiquotation produces<br>
     results as static values only once at compile-time.</p>
<p>Such advanced ML surface syntax requires a truely advanced implementation <br>
behind it, beyond any doubts about correctness and performance.</p>
<p>Makarius</p>



<a name="294671392"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671392" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671392">(Aug 22 2022 at 13:04)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;</p>
<blockquote>
<p>* Is MyRat based on the existing Rat, or an independent development?<br>
It's independent; I only found out that there was one in Isabelle after <br>
I'd written my own. I didn't think to look in "src/Tools".</p>
</blockquote>
<blockquote>
<p>* What is the relation of Integer.lcm/gcd, PolyML.IntInf.lcm/gcd versus<br>
    MyRat.gcd? Could it be all based on PolyML.IntInf.lcm/gcd (taking <br>
care<br>
    about the proper sign)?  PolyML.IntInf.lcm/gcd might lead to much<br>
    better performance, because it uses GMP operations directly.<br>
Probably. I didn't know Poly/ML already had GMP bindings; in that case, <br>
one could probably use GMP rationals directly, which might increase <br>
performance further. This is probably something that we could suggest to <br>
David Matthews.</p>
</blockquote>
<blockquote>
<p>* Rat.inv and MyRat.inv look odd to me, but for different reasons.  Are<br>
    these actually correct?<br>
There is a ~ missing in MyRat.inv. That code should definitely receive a <br>
thorough review before it goes anywhere. Rat.inv looks fine to me.</p>
</blockquote>
<blockquote>
<p>How about a formally specified and verified implementation? It should <br>
be mostly trivial with all the algebraic tools in Isabelle/HOL.<br>
Well, we have a rational number type in Isabelle/HOL with working code <br>
equations. If I recall correctly, the performance was almost as good as <br>
Haskell's (unverified) rational number implementation. (modulo using the <br>
unverified gcd operation from GMP). However, I would imagine that the <br>
exported could would be quite ugly.</p>
</blockquote>
<p>Manuel</p>



<a name="294671416"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671416" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671416">(Aug 22 2022 at 13:05)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;</p>
<blockquote>
<p>However, I would imagine that the exported could would be quite ugly. <br>
*The exported /code/</p>
</blockquote>
<p>Also, I just remembered another issue that should be taken care of: As <br>
far as I'm aware, there is currently no way to convert HOL rational <br>
numbers to Isabelle/ML rational numbers and the other way round. (like <br>
what I do in MyRat)</p>



<a name="294671444"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671444" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671444">(Aug 22 2022 at 13:05)</a>:</h4>
<p>From: Gerwin Klein &lt;<a href="mailto:Gerwin.Klein@nicta.com.au">Gerwin.Klein@nicta.com.au</a>&gt;</p>
<blockquote>
<p>On 2 Apr 2016, at 10:58 PM, Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt; wrote:</p>
<p>On Sat, 2 Apr 2016, Lawrence Paulson wrote:</p>
<blockquote>
<p>CakeML illustrates the advantages of a formal definition. It is a subset of standard ML with substantially the same semantics. Without a formal semantics, the very idea of a verified compiler is meaningless. Others have also noticed the benefits of using a formally defined language for coding<br>
 a theorem prover.</p>
</blockquote>
<p>It would be great to see a fully verified CakeML compiler + runtime system<br>
+ proof checker, and Isabelle export to that for independent checking.</p>
<p>As a start, someone could put the old Isabelle/OpenTheory implementation by Brian Huffman into shape.</p>
</blockquote>
<p>We (Sydney team, including Ramana and Michael on the HOL4 side) are interested in working on that in the medium term, i.e. in a few months to a year or so.</p>
<p>If anyone else is interested as well, let us know, more than happy to collaborate on it!</p>
<p>Cheers,<br>
Gerwin</p>
<hr>
<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>



<a name="294671465"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671465" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671465">(Aug 22 2022 at 13:05)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
I did not mean to use exported code, but just to make a demo theory with <br>
all the definitions and maybe some simple proofs (e.g. in HOL/ex). The <br>
idea is just to make certain intentions and invariants explicit, notably <br>
the sign of certain parts.</p>
<p>A related question is about sign in lcm/gcd: in structure Integer, <br>
PolyML.IntInf, and the HOL definitions. There is also a connection of <br>
PolyML.IntInf operations with the code generator in AFP Gauss_Jordan and <br>
Echelon_Form.</p>
<p>Makarius</p>



<a name="294671479"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671479" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671479">(Aug 22 2022 at 13:05)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
That should be quite possible, and I expect the proofs to be very easy, <br>
if not completely automatic.</p>
<p>Manuel</p>



<a name="294671772"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671772" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671772">(Aug 22 2022 at 13:06)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
Hallo,</p>
<p>I noticed that there is an ML implementation of rational numbers in the <br>
Isabelle distribution (~~/src/Tools/rat.ML).</p>
<p>There are a few issues with this:<br>
– for some reason, it does not use operator overloading for <br>
addition/multiplication/equality/etc. on rational numbers, but <br>
introduces a "+/", "*/" etc. syntax for it.<br>
– pretty printing displays 1/3 and 1 as "Rat (1, 3)" and "Rat (1, 0)", <br>
respectively instead of "1 / 3" and "1". One could argue that "Rat (1, <br>
3)" is the better choice since that means one can copy-paste output <br>
directly back as ML source again; however, it also makes output more <br>
difficult to read, in my opinion. At the very least, there should be a <br>
function that converts a rational number to such a string.<br>
– there is no functionality for parsing rational numbers at all (at <br>
least I couldn't find something like that)</p>
<p>I have already implemented all of these things in my own little version <br>
of rational numbers (see attachment) and could merge any of them into <br>
the distribution if there is a consensus that that should be done.</p>
<p>Any opinions?</p>
<p>Cheers,</p>
<p>Manuel<br>
<a href="/user_uploads/14278/iScD0nAmHuCKZf3_MWrNrqD3/rat.ML">rat.ML</a></p>



<a name="294671985"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294671985" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294671985">(Aug 22 2022 at 13:07)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Fri, 1 Apr 2016, Manuel Eberl wrote:</p>
<blockquote>
<p>I noticed that there is an ML implementation of rational numbers in the <br>
Isabelle distribution (~~/src/Tools/rat.ML).</p>
</blockquote>
<p>I don't think this is relevant to isabelle-users. Rat is just one of many <br>
auxiliary modules in the implementation. I will nonetheless continue here, <br>
to avoid cross-mailing list confusion wrt. isabelle-dev.</p>
<blockquote>
<p>There are a few issues with this:<br>
– for some reason, it does not use operator overloading for<br>
addition/multiplication/equality/etc. on rational numbers, but introduces a <br>
"+/", "*/" etc. syntax for it.</p>
</blockquote>
<p>This follows Standard ML. Adhoc overloading is not defined by the language <br>
and works differently in each implementation.</p>
<p>Since SML/NJ has been discontinued after Isabelle2016 (see<br>
<a href="http://sketis.net/2016/isabelle-no-longer-supports-smlnj">http://sketis.net/2016/isabelle-no-longer-supports-smlnj</a>) and old versions <br>
of Poly/ML as well, we can in principle become more specific to a <br>
particular Poly/ML version. This means that standard-ness is given up, and <br>
the game becomes more like that of OCaml (or Scala, even Haskell/GHC). I <br>
am myself still unsure if this is good or bad.</p>
<blockquote>
<p>I have already implemented all of these things in my own little version <br>
of rational numbers (see attachment) and could merge any of them into <br>
the distribution if there is a consensus that that should be done.</p>
</blockquote>
<p>There is no need for "consensus" for Isabelle development, but a need for <br>
a critical mass of people (1-3) who understand a certain module or part of <br>
the system.</p>
<p>The Mercurial history is the first place to look:<br>
<a href="http://isabelle.in.tum.de/repos/isabelle/log/471b576aad25/src/Pure/General/rat.ML">http://isabelle.in.tum.de/repos/isabelle/log/471b576aad25/src/Pure/General/rat.ML</a> <br>
<a href="http://isabelle.in.tum.de/repos/isabelle/log/1948d555a55a/src/Tools/rat.ML">http://isabelle.in.tum.de/repos/isabelle/log/1948d555a55a/src/Tools/rat.ML</a></p>
<p>It shows that Florian Haftmann has done the main work in putting and <br>
keeping this in shape.</p>
<p>The history also shows exposes various "fixes" and other amendments. It is <br>
important to check that there is no regression. In half-forgotten Isabelle <br>
jargon, "new" means a failed attempt to do something old in a better way.</p>
<p>Just some formal notes on Isabelle/ML usage:</p>
<p>* Const names etc. should be always used with proper antiquotations;<br>
     lack of that is legacy (unmaintainable).</p>
<p>* <a href="http://Option.map">Option.map</a> is the only canonical operation from that structure,<br>
     everything else should be ignored.</p>
<p>Makarius</p>



<a name="294672236"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294672236" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294672236">(Aug 22 2022 at 13:08)</a>:</h4>
<p>From: Christine Sherif Rizkallah &lt;<a href="mailto:christine2711987@gmail.com">christine2711987@gmail.com</a>&gt;<br>
Thanks for sharing Manuel. I'm sure I can benefit from the pretty printing.</p>



<a name="294672483"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294672483" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294672483">(Aug 22 2022 at 13:10)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;</p>
<blockquote>
<p>I don't think this is relevant to isabelle-users. Rat is just one of <br>
many auxiliary modules in the implementation.<br>
I have one entry in the AFP already that uses rational numbers in ML, <br>
and another AFP submission is in preparation. I think this is definitely <br>
relevant to some Isabelle users (e.g. for automatically providing <br>
witnesses for certain things; in my case, solutions to linear programs <br>
and adequate interval splittings for Sturm's method).</p>
</blockquote>
<blockquote>
<p>This follows Standard ML. Adhoc overloading is not defined by the <br>
language and works differently in each implementation. […] we can in <br>
principle become more specific to a particular Poly/ML version. […]<br>
I don't really have any opinion on this. Uniform notation for addition <br>
etc. is nice to have, but I cannot say whether it is worth it. This is <br>
one of the reasons why I wrote that email, to collect some more opinions <br>
on the issue.</p>
</blockquote>
<blockquote>
<p>* <a href="http://Option.map">Option.map</a> is the only canonical operation from that structure, <br>
everything else should be ignored.<br>
All right, then what is the canonical way to do things like that? Nested <br>
case statements? Those can get very ugly and unreadable very fast.</p>
</blockquote>
<p>Cheers,</p>
<p>Manuel</p>



<a name="294672676"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294672676" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294672676">(Aug 22 2022 at 13:11)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
There is nothing wrong with case expressions. Isabelle/ML is not as <br>
point-free as Haskell.</p>
<p>See also the "implementation" manual about "Options":</p>
<p>Apart from @{ML Option.map} most other operations defined in structure<br>
   @{ML_structure Option} are alien to Isabelle/ML and never used. The<br>
   operations shown above are defined in @{file<br>
   "~~/src/Pure/General/basics.ML"}.</p>
<p>Here is a general note from the manual about the basis library from NJ:</p>
<p>The basis library proposal of SML97 needs to be treated with caution.<br>
   Many of its operations simply do not fit with important Isabelle/ML<br>
   conventions (like ``canonical argument order'', see<br>
   \secref{sec:canonical-argument-order}), others cause problems with the<br>
   parallel evaluation model of Isabelle/ML (such as @{ML TextIO.print} or<br>
   @{ML OS.Process.system}).</p>
<p>Makarius</p>



<a name="294672907"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294672907" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294672907">(Aug 22 2022 at 13:12)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
It would be certainly nice to have +, -, *, / on type rat.</p>
<p>Looking at the Poly/ML sources, its internal addOverload operation has a <br>
comment as follows:</p>
<p>(* This goes in RunCall since it's only for the basis library. *)</p>
<p>In Isabelle/bb29cc00c31f I have already removed that critical bootstrap <br>
structure from the ML environment: it contains other things that may <br>
disrupt the ML system in a bad way (similar to Obj.magic in OCaml).</p>
<p>So if the overloaded syntax should be used, it needs to be part of the <br>
Isabelle/Pure bootstrap environment. In that case one could also invent <br>
separate notation for rat literals and make that an integral part of <br>
Isabelle/ML.</p>
<p>Isabelle/ML is an "embrace and extend" version of Standard ML -- what SML <br>
could have been if it had not been hindered by SML/NJ. Nonetheless, adding <br>
new things to Isabelle/ML requires some care.</p>
<p>Makarius</p>



<a name="294673114"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Rational%20numbers%20in%20Isabelle/ML/near/294673114" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Rational.20numbers.20in.20Isabelle.2FML.html#294673114">(Aug 22 2022 at 13:13)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I would say bad, and we should try to limit our deviations from Standard ML to what is essential. If there ever is further evolution of Standard ML, we should try to bring our own ideas into it.</p>
<p>CakeML illustrates the advantages of a formal definition. It is a subset of standard ML with substantially the same semantics. Without a formal semantics, the very idea of a verified compiler is meaningless. Others have also noticed the benefits of using a formally defined language for coding<br>
 a theorem prover. We have been forced to stretch things a bit, due to the lack of other competitive implementations, but we must hope that this situation doesn't last forever.</p>
<p>Larry Paulson</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>