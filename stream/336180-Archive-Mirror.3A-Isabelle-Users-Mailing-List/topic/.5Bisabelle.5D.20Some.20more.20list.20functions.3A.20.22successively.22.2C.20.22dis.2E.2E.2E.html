<html>
<head><meta charset="utf-8"><title>[isabelle] Some more list functions: &quot;successively&quot;, &quot;dis... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html">[isabelle] Some more list functions: &quot;successively&quot;, &quot;dis...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294826111"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294826111" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294826111">(Aug 23 2022 at 08:48)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Dear Jeremy,</p>
<p>I have added Manuel's function "successively" to the development version of the <br>
Isabelle distribution. If you feel bored (some people do these days) you could <br>
update your AFP entry to use "successively" instead of your "binrealchain".</p>
<p>Tobias<br>
<a href="/user_uploads/14278/8qHM2t5Etuho8SBz0Y8IhgiI/smime.p7s">smime.p7s</a></p>



<a name="294826152"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294826152" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294826152">(Aug 23 2022 at 08:48)</a>:</h4>
<p>From: Jasmin Blanchette via Cl-isabelle-users &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Dear list,</p>
<p>Tobias wrote:</p>
<blockquote>
<p>I have added Manuel's function "successively" to the development version of the Isabelle distribution. If you feel bored (some people do these days) you could update your AFP entry to use "successively" instead of your "binrealchain".</p>
</blockquote>
<p>For the record, there's also "chain" in "$AFP/thys/Ordered_Resolution_Prover/Lazy_List_Chain.thy". There's no nil case though, and they're over lazy lists.</p>
<p>For us having no nil case was the natural thing: our processes always have a start state. I'd argue it's a better default in general. Chains are basically fences with n segments and n segment and n + 1 posts. The base case is naturally 0 segments and 1 post. The 0 segment, 0 post case is a weird case, just like 0 - 1 = 0 on natural numbers.</p>
<p>Jasmin</p>



<a name="294826155"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294826155" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294826155">(Aug 23 2022 at 08:48)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Jasmin,</p>
<p>I view "successively" differently: it expresses a property of adjacent elements <br>
of a list. In fact, I now wonder if this would have been a better starting point:</p>
<p>neighbors :: 'a list =&gt; ('a * 'a) set</p>
<p>Just like we have learned to use the "set" function to express properties of all <br>
elements of a list.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/FZsccWZtW1J9-T9XEAznAWsD/smime.p7s">smime.p7s</a></p>



<a name="294826175"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294826175" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294826175">(Aug 23 2022 at 08:49)</a>:</h4>
<p>From: Thomas Sewell &lt;<a href="mailto:sewell@chalmers.se">sewell@chalmers.se</a>&gt;<br>
For what it's worth, I'd found it useful to define the transitive counterpart of</p>
<p>neighbours in another project, and show that sortedness, distinctness etc</p>
<p>can be defined in terms of that.</p>
<p>Cheers,</p>
<p>Thomas.</p>



<a name="294826184"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294826184" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294826184">(Aug 23 2022 at 08:49)</a>:</h4>
<p>From: Jasmin Blanchette via Cl-isabelle-users &lt;<a href="mailto:cl-isabelle-users@lists.cam.ac.uk">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>
Tobias wrote:</p>
<p>Good points. Rethinking about it, there are definitely cases where my fence analogy doesn't hold; e.g. it's convenient for syntaxes like k_1 + ... + k_n to be defined as 0 if n = 0, and why not for chains as well. I guess my application was a bit special and not necessarily typical of what one would want as the default; just like lists by default support [] even though some applications don't want empty lists.</p>
<p>Jasmin</p>



<a name="294827428"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294827428" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294827428">(Aug 23 2022 at 08:58)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
I recently came across a few list functions that might be of general<br>
interest and I was wondering whether we should add them to HOL/List or<br>
HOL-Library:</p>
<p>"successively R xs" holds iff the relation "R" holds for each pair of<br>
successive elements in the list "xs":</p>
<p>inductive successively :: "('a ⇒ 'a ⇒ bool) ⇒ 'a list ⇒ bool" for P where<br>
  "successively P []"<br>
| "successively P [x]"<br>
| "P x y ⟹ successively P (y # xs) ⟹ successively P (x # y # xs)"</p>
<p>Another possible name would be something like "chain" or "chain_rel".</p>
<p>In analogy to "remdups"/""distinct_adj", one can define</p>
<p>definition distinct_adj where<br>
  "distinct_adj = successively (≠)"</p>
<p>Lastly, and probably of less general interest, I have functions "rle"<br>
and "unrle" that perform run-length encoding and -decoding (and build on<br>
"distinct_adj"). Perhaps this is one for HOL-Library? It's a bit small<br>
for the AFP.</p>
<p>Notably, "remdups_adj = map fst ∘ rle", and unlike "remdups_adj", rle is<br>
easily invertible and fulfils some nice properties, which makes proving<br>
things about it much easier. For instance, contrast the somewhat awkward<br>
characterisation "remdups_adj_altdef" that we currently have in HOL/List<br>
with the following more concise one:</p>
<p>lemma remdups_adj_eq_iff:<br>
  "(remdups_adj xs = ys) ⟷<br>
      distinct_adj ys ∧<br>
      (∃ns. length ns = length ys ∧<br>
            0 ∉ set ns ∧<br>
            unrle (zip ys ns) = xs)"</p>
<p>In total, I have the following amount of material on each of these:</p>
<p>successively: 90 lines<br>
distinct_adj: 50 lines<br>
RLE: 200 lines</p>
<p>Cheers,</p>
<p>Manuel</p>



<a name="294827439"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294827439" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294827439">(Aug 23 2022 at 08:58)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
On 20/04/2020 13:57, Manuel Eberl wrote:</p>
<blockquote>
<p>I recently came across a few list functions that might be of general<br>
interest and I was wondering whether we should add them to HOL/List or<br>
HOL-Library:</p>
<p>"successively R xs" holds iff the relation "R" holds for each pair of<br>
successive elements in the list "xs":</p>
<p>inductive successively :: "('a ⇒ 'a ⇒ bool) ⇒ 'a list ⇒ bool" for P where<br>
   "successively P []"<br>
| "successively P [x]"<br>
| "P x y ⟹ successively P (y # xs) ⟹ successively P (x # y # xs)"</p>
<p>Another possible name would be something like "chain" or "chain_rel".</p>
</blockquote>
<p>See List:</p>
<p>fun sorted_wrt :: "('a ⇒ 'a ⇒ bool) ⇒ 'a list ⇒ bool" where<br>
"sorted_wrt P [] = True" |<br>
"sorted_wrt P (x # ys) = ((∀y ∈ set ys. P x y) ∧ sorted_wrt P ys)"</p>
<blockquote>
<p>In analogy to "remdups"/""distinct_adj", one can define</p>
<p>definition distinct_adj where<br>
   "distinct_adj = successively (≠)"<br>
</p>
</blockquote>
<p>I am happy to add that to List.</p>
<blockquote>
<p>Lastly, and probably of less general interest, I have functions "rle"<br>
and "unrle" that perform run-length encoding and -decoding (and build on<br>
"distinct_adj"). Perhaps this is one for HOL-Library? It's a bit small<br>
for the AFP.</p>
</blockquote>
<p>Yes, HOL-Library.</p>
<p>Tobias</p>
<blockquote>
<p>Notably, "remdups_adj = map fst ∘ rle", and unlike "remdups_adj", rle is<br>
easily invertible and fulfils some nice properties, which makes proving<br>
things about it much easier. For instance, contrast the somewhat awkward<br>
characterisation "remdups_adj_altdef" that we currently have in HOL/List<br>
with the following more concise one:</p>
<p>lemma remdups_adj_eq_iff:<br>
   "(remdups_adj xs = ys) ⟷<br>
       distinct_adj ys ∧<br>
       (∃ns. length ns = length ys ∧<br>
             0 ∉ set ns ∧<br>
             unrle (zip ys ns) = xs)"</p>
<p>In total, I have the following amount of material on each of these:</p>
<p>successively: 90 lines<br>
distinct_adj: 50 lines<br>
RLE: 200 lines</p>
<p>Cheers,</p>
<p>Manuel</p>
<p><a href="/user_uploads/14278/K5uoJxvfIUQ3vyk9YhoDC5jc/smime.p7s">smime.p7s</a></p>
</blockquote>



<a name="294827449"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294827449" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294827449">(Aug 23 2022 at 08:59)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;</p>
<blockquote>
<p>See List:</p>
<p>fun sorted_wrt :: "('a ⇒ 'a ⇒ bool) ⇒ 'a list ⇒ bool" where<br>
"sorted_wrt P [] = True" |<br>
"sorted_wrt P (x # ys) = ((∀y ∈ set ys. P x y) ∧ sorted_wrt P ys)"</p>
</blockquote>
<p>That is not the same!</p>
<p>The two only coincide if the given relation is transitive. In<br>
particular, "sorted_wrt (≠)" is equivalent to "distinct", whereas<br>
"successively (≠)" is equivalent to "distinct_adj".</p>
<blockquote>
<p>I am happy to add that to List.</p>
</blockquote>
<p>I'll send the files to you then. Or I can merge it myself. Whichever you<br>
prefer.</p>
<p>Manuel</p>



<a name="294827470"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294827470" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294827470">(Aug 23 2022 at 08:59)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
On 20/04/2020 17:45, Manuel Eberl wrote:</p>
<blockquote>
<blockquote>
<p>See List:</p>
<p>fun sorted_wrt :: "('a ⇒ 'a ⇒ bool) ⇒ 'a list ⇒ bool" where<br>
"sorted_wrt P [] = True" |<br>
"sorted_wrt P (x # ys) = ((∀y ∈ set ys. P x y) ∧ sorted_wrt P ys)"</p>
</blockquote>
<p>That is not the same!</p>
</blockquote>
<p>Indeed they are not. So far we always seem to have gotten away with this one. <br>
(Although I recall Christian Sternagel also used the non-transitive version for <br>
some sorting proofs) Your distinct_adj is a good example where the other one is <br>
useful. I would call it something like "chain_list" because there is already a <br>
"chain" on sets. Possibly "chainp_list" in analogy with "chain"/"chainp".</p>
<blockquote>
<p>The two only coincide if the given relation is transitive. In<br>
particular, "sorted_wrt (≠)" is equivalent to "distinct", whereas<br>
"successively (≠)" is equivalent to "distinct_adj".</p>
<blockquote>
<p>I am happy to add that to List.</p>
</blockquote>
<p>I'll send the files to you then. Or I can merge it myself. Whichever you<br>
prefer.</p>
</blockquote>
<p>Please send me the files.</p>
<p>Tobias</p>
<blockquote>
<p>Manuel</p>
<p><a href="/user_uploads/14278/XaoI3AbjA7zewM9uHtyLDt4z/smime.p7s">smime.p7s</a></p>
</blockquote>



<a name="294827482"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Some%20more%20list%20functions%3A%20%22successively%22%2C%20%22dis.../near/294827482" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Some.20more.20list.20functions.3A.20.22successively.22.2C.20.22dis.2E.2E.2E.html#294827482">(Aug 23 2022 at 08:59)</a>:</h4>
<p>From: Jeremy Sylvestre &lt;<a href="mailto:jsylvest@ualberta.ca">jsylvest@ualberta.ca</a>&gt;<br>
I have something similar in one of my AFP submissions. See</p>
<p>subsubsection ‹Binary relation chains›</p>
<p>at</p>
<p><a href="https://www.isa-afp.org/browser_info/current/AFP/Buildings/Prelim.html">https://www.isa-afp.org/browser_info/current/AFP/Buildings/Prelim.html</a></p>
<p>Cheers,<br>
Jeremy S.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>