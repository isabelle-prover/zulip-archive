<html>
<head><meta charset="utf-8"><title>[isabelle] Syntax for Min/Max, or the notation for images · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html">[isabelle] Syntax for Min/Max, or the notation for images</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294727482"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727482" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727482">(Aug 22 2022 at 16:47)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I've noticed that Isabelle/HOL has no syntax for the minimum/maximum of a finite set. Or rather, while one can write Max {a i| i. i ∈ I}, such a set comprehension can translate into a complicated formula involving existential quantifiers, with the reasoning similarly complicated. Or one could instead use the image operator and write Max (a ` I).</p>
<p>In fact (a ` I) = {a i| i. i ∈ I}, and a more general form of this result exists as the lemma setcompr_eq_image.</p>
<p>Arguably what's needed here isn't special syntax for Min/Max but rather an alternative syntax for image, e.g. {a i. i ∈ I}. Are there any views?</p>
<p>Larry Paulson</p>



<a name="294727495"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727495" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727495">(Aug 22 2022 at 16:47)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
On Fr, 2018-02-16 at 16:14 +0000, Lawrence Paulson wrote:</p>
<blockquote>
<p>I've noticed that Isabelle/HOL has no syntax for the minimum/maximum<br>
of a finite set. Or rather, while one can write Max {a i| i. i ∈ I},<br>
such a set comprehension can translate into a complicated formula<br>
involving existential quantifiers, with the reasoning similarly<br>
complicated. Or one could instead use the image operator and write<br>
Max (a ` I).</p>
<p>In fact (a ` I) = {a i| i. i ∈ I}, and a more general form of this<br>
result exists as the lemma setcompr_eq_image.</p>
<p>Arguably what's needed here isn't special syntax for Min/Max but<br>
rather an alternative syntax for image, e.g. {a i. i ∈ I}. Are there<br>
any views?</p>
</blockquote>
<p>Why not use the existing Syntax for INF/SUP ?</p>
<p>term "SUP x:X. f x"</p>
<p>i.e. one could declare syntax: <br>
  MAX i:I. a i</p>
<p>-- Peter</p>
<blockquote>
<p>Larry Paulson</p>
</blockquote>



<a name="294727655"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727655" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727655">(Aug 22 2022 at 16:48)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
I agree with Peter because the SUP syntax ultimately stands for "a ` I", which <br>
is what you want (because it avoids the quantifier). It is a very natural syntax <br>
and avoids inventing a new syntax for image.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/odWA-1s9uJMeQcXnzN-wUgkH/smime.p7s">smime.p7s</a></p>



<a name="294727674"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727674" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727674">(Aug 22 2022 at 16:48)</a>:</h4>
<p>From: Joachim Breitner &lt;<a href="mailto:joachim@cis.upenn.edu">joachim@cis.upenn.edu</a>&gt;<br>
Hi,</p>
<p>I have, in the past, missed a concise quantifier-free syntax for set<br>
image, and would have wanted (expected, even?) something like</p>
<p>{a i. i ∈ I}</p>
<p>Cheers,<br>
Joachim<br>
<a href="/user_uploads/14278/Cb319O7D7ggSQcG85z80cQuj/signature.asc">signature.asc</a></p>



<a name="294727698"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727698" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727698">(Aug 22 2022 at 16:48)</a>:</h4>
<p>From: Julian &lt;<a href="mailto:parsert.julian@gmail.com">parsert.julian@gmail.com</a>&gt;<br>
Hi,</p>
<p>do you mean the same as {a i |i. i ∈ I}?</p>
<p>Julian</p>



<a name="294727710"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727710" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727710">(Aug 22 2022 at 16:48)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
This is logically equivalent to the image operator, but denotes something like {x. ∃i∈I. x = a i}, while “image” is a single constant.</p>
<p>The advantage of introducing something like {a i. i ∈ I} is that we would have a uniform syntax for all future situations. E.g. the current (⋃x∈A. B x) could also be written ⋃{B x. x∈A}. </p>
<p>Larry</p>



<a name="294727727"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727727" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727727">(Aug 22 2022 at 16:49)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:mail@andreas-lochbihler.de">mail@andreas-lochbihler.de</a>&gt;<br>
The map operation on multisets, image_mset, already uses the proposed syntax:</p>
<p>{# a i. i :# M #} = image_mset (%i. a i) M</p>
<p>So extending this syntax to ordinary sets would be just more uniform syntax. But how does <br>
it interoperate with ordinary set comprehension? How do we want to distinguish the <br>
following two cases:</p>
<p>{ i. i : M } = Collect (%i. i : M)</p>
<p>vs.</p>
<p>{ i. i : M } = image (%i. i) M</p>
<p>Andreas</p>



<a name="294727739"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727739" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727739">(Aug 22 2022 at 16:49)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:unruh@ut.ee">unruh@ut.ee</a>&gt;<br>
I wonder why there is an existential quantifier in the translation of the<br>
set comprehension in the first place.<br>
If {a i | i. M} would translate to "image a (Collect M)", the awkward<br>
existential quantifier would be gone (I suppose that the simplifier can<br>
deal much more easily with "image a" than with the existential quantifier.)<br>
For example, {a i |i. i ∈ I} would translate to "image a (Collect (%x.<br>
x:I))" which the simplifier can easily rewrite to "image a I".</p>
<p>Of course, I also understand that changing this might introduce too many<br>
breaking changes in proofs.</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="294727757"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727757" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727757">(Aug 22 2022 at 16:49)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Using a standard set-comprehension syntax for image is plain misleading and will <br>
create more confusion (even if we manage to resolve the ambiguity that Andreas <br>
pointed out).</p>
<p>Tobias<br>
<a href="/user_uploads/14278/IMJAbO-CSfzbO599X4O64Dr4/smime.p7s">smime.p7s</a></p>



<a name="294727856"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727856" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727856">(Aug 22 2022 at 16:49)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
Well, a strong argument against any fancy syntax for image is that it would be input-only. Image is just an ordinary infix operator and the user would see something like a`i instead of {a i. i ∈ I}.</p>
<p>Users (especially beginners) should be aware that a general comprehension could give rise to a large formula. I frequently write expressions using nested unions instead. I don't know whether it really simplifies reasoning steps, but I find it clearer.</p>
<p>Larry<br>
<a href="/user_uploads/14278/kLlL5hSEjC_fV61L82s_lonI/signature.asc">signature.asc</a></p>



<a name="294727972"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727972" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727972">(Aug 22 2022 at 16:50)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
I can never make up my mind.<br>
Code generation needs Unions, but that is orthogonal.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/6_qcnNQ7w0G44j3PKQ3Weqc-/smime.p7s">smime.p7s</a></p>



<a name="294727992"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294727992" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294727992">(Aug 22 2022 at 16:50)</a>:</h4>
<p>From: Johannes Hölzl &lt;<a href="mailto:johannes.hoelzl@gmx.de">johannes.hoelzl@gmx.de</a>&gt;<br>
Another option is to intruduce the applicative &lt;*&gt;</p>
<p>(&lt;*&gt;) :: ('a =&gt; 'b) set =&gt; 'a set =&gt; 'b set</p>
<p>F &lt;*&gt; A = { f a | f a. f : F &amp; a : A}</p>
<p>This allows some nice point-free style:</p>
<p>{(+)} &lt;<em>&gt; A &lt;</em>&gt; B   (or (+) ` A &lt;*&gt; B)</p>
<p>But still gives nice rules, especially for finiteness, countability:</p>
<p>finite A ==&gt; finite F ==&gt; finite (F &lt;*&gt; A)</p>
<p>And it should work well with code generation.</p>
<p>A counter point is that it is a very CS style notation and uncommon in<br>
mathematics.</p>
<ul>
<li>Johannes</li>
</ul>



<a name="294730425"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294730425" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294730425">(Aug 22 2022 at 17:03)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I am returning to this old question, and thinking of doing as you suggest. But why does the HOL development (at the end of theory Main) hide part of this syntax?</p>
<p>no_syntax<br>
  "_INF1"     :: "pttrns ⇒ 'b ⇒ 'b"           ("(3⨅_./ _)" [0, 10] 10)<br>
  "_INF"      :: "pttrn ⇒ 'a set ⇒ 'b ⇒ 'b"  ("(3⨅_∈_./ _)" [0, 0, 10] 10)<br>
  "_SUP1"     :: "pttrns ⇒ 'b ⇒ 'b"           ("(3⨆_./ _)" [0, 10] 10)<br>
  "_SUP"      :: "pttrn ⇒ 'a set ⇒ 'b ⇒ 'b"  ("(3⨆_∈_./ _)" [0, 0, 10] 10)</p>
<p>Larry</p>



<a name="294730447"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Syntax%20for%20Min/Max%2C%20or%20the%20notation%20for%20images/near/294730447" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Syntax.20for.20Min.2FMax.2C.20or.20the.20notation.20for.20images.html#294730447">(Aug 22 2022 at 17:03)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Dear Larry,</p>
<p>the lattice syntax is not a default part of HOL-Main, hence it is<br>
manually reverted here and can included on demand importing theory<br>
Library/Lattice_Syntax.thy.</p>
<p>The reason is that there has always been some reluctance to fix that<br>
syntax with its extremely diverse applications to one particular set of<br>
operations.</p>
<p>I one thought to use syntax in bundles to make this more convenient, nut<br>
there are obstacles:</p>
<ul>
<li>
<p>Lattice operations are introduced incrementally, but bundles are not<br>
extensible; maybe that could be lifted by defining all syntactic<br>
operations first, then defining the syntax bundle and then deriving the<br>
lemmas.</p>
</li>
<li>
<p>There is no way yet to include bundled syntax in text of global theory<br>
level commands like "class".</p>
</li>
</ul>
<p>Hope this helps,<br>
    Florian<br>
<a href="/user_uploads/14278/gpJcGRFHxbDVqF65KAJgXpGW/signature.asc">signature.asc</a></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>