<html>
<head><meta charset="utf-8"><title>[isabelle] THY path · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html">[isabelle] THY path</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294115395"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294115395" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294115395">(Aug 18 2022 at 15:55)</a>:</h4>
<p>From: Joachim Breitner &lt;<a href="mailto:mail@joachim-breitner.de">mail@joachim-breitner.de</a>&gt;<br>
Hi,</p>
<p>I just tried this and it worked, but only after I made sure I start i3p<br>
within the directory of the .thy. It seems that ".." is relative to the<br>
current working directory, not to the currently processed theory. Is<br>
that intentional?</p>
<p>Greetings,<br>
Joachim<br>
<a href="/user_uploads/14278/BP0ROzsP-Y1kEn6WZuTlpbKl/signature.asc">signature.asc</a></p>



<a name="294117902"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294117902" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294117902">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:christian.sternagel@uibk.ac.at">christian.sternagel@uibk.ac.at</a>&gt;<br>
Hi!</p>
<p>is there a way of telling Isabelle where to search for THY files? From <br>
the error message in PG-Emacs when trying to load a non-existing THY <br>
file, I get that the standard search is "." and <br>
"$ISABELLE_HOME/src/HOL/Library". I would like to extend this list.</p>
<p>The reason is that we have 3 entries in the AFP which our development is <br>
based on (currently we have local copies of the corresponding THY <br>
files). To me, it would seem as an overkill, if I had to incrementally <br>
construct heap images for<br>
1) HOL-First-Entry<br>
2) HOL-First-and-Second-Entry<br>
3) HOL-First-and-Second-and-Third-Entry<br>
and then use 'HOL-First-and-Second-and-Third-Entry instead' of 'HOL'.</p>
<p>What do you think? How do other users that base their work on AFP <br>
entries, handle such situations? Andreas? ;)</p>
<p>cheers</p>
<p>chris</p>



<a name="294117910"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294117910" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294117910">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
You can refer to theories in other AFP entries simply by writing</p>
<p>imports "../other-article-name/theory-name"</p>
<p>This is the standard way of doing it.</p>
<p>Tobias</p>
<p>Christian Sternagel schrieb:</p>



<a name="294117936"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294117936" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294117936">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:brianh@cs.pdx.edu">brianh@cs.pdx.edu</a>&gt;<br>
On Thu, Sep 16, 2010 at 5:45 AM, Christian Sternagel<br>
&lt;<a href="mailto:christian.sternagel@uibk.ac.at">christian.sternagel@uibk.ac.at</a>&gt; wrote:</p>
<blockquote>
<p>Hi!</p>
<p>is there a way of telling Isabelle where to search for THY files? From the<br>
error message in PG-Emacs when trying to load a non-existing THY file, I get<br>
that the standard search is "." and "$ISABELLE_HOME/src/HOL/Library". I<br>
would like to extend this list.</p>
</blockquote>
<p>In src/HOL/Plain.thy, you'll find the following line:</p>
<p>ML {* path_add "~~/src/HOL/Library" *}</p>
<p>You can add similar lines to your own theory files if you want to add<br>
other directories to the search path. This one uses "~~" and so is<br>
relative to $ISABELLE, but I think absolute paths should also work.</p>
<blockquote>
<p>The reason is that we have 3 entries in the AFP which our development is<br>
based on (currently we have local copies of the corresponding THY files). To<br>
me, it would seem as an overkill, if I had to incrementally construct heap<br>
images for<br>
1) HOL-First-Entry<br>
2) HOL-First-and-Second-Entry<br>
3) HOL-First-and-Second-and-Third-Entry<br>
and then use 'HOL-First-and-Second-and-Third-Entry instead' of 'HOL'.</p>
</blockquote>
<p>It is a real shame that building custom heap images is so difficult. I<br>
agree that having to build N heap images in sequence just to use N<br>
different libraries at once is overkill. A nicer solution would be to<br>
have a tool where you could say "give me a heap image with libraries<br>
X, Y, and Z" and it would compile one for you in one step.<br>
Unfortunately, the current Isabelle tools are based on an assumption<br>
of one-heap-image-per-directory; we really need to move away from<br>
that.</p>
<blockquote>
<p>What do you think? How do other users that base their work on AFP entries,<br>
handle such situations? Andreas? ;)</p>
<p>cheers</p>
<p>chris</p>
</blockquote>
<p>Question from Isabelle newbie: "This AFP library looks interesting;<br>
how do I install it?" My shameful response is that by far the easiest<br>
way to use an AFP library is to copy all the files into a directory<br>
with all your own theory files. I know that this doesn't scale well if<br>
you want to use more than one AFP library at once. You could use<br>
separate directories and relative paths as Tobias suggests, but as<br>
long as we have a flat theory namespace this doesn't really scale<br>
either. (Question for the AFP maintainers: With about 80 AFP entries<br>
now, do they all use distinct theory names? Is this something that you<br>
should be worried about?)</p>
<p>Being able to download and use other people's Isabelle libraries (AFP<br>
entries in particular) is very important, in my opinion, and the<br>
current situation is unacceptable. I think that having a proper way to<br>
"install" third-party Isabelle libraries would bring significant<br>
benefits to our research community, making it much easier for people<br>
to collaborate and build upon each other's work.</p>
<p>I really hope that most of the developers will continue to think about<br>
how we can do this better.</p>
<p>Thanks, Chris, for bringing this issue to everyone's attention.</p>
<ul>
<li>Brian</li>
</ul>



<a name="294117959"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294117959" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294117959">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@kit.edu">andreas.lochbihler@kit.edu</a>&gt;<br>
Hi Chris,</p>
<p>JinjaThreads, which I am working on, also builds on three other AFP entries (Coinductive, FinFun and Jinja/DFA) and HOL-Word. The JinjaThreads theories in the AFP use the import system with relative paths explained by Tobias and use the HOL-Word heap.<br>
Gerwin suggested to me that I do not build incremental heaps (HOL, HOL-Word, HOL-Word-Coinductive, HOL-Word-Coinductive-FinFun, ...), but rather pick one of them (HOL-Word) as the basis and load the other's theories on demand. This way, while building JinjaThreads, Isabelle loads also the other AFP entries again.</p>
<p>For my everyday development on JinjaThreads I have given up on building images of the other AFP entries and working with them because I update my Isabelle version to the latest repository snapshot every two or three days. So, I would have to rebuild these heap images each time then. Instead, I have organised my local directory structure to match the AFP's. To get to work quickly, I simply load these base theories with the "skip proof" option enabled, which is fairly fast.</p>
<p>Andreas</p>



<a name="294117985"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294117985" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294117985">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:christian.sternagel@uibk.ac.at">christian.sternagel@uibk.ac.at</a>&gt;<br>
Hi,</p>
<p>thnx for the many answers!</p>
<p>@Tobias: between the AFP entries themselves I do exactly what you <br>
recommended.</p>
<p>However, the whole setup is more like Andreas described: n AFP entries <br>
(currently 3, but I hope there are more to come) which we want to use in <br>
our local development.</p>
<p>I do not particularly like the solution with adapting my local directory <br>
structure. My current try is to have a local AFP.ML (see attachment) <br>
adding the paths (to the local copy of the AFP hg-repo) and loading the <br>
desired theories and then building a heap file</p>
<p>isabelle usedir -b -f AFP.ML HOL HOL-AFP</p>
<p>to work on. This almost works (and in our case the AFP entries are not <br>
very big, hence creating the heap file is fast), only that there are <br>
some THY files in AFP entries that have the same name as local THY <br>
files... and this breaks everything. In the current situation it will be <br>
easy to replace one file by a differently named one, but in general I <br>
totally agree with Brian that the flat name space is... how to say... <br>
not excessively nice.</p>
<p>cheers</p>
<p>chris</p>
<p>On 09/17/2010 08:28 AM, Andreas Lochbihler wrote:</p>
<blockquote>
<p>Hi Chris,</p>
<blockquote>
<p>The reason is that we have 3 entries in the AFP which our development is based on (currently we have local copies of the corresponding THY files). To me, it would seem as an overkill, if I had to incrementally construct heap images for<br>
1) HOL-First-Entry<br>
2) HOL-First-and-Second-Entry<br>
3) HOL-First-and-Second-and-Third-Entry<br>
and then use 'HOL-First-and-Second-and-Third-Entry instead' of 'HOL'.</p>
<p>What do you think? How do other users that base their work on AFP entries, handle such situations? Andreas? ;)<br>
JinjaThreads, which I am working on, also builds on three other AFP entries (Coinductive, FinFun and Jinja/DFA) and HOL-Word. The JinjaThreads theories in the AFP use the import system with relative paths explained by Tobias and use the HOL-Word heap.<br>
Gerwin suggested to me that I do not build incremental heaps (HOL, HOL-Word, HOL-Word-Coinductive, HOL-Word-Coinductive-FinFun, ...), but rather pick one of them (HOL-Word) as the basis and load the other's theories on demand. This way, while building JinjaThreads, Isabelle loads also the other AFP entries again.</p>
</blockquote>
<p>For my everyday development on JinjaThreads I have given up on building images of the other AFP entries and working with them because I update my Isabelle version to the latest repository snapshot every two or three days. So, I would have to rebuild these heap images each time then. Instead, I have organised my local directory structure to match the AFP's. To get to work quickly, I simply load these base theories with the<br>
"skip proof" option enabled, which is fairly fast.<br>
well ^that sounds interesting... &lt;whispering&gt;how do I activate <br>
it?&lt;/whispering&gt;</p>
<p>Andreas<br>
<a href="/user_uploads/14278/ejWwGDdp2ZzGzPzmFF4CSNot/AFP.ML">AFP.ML</a></p>
</blockquote>



<a name="294118003"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294118003" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294118003">(Aug 18 2022 at 16:07)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@kit.edu">andreas.lochbihler@kit.edu</a>&gt;<br>
Hi Chris,</p>
<ol>
<li>Start ProofGeneral</li>
<li>Start Isabelle (C-c C-s)</li>
<li>Menu Isabelle -&gt; Settings -&gt; Skip proof</li>
<li>Process the theories up to the point you want to start working on</li>
<li>Deactivate skip proof again</li>
</ol>
<p>In the "Skip proof"-mode, Isabelle skips all proofs, but not the definitions, context switches, attribute declarations, etc, i.e. the latter take still their time to be processed.</p>
<p>Another option to get started quickly is to use writeable heaps, where you can start right where you had stopped before. I used to work with these, but my heaps got so large that shutting down Isabelle and writing the heap back to the disk exceeded all emacs timeouts. Makarius might be able to tell you more about writeable heaps.</p>
<p>Andreas</p>



<a name="294118095"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20THY%20path/near/294118095" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20THY.20path.html#294118095">(Aug 18 2022 at 16:08)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
These persistent heap images used to be very commonplace until everybody <br>
started using Proof General, because the basic usage of isabelle-process <br>
was forgotten.  The Isabelle system explains this in section 1.2 with a <br>
small example near the end.</p>
<p>Proof General makes it traditionally a bit hard to work with the result, <br>
also due to the default time out -- it can be changed on the Proof General <br>
side using one of these huge option menus, or better by injecting some <br>
elisp into $HOME/.emacs like this:</p>
<p>(custom-set-variables '(proof-shell-quit-timeout 45))</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>