<html>
<head><meta charset="utf-8"><title>[isabelle] The development of a large proof script. · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html">[isabelle] The development of a large proof script.</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294326553"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20development%20of%20a%20large%20proof%20script./near/294326553" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html#294326553">(Aug 19 2022 at 17:05)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
I'm forwarding this to the mailing list, since the question was <br>
originally asked there and others might have something useful to say <br>
before I have time to look at it in detail.</p>
<p>cheers</p>
<p>chris</p>
<p>-------- Forwarded Message --------<br>
Subject:    Fw: The development of a large proof script.<br>
Date:   Thu, 5 Feb 2015 18:06:08 +0800<br>
From:   <a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a> &lt;<a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a>&gt;<br>
To:     Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;</p>
<p>Daer christian:<br>
         I looked up the manuals and 'build' commands.<br>
         I'm confused on the session concepts. I briefly describe my<br>
         problems.<br>
         I need a basic theory file "cache.thy" "localesDef.thy", then<br>
         for each<br>
         case study on a protocol 'a', I imports the basic theory, and<br>
         generate a<br>
         'a.thy' with the help of an external tool. Now I want to run<br>
         Isabelle to<br>
         check 'a.thy'. Due to special application on the domain, the<br>
         generated<br>
         proof script can be checked without much interactions.<br>
         As I think, I divide the larger file into small parts, which are<br>
         loaded<br>
         one by one. And each smaller file are built into  a session (or<br>
         image).<br>
         Three thy files are attached, the cache.thy and two case studies.<br>
         One is small, and the other is moderate. The largest cannot be<br>
         sent via<br>
         email I can upload it at some web site.  But I think, you can<br>
         teach me<br>
         the method to me at first.<br>
         I try to use the following command:<br>
         [lyj@localhost cache]$ ~/Isabelle2014/bin/isabelle build -b<br>
         cache.thy<br>
         ### Cannot execute Poly/ML in 32bit mode (missing shared<br>
         libraries for<br>
         C/C++)<br>
         ### Using bulky 64bit version of Poly/ML instead<br>
         *** Undefined session(s): "cache.thy"<br>
         0:00:01 elapsed time, 0:00:01 cpu time<br>
         but fails, can you give me some details to build the theory.<br>
         regards!</p>
<p>On Wed, 2015-02-04 at 14:27 +0100, David Cock wrote:<br>
          &gt; On 04/02/15 14:18, <a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a> wrote:<br>
          &gt; &gt; Dear experts:<br>
          &gt; &gt;     Now I want to ask some details on the development of a<br>
         large proof script.<br>
          &gt; &gt;<br>
          &gt; &gt;     A   proof script on a real protocol case study has 20<br>
         MB. It is really<br>
          &gt; &gt; beyond the ability of Isabelle's JEDIT interface.<br>
          &gt; &gt;<br>
          &gt; &gt;     I have used the tty model to run a smaller script with<br>
         2MBs in batch in previous Isabelle 2012. But<br>
          &gt; &gt; it is very inconvenient, and the tty model is not supported<br>
          &gt; &gt;     by Isabelle 2014.<br>
          &gt;<br>
          &gt; You can still run noninteractive proofs, you just need to set<br>
         up the<br>
          &gt; appropriate build files.   This is covered in the Isabelle<br>
         system<br>
          &gt; manual.  Also, if you can factor your proof into several<br>
         logic images,<br>
          &gt; with each building on the last, then you can work<br>
         interactively on any<br>
          &gt; of them, by loading the next-lowest as your ambient logic.<br>
          &gt;<br>
          &gt; &gt;<br>
          &gt; &gt; (1)  How to run the larger proof in Isabelle 2014?<br>
          &gt; &gt;<br>
          &gt; &gt; (2)Essentially, my proof script contain a main lemma and<br>
         thousands of basic<br>
          &gt; &gt; lemmas which is used in the proof of the main lemma.  The<br>
         proof of thousands<br>
          &gt; &gt; of  basic lemmas can be proved in parallel. Parallel proof<br>
         (or distributing<br>
          &gt; &gt; proofs) are supported by Isabelle 2014?<br>
          &gt;<br>
          &gt; Yes, very much so.<br>
          &gt;<br>
          &gt; David<br>
          &gt;<br>
<a href="/user_uploads/14278/bKT0aQI5tzSHnqzivUTcuF60/cache.thy">cache.thy</a><br>
<a href="/user_uploads/14278/TzA45jHPZowsk62apksKDkm-/localesDef.thy">localesDef.thy</a><br>
<a href="/user_uploads/14278/Z8s5FOP6V2Nr3qdOV55vDPF0/mutualEx.thy">mutualEx.thy</a></p>



<a name="294326750"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20development%20of%20a%20large%20proof%20script./near/294326750" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html#294326750">(Aug 19 2022 at 17:06)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Dear lyj238,</p>
<p>what constitutes a single session has to be put into a <br>
"driver"/"project"/"session" file (I'm not sure whether there is any <br>
official name for this file, except for ROOT) called ROOT (see "System <br>
Manual", Section 2.1).</p>
<p>In your case the ROOT file could contain:</p>
<p>session Main_Session = HOL +<br>
       theories<br>
          mutualEx</p>
<p>which defines a session called "Main_Session" on top of HOL (for bigger <br>
developments, as suggested by David, you can have several of these <br>
sessions built on top of each other). The session consists of the theory <br>
"mutualEx" (and implicitly all the theories on which "mutualEx" depends <br>
and that are not yet part of the "HOL" session).</p>
<p>Now, in order to build this newly defined session you have to tell <br>
"isabelle build" where your ROOT file is <em>and</em> which session to build <br>
(since there could be several sessions in a single ROOT file). This is <br>
done via</p>
<p>isabelle build -d . -b Main_Session</p>
<p>adding "-v" will give you some more details about your environment which <br>
might be interesting here, in order to analyze the error you obtain. <br>
E.g,. on my machine</p>
<p>isabelle build -v -d . -b Main_Session</p>
<p>results in</p>
<p>##################################################<br>
ISABELLE_BUILD_OPTIONS="threads=4"</p>
<p>ML_PLATFORM="x86_64-linux"<br>
ML_HOME="/usr/local/Isabelle2014/contrib/polyml-5.5.2-1/x86_64-linux"<br>
ML_SYSTEM="polyml-5.5.2-1"<br>
ML_OPTIONS="-H 500"</p>
<p>Session Pure/Pure<br>
Session HOL/HOL (main)<br>
Session Unsorted/Main_Session<br>
Building Main_Session ...<br>
Main_Session: theory cache<br>
Main_Session: theory localesDef<br>
Main_Session: theory mutualEx<br>
Timing Main_Session (4 threads, 6.904s elapsed time, 20.347s cpu time, <br>
0.749s GC time, factor 2.95)<br>
Finished Main_Session (0:00:20 elapsed time, 0:00:43 cpu time, factor 2.15)<br>
Finished at Thu Feb  5 14:38:53 CET 2015<br>
0:00:26 elapsed time, 0:00:55 cpu time, factor 2.11<br>
##################################################</p>
<p>cheers</p>
<p>chris</p>
<p>Side remark: Conventionally you would start theory-names (as well as <br>
session-names) with a capital letter and use underscores to delimit <br>
words (not CamelCaseAsIsConvetionForSomeProgrammingLanguages).</p>



<a name="294327327"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20development%20of%20a%20large%20proof%20script./near/294327327" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html#294327327">(Aug 19 2022 at 17:10)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
(I did not find time yet to look closely on this thread, which also has <br>
invisible parts in my private mail folder.  For continuation it is <br>
important to keep exactly one <em>public</em> thread on this mailing list.)</p>
<p>Generally, Isabelle and its Prover IDE have been made to cope with the <br>
increasingly large formalizations that have emerged in recent years: <br>
everytime there was some success in using more CPU cores and exploiting <br>
larger memory, applications continued to catch up and grow beyond that.</p>
<p>Just throwing tons of theory and proof text into a single Isabelle/jEdit <br>
buffer is unlikely to work: the practical limit is a few hundred kilobyte <br>
per node in the theory graph, but the graph can be quite large.</p>
<p>If proof sketches are machine generated, it should be easy to sub-divide <br>
into separate theories and see how far you get, before really smart <br>
approaches need to be devised.</p>
<p>Makarius</p>



<a name="294328118"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20development%20of%20a%20large%20proof%20script./near/294328118" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html#294328118">(Aug 19 2022 at 17:14)</a>:</h4>
<p>From: "<a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a>" &lt;<a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a>&gt;<br>
Dear experts:<br>
   Now I want to ask some details on the development of a large proof script.</p>
<p>A   proof script on a real protocol case study has 20 MB. It is really<br>
beyond the ability of Isabelle's JEDIT interface.</p>
<p>I have used the tty model to run a smaller script with 2MBs in batch in previous Isabelle 2012. But<br>
it is very inconvenient, and the tty model is not supported<br>
   by Isabelle 2014.</p>
<p>(1)  How to run the larger proof in Isabelle 2014?</p>
<p>(2)Essentially, my proof script contain a main lemma and thousands of basic<br>
lemmas which is used in the proof of the main lemma.  The proof of thousands<br>
of  basic lemmas can be proved in parallel. Parallel proof (or distributing<br>
proofs) are supported by Isabelle 2014?</p>
<p>Best regards!</p>
<p><a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a></p>



<a name="294328257"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20development%20of%20a%20large%20proof%20script./near/294328257" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html#294328257">(Aug 19 2022 at 17:15)</a>:</h4>
<p>From: "<a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a>" &lt;<a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a>&gt;<br>
Dear experts:<br>
   Now I want to ask some details on the development of a large proof script.</p>
<p>A   proof script on a real protocol case study has 20 MB. It is really<br>
beyond the ability of Isabelle's JEDIT interface.</p>
<p>I have used the tty model to run a smaller script with 2MBs in batch in previous Isabelle 2012. But<br>
it is very inconvenient, and the tty model is not supported<br>
   by Isabelle 2014.</p>
<p>(1)  How to run the larger proof in Isabelle 2014?</p>
<p>(2)Essentially, my proof script contain a main lemma and thousands of basic<br>
lemmas which is used in the proof of the main lemma.  The proof of thousands<br>
of  basic lemmas can be proved in parallel. Parallel proof (or distributing<br>
proofs) are supported by Isabelle 2014?</p>
<p>Best regards!</p>
<p><a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a></p>



<a name="294328418"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20development%20of%20a%20large%20proof%20script./near/294328418" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html#294328418">(Aug 19 2022 at 17:16)</a>:</h4>
<p>From: David Cock &lt;<a href="mailto:david.cock@inf.ethz.ch">david.cock@inf.ethz.ch</a>&gt;<br>
On 04/02/15 14:18, <a href="mailto:lyj238@ios.ac.cn">lyj238@ios.ac.cn</a> wrote:</p>
<blockquote>
<p>Dear experts:<br>
    Now I want to ask some details on the development of a large proof script.</p>
<p>A   proof script on a real protocol case study has 20 MB. It is really<br>
beyond the ability of Isabelle's JEDIT interface.</p>
<p>I have used the tty model to run a smaller script with 2MBs in batch in previous Isabelle 2012. But<br>
it is very inconvenient, and the tty model is not supported<br>
    by Isabelle 2014.</p>
</blockquote>
<p>You can still run noninteractive proofs, you just need to set up the <br>
appropriate build files.   This is covered in the Isabelle system <br>
manual.  Also, if you can factor your proof into several logic images, <br>
with each building on the last, then you can work interactively on any <br>
of them, by loading the next-lowest as your ambient logic.</p>
<blockquote>
<p>(1)  How to run the larger proof in Isabelle 2014?</p>
<p>(2)Essentially, my proof script contain a main lemma and thousands of basic<br>
lemmas which is used in the proof of the main lemma.  The proof of thousands<br>
of  basic lemmas can be proved in parallel. Parallel proof (or distributing<br>
proofs) are supported by Isabelle 2014?</p>
</blockquote>
<p>Yes, very much so.</p>
<p>David</p>



<a name="294328620"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20development%20of%20a%20large%20proof%20script./near/294328620" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20development.20of.20a.20large.20proof.20script.2E.html#294328620">(Aug 19 2022 at 17:17)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Dear lyj238,</p>
<p>maybe you could give as some more details?</p>
<p>For example: What do you mean by "proof script"? Is what you are talking <br>
about a standard Isabelle/Isar development, i.e., a bunch of *.thy files <br>
with "lemma" statements inside and corresponding "proof/qed" blocks?</p>
<p>And how did you create your "proof script" if not with Isabelle/jEdit or <br>
Isabelle/ProofGeneral?</p>
<p>The largest Isabelle development I've personally worked on is roughly in <br>
the 5 MB area. This can be handled by session management that is <br>
standard nowadays (see the Isabelle system manual).</p>
<p>In general, have a look at the System manual (that comes with the <br>
Isabelle distribution) and especially at session management and the <br>
"build" tool.</p>
<p>As for your question about parallelization. Isabelle's "build" uses <br>
implicit parallelization possible due to interdependencies of theories <br>
(and maybe lemmas?). So yes, parallelization is supported <em>and</em> you get <br>
it essentially for free.</p>
<p>cheers</p>
<p>chris</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>