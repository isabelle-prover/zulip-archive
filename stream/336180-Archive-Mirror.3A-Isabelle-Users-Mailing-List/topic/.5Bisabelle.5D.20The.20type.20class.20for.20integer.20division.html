<html>
<head><meta charset="utf-8"><title>[isabelle] The type class for integer division · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20type.20class.20for.20integer.20division.html">[isabelle] The type class for integer division</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294641333"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20type%20class%20for%20integer%20division/near/294641333" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20type.20class.20for.20integer.20division.html#294641333">(Aug 22 2022 at 09:57)</a>:</h4>
<p>From: Larry Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
We currently define the type class semiring_numeral_div in the theory Divides, see attached snippet below. This type class is already general enough to allow some facts involving linearly ordered arithmetic types to be proved just once and be valid over the range from nat to real. The only problem is that type real is not an instance of semiring_numeral_div, for obvious reasons. Would it not be appropriate to attach the axiom le_add_diff_inverse2 to a more general type class, such as linordered_semidom?</p>
<p>Larry</p>
<p>subsection {* Generic numeral division with a pragmatic type class *}</p>
<p>text {*<br>
  The following type class contains everything necessary to formulate<br>
  a division algorithm in ring structures with numerals, restricted<br>
  to its positive segments.  This is its primary motiviation, and it<br>
  could surely be formulated using a more fine-grained, more algebraic<br>
  and less technical class hierarchy.<br>
*}</p>
<p>class semiring_numeral_div = semiring_div + comm_semiring_1_diff_distrib + linordered_semidom +<br>
  assumes le_add_diff_inverse2: "b ≤ a ⟹ a - b + b = a"</p>



<a name="294641402"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20type%20class%20for%20integer%20division/near/294641402" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20type.20class.20for.20integer.20division.html#294641402">(Aug 22 2022 at 09:57)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Larry,</p>
<blockquote>
<p>We currently define the type class semiring_numeral_div in the theory<br>
Divides, see attached snippet below. This type class is already general<br>
enough to allow some facts involving linearly ordered arithmetic types<br>
to be proved just once and be valid over the range from nat to real. The<br>
only problem is that type real is not an instance of<br>
semiring_numeral_div, for obvious reasons. Would it not be appropriate<br>
to attach the axiom le_add_diff_inverse2 to a more general type class,<br>
such as linordered_semidom?</p>
</blockquote>
<p>this is surely something with can be taken into account.  I have<br>
recently refined the type class hierarchy to reflect the concept of<br>
»partial inverse additive operation« up to a certain degree, and this<br>
could be the next step.</p>
<p>Sorry that I won't elaborate further for now, but I am on leave for holiday.</p>
<p>All the best,<br>
    Florian</p>
<blockquote>
<p>Larry</p>
<p>subsection {* Generic numeral division with a pragmatic type class *}</p>
<p>text {*<br>
  The following type class contains everything necessary to formulate<br>
  a division algorithm in ring structures with numerals, restricted<br>
  to its positive segments.  This is its primary motiviation, and it<br>
  could surely be formulated using a more fine-grained, more algebraic<br>
  and less technical class hierarchy.<br>
*}</p>
<p>class semiring_numeral_div = semiring_div + comm_semiring_1_diff_distrib + linordered_semidom +<br>
  assumes le_add_diff_inverse2: "b ≤ a ⟹ a - b + b = a"</p>
<p><a href="/user_uploads/14278/4EWj7vYoGUd7TsgIBnMdbqtX/signature.asc">signature.asc</a></p>
</blockquote>



<a name="294643511"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20type%20class%20for%20integer%20division/near/294643511" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20type.20class.20for.20integer.20division.html#294643511">(Aug 22 2022 at 10:11)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;</p>
<blockquote>
<p>Shall we do this, then? Must something else be done or checked first?</p>
</blockquote>
<p>I don't see any obstacle except striving to be consistent, i.e.</p>
<p>Step 1: Re-Join comm_semiring_1_diff_distrib into comm_semiring_1<br>
Step 2: Attach le_add_diff_inverse2 to linordered_semidom</p>
<p>and doing consecutive changes in the sources.</p>
<p>Hence we just state that our distribution's type classes demand a<br>
partial inverse operation for addition with certain properties, beyond<br>
what can be justified from the current specifications -- which is not<br>
critical since these specifications are pragmatically developed and not<br>
an exact counterpart of any development from literature.  If at some<br>
time in the future this will expose problems, our system is flexible<br>
enough to insert more intermediate points into the class hierarchy, even<br>
within a particular application.</p>
<p>Cheers,<br>
    Florian</p>
<blockquote>
<p>On 2 Jun 2015, at 20:49, Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt; wrote:</p>
<blockquote>
<blockquote>
<blockquote>
<p>We currently define the type class semiring_numeral_div in the theory<br>
Divides, see attached snippet below. This type class is already general<br>
enough to allow some facts involving linearly ordered arithmetic types<br>
to be proved just once and be valid over the range from nat to real. The<br>
only problem is that type real is not an instance of<br>
semiring_numeral_div, for obvious reasons. Would it not be appropriate<br>
to attach the axiom le_add_diff_inverse2 to a more general type class,<br>
such as linordered_semidom?</p>
</blockquote>
<p>this is surely something with can be taken into account.  I have<br>
recently refined the type class hierarchy to reflect the concept of<br>
»partial inverse additive operation« up to a certain degree, and this<br>
could be the next step.</p>
</blockquote>
<p>After a closer look at the whole matter, moving le_add_diff_inverse2 to<br>
linordered_semidom seems reasonable (cf. class_deps "{linorder,<br>
semiring, minus}")</p>
<p>Florian</p>
<p>-- </p>
<p>PGP available:<br>
<a href="http://home.informatik.tu-muenchen.de/haftmann/pgp/florian_haftmann_at_informatik_tu_muenchen_de">http://home.informatik.tu-muenchen.de/haftmann/pgp/florian_haftmann_at_informatik_tu_muenchen_de</a></p>
</blockquote>
<p><a href="/user_uploads/14278/tlQiYKF_D1vZKoTWtG8zgC9F/signature.asc">signature.asc</a></p>
</blockquote>



<a name="294646024"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20type%20class%20for%20integer%20division/near/294646024" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20type.20class.20for.20integer.20division.html#294646024">(Aug 22 2022 at 10:28)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
After a closer look at the whole matter, moving le_add_diff_inverse2 to<br>
linordered_semidom seems reasonable (cf. class_deps "{linorder,<br>
semiring, minus}")</p>
<p>Florian<br>
<a href="/user_uploads/14278/clAmmg0mNP7itSvCqrdMyun4/signature.asc">signature.asc</a></p>



<a name="294646552"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20The%20type%20class%20for%20integer%20division/near/294646552" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20The.20type.20class.20for.20integer.20division.html#294646552">(Aug 22 2022 at 10:32)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
After a third look, one caveat is whether there are instances of<br>
linordered_semidom which do not satisfy le_add_diff_inverse2 (maybe<br>
polynomials)?</p>
<p>This should be figured out first.  In the past I introduced e.g.<br>
comm_semiring_1_diff_distrib since I saw no striking argument why a<br>
partial subtraction in any case should follow a distributive law.  Maybe<br>
this has been a little bit overcritical.</p>
<p>If we move on to attach le_add_diff_inverse2 to linordered_semidom, we<br>
should also remerge comm_semiring_1_diff_distrib into comm_semiring_1</p>
<p>Florian<br>
<a href="/user_uploads/14278/eoXIFNobbbxlQ5LtRzGeQGqu/signature.asc">signature.asc</a></p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>