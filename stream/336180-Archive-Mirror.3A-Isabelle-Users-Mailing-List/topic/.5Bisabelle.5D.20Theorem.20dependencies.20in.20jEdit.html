<html>
<head><meta charset="utf-8"><title>[isabelle] Theorem dependencies in jEdit · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Theorem.20dependencies.20in.20jEdit.html">[isabelle] Theorem dependencies in jEdit</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294323934"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Theorem%20dependencies%20in%20jEdit/near/294323934" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Theorem.20dependencies.20in.20jEdit.html#294323934">(Aug 19 2022 at 16:51)</a>:</h4>
<p>From: Joachim Breitner &lt;<a href="mailto:breitner@kit.edu">breitner@kit.edu</a>&gt;<br>
Dear List,</p>
<p>in order to get a better handle on my formalizations I’d like to build<br>
some tools, similar to unused_thms, that can aid guide my reorganization<br>
of lemmas and theories. The data I need for that are the theory graph<br>
and the lemma dependencies.</p>
<p>I found this code to extract the list of theorems used by a particular<br>
theorem:<br>
<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2006-March/msg00091.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2006-March/msg00091.html</a><br>
which I adjusted to today’s definition of PThm.</p>
<p>In that thread it is noted that "-p 1" has to be used. Is that<br>
information still valid in 2014? I could not find a mention of this<br>
option in the systems manual nor "isabelle jedit --help". Note that I do<br>
not care about the dependencies on lemmas in the underlying heap (if<br>
that makes a difference).</p>
<p>It seems that adding<br>
        ML "Proofterm.proofs := 2"<br>
to the top of my developments makes the code above actually do something<br>
useful, but not ":= 1", which I presume corresponds to what "-p 1" used<br>
to be. Is this mode "1" still supported?</p>
<p>Thanks,<br>
Joachim<br>
<a href="/user_uploads/14278/qTken0DovAl9Vy9RwHCMb9oD/signature.asc">signature.asc</a></p>



<a name="294323950"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Theorem%20dependencies%20in%20jEdit/near/294323950" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Theorem.20dependencies.20in.20jEdit.html#294323950">(Aug 19 2022 at 16:51)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
On 18.12.2014 11:24, Joachim Breitner wrote:</p>
<blockquote>
<p>in order to get a better handle on my formalizations I’d like to build<br>
some tools, similar to unused_thms, that can aid guide my reorganization<br>
of lemmas and theories. The data I need for that are the theory graph<br>
and the lemma dependencies.</p>
<p>I found this code to extract the list of theorems used by a particular<br>
theorem:<br>
<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2006-March/msg00091.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2006-March/msg00091.html</a><br>
which I adjusted to today’s definition of PThm.</p>
</blockquote>
<p>There should be some newer code for that, written by Lukas Bulwahn and<br>
Rafal Kolanski about two years ago. IIRC it went into the Isabelle Cookbook.</p>
<p>Have a look at the stuff around page 66 (in chapter 3.7 Theorems)<br>
There ought to be some newer code in the Isabelle Cookbook (generated<br>
from changeset 8d30446d89f0).</p>
<blockquote>
<p>In that thread it is noted that "-p 1" has to be used. Is that<br>
information still valid in 2014? I could not find a mention of this<br>
option in the systems manual nor "isabelle jedit --help". Note that I do<br>
not care about the dependencies on lemmas in the underlying heap (if<br>
that makes a difference).</p>
</blockquote>
<p>As far as I understand, the default level of 0 already stores the<br>
references to named theorems, so there should be no need to enable more<br>
detailed proof terms.</p>
<p>-- Lars<br>
<a href="/user_uploads/14278/ohkV5Q2iMwBZuNigrCtPDPJw/signature.asc">signature.asc</a></p>



<a name="294323964"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Theorem%20dependencies%20in%20jEdit/near/294323964" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Theorem.20dependencies.20in.20jEdit.html#294323964">(Aug 19 2022 at 16:51)</a>:</h4>
<p>From: Joachim Breitner &lt;<a href="mailto:breitner@kit.edu">breitner@kit.edu</a>&gt;<br>
Hi Lars,</p>
<p>Am Donnerstag, den 18.12.2014, 11:47 +0100 schrieb Lars Noschinski:</p>
<blockquote>
<p>On 18.12.2014 11:24, Joachim Breitner wrote:<br>
There should be some newer code for that, written by Lukas Bulwahn and<br>
Rafal Kolanski about two years ago. IIRC it went into the Isabelle Cookbook.</p>
<p>Have a look at the stuff around page 66 (in chapter 3.7 Theorems)<br>
There ought to be some newer code in the Isabelle Cookbook (generated<br>
from changeset 8d30446d89f0).</p>
</blockquote>
<p>thanks for the pointer. I often forget about the Cookboook. Is there a<br>
good reason it is not included with the other documentation that comes<br>
with Isabelle?</p>
<p>Based on the information there I came up with this code that traverses<br>
the tree of used theorems, stopping at those that have a name:</p>
<p>fun thms_used_by_thm thm =<br>
  let<br>
  fun used_by_proof_body (PBody {thms, ...}) = thms |&gt; map #2 |&gt; map go |&gt; List.concat<br>
  and go ("", _, pbodyf) = pbodyf |&gt; Future.join |&gt; used_by_proof_body<br>
    | go (s, _, _) = [s]<br>
  in thm |&gt; Thm.proof_body_of |&gt; Proofterm.strip_thm |&gt; used_by_proof_body<br>
  end;</p>
<blockquote>
<p>As far as I understand, the default level of 0 already stores the<br>
references to named theorems, so there should be no need to enable more<br>
detailed proof terms.</p>
</blockquote>
<p>Indeed, thanks!</p>
<p>Greetings,<br>
Joachim<br>
<a href="/user_uploads/14278/cNeclQODZ4iI_8E-aQSjuDSR/signature.asc">signature.asc</a></p>



<a name="294323990"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Theorem%20dependencies%20in%20jEdit/near/294323990" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Theorem.20dependencies.20in.20jEdit.html#294323990">(Aug 19 2022 at 16:51)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 18 Dec 2014, Joachim Breitner wrote:</p>
<blockquote>
<p>I often forget about the Cookboook. Is there a good reason it is not <br>
included with the other documentation that comes with Isabelle?</p>
</blockquote>
<p>The Cookbook is generally lagging behind in accuracy and quality.  Many <br>
things in it have a point and many things are very odd or outright wrong. <br>
I have pointed out small and big mistakes quite often in the past, but it <br>
did not improve much.  Moreover, Isabelle has changed quite substantially <br>
since the start of the Cookbook, but it did not catch up.</p>
<blockquote>
<p>Based on the information there I came up with this code that traverses<br>
the tree of used theorems, stopping at those that have a name:</p>
<p>fun thms_used_by_thm thm =<br>
 let<br>
 fun used_by_proof_body (PBody {thms, ...}) = thms |&gt; map #2 |&gt; map go |&gt; List.concat<br>
 and go ("", _, pbodyf) = pbodyf |&gt; Future.join |&gt; used_by_proof_body<br>
   | go (s, _, _) = [s]<br>
 in thm |&gt; Thm.proof_body_of |&gt; Proofterm.strip_thm |&gt; used_by_proof_body<br>
 end;</p>
<blockquote>
<p>As far as I understand, the default level of 0 already stores the <br>
references to named theorems, so there should be no need to enable more <br>
detailed proof terms.</p>
</blockquote>
</blockquote>
<p>PThm names are always stored since about 2008.  None of this really works, <br>
though.  Even 'unused_thms' remained unfinished over many years until <br>
today, and has a bunch of conceptual problems.</p>
<p>There is no point to make 2-3 half-working variants of something that <br>
needs to be done right once and for all.  Anything else is just a waste of <br>
time -- it actually prevents to get things right eventually.</p>
<p>Makarius</p>
<hr>
<p><a href="http://stop-ttip.org">http://stop-ttip.org</a>  1,169,875 people so far</p>
<hr>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>