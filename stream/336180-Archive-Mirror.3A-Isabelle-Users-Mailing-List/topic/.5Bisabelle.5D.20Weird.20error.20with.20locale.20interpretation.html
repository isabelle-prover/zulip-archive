<html>
<head><meta charset="utf-8"><title>[isabelle] Weird error with locale interpretation · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Weird.20error.20with.20locale.20interpretation.html">[isabelle] Weird error with locale interpretation</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294220977"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Weird%20error%20with%20locale%20interpretation/near/294220977" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Weird.20error.20with.20locale.20interpretation.html#294220977">(Aug 19 2022 at 08:24)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Hi all,</p>
<p>upon interpreting a locale, I get the following error:</p>
<p>interpretation StdMap hm_ops</p>
<p>*** exception TYPE raised (line 414 of "type.ML"):<br>
*** Type variable "?'a" has two distinct sorts<br>
*** ?'a\&lt;Colon&gt;type<br>
*** ?'a\&lt;Colon&gt;hashable</p>
<p>whereas interpretation StdMap lm_ops works as expected.<br>
term hm_ops<br>
  :: "('a, 'b, ('a, 'b) HashMap.hashmap) map_ops"<br>
where 'a is of sort hashable (Not displayed, even with show_sorts?)</p>
<p>term lm_ops<br>
  :: "('a, 'b, ('a, 'b) assoc_list) map_ops"<br>
where 'a has no sort constraints.</p>
<p>Boiling down to a simple example seems to be difficult. The error seems<br>
to be triggered by a sublocale relation that I introduced. Moreover, the<br>
term "StdMap hm_ops" is type-correct, and actually proven as a lemma. </p>
<p>If anyone has an idea what it is, or has experienced a similar behaviour<br>
and knows what it is, please respond ... otherwise I will invest<br>
probably quite much time to boil it down to a simple example that I can<br>
post on the list.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>