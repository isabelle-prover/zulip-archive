<html>
<head><meta charset="utf-8"><title>[isabelle] Word32/64 ? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html">[isabelle] Word32/64 ?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294098775"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Word32/64%20%3F/near/294098775" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html#294098775">(Aug 18 2022 at 14:32)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:peter.lammich@uni-muenster.de">peter.lammich@uni-muenster.de</a>&gt;<br>
Hi all,</p>
<p>Is there any code-generator setup to generate 32/(64) bit integers with <br>
modulo-arithmetic, mapped on the corresponding SML type (Word32) ?<br>
In the logic, the type Word.word has the intended behaviour, but how to <br>
get,e.g., "32 word", mapped to SML's "Word32" ?</p>
<p>Best,<br>
  Peter</p>



<a name="294098815"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Word32/64%20%3F/near/294098815" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html#294098815">(Aug 18 2022 at 14:32)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Peter,</p>
<p>there is, as far as I remember, a default setup for code generation for<br>
type 'a word, but no mapping to any target-language-specific types.  If<br>
this is desired, it would be required to wrap up type expressions like<br>
e.g. "64 word" into a dedicated type, say, "word64", to have dedicated<br>
types for all the different 'a word instances.  This wrapping is simple<br>
but cumbersome to do.</p>
<p>Hope this helps,<br>
    Florian<br>
<a href="/user_uploads/14278/LGck0JyHvNwx7d3I1Gjs6KsW/signature.asc">signature.asc</a></p>



<a name="294098874"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Word32/64%20%3F/near/294098874" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html#294098874">(Aug 18 2022 at 14:32)</a>:</h4>
<p>From: Rafal Kolanski &lt;<a href="mailto:rafalk@cse.unsw.edu.au">rafalk@cse.unsw.edu.au</a>&gt;<br>
Peter,</p>
<p>This topic is of interest to me. At the isabelle users workshop in <br>
Munich last year I had a long discussion with Florian about precisely <br>
this. The answer seemed to be "not with the current code generator", and <br>
his argument felt convincing enough for me to leave that approach alone.</p>
<p>One approach for high-performance code seems to be going in reverse, <br>
i.e. parsing annotated SML/C/Haskell/whatever into Isabelle, where you <br>
can pick your own translation, but have to pay by having to specify the <br>
semantics also.</p>
<p>That or trying to write your own code generator, which might be... <br>
interesting.</p>
<p>Sincerely,</p>
<p>Rafal Kolanski.</p>
<p>Peter Lammich wrote:</p>



<a name="294098925"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Word32/64%20%3F/near/294098925" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html#294098925">(Aug 18 2022 at 14:32)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi all,</p>
<p>to be more precise, what we would need is a tool which inside the logic<br>
lifts operations on type "64 word" to a dedicated type "word64".  What<br>
could already provide helpful assistance is the "transfer" tool by Amine<br>
Chaieb and Jeremy Avigad, whose basic usage can be followed in<br>
src/HOL/Nat_Transfer.thy.</p>
<p>Hope this helps<br>
    Florian<br>
<a href="/user_uploads/14278/HvYdU2XMDkrX3UcIlvOKhhIw/signature.asc">signature.asc</a></p>



<a name="294101409"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Word32/64%20%3F/near/294101409" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html#294101409">(Aug 18 2022 at 14:44)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
BTW, "high-performance" in SML (as implemented in Poly/ML) means to use <br>
the default int, i.e. the proper mathematical (unbounded) integers, not <br>
machine words.  Poly/ML optimizes the representation of values for the <br>
demands of symbolic computation, not for bare metal operations. So proper <br>
ints, lists (cons cells), datatypes are fast, but Word32 is really slow.</p>
<p>Makarius</p>



<a name="294101680"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Word32/64%20%3F/near/294101680" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html#294101680">(Aug 18 2022 at 14:46)</a>:</h4>
<p>From: Michael Norrish &lt;<a href="mailto:Michael.Norrish@nicta.com.au">Michael.Norrish@nicta.com.au</a>&gt;<br>
But then, if you are emitting SML, and really wanting speed, you'll probably compile with MLton; at least until you can emit code to exploit Poly/ML threads.  MLton uses the gmp library to implement its IntInf structure, so if you target that explicitly, you will get infinite integers.  Otherwise, you will get native machine integers.</p>
<p>Michael.</p>



<a name="294101901"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20Word32/64%20%3F/near/294101901" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20Word32.2F64.20.3F.html#294101901">(Aug 18 2022 at 14:47)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
In the "long" form Poly/ML integers are definitely slower than anything <br>
more modern out there (even Java BigInt which appears to be pure Java). <br>
But the nice thing about the default int type in Poly/ML is that you get <br>
almost full speed machine arithmetic until you degrade gracefully to the <br>
long form.  This works, because 1 or 2 bits are sacrificed for tagging of <br>
values.</p>
<p>So the reason why Word32 is slow (it needs to be boxed) is the same reason <br>
why proper int is fast (a machine word can be either a "short" int, or a <br>
boxed "long" one).</p>
<p>While this tagging business appears to be ancient LISP technology, nobody <br>
appears to be using it in the C-derived universe (including Java).  This <br>
is one of the reasons why there is now so much opportunity to do <br>
verification involving unsafe word arithmetic as we all know ...</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>