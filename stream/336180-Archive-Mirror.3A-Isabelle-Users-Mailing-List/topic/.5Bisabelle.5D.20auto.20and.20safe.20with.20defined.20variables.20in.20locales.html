<html>
<head><meta charset="utf-8"><title>[isabelle] auto and safe with defined variables in locales · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20auto.20and.20safe.20with.20defined.20variables.20in.20locales.html">[isabelle] auto and safe with defined variables in locales</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294047013"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20auto%20and%20safe%20with%20defined%20variables%20in%20locales/near/294047013" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20auto.20and.20safe.20with.20defined.20variables.20in.20locales.html#294047013">(Aug 18 2022 at 10:15)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:peter.lammich@uni-muenster.de">peter.lammich@uni-muenster.de</a>&gt;<br>
In the following example:<br>
locale A =<br>
  fixes X<br>
  defines "X==[1::nat]"</p>
<p>lemma (in A) test: "[] ~= X"<br>
  apply safe</p>
<p>The subgoal presented to me is: False.<br>
I expected something like:  [] = X ==&gt; False, but I get just False.<br>
The same is with auto. The reason seems to be the defined variable X of<br>
the locale.<br>
In some more complex proofs, this forces me to very often fold/unfold<br>
symbol definitions in my locales (to prevent auto or safe making such<br>
transformations), and this makes the proof scripts more confusing.<br>
Is this behaviour of safe and auto the intended one ?<br>
Is there any workaround to use a defined variable like X, but prevent<br>
safe/auto from making such steps ?</p>
<p>Thanks in advance for any help<br>
-- Peter Lammich</p>



<a name="294047022"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20auto%20and%20safe%20with%20defined%20variables%20in%20locales/near/294047022" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20auto.20and.20safe.20with.20defined.20variables.20in.20locales.html#294047022">(Aug 18 2022 at 10:15)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
At the moment, any assumption like []=X is deleted after replacing X  <br>
by []. As you've noticed, that isn't helpful if constrained by a  <br>
locale. We could investigate whether anything can be done about it.</p>
<p>Larry</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>