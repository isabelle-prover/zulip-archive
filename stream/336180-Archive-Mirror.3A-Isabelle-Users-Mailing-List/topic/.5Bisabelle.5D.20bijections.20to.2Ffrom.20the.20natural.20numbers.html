<html>
<head><meta charset="utf-8"><title>[isabelle] bijections to/from the natural numbers · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20bijections.20to.2Ffrom.20the.20natural.20numbers.html">[isabelle] bijections to/from the natural numbers</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294103037"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20bijections%20to/from%20the%20natural%20numbers/near/294103037" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20bijections.20to.2Ffrom.20the.20natural.20numbers.html#294103037">(Aug 18 2022 at 14:52)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:brianh@cs.pdx.edu">brianh@cs.pdx.edu</a>&gt;<br>
Hello all,</p>
<p>I have noticed some inconsistency and duplication in Isabelle's<br>
standard libraries, as far as bijections to/from type nat are<br>
concerned. Here is a list of the functions that I know about:</p>
<p>Library/Nat_Int_Bij.thy:<br>
  nat2_to_nat:: "(nat * nat) =&gt; nat"<br>
  nat_to_nat2::  "nat =&gt; (nat * nat)"<br>
  nat_to_int_bij :: "nat =&gt; int"<br>
  int_to_nat_bij :: "int =&gt; nat"</p>
<p>Library/Countable.thy:<br>
  pair_encode :: "nat * nat =&gt; nat"<br>
  nat_to_rat_surj :: "nat =&gt; rat" (* not injective; defined in terms<br>
of nat_to_nat2 *)</p>
<p>HOLCF/NatIso.thy:<br>
  sum2nat  :: "nat + nat =&gt; nat"<br>
  nat2sum  :: "nat =&gt; nat + nat"<br>
  prod2nat :: "nat * nat =&gt; nat"<br>
  nat2prod :: "nat =&gt; nat * nat"<br>
  set2nat :: "nat set =&gt; nat" (* injective on the finite sets *)<br>
  nat2set :: "nat =&gt; nat set"</p>
<p>I would like to consolidate all these libraries and remove duplicate<br>
functionality. (It turns out that prod2nat, pair_encode, and<br>
nat2_to_nat are all equal as functions, even though they are defined<br>
differently.) I would also like to come up with a consistent naming<br>
scheme for the various functions and related lemmas.</p>
<p>Before doing anything, I'd like to get some input from the user<br>
community. Who is using these libraries, and what are you using them<br>
for? What kinds of function names do you like? What kinds of lemmas<br>
about these functions do you need? Is there anything <em>missing</em> from<br>
these libraries that you would like to have?</p>
<p>Thanks!</p>
<ul>
<li>Brian</li>
</ul>



<a name="294103058"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20bijections%20to/from%20the%20natural%20numbers/near/294103058" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20bijections.20to.2Ffrom.20the.20natural.20numbers.html#294103058">(Aug 18 2022 at 14:52)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Great!</p>
<p>I have only one comment: the standard naming scheme should be (as in<br>
Isabelle/ML)</p>
<p>foo_of_bar :: bar =3D&gt; foo</p>
<p>Cheers,<br>
    Florian</p>
<p>--=20</p>
<p>Home:<br>
<a href="http://www.in.tum.de/~haftmann">http://www.in.tum.de/~haftmann</a></p>
<p>PGP available:<br>
<a href="http://home.informatik.tu-muenchen.de/haftmann/pgp/florian_haftmann_at_in=">http://home.informatik.tu-muenchen.de/haftmann/pgp/florian_haftmann_at_in=</a><br>
formatik_tu_muenchen_de<br>
<a href="/user_uploads/14278/Y6gHiivG3pwA3168xeqC-Y_b/signature.asc">signature.asc</a></p>



<a name="294103065"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20bijections%20to/from%20the%20natural%20numbers/near/294103065" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20bijections.20to.2Ffrom.20the.20natural.20numbers.html#294103065">(Aug 18 2022 at 14:52)</a>:</h4>
<p>From: Alexander Krauss &lt;<a href="mailto:krauss@in.tum.de">krauss@in.tum.de</a>&gt;<br>
Florian Haftmann wrote:<br>
I think this naming scheme would be inappropriate here, since it hints <br>
at some kind of "obvious conversion". For example, the function <br>
nat_to_int_bij is defined as</p>
<p>nat_to_int_bij n = (if 2 dvd n then int(n div 2) else -int(Suc n div 2))</p>
<p>Naming it "int_of_nat" would be confusing IMO.</p>
<p>I added pair_encode together with class "countable" around 2007, not <br>
knowing about the others. I think that function is only used to derive <br>
the class instance, so it can safely be replaced by any other definition...</p>
<p>Other naming suggestions:</p>
<p>cantor_pair   ::  "nat * nat =&gt; nat"<br>
cantor_unpair ::  "nat =&gt; nat * nat"<br>
   (or cantor_split)</p>
<p>Alex</p>



<a name="294103129"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20bijections%20to/from%20the%20natural%20numbers/near/294103129" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20bijections.20to.2Ffrom.20the.20natural.20numbers.html#294103129">(Aug 18 2022 at 14:53)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi all,</p>
<blockquote>
<p>I think this naming scheme would be inappropriate here, since it hints<br>
at some kind of "obvious conversion".</p>
</blockquote>
<p>of course you are right, I didn't full realize that we are taking about<br>
Cantor here.  Please ignore my suggestion.</p>
<blockquote>
<p>there is also Library/Diagonalize.thy which has similar content</p>
</blockquote>
<p>I have done this once.  Either it should be integrated into the emerging<br>
"Cantor toolbox" or been moved to ex/.</p>
<p>The main difference to other developments is that Diagonalize.thy avoids<br>
choice.</p>
<p>Cheers,<br>
    Florian<br>
<a href="/user_uploads/14278/nRKv8o3_KslrNPjWyiCAZ6TO/signature.asc">signature.asc</a></p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>