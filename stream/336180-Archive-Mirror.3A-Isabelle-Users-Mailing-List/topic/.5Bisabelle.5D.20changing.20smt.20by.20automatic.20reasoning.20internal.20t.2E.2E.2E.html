<html>
<head><meta charset="utf-8"><title>[isabelle] changing smt by automatic reasoning internal t... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20changing.20smt.20by.20automatic.20reasoning.20internal.20t.2E.2E.2E.html">[isabelle] changing smt by automatic reasoning internal t...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294759832"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20changing%20smt%20by%20automatic%20reasoning%20internal%20t.../near/294759832" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20changing.20smt.20by.20automatic.20reasoning.20internal.20t.2E.2E.2E.html#294759832">(Aug 22 2022 at 20:10)</a>:</h4>
<p>From: José Manuel Rodríguez Caballero &lt;<a href="mailto:josephcmac@gmail.com">josephcmac@gmail.com</a>&gt;<br>
Dear Isabelle users and experts,<br>
  In the rules for submissions to Archives of Formal Proofs, it is written<br>
that "No use of the command smt_oracle". If I well understood, this means<br>
that proofs cannot be done using either "apply smt" or "by smt" (please<br>
correct me if I am wrong). This was also pointed out in Gerwin's Style<br>
Guide (section: "Do not use smt in proofs you need to maintain over longer<br>
time"): <a href="http://proofcraft.org/blog/isabelle-style.html">http://proofcraft.org/blog/isabelle-style.html</a></p>
<p>(i) Is there an automatic way to change "smt" by some automatic reasoning<br>
internal to Isabelle, e.g., metis, auto, simp?</p>
<p>(ii) In case of a negative answer for (i), which are the steps "by hand"<br>
recommended for such a task?</p>
<p>Sincerely yours,<br>
José M.</p>



<a name="294759840"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20changing%20smt%20by%20automatic%20reasoning%20internal%20t.../near/294759840" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20changing.20smt.20by.20automatic.20reasoning.20internal.20t.2E.2E.2E.html#294759840">(Aug 22 2022 at 20:10)</a>:</h4>
<p>From: "<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>" &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Hi Jose  </p>
<p>Smt can be used, as it replays the proof in the kernel, only smt_oracle is<br>
ruled out.  </p>
<p>Best  <br>
Peter</p>



<a name="294759858"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20changing%20smt%20by%20automatic%20reasoning%20internal%20t.../near/294759858" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20changing.20smt.20by.20automatic.20reasoning.20internal.20t.2E.2E.2E.html#294759858">(Aug 22 2022 at 20:10)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:unruh@ut.ee">unruh@ut.ee</a>&gt;<br>
Hi,</p>
<p>I noticed that until October 2017, the submission instructions for AFP <br>
also contained "No use of the command &lt;code&gt;smt&lt;/code&gt;. The result of <br>
this command depends on external tools that are not under our control <br>
and may stop working in the future."</p>
<p>This was removed in commit 48c7802 (afp-devel) by Gerwin Klein.</p>
<p>I am curious why this is no longer a necessity? As I understood, the <br>
reason was not the fact that the proof is not replayed (as in the case <br>
of smt_oracle), but that the behavior of smt depends on Z3, and thus <br>
breaks easily when Z3 changes.</p>
<p>Is my understanding correct? Has this situation changed? Or has merely <br>
the policy changed and the expectation is that smt proofs are just fixed <br>
once Z3 changes make them the smt proofs break?</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="294759866"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20changing%20smt%20by%20automatic%20reasoning%20internal%20t.../near/294759866" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20changing.20smt.20by.20automatic.20reasoning.20internal.20t.2E.2E.2E.html#294759866">(Aug 22 2022 at 20:10)</a>:</h4>
<p>From: "Klein, Gerwin (Data61, Kensington NSW)" &lt;<a href="mailto:Gerwin.Klein@data61.csiro.au">Gerwin.Klein@data61.csiro.au</a>&gt;<br>
Yes, the latter. The policy has changed, because we were observing very few failures of this kind in other Isabelle code where we did not have the restriction, and this has been played out similarly on the AFP since we changed it. We are also changing Z3 versions less often than we used to. I.e. the benefit of allowing smt outweighs the drawbacks. </p>
<p>I should probably update my style guide accordingly as well.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="294759903"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20changing%20smt%20by%20automatic%20reasoning%20internal%20t.../near/294759903" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20changing.20smt.20by.20automatic.20reasoning.20internal.20t.2E.2E.2E.html#294759903">(Aug 22 2022 at 20:11)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I still tend to get rid of smt calls, though it’s a chore.</p>
<p>One tip is to use your working smt call to identify the specific instances of the lemmas that you need. So if you have</p>
<p>smt lemma_1 … lemma_n</p>
<p>you can see if it still works with lemma_1 [of a b], where a and b are constants in your problem. Once you’ve done that, then insert </p>
<p>using lemma_1 [of a b]</p>
<p>and try sledgehammer again. You might get a much better proof.</p>
<p>Larry</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>