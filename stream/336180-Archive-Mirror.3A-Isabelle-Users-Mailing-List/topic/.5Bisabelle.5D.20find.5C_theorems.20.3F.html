<html>
<head><meta charset="utf-8"><title>[isabelle] find\_theorems ? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html">[isabelle] find\_theorems ?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294765984"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294765984" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294765984">(Aug 22 2022 at 20:59)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
Dear All,</p>
<p>could anyone explain how search in find\_theorems works from the inside?<br>
Do you have any literature to recommend?</p>
<p>Many thanks in advance,</p>
<p>Best wishes,<br>
Angeliki</p>



<a name="294766000"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766000" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766000">(Aug 22 2022 at 20:59)</a>:</h4>
<p>From: "Klein, Gerwin (Data61, Kensington NSW)" &lt;<a href="mailto:Gerwin.Klein@data61.csiro.au">Gerwin.Klein@data61.csiro.au</a>&gt;<br>
There’s no literature on its internals, it was too small a tool to publish about. The user interface is documented in the Isar reference manual.</p>
<p>What aspect are you interested in?</p>
<p>It’s basically filtering a list of theorems extracted from the current context by search predicates. The main predicates are pattern matching on the term, string matching on the theorem name, and a few more such as “conclusion matches current goal”, etc.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="294766005"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766005" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766005">(Aug 22 2022 at 20:59)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
Dear Gerwin, CC:Yiannos<br>
thanks a lot for your reply!<br>
The reason I'm asking is that<br>
my colleague Yiannos Stathopoulos at Cambridge<br>
and I have been working on designing a new, different search engine for <br>
the Isabelle<br>
library and we'd like to compare its efficiency with find\_theorems. <br>
While comparing them, looking into how find\_theorems works internally <br>
<em>might</em> give us some insights about what it is that makes search work <br>
better and why.</p>
<p>Thanks again,<br>
Best,<br>
Angeliki</p>



<a name="294766068"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766068" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766068">(Aug 22 2022 at 21:00)</a>:</h4>
<p>From: "Klein, Gerwin (Data61, Kensington NSW)" &lt;<a href="mailto:Gerwin.Klein@data61.csiro.au">Gerwin.Klein@data61.csiro.au</a>&gt;<br>
Interesting. Is efficiency an issue with the current find_theorems? </p>
<p>Not saying that it can’t be improved. The main feature that people keep asking for is to be able to search outside the current context and session.</p>
<p>Cheers,<br>
Gerwin</p>



<a name="294766080"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766080" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766080">(Aug 22 2022 at 21:00)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
Dear Gerwin,</p>
<p>On 2019-11-21 00:39, Klein, Gerwin (Data61, Kensington NSW) wrote:</p>
<blockquote>
<blockquote>
<p>On 21 Nov 2019, at 11:30, Dr A. Koutsoukou-Argyraki &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt; <br>
wrote:</p>
<p>Dear Gerwin, CC:Yiannos<br>
thanks a lot for your reply!<br>
The reason I'm asking is that<br>
my colleague Yiannos Stathopoulos at Cambridge<br>
and I have been working on designing a new, different search engine <br>
for the Isabelle<br>
library and we'd like to compare its efficiency with find\_theorems. <br>
While comparing them, looking into how find\_theorems works internally <br>
<em>might</em> give us some insights about what it is that makes search work <br>
better and why.</p>
</blockquote>
<p>Interesting. Is efficiency an issue with the current find_theorems?</p>
</blockquote>
<p>most of the time it works well, but there are some cases where it <br>
doesn't give any results where there are plenty of related lemmas.</p>
<p>Of course this is a very tricky problem for many different reasons.</p>
<p>(e.g. Here are some examples of search words that within the entire <br>
Analysis don't give results :</p>
<p><code>Borel'', </code>Zorn'', <code>Gauss'', </code>product'', <code>operator'', </code>Hilbert'',  <br>
<code>Lebesgue'', </code>derivative'', <code>Euclidean'', </code>rational'',  <br>
<code>polynomial'',  </code>series'' , <code>Weierstrass'', </code>Noether'', <br>
<code>summation'',
</code>fraction'',  <code>supremum'', </code>infimum'', <code>pythagorean'',  
</code>multiplication'', <code>converge'', </code>convergence'', ``mapping'')</p>
<p>Also it's case-sensitive, i.e.<code>borel''gives about 509 results while 
</code>Borel''gives nothing.</p>
<blockquote>
<p>Not saying that it can’t be improved. The main feature that people<br>
keep asking for is to be able to search outside the current context<br>
and session.</p>
<p>We also hope to get this to work, and in general the hope is to manage <br>
to get more results (of high relevance) for search queries.<br>
We can keep you updated about our progress if you are interested.</p>
</blockquote>
<p>Best,<br>
Angeliki</p>



<a name="294766093"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766093" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766093">(Aug 22 2022 at 21:00)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
When I use the Query panel with "Find Theorems" and type "name: product" it says <br>
"found 179 theorem(s)" and displays 40.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/fii8gtgELGkvprYxIrMCTx8s/smime.p7s">smime.p7s</a></p>



<a name="294766104"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766104" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766104">(Aug 22 2022 at 21:00)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
The point is that you have to know what to search for. For example, “prod”, “mult” and “times” all yield different results because these tokens are used arbitrarily in the names of theorems. The objective here is to involve mathematical knowledge in search.</p>
<p>Larry</p>



<a name="294766122"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766122" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766122">(Aug 22 2022 at 21:00)</a>:</h4>
<p>From: mailing-list anonymous &lt;<a href="mailto:mailing.list.anonymous@gmail.com">mailing.list.anonymous@gmail.com</a>&gt;<br>
Dear All,</p>
<p>I hope it is not inappropriate to provide an idea/feature request for the<br>
new find_theorems infrastructure.</p>
<p>I believe that it would be impossible to cover all possible use cases by<br>
predefining filters for a command such as find_theorems. Thence, it would<br>
be useful to provide a generic Isabelle/ML API, which would allow users to<br>
write their own filters (e.g. values of the type "thm -&gt; bool", "thm list<br>
-&gt; bool" or anything similar) and combine them using predefined logical<br>
connectives, such as \/, /\, etc.</p>
<p>For example (the code below is a very rough sketch of the idea),</p>
<p>(* Generic find theorems *)</p>
<p>ML‹</p>
<p>infix 1 \/ /\;</p>
<p>signature FIND_THEOREMS_GENERIC =<br>
sig</p>
<p>val /\ : (string * thm -&gt; bool) * (string * thm -&gt; bool) -&gt; string * thm -&gt;<br>
bool<br>
val \/ : (string * thm -&gt; bool) * (string * thm -&gt; bool) -&gt; string * thm -&gt;<br>
bool<br>
val find_theorems : theory -&gt; (string * thm -&gt; bool) -&gt; (string * thm) list</p>
<p>end</p>
<p>structure Find_Theorems_Generic : FIND_THEOREMS_GENERIC =<br>
struct</p>
<p>fun f1 /\ f2 = fn thm =&gt; f1 thm andalso f2 thm;<br>
fun f1 \/ f2 = fn thm =&gt; f1 thm orelse f2 thm;</p>
<p>fun find_theorems thy f =<br>
  let val facts = Global_Theory.all_thms_of thy false |&gt; filter f<br>
  in facts end;</p>
<p>end;</p>
<p>open Find_Theorems_Generic;</p>
<p>›</p>
<p>(* Use case example: custom filters *)</p>
<p>ML‹</p>
<p>(* Definition of custom filters *)</p>
<p>(* Type constraint *)<br>
fun has_type_constraintt has_type_constraintT (Const (_, T)) =<br>
      has_type_constraintT T<br>
  | has_type_constraintt has_type_constraintT (Free (_, T)) =<br>
      has_type_constraintT T<br>
  | has_type_constraintt has_type_constraintT (Var (_, T)) =<br>
      has_type_constraintT T<br>
  | has_type_constraintt has_type_constraintT (Abs (_, T, t)) =<br>
      if has_type_constraintT T<br>
      then true<br>
      else has_type_constraintt has_type_constraintT t<br>
  | has_type_constraintt has_type_constraintT (t $ u) =<br>
      if has_type_constraintt has_type_constraintT t<br>
      then true<br>
      else has_type_constraintt has_type_constraintT u<br>
  | has_type_constraintt _ _ = false</p>
<p>fun has_type_constraint_thm has_type_constraintT thm = thm<br>
  |&gt; Thm.full_prop_of<br>
  |&gt; has_type_constraintt has_type_constraintT</p>
<p>fun has_classT _ _ (Type (_, [])) = false<br>
  | has_classT sort_rel sort (Type (c, T::Ts)) =<br>
      if has_classT sort_rel sort T<br>
      then true<br>
      else has_classT sort_rel sort (Type (c, Ts))<br>
  | has_classT sort_rel sort (TFree (_, sort')) = sort_rel (sort', sort)<br>
  | has_classT sort_rel sort (TVar (_, sort')) = sort_rel (sort', sort)</p>
<p>fun has_type_constructorT c (Type (c', [])) = (c = c')<br>
  | has_type_constructorT c (Type (c', T::Ts)) =<br>
      if has_type_constructorT c T<br>
      then true<br>
      else has_type_constructorT c (Type (c', Ts))<br>
  | has_type_constructorT _ _ = false</p>
<p>(* Presence of a given class *)<br>
fun has_class_thm S nthm = nthm<br>
  |&gt; snd<br>
  |&gt; (S |&gt; has_classT (subset op= o swap) |&gt; has_type_constraint_thm)</p>
<p>(* Presence of a given type constructor *)<br>
fun has_type_constructor_thm c nthm = nthm<br>
  |&gt; snd<br>
  |&gt; (has_type_constructorT c |&gt; has_type_constraint_thm )</p>
<p>fun sort_and_tc_filter c S = has_class_thm S /\ has_type_constructor_thm c</p>
<p>fun sort_or_tc_filter c S = has_class_thm S \/ has_type_constructor_thm c</p>
<p>›</p>
<p>(* Use case example: all theorems that contain the sort constraint<br>
topological_space or the type constructor filter *)</p>
<p>ML‹</p>
<p>val thms = find_theorems<br>
  @{theory}<br>
  (sort_or_tc_filter \&lt;^type_name&gt;‹filter› \&lt;^sort&gt;‹topological_space›)</p>
<p>val _ = thms |&gt; length |&gt; Int.toString |&gt; writeln;<br>
val _ = thms |&gt; map fst |&gt; map writeln;</p>
<p>›</p>
<p>(* Use case example: all theorems that contain the sort constraint<br>
topological_space and the type constructor filter *)</p>
<p>ML‹</p>
<p>val thms = find_theorems<br>
  @{theory}<br>
  (sort_and_tc_filter \&lt;^type_name&gt;‹filter› \&lt;^sort&gt;‹topological_space›)</p>
<p>val _ = thms |&gt; length |&gt; Int.toString |&gt; writeln;<br>
val _ = thms |&gt; map fst |&gt; map writeln;</p>
<p>›</p>
<p>Thank you</p>



<a name="294766161"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766161" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766161">(Aug 22 2022 at 21:00)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
On 21/11/2019 12:24, Lawrence Paulson wrote:</p>
<blockquote>
<p>The point is that you have to know what to search for. For example, “prod”, “mult” and “times” all yield different results because these tokens are used arbitrarily in the names of theorems. The objective here is to involve mathematical knowledge in search.</p>
</blockquote>
<p>Her point was that the search for a long list of example words yielded 0 <br>
results. I am merely pointing out that find_theorems works fine on these words <br>
if you use "name:".</p>
<p>Your point is of course important.</p>
<p>Tobias</p>
<blockquote>
<p>Larry</p>
<p>On 21 Nov 2019, at 06:14, Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt; wrote:</p>
<blockquote>
<p>When I use the Query panel with "Find Theorems" and type "name: product" it says "found 179 theorem(s)" and displays 40.</p>
</blockquote>
<p><a href="/user_uploads/14278/zIQ5PN8ibj5VTTh3Zo7Jt-3O/smime.p7s">smime.p7s</a></p>
</blockquote>



<a name="294766185"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766185" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766185">(Aug 22 2022 at 21:00)</a>:</h4>
<p>From: mailing-list anonymous &lt;<a href="mailto:mailing.list.anonymous@gmail.com">mailing.list.anonymous@gmail.com</a>&gt;<br>
Dear All,</p>
<p>I noticed a mistake in my previous post: (once again) I was trying to write<br>
an email within a fixed and very limited timeframe. Of course, I did not<br>
mean to use the term "logical connective" in the context of a function that<br>
combines two filters together. I believe that the term "combinator" would<br>
be more suitable.</p>
<p>Thank you</p>



<a name="294766206"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766206" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766206">(Aug 22 2022 at 21:01)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
Indeed, for several  of them using "name:" works, thank you for noticing <br>
, Tobias.</p>
<p>But when I search via the Query search box I still don't get any results <br>
for any of the words mentioned, including "product".</p>
<p>Using "name:" does give me results for some of them.</p>
<p>I still don't get any results using "name:"  for<br>
"Gauss", "Noether", "summation", "supremum", "infimum", "pythagorean", <br>
"multiplication".</p>
<p>In general it would be good if performance could get a bit improved.</p>
<p>Best wishes,<br>
Angeliki</p>



<a name="294766213"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766213" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766213">(Aug 22 2022 at 21:01)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
On 21/11/2019 21:11, Dr A. Koutsoukou-Argyraki wrote:</p>
<blockquote>
<p>Indeed, for several  of them using "name:" works, thank you for noticing , Tobias.</p>
<p>But when I search via the Query search box I still don't get any results for any <br>
of the words mentioned, including "product".</p>
</blockquote>
<p>Strange, because it does work for me. I just tried it again.</p>
<blockquote>
<p>Using "name:" does give me results for some of them.</p>
<p>I still don't get any results using "name:"  for<br>
"Gauss", "Noether", "summation", "supremum", "infimum", "pythagorean", <br>
"multiplication".</p>
</blockquote>
<p>I can confirm that for "Gauss" but the reason is simple: there is no theorem <br>
whose name contains "Gauss" in the Isabelle/HOL distribution. I suspect it is <br>
the same for your other words.</p>
<p>Tobias</p>
<blockquote>
<p>In general it would be good if performance could get a bit improved.</p>
<p>Best wishes,<br>
Angeliki</p>
<blockquote>
<p>Her point was that the search for a long list of example words yielded<br>
0 results. I am merely pointing out that find_theorems works fine on<br>
these words if you use "name:".</p>
<p>Your point is of course important.</p>
<p>Tobias</p>
<blockquote>
<p>Larry</p>
<p>On 21 Nov 2019, at 06:14, Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt; wrote:</p>
<blockquote>
<p>When I use the Query panel with "Find Theorems" and type "name: product" it <br>
says "found 179 theorem(s)" and displays 40.<br>
</p>
</blockquote>
</blockquote>
</blockquote>
<p><a href="/user_uploads/14278/M_gL8nKnOaSMofu0NWgM6Cht/smime.p7s">smime.p7s</a></p>
</blockquote>



<a name="294766224"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766224" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766224">(Aug 22 2022 at 21:01)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;</p>
<blockquote>
<blockquote>
<p>But when I search via the Query search box I still don't get any<br>
results for any of the words mentioned, including "product".</p>
</blockquote>
<p>Strange, because it does work for me. I just tried it again.</p>
</blockquote>
<p>Note that, of course, it also depends what context you are in (e.g. what<br>
theories you have loaded).</p>
<blockquote>
<p>I can confirm that for "Gauss" but the reason is simple: there is no<br>
theorem whose name contains "Gauss" in the Isabelle/HOL distribution.<br>
I suspect it is the same for your other words.</p>
</blockquote>
<p>That is not entirely true. There is something in HOL-Number_Theory, and<br>
if you count "gauss" as well there are some in HOL-Probability and even<br>
HOL itself.</p>
<p>The underlying problem, I suppose, is that the only way to attach any<br>
kind of meta-information to a theorem in a way that the current search<br>
can pick up is through its name. And the other problem is that it only<br>
works for things that you have loaded.</p>
<p>Manuel</p>



<a name="294766236"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766236" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766236">(Aug 22 2022 at 21:01)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
well, when searching for "Gauss" within the Computational Algebra <br>
library I would hope to get some facts related to the fundamental <br>
theorem of algebra,<br>
similarly  when searching for "Noether" within  the algebra<br>
library I would hope to get some facts related to rings etc. even if <br>
noetherian rings are not there.</p>
<p>What I'm trying to say is that it would be useful to get associated <br>
results with the search words, not just results that have the name  <br>
itself included.<br>
Also, e.g. "multiplication" ideally would give different kinds of <br>
multiplication, "infimum"/"supremum"/ ideally would give related facts <br>
etc.</p>
<p>So, what we are hoping to achieve in what we're developing with Yiannos <br>
is "associated" concepts<br>
in the search results for queries.</p>
<p>Best wishes,<br>
Angeliki</p>



<a name="294766239"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766239" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766239">(Aug 22 2022 at 21:01)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;</p>
<blockquote>
<p>The underlying problem, I suppose, is that the only way to attach any<br>
kind of meta-information to a theorem in a way that the current search<br>
can pick up is through its name.</p>
</blockquote>
<p>exactly! that is why I write in my other email that we are hoping for <br>
more associations even if the name is not explicit.</p>
<blockquote>
<p>And the other problem is that it only<br>
works for things that you have loaded.</p>
<p>yes, I'm aware of this, but luckily the user can control this (e.g.  by <br>
loading the whole library)<br>
Of course ideally the search would work even for unloaded things</p>
</blockquote>
<p>Best wishes,<br>
Angeliki</p>



<a name="294766251"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766251" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766251">(Aug 22 2022 at 21:01)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Yes, a theory called Gauss, but not a theorem.</p>
<p>I am merely pointing out that find_theorems meets its specification.</p>
<p>"What I'm trying to say is that it would be useful to get associated results <br>
with the search words, not just results that have the name  itself included."</p>
<p>I completely agree.</p>
<p>Tobias<br>
<a href="/user_uploads/14278/tqywokHge0Z_TSNae7whFuU1/smime.p7s">smime.p7s</a></p>



<a name="294766257"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766257" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766257">(Aug 22 2022 at 21:01)</a>:</h4>
<p>From: "Klein, Gerwin (Data61, Kensington NSW)" &lt;<a href="mailto:Gerwin.Klein@data61.csiro.au">Gerwin.Klein@data61.csiro.au</a>&gt;</p>
<blockquote>
<p>On 22 Nov 2019, at 08:16, Dr A. Koutsoukou-Argyraki &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt; wrote:</p>
<blockquote>
<p>The underlying problem, I suppose, is that the only way to attach any<br>
kind of meta-information to a theorem in a way that the current search<br>
can pick up is through its name.</p>
</blockquote>
<p>exactly! that is why I write in my other email that we are hoping for more associations even if the name is not explicit.</p>
</blockquote>
<p>Thanks for the explanations, I think I understand now what the goal is.</p>
<p>Having lived through the early days of web search before Google, I have some opinions on this. Compared to Google, the initial search engines were pretty much useless, mostly because they were based on string search only and returned too many results for the results you actually wanted to appear anywhere near the top. Many of them tried to fix the problem of returning irrelevant results by trying to match <em>more</em> things, i.e. make the search more fuzzy. That made it worse. Google mainly figured out how to rank search results such that popular pages (after their search rank measure) come first on the assumption that those will be the things you want. That worked spectacularly well. </p>
<p>For Isabelle, I also usually get too many results, not too few. That is not true in the case you describe, although the use cases so far seems to describe finding definition concepts, not theorems. There is a separate command for that (find_consts). Maybe they should be merged so the user doesn’t have to distinguish between them, but I think there is a lot more room for improvement for finding constants, possibly with the same basic ideas you have described. I.e. it’s worth looking into the concept separately.</p>
<p>It was an explicit design goal for find_theorems not to match fuzzily, because you can use pattern matching for that, and you want to be able to reduce the matches to what is interesting.</p>
<p>Maybe that was the wrong idea. Google in a sense has ruined structured search, because Google is so good at unstructured search that nobody is used to the idea any more, even where we have the structure and information that we don’t have on the web. I.e. the usual search interaction is to type in a few words, like you described, not terms or patterns. So maybe we should support that. If we find a good way of ranking results instead, it doesn’t matter so much if we return more results, as long as we return the one the user actually needs in the first 5 or 10.</p>
<p>So, the real problem to solve is ranking results. The other part (matching more from a search) is comparatively easy.</p>
<blockquote>
<blockquote>
<p>And the other problem is that it only<br>
works for things that you have loaded.<br>
yes, I'm aware of this, but luckily the user can control this (e.g.  by loading the whole library)<br>
Of course ideally the search would work even for unloaded things</p>
</blockquote>
</blockquote>
<p>I’d be keen on that feature :)</p>
<p>Cheers,<br>
Gerwin</p>



<a name="294766350"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766350" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766350">(Aug 22 2022 at 21:02)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
Dear Gerwin,</p>
<p>many thanks for your comments!<br>
On 2019-11-21 22:20, Klein, Gerwin (Data61, Kensington NSW) wrote:</p>
<blockquote>
<p>So, the real problem to solve is ranking results. The other part<br>
(matching more from a search) is comparatively easy.</p>
<p>yes, this is an excellent point of course, and we do not know how to <br>
solve the ranking problem. Combining a number of search words sometimes <br>
helps a lot, but it is not always enough.</p>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>And the other problem is that it only<br>
works for things that you have loaded.<br>
yes, I'm aware of this, but luckily the user can control this (e.g.  <br>
by loading the whole library)<br>
Of course ideally the search would work even for unloaded things</p>
</blockquote>
</blockquote>
<p>I’d be keen on that feature :)</p>
</blockquote>
<p>This will be possible with what Yiannos and I are trying<br>
out, as the search will be done offline on the entire library. This <br>
again may have the consequence of too many results, which brings back <br>
the ranking problem, so we have to see how to treat this.</p>
<p>Best,<br>
Angeliki</p>



<a name="294766351"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766351" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766351">(Aug 22 2022 at 21:02)</a>:</h4>
<p>From: Clemens Ballarin &lt;<a href="mailto:ballarin@in.tum.de">ballarin@in.tum.de</a>&gt;<br>
Proof objects reference theorems (or concepts), so you have a graph on <br>
which page rank could be applied ... on theorems, not web pages, though.</p>
<p>Clemens</p>



<a name="294766372"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20find%5C_theorems%20%3F/near/294766372" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20find.5C_theorems.20.3F.html#294766372">(Aug 22 2022 at 21:02)</a>:</h4>
<p>From: "mailing.list.anonymous" &lt;<a href="mailto:mailing.list.anonymous@gmail.com">mailing.list.anonymous@gmail.com</a>&gt;<br>
Dear All,</p>
<p>I hope that my previous comment <br>
(<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00068.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00068.html</a>) <br>
was not too out of place. I wrote and submitted it before the following <br>
posts (providing more background information with regard to the further <br>
development plans for the 'find_theorems' infrastructure) were submitted <br>
to the list: <br>
<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00076.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00076.html</a>, <br>
<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00081.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00081.html</a>. <br>
Please accept my apologies for my haste.</p>
<p>I have to admit that I also found the existing 'find_theorems' <br>
infrastructure slightly limiting and, most certainly, I am not the only <br>
one (e.g. see <br>
<a href="https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00036.html">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-November/msg00036.html</a>). <br>
At some point when I was working on the extension of Types-To-Sets, I <br>
did think quite seriously about introducing something similar to <br>
Isabelle/ML-based query language (most likely, building on the ideas <br>
drawn from the general query languages and the language of patterns for <br>
subterm selection) for searching the databases of theorems and constants <br>
as an independent user-level package . At the time, it was meant to be <br>
embedded in Isabelle/ML only (but designed in a way such that, <br>
potentially, it could be translated to Isar). Nevertheless, it seemed <br>
too much of a tangent at the time and I opted for a much simpler <br>
application-specific solution. Nevertheless, I was never entirely happy <br>
about the outcome and the thought of a possibility of introducing <br>
something better/more general (at least, for my own application) keeps <br>
nagging me.</p>
<p>I am very glad that there is an ongoing project towards the improvement <br>
of the infrastructure for searching for theorems/constants. Of course, <br>
having any capacity for doing unstructured search would be very useful <br>
for the end users of Isar. However, I am curious if, as part of this <br>
development, you are also considering providing anything akin to a <br>
generic and application specific query language with pattern matching (I <br>
guess, this would have to be aimed, primarily, at the structured <br>
search). The reason why I am asking this question is that this is still <br>
something that I am considering doing at some point in the future. Of <br>
course, I would only be happier if someone else developed something that <br>
provides the functionality that I seek. Otherwise, this will remain on <br>
my “To Do List”.</p>
<p>In summary, I would highly appreciate if you could let me know whether <br>
the plan for the work on the improvement of the functionality for <br>
searching for theorems/constants does include the development of a query <br>
language for structured search of theorems and constants with some form <br>
of pattern matching that goes beyond the capabilities of the existing <br>
implementation of find_theorems.</p>
<p>Thank you</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>