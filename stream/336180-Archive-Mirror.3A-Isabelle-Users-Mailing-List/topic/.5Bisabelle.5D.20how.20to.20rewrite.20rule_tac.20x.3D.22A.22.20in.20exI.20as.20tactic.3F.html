<html>
<head><meta charset="utf-8"><title>[isabelle] how to rewrite rule_tac x=&quot;A&quot; in exI as tactic? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html">[isabelle] how to rewrite rule_tac x=&quot;A&quot; in exI as tactic?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294150522"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294150522" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294150522">(Aug 18 2022 at 18:59)</a>:</h4>
<p>From: Nils Jähnig &lt;<a href="mailto:jaehnig@mi.fu-berlin.de">jaehnig@mi.fu-berlin.de</a>&gt;<br>
Hello,</p>
<p>I was hoping that someone of you could give me a little help with tactics.</p>
<p>I try to rewrite an apply-style proof into a tactic, for future<br>
automization.</p>
<p>my goal:<br>
rewrite apply(rule_tac x="A" in exI) as a tactic</p>
<p>my attempt:<br>
val tac = let x = @{term "A"} in rtac @{thm exI} 1 end</p>
<p>my problem:<br>
the bound variable x is represented in another way, i.e. I'm substituting<br>
nothing with the let-in command.</p>
<p>my questions:<br>
1) could somebody tell me, how it will work<br>
2) how can i display the internal representation of a theorem (on ML-level,<br>
so that i can see which term instead of x i need to substitute)</p>
<p>thanks in advance<br>
Nils</p>



<a name="294150531"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294150531" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294150531">(Aug 18 2022 at 18:59)</a>:</h4>
<p>From: Nils Jähnig &lt;<a href="mailto:jaehnig@mi.fu-berlin.de">jaehnig@mi.fu-berlin.de</a>&gt;<br>
i forgot "val" in my attempt<br>
val tac = let val x = @{term "A"} in rtac @{thm exI} 1 end</p>



<a name="294150574"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294150574" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294150574">(Aug 18 2022 at 18:59)</a>:</h4>
<p>From: Nils Jähnig &lt;<a href="mailto:jaehnig@mi.fu-berlin.de">jaehnig@mi.fu-berlin.de</a>&gt;<br>
this helped. thank you.</p>



<a name="294150591"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294150591" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294150591">(Aug 18 2022 at 18:59)</a>:</h4>
<p>From: Lukas Bulwahn &lt;<a href="mailto:bulwahn@in.tum.de">bulwahn@in.tum.de</a>&gt;<br>
Hello Nils,</p>
<p>I suggest you have a look at the tactics in subgoal.ML.<br>
Subgoal.FOCUS and friends should be helpful for your quest.<br>
Maybe the Isabelle Programming Tutorial (Cookbook) also tells you a <br>
little bit about those functions.</p>
<p>Lukas</p>



<a name="294150649"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294150649" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294150649">(Aug 18 2022 at 18:59)</a>:</h4>
<p>From: Jeremy Dawson &lt;<a href="mailto:jlcaadawson@netspeed.com.au">jlcaadawson@netspeed.com.au</a>&gt;<br>
Nils,</p>
<p>For this you want res_inst_tac, described in the Reference manual.<br>
Eg (res_inst_tac [("x", "A")] exI 1)</p>
<p>For your second question (not needed to answer the first) the ML <br>
function prop_of gives the content of a theorem as a term, which (by <br>
default) gets printed out in all its detail.</p>
<p>Jeremy</p>



<a name="294151545"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294151545" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294151545">(Aug 18 2022 at 19:04)</a>:</h4>
<p>From: Nils Jähnig &lt;<a href="mailto:jaehnig@mi.fu-berlin.de">jaehnig@mi.fu-berlin.de</a>&gt;<br>
Thank you.<br>
i will give the terms a try.</p>



<a name="294152103"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294152103" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294152103">(Aug 18 2022 at 19:08)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Appendix C of the "isar-ref" manual explains the correspondence of ML <br>
tactic expressions and Isar proof methods a little.  It was originally <br>
written to help converting old ML proof scripts, which are now obsolete <br>
and hardly ever encountered in recent years, but it also helps in the <br>
other direction.</p>
<p>The "implementation" manual explains further things about rules and <br>
tactics from the bottom up.  The important FOCUS combinator has already <br>
been mentioned -- it is based on Isar structuring principles in ML, and is <br>
able to get rid of most res_inst_tac applications in practice. For plain <br>
thm instantiation you mainly use Thm.instantiate, despite various later <br>
attempts (mostly outdated now) to produce more convenient alternatives.</p>
<p>Makarius</p>



<a name="294152171"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294152171" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294152171">(Aug 18 2022 at 19:08)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
This probably refers to Isabelle2005, which was the last version with all the <br>
old things from Isabelle98 etc. still present. The "Reference manual" is called <br>
"Old Reference manual" for quite some years already, and it explicitly says in <br>
current Isabelle2011-1:</p>
<p>Note: this document is part of the earlier Isabelle<br>
   documentation and is mostly outdated.  Fully obsolete parts of the<br>
   original text have already been removed.  The remaining material<br>
   covers some aspects that did not make it into the newer manuals yet.</p>
<p>The "newer manuals" refers mainly to the "Isabelle/Isar Reference Manual and <br>
"Isabelle/Isar Implementation Manual".</p>
<p>Makarius</p>



<a name="294152190"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294152190" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294152190">(Aug 18 2022 at 19:08)</a>:</h4>
<p>From: Jeremy Dawson &lt;<a href="mailto:jeremy@rsise.anu.edu.au">jeremy@rsise.anu.edu.au</a>&gt;<br>
Makarius wrote:<br>
Yes, I observe that now res_inst_tac requires a proof context argument, <br>
and some other changes as well. </p>
<p>Makarius is right in guessing that I'm referring to Isabelle2005 - it <br>
was when I started to convert all my proofs from Isabelle 2005 to 2007 I <br>
seemed to be spending a lot of time on it when I would rather be doing <br>
useful work.</p>
<p>I gather things have got worse since then, in terms of <br>
incompatibilities between versions of Isabelle and therefore the <br>
prospects of users making use of other users' work</p>
<p>Jeremy</p>



<a name="294152456"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294152456" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294152456">(Aug 18 2022 at 19:10)</a>:</h4>
<p>From: Nils Jähnig &lt;<a href="mailto:jaehnig@mi.fu-berlin.de">jaehnig@mi.fu-berlin.de</a>&gt;<br>
I did forget to reply.<br>
it helped. with the name i found the tactic and its syntax. the right way<br>
to use it is</p>
<p>res_inst_tac @{context} [ ( (x,0) , "A" ) ] exI 1</p>
<p>which was convenient for me, as i don't have a term, but a string, which is<br>
easier to manipulate, if you're not yet on good terms with terms.</p>
<p>Nils</p>



<a name="294152467"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20how%20to%20rewrite%20rule_tac%20x%3D%22A%22%20in%20exI%20as%20tactic%3F/near/294152467" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20how.20to.20rewrite.20rule_tac.20x.3D.22A.22.20in.20exI.20as.20tactic.3F.html#294152467">(Aug 18 2022 at 19:10)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Thu, 16 Feb 2012, Nils Jähnig wrote:</p>
<blockquote>
<p>I did forget to reply.<br>
it helped. with the name i found the tactic and its syntax. the right way<br>
to use it is</p>
<p>res_inst_tac @{context} [ ( (x,0) , "A" ) ] exI 1</p>
</blockquote>
<p>Is this going to be a generally abstracted tactic or proof method?  If so, <br>
the compile-time @{context} needs to be passed as runtime parameter, <br>
typically as ctxt : Proof.context.  You get the runtime value via the<br>
normal method_setup syntax wrapping.</p>
<p>The static @{context} only makes sense for one-shot applications as in the <br>
proof method called "tactic", or certain ML commands in Isar.</p>
<blockquote>
<p>which was convenient for me, as i don't have a term, but a string, which <br>
is easier to manipulate, if you're not yet on good terms with terms.</p>
</blockquote>
<p>Again, it depends on the situation.  Little can be done reliably with <br>
strings: accepting them from the end-user and passing them to certain <br>
other ML operations that expect such source input.</p>
<p>Composing "terms" in concrete syntax representation in general tactics <br>
breaks very quickly.  Moreover, if the official source position markup is <br>
preserved, as is done by default by Args.term parsers etc. for Isar <br>
methods, any attempt to paste together such formal source will be rejected <br>
quickly.  This is good because it makes such accidents immediately clear.</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>