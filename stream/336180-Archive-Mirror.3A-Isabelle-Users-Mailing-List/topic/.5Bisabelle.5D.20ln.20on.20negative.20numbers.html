<html>
<head><meta charset="utf-8"><title>[isabelle] ln on negative numbers · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html">[isabelle] ln on negative numbers</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294637618"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637618" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637618">(Aug 22 2022 at 09:33)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
Hallo,</p>
<p>I am currently in the process of writing some automation for Landau <br>
symbols. One of the problems that I currently have is that I would like <br>
to rewrite things like</p>
<p>O(λx. (c*x) powr p)</p>
<p>to</p>
<p>O(λx. c powr p * x powr p)</p>
<p>However, for c &lt; 0 this is simply not true (well, morally not true). If <br>
c &lt; 0, and w.l.o.g. x &gt; 0, we have</p>
<p>c powr p = (c*x) powr p = exp (p * THE u. False)</p>
<p>I therefore suggest to define the real logarithm as "ln x = (if x ≤ 0 <br>
then 0 else THE u. exp u = x)". The practical implications of this <br>
should be small, and it would allow stating a lot of lemmas involving <br>
"powr" in a much simpler form and allow transformations such as the one <br>
above.</p>
<p>Cheers,</p>
<p>Manuel</p>



<a name="294637637"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637637" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637637">(Aug 22 2022 at 09:33)</a>:</h4>
<p>From: Johannes Hölzl &lt;<a href="mailto:hoelzl@in.tum.de">hoelzl@in.tum.de</a>&gt;<br>
I don't object to give ln a known value for negative numbers.</p>
<p>But I also think you need to add a carrier set (like a O_on A f) to your<br>
O-notation! Many definitions in Isabelle/HOL nowadays have it.<br>
Btw: if you integrate filters into your O-notation this is not necessary<br>
any more, as this is taken care of by the "at _ within _" filter. </p>
<ul>
<li>Johannes</li>
</ul>



<a name="294637652"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637652" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637652">(Aug 22 2022 at 09:33)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
I have no idea what you mean by a carrier set. The definition of O is<br>
currently</p>
<p>O(g) = {f. (∃c&gt;0. eventually (λx. ¦f x¦ ≤ c * ¦g x¦) at_top)}</p>
<p>I don't see how that could be augmented by a carrier set in a useful way.</p>
<p>A generalisation to other filters than at_top would be straightforward,<br>
but I decided not to do that quite yet because I don't need it yet.</p>
<p>Manuel</p>



<a name="294637660"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637660" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637660">(Aug 22 2022 at 09:33)</a>:</h4>
<p>From: Johannes Hölzl &lt;<a href="mailto:hoelzl@in.tum.de">hoelzl@in.tum.de</a>&gt;<br>
Am Mittwoch, den 29.04.2015, 19:38 +0200 schrieb Manuel Eberl:</p>
<blockquote>
<p>I have no idea what you mean by a carrier set.</p>
</blockquote>
<p>For O(g::'a =&gt; 'b) a set-based restriction on the type 'a.</p>
<blockquote>
<p>The definition of O is currently</p>
</blockquote>
<blockquote>
<p>`O(g) = {f. (∃c&gt;0. eventually (λx. ¦f x¦ ≤ c * ¦g x¦) at_top)}</p>
<p>I don't see how that could be augmented by a carrier set in a useful way.</p>
</blockquote>
<p>Ah I see; I thought the problem was not only related to c but also to x.</p>
<blockquote>
<p>A generalisation to other filters than at_top would be straightforward,<br>
but I decided not to do that quite yet because I don't need it yet.</p>
</blockquote>
<p>Yup.</p>
<ul>
<li>Johannes</li>
</ul>
<blockquote>
<p>On 29/04/15 19:25, Johannes Hölzl wrote:</p>
<blockquote>
<p>I don't object to give ln a known value for negative numbers.</p>
<p>But I also think you need to add a carrier set (like a O_on A f) to your<br>
O-notation! Many definitions in Isabelle/HOL nowadays have it.<br>
Btw: if you integrate filters into your O-notation this is not necessary<br>
any more, as this is taken care of by the "at _ within _" filter. </p>
<ul>
<li>Johannes<br>
</li>
</ul>
</blockquote>
<p>Am Mittwoch, den 29.04.2015, 16:02 +0200 schrieb Manuel Eberl:</p>
<blockquote>
<blockquote>
<p>Hallo,</p>
<p>I am currently in the process of writing some automation for Landau <br>
symbols. One of the problems that I currently have is that I would like <br>
to rewrite things like</p>
<p>O(λx. (c*x) powr p)</p>
<p>to</p>
<p>O(λx. c powr p * x powr p)</p>
<p>However, for c &lt; 0 this is simply not true (well, morally not true). If <br>
c &lt; 0, and w.l.o.g. x &gt; 0, we have</p>
<p>c powr p = (c*x) powr p = exp (p * THE u. False)</p>
<p>I therefore suggest to define the real logarithm as "ln x = (if x ≤ 0 <br>
then 0 else THE u. exp u = x)". The practical implications of this <br>
should be small, and it would allow stating a lot of lemmas involving <br>
"powr" in a much simpler form and allow transformations such as the one <br>
above.</p>
<p>Cheers,</p>
<p>Manuel<br>
</p>
</blockquote>
</blockquote>
</blockquote>



<a name="294637672"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637672" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637672">(Aug 22 2022 at 09:33)</a>:</h4>
<p>From: Larry Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
For real r&gt;0, the complex log (Ln) satisfies</p>
<p>Ln(-r) = ln(r) + pi*I</p>
<p>So I don’t like extending the domain of ln using 0, as opposed to ln(|r|). This would extend the validity of</p>
<p>0 &lt; ?z ⟹ Ln (complex_of_real ?z) = complex_of_real (ln ?z)</p>
<p>There’s still the question of ln(0). Note that Ln(z) is defined for all complex numbers except when z=0.</p>
<p>Larry Paulson</p>



<a name="294637689"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637689" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637689">(Aug 22 2022 at 09:33)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
That would probably also solve my problem.</p>
<p>As long as "(a*b) powr c = a powr c * b powr c" holds unconditionally, I <br>
am happy. And if I am not mistaken, that is the case iff "ln (a*b) = ln <br>
a + ln b" holds for all non-zero a,b.</p>
<p>Cheers,</p>
<p>Manuel</p>



<a name="294637760"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637760" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637760">(Aug 22 2022 at 09:34)</a>:</h4>
<p>From: Larry Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
This identity holds for the real parts. For the imaginary parts, there is potentially a difference of 2<em>pi</em>i due to the branch cut.</p>
<p>Larry Paulson</p>



<a name="294637766"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20ln%20on%20negative%20numbers/near/294637766" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20ln.20on.20negative.20numbers.html#294637766">(Aug 22 2022 at 09:34)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
Yes, I meant for all non-zero real x, of course. That would be quite<br>
sufficient.</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>