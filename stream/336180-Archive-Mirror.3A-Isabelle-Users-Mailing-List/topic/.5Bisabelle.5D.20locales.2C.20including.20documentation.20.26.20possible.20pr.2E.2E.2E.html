<html>
<head><meta charset="utf-8"><title>[isabelle] locales, including documentation &amp; possible pr... · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20locales.2C.20including.20documentation.20.26.20possible.20pr.2E.2E.2E.html">[isabelle] locales, including documentation &amp; possible pr...</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294160595"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20locales%2C%20including%20documentation%20%26%20possible%20pr.../near/294160595" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20locales.2C.20including.20documentation.20.26.20possible.20pr.2E.2E.2E.html#294160595">(Aug 18 2022 at 20:03)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:huffman@in.tum.de">huffman@in.tum.de</a>&gt;<br>
On Fri, May 4, 2012 at 6:01 AM, Bill Richter<br>
&lt;<a href="mailto:richter@math.northwestern.edu">richter@math.northwestern.edu</a>&gt; wrote:</p>
<blockquote>
<p>My axiomatic geometry quest is now entirely about locales, and I have<br>
a documentation bug.  The syntax looks incorrect in both locales.pdf<br>
and p 40 of the Isabelle/Isar Reference Manual, which has a nice group<br>
theory example, from which I learned something about proofs.</p>
<p>So I created the file Group1.thy below and had a lot of fun playing<br>
with it in jedit.  First notice all the "s and 's I inserted.  There<br>
are none of p 40, or in locales.pdf, and wouldn't that be great if we<br>
didn't need them.  I figured that out the <code>"'s &amp; </code>''s easily by trial<br>
and error, but It took me a long time to realize I had to put the<br>
final period after the `"'.</p>
</blockquote>
<p>I agree that the omission of quotation marks in our pdf documentation<br>
is misleading and confusing, especially for new users who naturally<br>
want to copy examples manually from the pdf into their theory files.</p>
<p>As a workaround, it may be useful to locate the source theories for<br>
the pdfs, and copy the definitions directly. (Look inside the doc-src<br>
directory in the distribution.)</p>
<p>I can happily report that the new "Programming and Proving in<br>
Isabelle/HOL" tutorial in the upcoming Isabelle2012 release does show<br>
quotation marks in the examples.</p>
<blockquote>
<p>I didn't know how to make the -1 exponent<br>
in jedit, so I changed x^{-1} to sqrt x.  Can someone tell me how?</p>
</blockquote>
<p>See appendix B of the Isabelle/Isar Reference Manual for a list of<br>
predefined symbols.</p>
<blockquote>
<p>And here's another newbie question: If you have a 4-ary relation C,<br>
how do you tell Isabelle you want to write it as a b &lt;\equiv&gt; c d?<br>
That's what Tim does, but where is that explained?</p>
</blockquote>
<p>To introduce syntax like this, you will need to use the "notation"<br>
command with a mixfix declaration. (Search for "mixfix" in the<br>
Isabelle tutorial and old reference manual.)</p>
<ul>
<li>Brian</li>
</ul>



<a name="294160622"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20locales%2C%20including%20documentation%20%26%20possible%20pr.../near/294160622" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20locales.2C.20including.20documentation.20.26.20possible.20pr.2E.2E.2E.html#294160622">(Aug 18 2022 at 20:03)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
On Fri, 4 May 2012, Brian Huffman wrote:</p>
<blockquote>
<p>I agree that the omission of quotation marks in our pdf documentation is <br>
misleading and confusing, especially for new users who naturally want to <br>
copy examples manually from the pdf into their theory files.</p>
</blockquote>
<p>This is an old problem, but showing the quotes alone does not help. Most <br>
new users try to copy-paste mechanically, not manually, and then get <br>
disappointed by the approximative result.  Quotes, underscores, special <br>
symbols etc. may all appear differently depending on the underlying LaTeX <br>
styles of the documents in question.</p>
<blockquote>
<p>I can happily report that the new "Programming and Proving in <br>
Isabelle/HOL" tutorial in the upcoming Isabelle2012 release does show <br>
quotation marks in the examples.</p>
</blockquote>
<p>Copy paste fails here, as anticipated.  E.g. page 8, middle:</p>
<p>fun app :: "′a list ⇒ ′a list ⇒ ′a list" where "app Nil ys = ys" |<br>
     "app (Cons x xs) ys = Cons x (app xs ys)"</p>
<p>The single quotes are not the ASCII ones, so Isabelle will choke on that <br>
input.  Such things can be tweaking in the LaTeX setup, but it is a <br>
never-ending story.</p>
<p>I've once tried a systematic approach where the original Isabelle source <br>
is associated with the visual typesetting (whatever that is), and it <br>
almost worked.  Unfortunately some PDF browsers had problems with this <br>
addition to the PDF format from a few years ago, especially Mac OS Preview <br>
and Windows Acrobat Reader.  Evince/Poppler on Linux was the only platform <br>
that worked reliably when I did the experiment 1-2 years ago.</p>
<p>Makarius</p>



<a name="294160804"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20locales%2C%20including%20documentation%20%26%20possible%20pr.../near/294160804" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20locales.2C.20including.20documentation.20.26.20possible.20pr.2E.2E.2E.html#294160804">(Aug 18 2022 at 20:04)</a>:</h4>
<p>From: Bill Richter &lt;<a href="mailto:richter@math.northwestern.edu">richter@math.northwestern.edu</a>&gt;<br>
Brian, I read ref.pdf p 30--32 on misfixes, but I could not figure out<br>
how to write (in my code below) <br>
C a b c d as a b \&lt;equiv&gt; c d.  <br>
I seem to have a priority problem.  I'm using the priority stuff <br>
ps = [99,99,99,99] and p = 70, and I've tried lots of others.</p>
<p>My "\&lt;forall&gt; a b . a b \&lt;equiv&gt; b a" gets me the error, a<br>
do-not-enter on locale, and when I click on locale, I see in the<br>
output window<br>
Ambiguous input.  2 types are correct:<br>
(\&lt;forall&gt; (a b) . (a b \&lt;equiv&gt; b a))<br>
((\&lt;forall&gt; (a b) . (a b)) \&lt;equiv&gt; (b a))<br>
If I change that to "a b \&lt;equiv&gt; b a", and then I get no error, but<br>
the output window reads<br>
Ambiguous input produces 2 parse trees: [which seem to be]<br>
(C a b b a)<br>
(C a b) (C b a)<br>
Fortunately, only one is correct, <br>
but you may still want to disambiguate your grammar or input.<br>
There's more of the same for every \&lt;equiv&gt; expression in my axioms.</p>
<p>II tried to write a simple proof following p 40--42 of isar-ref.pdf,<br>
but it didn't work. I get do-not-enter signs on every line of the<br>
proof.  The following commented proof is no better.</p>
<p>----- Tarski2.thy Tarski2</p>
<p>theory Tarski2<br>
imports Complex_Main <br>
begin<br>
locale tarskifirst7 =<br>
 fixes C :: "'a \&lt;Rightarrow&gt; 'a \&lt;Rightarrow&gt; 'a \&lt;Rightarrow&gt; 'a \&lt;Rightarrow&gt; bool" ("_ _  \&lt;equiv&gt; _ _" [99,99,99,99] 70)<br>
 fixes B :: "'a \&lt;Rightarrow&gt; 'a \&lt;Rightarrow&gt; 'a \&lt;Rightarrow&gt; bool"<br>
(*<br>
  assumes A1: "\&lt;forall&gt; a b . a b \&lt;equiv&gt; b a"<br>
*)<br>
  assumes A1: "a b \&lt;equiv&gt; b a"<br>
   and A2: "a b \&lt;equiv&gt; p q \&lt;and&gt; a b \&lt;equiv&gt; r s --&gt; p q \&lt;equiv&gt; r s"<br>
   and A3: "a b \&lt;equiv&gt; c c ==&gt; a = b"<br>
   and A4: "\&lt;exists&gt; x. B q a x \&lt;and&gt; a x \&lt;equiv&gt; b c"<br>
   and A5: "a \&lt;noteq&gt; b \&lt;and&gt; B a b x \&lt;and&gt; B a' b' x' \&lt;and&gt; b x \&lt;equiv&gt; b' x' \&lt;and&gt; <br>
              a b \&lt;equiv&gt; a' b' \&lt;and&gt; a c \&lt;equiv&gt; a' c' \&lt;and&gt; b c \&lt;equiv&gt; b' c' --&gt; c x \&lt;equiv&gt; c' x'"<br>
   and A6: "B a b a ==&gt; a = b"<br>
   and A7: "B a p c \&lt;and&gt; B b q c ==&gt; (\&lt;exists&gt; x. B p x b \&lt;and&gt; B q x a)"</p>
<p>context tarskifirst7<br>
begin</p>
<p>theorem EquivReflexive: "a b \&lt;equiv&gt; a b"</p>
<p>proof -<br>
     have "b a \&lt;equiv&gt; a b" by (rule A1)<br>
     have "b a \&lt;equiv&gt; a b" by (rule A1)<br>
     thus "a b \&lt;equiv&gt; a b" by (rule A2)<br>
     qed<br>
   end</p>
<p>(*<br>
   proof -<br>
     have "b a \&lt;equiv&gt; a b" by (rule A1 [symmetric])<br>
     have "b a \&lt;equiv&gt; a b" by (rule A1 [symmetric])<br>
     also have "a b \&lt;equiv&gt; a b" by (rule A2 [symmetric])<br>
     finally show "a b \&lt;equiv&gt; a b"<br>
     qed<br>
   end<br>
*)</p>
<p>(* end *)<br>
(*<br>
 lemma A1: "C a b b a"<br>
  by (simp add: A1)</p>
<p>lemma A2: "C a b p q \&lt;and&gt; C a b r s ==&gt; C p q r s"<br>
  by (simp add: A2)</p>
<p>lemma A3 : a b \&lt;equiv&gt; c c =\&lt;Rightarrow&gt; a = b<br>
  by (simp add: A3)</p>
<p>theorem th2-1: a b \&lt;equiv&gt; a b<br>
proof −<br>
  from A2 [of b a a b a b] and A1 [of b a] show ?thesis by simp<br>
qed</p>
<p>theorem th2-2: a b \&lt;equiv&gt; c d =\&lt;Rightarrow&gt; c d \&lt;equiv&gt; a b<br>
proof −<br>
  assume a b \&lt;equiv&gt; c d<br>
  with A2 [of a b c d a b] and th2-1 [of a b] show ?thesis by simp<br>
qed</p>
<p>theorem th2-3: [[a b \&lt;equiv&gt; c d; c d \&lt;equiv&gt; e f ]] =\&lt;Rightarrow&gt; a b \&lt;equiv&gt; e f<br>
proof −<br>
  assume a b \&lt;equiv&gt; c d<br>
  with th2-2 [of a b c d] have c d \&lt;equiv&gt; a b by simp<br>
  assume c d \&lt;equiv&gt; e f<br>
  with A2 [of c d a b e f ] and c d \&lt;equiv&gt; a b show ?thesis by simp<br>
qed</p>
<p>theorem th2-4: a b \&lt;equiv&gt; c d =\&lt;Rightarrow&gt; b a \&lt;equiv&gt; c d<br>
proof −<br>
  assume a b \&lt;equiv&gt; c d<br>
  with th2-3 [of b a a b c d] and A1 [of b a] show ?thesis by simp<br>
qed</p>
<p>theorem th2-5: a b \&lt;equiv&gt; c d =\&lt;Rightarrow&gt; a b \&lt;equiv&gt; d c<br>
proof −<br>
  assume a b \&lt;equiv&gt; c d<br>
  with th2-3 [of a b c d d c] and A1 [of c d] show ?thesis by simp<br>
qed</p>
<p>definition is-segment :: 'p set \&lt;Rightarrow&gt; bool where<br>
is-segment X \&lt;exists&gt; x y. X = {x, y}<br>
definition segments :: p set set where<br>
segments = {X. is-segment X}<br>
definition SC :: p set \&lt;Rightarrow&gt; p set \&lt;Rightarrow&gt; bool where<br>
SC X Y \&lt;exists&gt; w x y z. X = {w, x} \&lt;and&gt; Y = {y, z} \&lt;and&gt; w x \&lt;equiv&gt; y z</p>
<p>*)</p>



<a name="294160822"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20locales%2C%20including%20documentation%20%26%20possible%20pr.../near/294160822" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20locales.2C.20including.20documentation.20.26.20possible.20pr.2E.2E.2E.html#294160822">(Aug 18 2022 at 20:04)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:huffman@in.tum.de">huffman@in.tum.de</a>&gt;<br>
On Sun, May 6, 2012 at 1:01 AM, Bill Richter<br>
&lt;<a href="mailto:richter@math.northwestern.edu">richter@math.northwestern.edu</a>&gt; wrote:</p>
<blockquote>
<p>Brian, I read ref.pdf p 30--32 on misfixes, but I could not figure out<br>
how to write (in my code below)<br>
C a b c d as a b \&lt;equiv&gt; c d.<br>
I seem to have a priority problem.  I'm using the priority stuff<br>
ps = [99,99,99,99] and p = 70, and I've tried lots of others.</p>
<p>My "\&lt;forall&gt; a b . a b \&lt;equiv&gt; b a" gets me the error, a<br>
do-not-enter on locale, and when I click on locale, I see in the<br>
output window<br>
Ambiguous input.  2 types are correct:<br>
(\&lt;forall&gt; (a b) . (a b \&lt;equiv&gt; b a))<br>
((\&lt;forall&gt; (a b) . (a b)) \&lt;equiv&gt; (b a))</p>
</blockquote>
<p>Your syntax is ambiguous because \&lt;equiv&gt; is also used to write<br>
meta-equality (i.e. definitional equality) in Isabelle. "a b \&lt;equiv&gt;<br>
c d" looks like an equality between two function applications.</p>
<p>You will have a much easier time avoiding ambiguous parse<br>
warnings/errors if you simply use a different symbol, such as \&lt;cong&gt;.</p>
<p>fixes C :: "'a =&gt; 'a =&gt; 'a =&gt; 'a =&gt; bool" ("_ _ \&lt;cong&gt; _ _" [99,99,99,99] 70)</p>
<p>The other potential source of ambiguous parsing here is when one of<br>
the arguments to C is a function application:</p>
<p>term "(f x) b \&lt;cong&gt; c d"</p>
<p>This parses fine, but it prints out as "f x b \&lt;cong&gt; c d". If you try<br>
to parse it again without the parentheses, you get an ambiguity.</p>
<p>To fix this, I would bump up the argument precedences to the maximum<br>
(1000), which is higher than function application. This makes it so<br>
every argument to C must be either a variable or a parenthesized<br>
expression (which will also be the case for the pretty-printer's<br>
output).</p>
<p>fixes C :: "'a =&gt; 'a =&gt; 'a =&gt; 'a =&gt; bool" ("_ _ \&lt;cong&gt; _ _"<br>
[1000,1000,1000,1000] 70)</p>
<blockquote>
<p>II tried to write a simple proof following p 40--42 of isar-ref.pdf,<br>
but it didn't work. I get do-not-enter signs on every line of the<br>
proof.  The following commented proof is no better.<br>
[...]<br>
 assumes A1: "a b \&lt;equiv&gt; b a"<br>
  and A2: "a b \&lt;equiv&gt; p q \&lt;and&gt; a b \&lt;equiv&gt; r s --&gt; p q \&lt;equiv&gt; r s"</p>
</blockquote>
<p>Rules stated in terms of object logic connectives, like "P \&lt;and&gt; Q<br>
--&gt; R", aren't very useful with the "rule" method. You had better<br>
state rules using "==&gt;", like<br>
"P ==&gt; Q ==&gt; R" instead.</p>
<p>Hope this helps,</p>
<ul>
<li>Brian</li>
</ul>



<a name="294160840"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20locales%2C%20including%20documentation%20%26%20possible%20pr.../near/294160840" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20locales.2C.20including.20documentation.20.26.20possible.20pr.2E.2E.2E.html#294160840">(Aug 18 2022 at 20:04)</a>:</h4>
<p>From: Bill Richter &lt;<a href="mailto:richter@math.northwestern.edu">richter@math.northwestern.edu</a>&gt;<br>
Thanks, Brian, that's very helpful!  I was really confused by the<br>
\equiv biz.  Can you explain two more things:</p>
<p>what do the 1000 priorities here even mean: [1000,1000,1000,1000] 70?<br>
If we right a b \cong c d, I want a &amp; b to be bound really tightly<br>
together, so 1000 sounds like a good number, and I want the whole<br>
expression to be bound tighter than say and or implies, so 70 is a<br>
good number.  But then I'd write it as [1000, 70, 1000].  </p>
<p>Rules stated in terms of object logic connectives, like "P \&lt;and&gt; Q<br>
   --&gt; R", aren't very useful with the "rule" method. You had better<br>
   state rules using "==&gt;", like<br>
   "P ==&gt; Q ==&gt; R" instead.</p>
<p>I've been puzzled for some time by the preference (especially in<br>
Julien's Tarski geometry Coq code) by folks writing</p>
<p>P ==&gt; Q ==&gt; R ==&gt; S ==&gt; T ==&gt; U <br>
instead of the more sensible <br>
P &amp; Q &amp; R &amp; S &amp; T ==&gt; U .</p>
<p>And you're saying there's a good reason for this!  Great!  Can you<br>
explain why the first approach works better with rules?</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>