<html>
<head><meta charset="utf-8"><title>[isabelle] monadic function definition · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html">[isabelle] monadic function definition</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294287981"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20monadic%20function%20definition/near/294287981" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html#294287981">(Aug 19 2022 at 15:21)</a>:</h4>
<p>From: Gergely Buday &lt;<a href="mailto:gbuday@gmail.com">gbuday@gmail.com</a>&gt;<br>
Hi,</p>
<p>I have found</p>
<p>partial_function (option)<br>
  collatz :: "nat ⇒ nat list option"<br>
where<br>
  "collatz n =<br>
  (if n ≤ 1 then Some [n]<br>
   else if even n<br>
     then do { ns ← collatz (n div 2); Some (n # ns) }<br>
     else do { ns ← collatz (3 * n + 1);  Some (n # ns)})"</p>
<p>in src/HOL/Ex/Fundefs.thy</p>
<p>Where can I find a description of such monadic definitions?</p>
<p>I did not find it in the Isar reference and what I have found was the<br>
early history of it:</p>
<p><a href="https://lists.cam.ac.uk/mailman/htdig/cl-isabelle-users/2010-May/msg00055.html">https://lists.cam.ac.uk/mailman/htdig/cl-isabelle-users/2010-May/msg00055.html</a></p>
<ul>
<li>Gergely</li>
</ul>



<a name="294287997"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20monadic%20function%20definition/near/294287997" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html#294287997">(Aug 19 2022 at 15:21)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Hi Gergely,</p>
<p>Definitions of recursive functions in a monad with execptions (via partial_function) is <br>
described in Alex Krauss' paper at PAR 2010 available from</p>
<p><a href="http://www4.in.tum.de/~krauss/">http://www4.in.tum.de/~krauss/</a></p>
<p>Do-notation has been presented at the Isabelle Developer Workshop in 2010 by Christian <br>
Sternagel. His slides are available at:</p>
<p><a href="http://isabelle.in.tum.de/nominal/activities/idw10/idw.html">http://isabelle.in.tum.de/nominal/activities/idw10/idw.html</a></p>
<p>Best,<br>
Andreas</p>



<a name="294288013"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20monadic%20function%20definition/near/294288013" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html#294288013">(Aug 19 2022 at 15:21)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Hi Gergely,</p>
<p>note that do-notation itself is just syntactic sugar (as, e.g., also in <br>
Haskell). So actually there is nothing important about it ;), it just <br>
makes some terms "easier" or maybe more concise to write down.</p>
<p>And maybe obvious, but I'll say it anyway: "partial_function" and <br>
do-notation are completely orthogonal.</p>
<p>cheers</p>
<p>chris</p>



<a name="294288036"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20monadic%20function%20definition/near/294288036" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html#294288036">(Aug 19 2022 at 15:21)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Sorry, I wanted to point at</p>
<p><a href="http://isabelle.in.tum.de/website-Isabelle2014-RC3/dist/library/HOL/HOL-Library/Monad_Syntax.html">http://isabelle.in.tum.de/website-Isabelle2014-RC3/dist/library/HOL/HOL-Library/Monad_Syntax.html</a></p>
<p>in my last email, but forgot it. There you can see the actual <br>
translation (keyword "translations"), which tells you everything there <br>
is to know about do-notation (using itself the more basic adhoc <br>
overloading mechanism).</p>
<p>cheers</p>
<p>chris</p>



<a name="294288076"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20monadic%20function%20definition/near/294288076" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html#294288076">(Aug 19 2022 at 15:22)</a>:</h4>
<p>From: Gergely Buday &lt;<a href="mailto:gbuday@gmail.com">gbuday@gmail.com</a>&gt;<br>
Christian Sternagel wrote:</p>
<blockquote>
<p>And maybe obvious, but I'll say it anyway: "partial_function" and<br>
do-notation are completely orthogonal.</p>
</blockquote>
<p>Now it is obvious :-)</p>
<p>Where can I find some description of the partial_function definition<br>
mechanism? There is a page in the Isar reference manual but that is<br>
not very much detailed.</p>
<ul>
<li>Gergely</li>
</ul>



<a name="294288154"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20monadic%20function%20definition/near/294288154" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html#294288154">(Aug 19 2022 at 15:22)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Dear Gergely,</p>
<p>As I wrote in my last post, Alex Krauss' paper about partial_function describes it. <br>
Another application can be found in Johannes' and my ITP paper this year:</p>
<p><a href="http://www.infsec.ethz.ch/people/andreloc/publications/lochbihler14itp.pdf">http://www.infsec.ethz.ch/people/andreloc/publications/lochbihler14itp.pdf</a></p>
<p>Best,<br>
Andreas</p>



<a name="294289860"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20monadic%20function%20definition/near/294289860" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20monadic.20function.20definition.html#294289860">(Aug 19 2022 at 15:31)</a>:</h4>
<p>From: René Thiemann &lt;<a href="mailto:rene.thiemann@uibk.ac.at">rene.thiemann@uibk.ac.at</a>&gt;<br>
Dear Gergely,</p>
<p>there also is the AFP-entry Partial-Function-MR which allows you to define<br>
sets of mutual recursive partial functions (which is not possible using the <br>
original partial-function command). In the entry you also find further <br>
examples of partial functions, including Collatz and a potentially <br>
non-terminating evaluator for (a kind of) mu-recursive expressions.</p>
<p>Best,<br>
René</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>