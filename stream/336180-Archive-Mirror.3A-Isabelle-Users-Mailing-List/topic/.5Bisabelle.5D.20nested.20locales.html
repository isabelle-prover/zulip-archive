<html>
<head><meta charset="utf-8"><title>[isabelle] nested locales · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20nested.20locales.html">[isabelle] nested locales</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294646399"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20nested%20locales/near/294646399" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20nested.20locales.html#294646399">(Aug 22 2022 at 10:30)</a>:</h4>
<p>From: Viorel Preoteasa &lt;<a href="mailto:viorel.preoteasa@aalto.fi">viorel.preoteasa@aalto.fi</a>&gt;<br>
Hello,</p>
<p>I am interested in building a new outer syntax in Isabelle to support<br>
the following kind of construction within a theory:</p>
<p>program Search<br>
begin<br>
   situation Init<br>
      fixes n::nat and a::"nat =&gt; 'a" and x :: 'a</p>
<p>situation Loop = Init +<br>
     fixes i::nat<br>
     assumes "i &lt;= n"<br>
     assumes "j &lt; i ==&gt; a i \not= x"</p>
<p>situation Found = Loop +<br>
     assumes "i &lt; n"<br>
     assumes "a i = x"</p>
<p>situation NotFound = Loop +<br>
     assumes "i = n"</p>
<p>context Loop:<br>
   begin<br>
     transition to_Loop:<br>
       assumes grd1: "i &lt; n"<br>
       assumes grd2: "a i \not= x"<br>
       assumes inc: "i' = i + 1"<br>
       shows Loop n a i'<br>
       proof ...<br>
   end</p>
<p>... more transitions<br>
end</p>
<p>The situations are variations of the existing Isabelle locales, with<br>
some additional syntax to distinguish between different kind<br>
of variables.</p>
<p>The program environment should support declaring<br>
situations (locales), definitions, theorems, possibly also<br>
variables. So in a way the program environment should<br>
be also almost like a locale.</p>
<p>The information within a program environment will be<br>
used to automatically generate a collection of<br>
mutually recursive functions implementing the program<br>
(in this case the program searches for an element<br>
in an array).</p>
<p>I have been able to play with the Isabelle outer syntax,<br>
but I could not figure out how to create a nested environment<br>
as described above.</p>
<p>Any hints on where I should look to get started would be<br>
appreciated.</p>
<p>The underlying construction of this approach is explained in</p>
<p>Preoteasa, Back, Eriksson. Verification and code generation for<br>
invariant diagrams in Isabelle. Journal of Logical and Algebraic<br>
Methods in Programming. Volume 84, Issue 1.</p>
<p>Best regards,</p>
<p>Viorel Preoteasa</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>