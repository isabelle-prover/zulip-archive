<html>
<head><meta charset="utf-8"><title>[isabelle] nested multiset ordering? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20nested.20multiset.20ordering.3F.html">[isabelle] nested multiset ordering?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294307005"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20nested%20multiset%20ordering%3F/near/294307005" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20nested.20multiset.20ordering.3F.html#294307005">(Aug 19 2022 at 15:57)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I wonder whether anybody is aware of a formalisation (in any system) of the nested multiset ordering, as described in the classic paper "Proving Termination With Multiset Orderings”?</p>
<p><a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.145.8728">http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.145.8728</a></p>
<p>There is, I believe, a connection with the ordinal epsilon-0.</p>
<p>Larry Paulson</p>



<a name="294307016"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20nested%20multiset%20ordering%3F/near/294307016" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20nested.20multiset.20ordering.3F.html#294307016">(Aug 19 2022 at 15:57)</a>:</h4>
<p>From: Ramana Kumar &lt;<a href="mailto:rk436@cam.ac.uk">rk436@cam.ac.uk</a>&gt;<br>
I've only glanced at the paper briefly, so I'm probably wrong, but the<br>
multi-set ordering in HOL4 (<br>
<a href="https://github.com/HOL-Theorem-Prover/HOL/blob/master/src/bag/bagScript.sml#L2224">https://github.com/HOL-Theorem-Prover/HOL/blob/master/src/bag/bagScript.sml#L2224</a>)<br>
looks similar. Then again, the comment there says it was "taken from [an]<br>
Isabelle development", so is probably something you have seen before. In<br>
particular, perhaps it doesn't cover the nested version you asked for.</p>



<a name="294307023"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20nested%20multiset%20ordering%3F/near/294307023" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20nested.20multiset.20ordering.3F.html#294307023">(Aug 19 2022 at 15:57)</a>:</h4>
<p>From: Dmitriy Traytel &lt;<a href="mailto:traytel@in.tum.de">traytel@in.tum.de</a>&gt;<br>
Hi Larry,</p>
<p>I don't have an answer to your question, but two related remarks.</p>
<p>1) If you deal with nested multisets, a good way to define those is to <br>
use the new datatypes as follows (in Isabelle2014, in the development <br>
version drop the "_new"):</p>
<p>datatype_new 'a nested_multiset = Elem 'a | Nest "'a nested_multiset <br>
multiset"</p>
<p>You will get many conveniences including induction and primitive <br>
recursion using this representation.</p>
<p>2) Concerning plain (nonnested) multisets: the definition of the <br>
ordering that we have in Isabelle (the one Ramana pointed to in HOL4) is <br>
neither of the classic ones (Dershowitz--Manna, Huet--Oppen). The <br>
equivalences are not hard to prove, but if you happen to need them you <br>
can reuse a proof that we (Jasmin and me) made in an ongoing <br>
formalization of Bachmair and Ganzingers chapter "Resolution Theorem <br>
Proving" in the Handbook of Automated Reasoning: <br>
<a href="https://bitbucket.org/jasmin_blanchette/superformal/src/tip/thys/Multiset_More.thy">https://bitbucket.org/jasmin_blanchette/superformal/src/tip/thys/Multiset_More.thy</a>. <br>
At some point, much of the linked theory will migrate to <br>
src/HOL/Library/Multiset.</p>
<p>Dmitriy</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>