<html>
<head><meta charset="utf-8"><title>[isabelle] oracles · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html">[isabelle] oracles</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294748857"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294748857" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294748857">(Aug 22 2022 at 18:56)</a>:</h4>
<p>From: "Thiemann, René" &lt;<a href="mailto:Rene.Thiemann@uibk.ac.at">Rene.Thiemann@uibk.ac.at</a>&gt;<br>
Hi José,</p>
<p>I only skimmed over the paper, and from what I saw it is not clear to me whether <br>
existing Isabelle libraries can do the computations:</p>
<p>1) In the paper I mostly see operations like matrix-addition, multiplication, etc.<br>
   All of these operations will be efficiently computed, by either using the<br>
   matrices in HOL-Analysis/Euclidean_Space or AFP/Jordan_Normal_Form/Matrix.</p>
<p>2) However, the oracle also mentions some library Sympy for symbolic manipulations.<br>
   So, if this would involve calculations over matrices with symbolic expressions inside, then<br>
   I’m not so sure whether that is supported.</p>
<p>Best,<br>
René</p>



<a name="294749054"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294749054" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294749054">(Aug 22 2022 at 18:58)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:unruh@ut.ee">unruh@ut.ee</a>&gt;<br>
Hi,</p>
<p>in <a href="https://github.com/dominique-unruh/qrhl-tool/">https://github.com/dominique-unruh/qrhl-tool/</a> (file<br>
isabelle-thys/QRHL_Code.thy), I have used AFP/Jordan_Normal_Form as a<br>
backend for checking verification-conditions for finite-dimensional<br>
predicates in a quantum Hoare calculus (so far, a lot in my developent is<br>
only axiomatized, not proven, but it mostly just invokes the algorithms<br>
from AFP/Jordan_Normal_Form). That works well. In my case, the predicates<br>
involved are modeled as subspaces, and thus the verification conditions are<br>
subspace inclusions. In [liu2016theorem], they consider a quantum Hoare<br>
calculus where the predicates are Hermitian operators, so the<br>
verification-conditions are of the form "A is a positive operator" which is<br>
a more difficult problem. I have not checked whether the algorithms from<br>
AFP/Jordan_Normal_Form can do that.</p>
<p>Best wishes,<br>
Dominique.</p>



<a name="294749499"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294749499" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294749499">(Aug 22 2022 at 19:01)</a>:</h4>
<p>From: "Thiemann, René" &lt;<a href="mailto:Rene.Thiemann@uibk.ac.at">Rene.Thiemann@uibk.ac.at</a>&gt;<br>
Dear Dominique,</p>
<p>I’m not an expert here, but a quick web-search led me to the page:<br>
<a href="https://www.gaussianwaves.com/2013/04/tests-for-positive-definiteness-of-a-matrix/">https://www.gaussianwaves.com/2013/04/tests-for-positive-definiteness-of-a-matrix/</a></p>
<p>Here, 3 sufficient criteria are provided which can ensure positiveness. (I’m not sure about completeness)<br>
All of these criteria can be implemented via the algorithms available in AFP/Jordan_Normal_Form:</p>
<p>1) only positive pivots: well this is an easy test, since Gauss-Jordan-elimination is available.<br>
2) only positive determinants of upper-left sub-matrices: also easy, since determinants and taking<br>
   sub-matrices is supported.<br>
3) only positive eigenvalues: in combination with algebraic numbers (AFP/Algebraic_Numbers) this is easy, since you just invoke<br>
   the factorization algorithm on the charateristic polynomial to compute the eigenvalues.<br>
   Only limitation: the input matrix must contain rational numbers as input, since otherwise the factorization<br>
   algorithm will most likely fail.</p>
<p>Cheers,<br>
René<br>
<a href="/user_uploads/14278/cESuVks2SjkoCMVa0UrU-JW1/signature.asc">signature.asc</a></p>



<a name="294749534"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294749534" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294749534">(Aug 22 2022 at 19:01)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:unruh@ut.ee">unruh@ut.ee</a>&gt;<br>
Hi René,</p>
<p>thanks for those pointers. I assume that the authors of [liu2016theorem]<br>
either were not aware of AFP/Jordan_Normal_Form, or went for an external<br>
oracle for simplicity or speed.</p>
<p>Some comments on the three approaches:</p>
<p>Here, 3 sufficient criteria are provided which can ensure positiveness.</p>
<blockquote>
<p>(I’m not sure about completeness)<br>
</p>
</blockquote>
<p>We need to be clear what we mean by "positive". In the context of<br>
[liu2016theorem],<br>
I think we need what is called more precisely "positive semidefinite"<br>
(usually called positive in the quantum community). The page you linked, I<br>
think, refers to positive-definite. So the criteria are slightly different.</p>
<blockquote>
<p>All of these criteria can be implemented via the algorithms available in<br>
AFP/Jordan_Normal_Form:</p>
<p>1) only positive pivots: well this is an easy test, since<br>
Gauss-Jordan-elimination is available.<br>
</p>
</blockquote>
<p>I don't know what they mean by this. Consider the (0 1 \\ 1 0). This matrix<br>
is negative. Gaussian elimination gives the identity which has only 1's on<br>
the diagonal. So something's wrong here.</p>
<blockquote>
<p>2) only positive determinants of upper-left sub-matrices: also easy, since<br>
determinants and taking<br>
   sub-matrices is supported.<br>
</p>
</blockquote>
<p>For positive-semidefinite, we need to check <em>all</em> sub-matrices (not just<br>
upper-left). (<a href="https://en.wikipedia.org/wiki/Sylvester%27s_criterion">https://en.wikipedia.org/wiki/Sylvester%27s_criterion</a>) Thus<br>
exponentially many!</p>
<blockquote>
<p>3) only positive eigenvalues: in combination with algebraic numbers<br>
(AFP/Algebraic_Numbers) this is easy, since you just invoke<br>
   the factorization algorithm on the charateristic polynomial to compute<br>
the eigenvalues.<br>
   Only limitation: the input matrix must contain rational numbers as<br>
input, since otherwise the factorization<br>
   algorithm will most likely fail.<br>
</p>
</blockquote>
<p>And you can read off the eigenvalues directly from the Jordan normal form.</p>
<p>But the limitation to rational inputs might be a problem: Matrices involved<br>
in quantum computing often involve [image: \frac{1}{\sqrt{2}}].</p>
<p>That being said, I think it might be interesting to explore this in more<br>
detail to make [liu2016theorem] not rely on oracles.</p>
<p>Best wishes,<br>
Dominique.</p>
<blockquote>
<p>Cheers,<br>
René<br>
</p>
</blockquote>



<a name="294749558"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294749558" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294749558">(Aug 22 2022 at 19:01)</a>:</h4>
<p>From: "Thiemann, René" &lt;<a href="mailto:Rene.Thiemann@uibk.ac.at">Rene.Thiemann@uibk.ac.at</a>&gt;</p>
<blockquote>
<p>Some comments on the three approaches:</p>
<p>Here, 3 sufficient criteria are provided which can ensure positiveness. (I’m not sure about completeness)</p>
<p>We need to be clear what we mean by "positive". In the context of [liu2016theorem], I think we need what is called more precisely "positive semidefinite" (usually called positive in the quantum community). The page you linked, I think, refers to positive-definite. So the criteria are slightly different.</p>
</blockquote>
<p>Ok, agreed.</p>
<blockquote>
<p>All of these criteria can be implemented via the algorithms available in AFP/Jordan_Normal_Form:</p>
<p>2) only positive determinants of upper-left sub-matrices: also easy, since determinants and taking<br>
   sub-matrices is supported.</p>
<p>For positive-semidefinite, we need to check all sub-matrices (not just upper-left). (<a href="https://en.wikipedia.org/wiki/Sylvester%27s_criterion">https://en.wikipedia.org/wiki/Sylvester%27s_criterion</a>) Thus exponentially many!</p>
</blockquote>
<p>Indeed, but still it is executable. So, if the matrices are small enough, this might be a feasible approach.</p>
<blockquote>
<p>3) only positive eigenvalues: in combination with algebraic numbers (AFP/Algebraic_Numbers) this is easy, since you just invoke<br>
   the factorization algorithm on the charateristic polynomial to compute the eigenvalues.<br>
   Only limitation: the input matrix must contain rational numbers as input, since otherwise the factorization<br>
   algorithm will most likely fail.</p>
<p>And you can read off the eigenvalues directly from the Jordan normal form. </p>
</blockquote>
<p>Well, this does not help in algorithm in AFP/Jordan_Normal_Form: there, the JNF-computation demands a factorization<br>
of the characteristic polynomial: it is based on Schur-decomposition which as input takes the list of eigenvalues.</p>
<blockquote>
<p>But the limitation to rational inputs might be a problem: Matrices involved in quantum computing often involve 1/sqrt(2).</p>
</blockquote>
<p>Interesting. Then perhaps approach 2) can be used now, and it will give me some motivation by trying to extend the <br>
formalized factorization algorithm so that it can also deal with polynomials that have algebraic coefficients, not just rational.</p>
<p>Best,<br>
René</p>



<a name="294749570"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294749570" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294749570">(Aug 22 2022 at 19:01)</a>:</h4>
<p>From: Dominique Unruh &lt;<a href="mailto:unruh@ut.ee">unruh@ut.ee</a>&gt;<br>
Hi René,</p>
<blockquote>
<p>2) only positive determinants of upper-left sub-matrices: also easy,<br>
since determinants and taking</p>
<blockquote>
<p>sub-matrices is supported.</p>
<p>For positive-semidefinite, we need to check all sub-matrices (not just<br>
upper-left). (<a href="https://en.wikipedia.org/wiki/Sylvester%27s_criterion">https://en.wikipedia.org/wiki/Sylvester%27s_criterion</a>) Thus<br>
exponentially many!</p>
</blockquote>
<p>Indeed, but still it is executable. So, if the matrices are small enough,<br>
this might be a feasible approach.<br>
</p>
</blockquote>
<p>But we should not forget that this means that we also have to prove<br>
Sylvester's theorem.<br>
I don't know how difficult that is.</p>
<p>An easier approach (both algorithmically and in terms of what development<br>
already exists) might be the following:</p>
<p>- Input: Matrix A.<br>
   - If A is not hermitian, return false. (Positive matrices are hermitian<br>
   by definition.)</p>
<p>- Compute the characteristic polynomial p of A. (Since A is hermitian, A<br>
   has only real eigenvalues, thus p is a polynomial with only real roots, and<br>
   thus has only real coefficients.)</p>
<p>- We use Sturm's theorem/algorithm (over the algebraic reals) to find<br>
   out if all roots of p are &gt;=0. If so, return true. Otherwise, return false.</p>
<p>Of course, there might be even better algorithms for deciding positivity. I<br>
am not an expert in that area.</p>
<p>Best wishes,<br>
Dominique.</p>
<blockquote>
<blockquote>
<p>3) only positive eigenvalues: in combination with algebraic numbers<br>
(AFP/Algebraic_Numbers) this is easy, since you just invoke<br>
   the factorization algorithm on the charateristic polynomial to<br>
compute the eigenvalues.<br>
   Only limitation: the input matrix must contain rational numbers as<br>
input, since otherwise the factorization<br>
   algorithm will most likely fail.</p>
<p>And you can read off the eigenvalues directly from the Jordan normal<br>
form.</p>
</blockquote>
<p>Well, this does not help in algorithm in AFP/Jordan_Normal_Form: there,<br>
the JNF-computation demands a factorization<br>
of the characteristic polynomial: it is based on Schur-decomposition which<br>
as input takes the list of eigenvalues.</p>
<blockquote>
<p>But the limitation to rational inputs might be a problem: Matrices<br>
involved in quantum computing often involve 1/sqrt(2).</p>
</blockquote>
<p>Interesting. Then perhaps approach 2) can be used now, and it will give me<br>
some motivation by trying to extend the<br>
formalized factorization algorithm so that it can also deal with<br>
polynomials that have algebraic coefficients, not just rational.</p>
<p>Best,<br>
René</p>
</blockquote>



<a name="294749663"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294749663" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294749663">(Aug 22 2022 at 19:02)</a>:</h4>
<p>From: José Manuel Rodriguez Caballero &lt;<a href="mailto:josephcmac@gmail.com">josephcmac@gmail.com</a>&gt;<br>
Just to emphasize that the decision problem</p>
<p>INPUT: A Hermitian matrix H of order n whose entries are computable complex<br>
numbers.<br>
OUTPUT: Is H positive semidefinite?</p>
<p>is undecidable.</p>
<p>Indeed, consider an arbitrary computational real number x. Let H be the<br>
matrix of order 1 whose single entry is x. Notice that x is equal to zero<br>
if and only if both H and -H are positive semidefinite. On the one hand, if<br>
the above-mentioned problem was decidable, then we will be able to decide<br>
whether x is equal to zero or not. On the other hand, we can encode the<br>
halting problem as the proposition: x is equal to zero. Thus, the<br>
above-mentioned problem is undecidable.</p>
<p>Therefore, the function of the oracle in</p>
<p>Liu T, Li Y, Wang S, Ying M, Zhan N. A theorem prover for quantum Hoare<br>
logic and its applications. arXiv preprint arXiv:1601.03835. 2016 Jan 15.<br>
<a href="https://arxiv.org/pdf/1601.03835.pdf">https://arxiv.org/pdf/1601.03835.pdf</a></p>
<p>is not to decide whether the matrix H is positive semidefinite, but just to<br>
provide a proof in cases where it is possible to do it in Python, e.g., if<br>
the entries of H are algebraic numbers, etc. Of course, we can think about<br>
an oracle solving the above-mentioned decision problem, but such an oracle<br>
will be non-computable.</p>
<p>Kind Regards,<br>
José M.</p>



<a name="294749684"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20oracles/near/294749684" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20oracles.html#294749684">(Aug 22 2022 at 19:02)</a>:</h4>
<p>From: José Manuel Rodriguez Caballero &lt;<a href="mailto:josephcmac@gmail.com">josephcmac@gmail.com</a>&gt;<br>
Hello,<br>
  I tend to be skeptical with respect to the mathematical meaning of the<br>
claims of the paper:</p>
<p>Liu T, Li Y, Wang S, Ying M, Zhan N. A theorem prover for quantum Hoare<br>
logic and its applications. arXiv preprint arXiv:1601.03835. 2016 Jan 15.<br>
<a href="https://arxiv.org/pdf/1601.03835.pdf">https://arxiv.org/pdf/1601.03835.pdf</a><br>
<a href="https://github.com/ijcar2016/propitious-barnacle">https://github.com/ijcar2016/propitious-barnacle</a></p>
<p>I feel that something essential is missing in the space between<br>
Isabelle/HOL and Python. For example, in the lemma</p>
<p>lemma grover:  "valid I<br>
               ((((Init q0 0);Init q1 1;Init q 2;Init r 3;<br>
               Utrans Delta 2;Utrans H 0;Utrans H 1;Utrans H 2);<br>
              While M0 M1 C Q);<br>
           Cond [(N0,SKIP,p0),(N1,SKIP,p1),(N2,SKIP,p2),(N3,SKIP,p3)] )</p>
<p>P"</p>
<p>on the one hand, we have that both I and P are just formal symbols<br>
satisfying some axioms, which happens to be satisfied also by square<br>
matrices having complex coefficients. On the other hand, in Python, these<br>
symbols are interpreted as concrete matrices. I feel a gap. I propose two<br>
approaches in order to make sense of this situation.</p>
<p>---Approach I.</p>
<p>I think that the rigorous way to justify the use of the oracle in Python is<br>
as follows:</p>
<p>(a) we need to define I, P, and all the other formal symbols, as matrices<br>
having complex numbers as entries in Isabelle/HOL;</p>
<p>(b) we need to embed Python in Isabelle/HOL;</p>
<p>(c) we need to prove the correctness of the algorithm for deciding the<br>
positive semidefiniteness of the matrices (assuming that the entries are<br>
algebraic numbers) in the embedding of Python in Isabelle/HOL.</p>
<p>Of course, we can forget Python and implement the algorithm for deciding<br>
the positive semidefiniteness of the matrices (assuming that the entries<br>
are algebraic numbers) in Isabelle/HOL. I recall that for any complex<br>
number z, we have:</p>
<p>AlgebraicNumber(z) = there exists a polynomial P(X) ,having integer<br>
coefficients, such that P(z) = 0.</p>
<p>I think that the hypothesis AlgebraicNumber(z) is essential for the oracle<br>
to make sense, because without any restriction, the problem concerning the<br>
positive semidefiniteness is undecidable.</p>
<p>---Approach II. Do everything in Python and formally verify what we did in<br>
Isabelle/HOL using an embedding of Python.</p>
<p>I am not claiming that there is a problem in this paper. I am only pointing<br>
out the parts where I am not convinced yet. Suggestions and criticism are<br>
welcome.</p>
<p>Kind Regards,<br>
José M.</p>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>