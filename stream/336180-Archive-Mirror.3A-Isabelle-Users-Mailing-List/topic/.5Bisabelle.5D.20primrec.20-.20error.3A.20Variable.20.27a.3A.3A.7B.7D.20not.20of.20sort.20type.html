<html>
<head><meta charset="utf-8"><title>[isabelle] primrec - error: Variable &#x27;a::{} not of sort type · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20primrec.20-.20error.3A.20Variable.20.27a.3A.3A.7B.7D.20not.20of.20sort.20type.html">[isabelle] primrec - error: Variable &#x27;a::{} not of sort type</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294289163"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20primrec%20-%20error%3A%20Variable%20%27a%3A%3A%7B%7D%20not%20of%20sort%20type/near/294289163" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20primrec.20-.20error.3A.20Variable.20.27a.3A.3A.7B.7D.20not.20of.20sort.20type.html#294289163">(Aug 19 2022 at 15:27)</a>:</h4>
<p>From: Peter Lammich &lt;<a href="mailto:lammich@in.tum.de">lammich@in.tum.de</a>&gt;<br>
Hi all.</p>
<p>If I issue the following definition:</p>
<p>primrec f where "f g v (a,b) = (g v a, b)"</p>
<p>I get:</p>
<p>Type unification failed: Variable 'a::{} not of sort type</p>
<p>Type error in application: incompatible operand type</p>
<p>Operator:  old.rec_prod :: ('b ⇒ 'd ⇒ ??'a) ⇒ 'b × 'd ⇒ ??'a<br>
Operand:   λa b g v. (g v a, b) ::<br>
  'b ⇒ 'd ⇒ ('a ⇒ 'b ⇒ 'c) ⇒ 'a ⇒ 'c × 'd</p>
<p>Although I would have expected the definition to go through. What is<br>
going wrong here?</p>



<a name="294289239"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20primrec%20-%20error%3A%20Variable%20%27a%3A%3A%7B%7D%20not%20of%20sort%20type/near/294289239" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20primrec.20-.20error.3A.20Variable.20.27a.3A.3A.7B.7D.20not.20of.20sort.20type.html#294289239">(Aug 19 2022 at 15:28)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
The error message could be more informative, but I can’t imagine why you would use primrec here. There is neither a datatype nor recursion.</p>
<p>Larry Paulson</p>



<a name="294289250"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20primrec%20-%20error%3A%20Variable%20%27a%3A%3A%7B%7D%20not%20of%20sort%20type/near/294289250" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20primrec.20-.20error.3A.20Variable.20.27a.3A.3A.7B.7D.20not.20of.20sort.20type.html#294289250">(Aug 19 2022 at 15:28)</a>:</h4>
<p>From: Brian Huffman &lt;<a href="mailto:huffman.brian.c@gmail.com">huffman.brian.c@gmail.com</a>&gt;<br>
The product type is certainly a datatype. I've often used primrec to<br>
define functions over non-recursive datatypes.</p>
<ul>
<li>Brian</li>
</ul>



<a name="294289271"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20primrec%20-%20error%3A%20Variable%20%27a%3A%3A%7B%7D%20not%20of%20sort%20type/near/294289271" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20primrec.20-.20error.3A.20Variable.20.27a.3A.3A.7B.7D.20not.20of.20sort.20type.html#294289271">(Aug 19 2022 at 15:28)</a>:</h4>
<p>From: Lars Noschinski &lt;<a href="mailto:noschinl@in.tum.de">noschinl@in.tum.de</a>&gt;<br>
This has nothing to do with primrec. If you inspect</p>
<p>term "f g v (a,b) = (g v a, b)"</p>
<p>or the even simpler</p>
<p>term "h x"</p>
<p>you will see that the first argument to g has the empty sort, as has x.<br>
This is a shortcoming of our type-inference:<br>
If the type of a variable is fully unconstrained (like the first<br>
argument of g), the type inference fails to insert the default sort<br>
("type", in the case of HOL) for the corresponding type variable.</p>
<p>The workaround is to add sufficient type annotations.</p>
<p>-- Lars</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>