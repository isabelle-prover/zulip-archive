<html>
<head><meta charset="utf-8"><title>[isabelle] sledgehammer+vampire 4.0 often fails · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sledgehammer.2Bvampire.204.2E0.20often.20fails.html">[isabelle] sledgehammer+vampire 4.0 often fails</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294675233"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20sledgehammer%2Bvampire%204.0%20often%20fails/near/294675233" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sledgehammer.2Bvampire.204.2E0.20often.20fails.html#294675233">(Aug 22 2022 at 13:25)</a>:</h4>
<p>From: Christoph Dittmann &lt;<a href="mailto:f-isabellelist@yozora.eu">f-isabellelist@yozora.eu</a>&gt;<br>
Hi,</p>
<p>I have a problem with sledgehammer in Isabelle 2016 with a recent vampire:</p>
<p>./vampire --version<br>
Vampire 4.0 (commit 910b0ff on 2016-04-14 14:40:26 +0200)</p>
<p>I added the vampire binary to Isabelle by setting these environment<br>
variables, as documented in sledgehammer.pdf:<br>
export VAMPIRE_HOME=$HOME/local/bin<br>
export VAMPIRE_VERSION=4.0</p>
<p>Very often (I guess in &gt;50% of the cases), vampire fails like this:</p>
<p>Sledgehammering...<br>
"e": Try this: using Cons.prems(2) by auto (20 ms).<br>
"spass": Try this: using Cons.prems(2) by auto (4 ms).<br>
"vampire": A prover error occurred. (Pass the "verbose" option for<br>
details.)</p>
<p>When I look at the output of vampire, it says:</p>
<p>User error: Vampire only supports a single conjecuture in a problem</p>
<p>And it's true, the vampire input file generated by sledgehammer<br>
sometimes ends with more than one conjecture, for example:</p>
<p>% Conjectures (2)<br>
tff(conj_0, conjecture,<br>
    ($false)).<br>
tff(conj_1, conjecture,<br>
    ((?[N4 : nat]: (pp(aa_nat_bool(aa_nat_fun_nat_bool(ord_less_nat,<br>
N4), aa_list_a_nat(size_size_list_a, cons_a(x, xsa)))) &amp;<br>
(pp(aa_nat_bool(aa_nat_fun_nat_bool(ord_less_nat, N4),<br>
aa_list_a_nat(size_size_list_a, ysa))) &amp; (~<br>
aa_nat_a(aa_list_a_fun_nat_a(nth_a, cons_a(x, xsa)), N4) =<br>
aa_nat_a(aa_list_a_fun_nat_a(nth_a, ysa), N4))))))).</p>
<p>I attached a minimal theory file that shows the problem.</p>
<p>Is this a known problem?  Is there anything I can do?</p>
<p>Thanks,<br>
Christoph<br>
<a href="/user_uploads/14278/5cPxT5xPfMWfvSugkvyH8WNm/Foo.thy">Foo.thy</a></p>



<a name="294675254"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20sledgehammer%2Bvampire%204.0%20often%20fails/near/294675254" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sledgehammer.2Bvampire.204.2E0.20often.20fails.html#294675254">(Aug 22 2022 at 13:25)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Dear Christoph,</p>
<p>Thank you for your report. This wasn't a known problem; I guess most of us are using an older Vampire.</p>
<p>This will be fixed in the next Isabelle release. If you want to repair your Isabelle locally, change line 535 of</p>
<p>src/HOL/Tools/ATP/atp_systems.ML</p>
<p>from</p>
<p>prem_role = Conjecture,</p>
<p>to</p>
<p>prem_role = Hypothesis,</p>
<p>and rebuild the HOL image:</p>
<p>./bin/isabelle build -b HOL</p>
<p>Cheers,</p>
<p>Jasmin</p>



<a name="294675267"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20sledgehammer%2Bvampire%204.0%20often%20fails/near/294675267" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sledgehammer.2Bvampire.204.2E0.20often.20fails.html#294675267">(Aug 22 2022 at 13:25)</a>:</h4>
<p>From: Christoph Dittmann &lt;<a href="mailto:f-isabellelist@yozora.eu">f-isabellelist@yozora.eu</a>&gt;<br>
Dear Jasmin,</p>
<p>Thanks, this seems to fix it.</p>
<p>Christoph</p>



<a name="294739198"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20sledgehammer%2Bvampire%204.0%20often%20fails/near/294739198" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sledgehammer.2Bvampire.204.2E0.20often.20fails.html#294739198">(Aug 22 2022 at 17:54)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
I’m getting this problem too. Only it’s two years later and your fix is already in the sources. Could something else be going on?<br>
Larry</p>



<a name="294739368"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20sledgehammer%2Bvampire%204.0%20often%20fails/near/294739368" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sledgehammer.2Bvampire.204.2E0.20often.20fails.html#294739368">(Aug 22 2022 at 17:55)</a>:</h4>
<p>From: Jasmin Blanchette &lt;<a href="mailto:jasmin.blanchette@inria.fr">jasmin.blanchette@inria.fr</a>&gt;<br>
Hi Larry,</p>
<p>I need a more detailed bug report. Notably, which platform? And do you really get the output</p>
<p>User error: Vampire only supports a single conjecuture in a problem</p>
<p>like Christoph did in 2016? I doubt so; hence your issue has likely nothing to do with his.</p>
<p>Jasmin</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>