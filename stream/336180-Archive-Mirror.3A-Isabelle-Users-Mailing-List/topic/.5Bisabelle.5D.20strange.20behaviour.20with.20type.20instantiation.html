<html>
<head><meta charset="utf-8"><title>[isabelle] strange behaviour with type instantiation · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20behaviour.20with.20type.20instantiation.html">[isabelle] strange behaviour with type instantiation</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294077606"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20behaviour%20with%20type%20instantiation/near/294077606" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20behaviour.20with.20type.20instantiation.html#294077606">(Aug 18 2022 at 13:31)</a>:</h4>
<p>From: Burkhart Wolff &lt;<a href="mailto:Burkhart.Wolff@lri.fr">Burkhart.Wolff@lri.fr</a>&gt;<br>
Dear all,</p>
<p>I'd like to do the following standard type instantiation:</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>&gt;</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>instantiation  list :: (type) ord<br>
begin</p>
<p>definition  le_list_def  : "s \&lt;le&gt; t \&lt;longleftrightarrow&gt; (\&lt;exists&gt;  <br>
r. s @ r = t)"<br>
definition  less_list_def: "s &lt; t \&lt;longleftrightarrow&gt; s \&lt;le&gt; t  <br>
\&lt;and&gt; s \&lt;noteq&gt; t"</p>
<p>(*<br>
definition  less_list_def : "less \&lt;equiv&gt; \&lt;lambda&gt; x y. (x \&lt;le&gt; y  <br>
\&lt;and&gt; x \&lt;noteq&gt; y)"<br>
*)<br>
instance  ..</p>
<p>end</p>
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;<br>
However, I got the following respionse (under Isabelle 2008):</p>
<p>*** Bad head of lhs: existing constant "op &lt;"<br>
*** The error(s) above occurred in definition: "s &lt; t  s ~ t ~ s ~ t"<br>
*** At command "definition".</p>
<p>Exchanging the offending s &lt; t by the core notation (see comments)<br>
no avail.</p>
<p>Can anyone help me out ?</p>
<p>Best regards,</p>
<p>bu</p>



<a name="294077612"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20behaviour%20with%20type%20instantiation/near/294077612" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20behaviour.20with.20type.20instantiation.html#294077612">(Aug 18 2022 at 13:31)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Burkhart,</p>
<blockquote>
<p>instantiation  list :: (type) ord<br>
begin</p>
<p>definition  le_list_def  : "s \&lt;le&gt; t \&lt;longleftrightarrow&gt; (\&lt;exists&gt;<br>
r. s @ r = t)"<br>
definition  less_list_def: "s &lt; t \&lt;longleftrightarrow&gt; s \&lt;le&gt; t \&lt;and&gt;<br>
s \&lt;noteq&gt; t"</p>
<p>(*<br>
definition  less_list_def : "less \&lt;equiv&gt; \&lt;lambda&gt; x y. (x \&lt;le&gt; y<br>
\&lt;and&gt; x \&lt;noteq&gt; y)"<br>
*)<br>
instance  ..</p>
<p>end</p>
</blockquote>
<p>The problem is that the inferred type for less_list is too general.<br>
Type annotations help:</p>
<p>instantiation  list :: (type) ord<br>
begin</p>
<blockquote>
<p>instantiation  list :: (type) ord<br>
begin</p>
<p>definition  le_list_def  : "s \&lt;le&gt; t \&lt;longleftrightarrow&gt; (\&lt;exists&gt; r. s @ r = t)"<br>
definition  less_list_def: "(s :: 'a list) &lt; t \&lt;longleftrightarrow&gt; s \&lt;le&gt; t \&lt;and&gt; s \&lt;noteq&gt; t"</p>
</blockquote>
<p>...</p>
<p>AFAIK there are some theories in HOL/Library which define different<br>
orders on lists (Prefix_ord.thy, ...).  Perhaps these are helpful also.</p>
<p>Hope this helps<br>
    Florian<br>
<a href="/user_uploads/14278/7uHGr_nDpkCzKKBpEJrluX0n/signature.asc">signature.asc</a></p>



<a name="294077646"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20behaviour%20with%20type%20instantiation/near/294077646" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20behaviour.20with.20type.20instantiation.html#294077646">(Aug 18 2022 at 13:31)</a>:</h4>
<p>From: Florian Haftmann &lt;<a href="mailto:florian.haftmann@informatik.tu-muenchen.de">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>
Hi Burkhart,<br>
This is a misunderstanding how type variables work wrt. instantiation:<br>
type variables for instance specifications are locally fixes during the<br>
whole instantiation block.  Thus you have to write "'a" instead of<br>
"'\&lt;alpha&gt;".</p>
<p>Hope this helps,</p>
<p>Florian<br>
<a href="/user_uploads/14278/L9RbLjWEQvWmCaynVHXioeJg/signature.asc">signature.asc</a></p>



<a name="294077697"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20behaviour%20with%20type%20instantiation/near/294077697" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20behaviour.20with.20type.20instantiation.html#294077697">(Aug 18 2022 at 13:32)</a>:</h4>
<p>From: Burkhart Wolff &lt;<a href="mailto:Burkhart.Wolff@lri.fr">Burkhart.Wolff@lri.fr</a>&gt;<br>
Hi Florian,</p>
<p>did you actually try this ?</p>
<p>I did of course, among other variants, and I still get:</p>
<p>instantiation  list :: (type) ord<br>
begin</p>
<p>definition  le_list_def  : "s \&lt;le&gt; t \&lt;longleftrightarrow&gt; (\&lt;exists&gt;  <br>
r. s @ r = t)"</p>
<p>definition  less_list_def: "(s::'\&lt;alpha&gt; list) &lt; t  <br>
\&lt;longleftrightarrow&gt; s \&lt;le&gt; t \&lt;and&gt; s \&lt;noteq&gt; t"<br>
(*<br>
definition  less_list_def : "less \&lt;equiv&gt; \&lt;lambda&gt; x y. (x \&lt;le&gt; y  <br>
\&lt;and&gt; x \&lt;noteq&gt; y)"<br>
*)<br>
instance  ..</p>
<p>end</p>
<p>and still get the same error message:</p>
<p>*** Bad head of lhs: existing constant "op &lt;"<br>
*** The error(s) above occurred in definition: "s &lt; t == s &lt;= t &amp; s ~=  <br>
t"<br>
*** At command "definition".</p>
<p>Best,</p>
<p>bu</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>