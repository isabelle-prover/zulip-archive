<html>
<head><meta charset="utf-8"><title>[isabelle] strange sledgehammer behaviour · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html">[isabelle] strange sledgehammer behaviour</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294730375"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20sledgehammer%20behaviour/near/294730375" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html#294730375">(Aug 22 2022 at 17:03)</a>:</h4>
<p>From: noam neer &lt;<a href="mailto:noamneer@gmail.com">noamneer@gmail.com</a>&gt;<br>
Hi everybody,</p>
<p>I have Isabelle 2017 with the default installation. I tried sledgehammer<br>
several times in the last few days on the following simple problem -</p>
<p>theory tmp<br>
imports Complex_Main<br>
begin<br>
    lemma "((9::real) powr (1/2)) = 3"</p>
<p>the results were inconsistent. sometimes it didn't return, sometimes it<br>
returned with the correct suggestion to use "by auto". one of the days it<br>
worked but only  when the "3" was replaced by "(3::real)". sometimes the<br>
"sledgehammer" command and the sledgehammer panel gave different results.</p>
<p>my questions are - is this normal behaviour? if not, should I try<br>
reinstalling? if yes, what's causing this inconsistent behaviour? is there<br>
a way to make it more consistent?</p>
<p>thanx,<br>
    Noam</p>



<a name="294730437"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20sledgehammer%20behaviour/near/294730437" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html#294730437">(Aug 22 2022 at 17:03)</a>:</h4>
<p>From: "Dr A. Koutsoukou-Argyraki" &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
Dear Noam, dear all,</p>
<p>even though I don't know what could be the cause of this (I am an early <br>
beginner)<br>
I'd just like to mention that I have also noticed something similar,<br>
in particular with the cvc4 prover.<br>
  In the two very simple examples (see below)<br>
all the provers failed, but after I tried a few days later cvc4 did give <br>
a proof (while the rest of the provers still failed)</p>
<p>Example1:</p>
<p>have " 1/ ((b^2)*((sqrt(2))+(a/b)) )≤ (¦ a^2 - 2*(b^2) ¦ ) *1/  <br>
((b^2)*((sqrt(2))+(a/b) ))  "<br>
using ‹ ¦ a^2 - 2*(b^2) ¦ ≥1›</p>
<p>by (smt assms(3) assms(4) divide_pos_pos frac_le mult_pos_pos <br>
of_int_1_le_iff real_sqrt_gt_1_iff zero_less_power)</p>
<p>Example2:</p>
<p>have " 1/((b^2)*3) ≤ 1/ ((b^2)*((sqrt(2))+(a/b)) )    "<br>
     using ‹(b^2)*3) ≥ ((b^2)*((sqrt(2))+(a/b) ) )›<br>
     by (smt assms(3) assms(4) divide_pos_pos frac_le mult_pos_pos <br>
of_int_pos real_sqrt_gt_1_iff zero_less_power)</p>
<p>(* the above proofs were found by cvc4 even though a few days earlier <br>
cvc4 had failed.<br>
assms(3) assms(4) correspond to "a &gt;0" and "b &gt;0"*)</p>
<p>I'm also wondering what could be the reason for this.<br>
Best,<br>
Angeliki</p>



<a name="294730628"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20sledgehammer%20behaviour/near/294730628" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html#294730628">(Aug 22 2022 at 17:04)</a>:</h4>
<p>From: noam neer &lt;<a href="mailto:noamneer@gmail.com">noamneer@gmail.com</a>&gt;<br>
in my case, the inconsistent prover seems to be "e".</p>



<a name="294730637"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20sledgehammer%20behaviour/near/294730637" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html#294730637">(Aug 22 2022 at 17:04)</a>:</h4>
<p>From: Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt;<br>
One possibility is that the proof is found near the end of the time limit. It's quite common to have runtime variations on the order of 10% depending on what else your computer is doing.<br>
Larry</p>



<a name="294730660"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20sledgehammer%20behaviour/near/294730660" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html#294730660">(Aug 22 2022 at 17:05)</a>:</h4>
<p>From: noam neer &lt;<a href="mailto:noamneer@gmail.com">noamneer@gmail.com</a>&gt;<br>
just tried it again after rebooting my computer, so only Isabelle was<br>
running.<br>
didn't find a proof.</p>



<a name="294730764"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20sledgehammer%20behaviour/near/294730764" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html#294730764">(Aug 22 2022 at 17:05)</a>:</h4>
<p>From: noam neer &lt;<a href="mailto:noamneer@gmail.com">noamneer@gmail.com</a>&gt;<br>
does any of the provers communicate through the internet, s.t. its results<br>
depend on this communication?</p>



<a name="294730776"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20strange%20sledgehammer%20behaviour/near/294730776" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20strange.20sledgehammer.20behaviour.html#294730776">(Aug 22 2022 at 17:05)</a>:</h4>
<p>From: Mathias Fleury &lt;<a href="mailto:mathias.fleury12@gmail.com">mathias.fleury12@gmail.com</a>&gt;<br>
Dear Noam,</p>
<blockquote>
<p>On 18. Apr 2018, at 14:21, noam neer &lt;<a href="mailto:noamneer@gmail.com">noamneer@gmail.com</a>&gt; wrote:</p>
<p>does any of the provers communicate through the internet, s.t. its results<br>
depend on this communication?</p>
</blockquote>
<p>By default only vampire communicates through the internet.</p>
<blockquote>
<p>On Sat, Apr 14, 2018 at 10:05 AM, noam neer &lt;<a href="mailto:noamneer@gmail.com">noamneer@gmail.com</a>&gt; wrote:</p>
<blockquote>
<p>just tried it again after rebooting my computer, so only Isabelle was<br>
running.</p>
</blockquote>
</blockquote>
<p>Actually, I would expect that right after starting plenty programs are running in background to look for updates. </p>
<p>Moreover, you are assuming that:<br>
your system is deterministic. But an antivirus might delay the start. As Larry mentions, there is a ~10% runtime variation.<br>
the solvers are deterministic. This is a non-obvious assumption. A quick look over the source code of CVC4 shows several occurrences of "random" (<a href="https://github.com/CVC4/CVC4/search?l=C%2B%2B&amp;q=random&amp;type=">https://github.com/CVC4/CVC4/search?l=C%2B%2B&amp;q=random&amp;type=</a> &lt;<a href="https://github.com/CVC4/CVC4/search?l=C++&amp;q=random&amp;type=">https://github.com/CVC4/CVC4/search?l=C++&amp;q=random&amp;type=</a>&gt;).<br>
the problems generated by several successive sledgehammer calls are the same. Which might or might not be correct depending on many factors, as there is some machine learning running (see "MaSh: Machine Learning for Sledgehammer", from Daniel Kühlwein, Jasmin Christian Blanchette, Cezary Kaliszyk, and Josef Urban).</p>
<p>Altogether, you should just be happy when sledgehammer finds a proof that it did not find before or finds a better one.</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>a way to make it more consistent?</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>Don't use sledgehammer ;)</p>
<p>Best,<br>
Mathias</p>
<blockquote>
<blockquote>
<p>didn't find a proof.</p>
</blockquote>
<p>On Fri, Apr 13, 2018 at 12:59 PM, Lawrence Paulson &lt;<a href="mailto:lp15@cam.ac.uk">lp15@cam.ac.uk</a>&gt; wrote:</p>
<blockquote>
<blockquote>
<p>One possibility is that the proof is found near the end of the time<br>
limit. It's quite common to have runtime variations on the order of 10%<br>
depending on what else your computer is doing.<br>
Larry</p>
<p>On 9 Apr 2018, at 17:03, Dr A. Koutsoukou-Argyraki &lt;<a href="mailto:ak2110@cam.ac.uk">ak2110@cam.ac.uk</a>&gt;<br>
wrote:</p>
<blockquote>
<p>Dear Noam, dear all,</p>
<p>even though I don't know what could be the cause of this (I am an early<br>
beginner)<br>
I'd just like to mention that I have also noticed something similar,<br>
in particular with the cvc4 prover.<br>
In the two very simple examples (see below)<br>
all the provers failed, but after I tried a few days later cvc4 did<br>
give a proof (while the rest of the provers still failed)</p>
<p>Example1:</p>
<p>have " 1/ ((b^2)*((sqrt(2))+(a/b)) )≤ (¦ a^2 - 2*(b^2) ¦ ) *1/<br>
((b^2)*((sqrt(2))+(a/b) ))  "<br>
using ‹ ¦ a^2 - 2*(b^2) ¦ ≥1›</p>
<p>by (smt assms(3) assms(4) divide_pos_pos frac_le mult_pos_pos<br>
of_int_1_le_iff real_sqrt_gt_1_iff zero_less_power)</p>
<p>Example2:</p>
<p>have " 1/((b^2)*3) ≤ 1/ ((b^2)*((sqrt(2))+(a/b)) )    "<br>
  using ‹(b^2)*3) ≥ ((b^2)*((sqrt(2))+(a/b) ) )›<br>
  by (smt assms(3) assms(4) divide_pos_pos frac_le mult_pos_pos<br>
of_int_pos real_sqrt_gt_1_iff zero_less_power)</p>
<p>(* the above proofs were found by cvc4 even though a few days earlier<br>
cvc4 had failed.<br>
assms(3) assms(4) correspond to "a &gt;0" and "b &gt;0"*)</p>
<p>I'm also wondering what could be the reason for this.<br>
Best,<br>
Angeliki</p>
</blockquote>
<p>On 2018-04-09 02:58, noam neer wrote:</p>
<blockquote>
<blockquote>
<p>Hi everybody,<br>
I have Isabelle 2017 with the default installation. I tried<br>
sledgehammer<br>
several times in the last few days on the following simple problem -<br>
theory tmp<br>
imports Complex_Main<br>
begin<br>
  lemma "((9::real) powr (1/2)) = 3"<br>
the results were inconsistent. sometimes it didn't return, sometimes it<br>
returned with the correct suggestion to use "by auto". one of the days<br>
it<br>
worked but only  when the "3" was replaced by "(3::real)". sometimes<br>
the<br>
"sledgehammer" command and the sledgehammer panel gave different<br>
results.<br>
my questions are - is this normal behaviour? if not, should I try<br>
reinstalling? if yes, what's causing this inconsistent behaviour? is<br>
there<br>
a way to make it more consistent?<br>
thanx,<br>
  Noam<br>
</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>