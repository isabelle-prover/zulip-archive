<html>
<head><meta charset="utf-8"><title>[isabelle] sublocales? · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sublocales.3F.html">[isabelle] sublocales?</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294081469"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20sublocales%3F/near/294081469" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sublocales.3F.html#294081469">(Aug 18 2022 at 13:53)</a>:</h4>
<p>From: Randy Pollack &lt;<a href="mailto:rpollack@inf.ed.ac.uk">rpollack@inf.ed.ac.uk</a>&gt;<br>
Where can I find documentation about sublocales?  The Isabelle/Isar<br>
Reference Manual (2009) apparently does not contain the string<br>
"sublocale".  The Tutorial to Locales and Locale Interpretation (2009)<br>
does not include the syntax that Andreas suggested to me:</p>
<blockquote>
<p>sublocale HEv0 &lt; F0HE : HE "%X. if ... then v0 else F X"<br>
unfolding F0_def[symmetric]</p>
</blockquote>
<p>Thanks,<br>
Randy<br>
--<br>
Andreas Lochbihler writes:</p>
<blockquote>
<p>Hi Randy,</p>
<blockquote>
<p>Is there a locale expression (?) that when interpreted with with FF<br>
and vv, gives the context of HE interpreted with<br>
(%X. if ... then vv else FF X)?  (Maybe using a "where" clause?)<br>
If I understand you correctly, you want to have an interpretation of HE <br>
for F0 (with the F0's definition unfolded) whenever you interpret HEv0. <br>
You can do this by making HEv0 a sublocale of HE with F instantiated to F0:</p>
</blockquote>
<p>sublocale HEv0 &lt; F0HE : HE "%X. if ... then v0 else F X"<br>
unfolding F0_def[symmetric]<br>
by(unfold_locales)(rule HEF0)</p>
<p>where HEF0 refers to your lemma that shows "fixF.HE F0".</p>
<p>Now, whenever you interpret HEv0, this also interprets HE with F0 <br>
unfolded. The constants and lemmas generated by this process are <br>
prefixed by F0HE to distinguish them from those that obtained directly <br>
from HE. Also, already inside the HEv0 locale, you can access the HE <br>
context for F0.</p>
<p>Is that what you wanted?</p>
<p>Regards,<br>
Andreas</p>
<p>Randy Pollack schrieb:</p>
<blockquote>
<p>I'm reasoning about a properties of a fixed hypothetical function.  I<br>
want to say "if F has some specified properties then some given<br>
variant, F0 of F, has the same properties".</p>
<p>First, "F has property HE":</p>
<p>locale fixF = fixes F :: sometype<br>
  begin<br>
  abbreviation HE :: "bool" where "HE == ...<br>
  ...<br>
  end<br>
  locale HE = fixF + assumes HE[rule_format]: HE</p>
<p>If some F has property HE then some variant, F0, of F depending on an<br>
arbitrary constant, v0, also has that property.  I can say:</p>
<p>locale HEv0 = HE + fixes v0 :: sometype =<br>
  definition F0 :: Ftyp where "F0 X = (if ... then v0 else F X)"<br>
  lemma shows "fixF.HE F0"<br>
    proof (... using HE ...) qed</p>
<p>If we interpret locale HEv0 with some actual FF and vv, we get a<br>
context where F is interpreted by FF, v is interpreted by vv, and</p>
<p>"fixF.HE (%X. if ... then vv else FF X)"</p>
<p>is a theorem.  This is as expected.  But we have proved that given FF<br>
(with property HE) and vv then (%X. if ... then vv else FF X)<br>
is a good interpretation of locale HE.</p>
<p>Is there a locale expression (?) that when interpreted with with FF<br>
and vv, gives the context of HE interpreted with <br>
(%X. if ... then vv else FF X)?  (Maybe using a "where" clause?)</p>
<p>Thanks,<br>
Randy<br>
</p>
</blockquote>
</blockquote>
<p>-- <br>
The University of Edinburgh is a charitable body, registered in<br>
Scotland, with registration number SC005336.</p>



<a name="294081506"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20sublocales%3F/near/294081506" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20sublocales.3F.html#294081506">(Aug 18 2022 at 13:54)</a>:</h4>
<p>From: Clemens Ballarin &lt;<a href="mailto:ballarin@in.tum.de">ballarin@in.tum.de</a>&gt;<br>
Quoting Randy Pollack &lt;<a href="mailto:rpollack@inf.ed.ac.uk">rpollack@inf.ed.ac.uk</a>&gt;:</p>
<blockquote>
<p>Where can I find documentation about sublocales?  The Isabelle/Isar<br>
Reference Manual (2009) apparently does not contain the string<br>
"sublocale".  The Tutorial to Locales and Locale Interpretation (2009)<br>
does not include the syntax that Andreas suggested to me:</p>
<blockquote>
<p>sublocale HEv0 &lt; F0HE : HE "%X. if ... then v0 else F X"<br>
unfolding F0_def[symmetric]</p>
</blockquote>
</blockquote>
<p>The tutorial is currently the only documentation for this feature.</p>
<p>F0HE : HE "%X. if ... then v0 else F X"</p>
<p>is a correct expression according to the grammar given in the tutorial  <br>
on page 16.  It consists of a single instance with qualifier F0HE,  <br>
qualified name HE and term "%X. if ... then v0 else F X".  The effect  <br>
of the command is an interpretation of the specified instance of HE  <br>
relative to HEv0.  Note that the scope of the parameters of HEv0  <br>
extends over the expression.</p>
<p>Clemens</p>
<blockquote>
<p>--<br>
Andreas Lochbihler writes:</p>
<blockquote>
<p>Hi Randy,</p>
<blockquote>
<p>Is there a locale expression (?) that when interpreted with with FF<br>
and vv, gives the context of HE interpreted with<br>
(%X. if ... then vv else FF X)?  (Maybe using a "where" clause?)<br>
If I understand you correctly, you want to have an interpretation of HE<br>
for F0 (with the F0's definition unfolded) whenever you interpret HEv0.<br>
You can do this by making HEv0 a sublocale of HE with F   <br>
instantiated to F0:</p>
</blockquote>
<p>sublocale HEv0 &lt; F0HE : HE "%X. if ... then v0 else F X"<br>
unfolding F0_def[symmetric]<br>
by(unfold_locales)(rule HEF0)</p>
<p>where HEF0 refers to your lemma that shows "fixF.HE F0".</p>
<p>Now, whenever you interpret HEv0, this also interprets HE with F0<br>
unfolded. The constants and lemmas generated by this process are<br>
prefixed by F0HE to distinguish them from those that obtained directly<br>
from HE. Also, already inside the HEv0 locale, you can access the HE<br>
context for F0.</p>
<p>Is that what you wanted?</p>
<p>Regards,<br>
Andreas</p>
<p>Randy Pollack schrieb:</p>
<blockquote>
<p>I'm reasoning about a properties of a fixed hypothetical function.  I<br>
want to say "if F has some specified properties then some given<br>
variant, F0 of F, has the same properties".</p>
<p>First, "F has property HE":</p>
<p>locale fixF = fixes F :: sometype<br>
  begin<br>
  abbreviation HE :: "bool" where "HE == ...<br>
  ...<br>
  end<br>
  locale HE = fixF + assumes HE[rule_format]: HE</p>
<p>If some F has property HE then some variant, F0, of F depending on an<br>
arbitrary constant, v0, also has that property.  I can say:</p>
<p>locale HEv0 = HE + fixes v0 :: sometype =<br>
  definition F0 :: Ftyp where "F0 X = (if ... then v0 else F X)"<br>
  lemma shows "fixF.HE F0"<br>
    proof (... using HE ...) qed</p>
<p>If we interpret locale HEv0 with some actual FF and vv, we get a<br>
context where F is interpreted by FF, v is interpreted by vv, and</p>
<p>"fixF.HE (%X. if ... then vv else FF X)"</p>
<p>is a theorem.  This is as expected.  But we have proved that given FF<br>
(with property HE) and vv then (%X. if ... then vv else FF X)<br>
is a good interpretation of locale HE.</p>
<p>Is there a locale expression (?) that when interpreted with with FF<br>
and vv, gives the context of HE interpreted with<br>
(%X. if ... then vv else FF X)?  (Maybe using a "where" clause?)</p>
<p>Thanks,<br>
Randy<br>
</p>
</blockquote>
</blockquote>
<p>--<br>
The University of Edinburgh is a charitable body, registered in<br>
Scotland, with registration number SC005336.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 20:30 UTC</p>
</html>