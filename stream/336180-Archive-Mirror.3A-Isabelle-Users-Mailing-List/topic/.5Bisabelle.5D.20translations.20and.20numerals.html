<html>
<head><meta charset="utf-8"><title>[isabelle] translations and numerals · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html">[isabelle] translations and numerals</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294263057"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294263057" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294263057">(Aug 19 2022 at 13:18)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
On 21/01/2014 15:18, Christian Sternagel wrote:</p>
<blockquote>
<p>Well, what I wrote in my previous mail does not work for "int"s and "nat"s. The<br>
following does</p>
<p>translations<br>
  "i" &lt;= "CONST Fin (i::'a::numeral)"<br>
  "i" &lt;= "CONST Fin (i::int)"</p>
</blockquote>
<p>But this causes "Fin x" to be reduced to "x", no matter what "x" is, as long as<br>
it is of type int. That's not what I want.</p>
<p>Tobias</p>
<blockquote>
<p>"i" &lt;= "CONST Fin (i::nat)"<br>
  "0" &lt;= "CONST Fin (0::'a::zero)"<br>
  "1" &lt;= "CONST Fin (1::'a::one)"</p>
<p>But I should mention that I have no clue why ;)... I was just doing trial and<br>
error.</p>
<p>cheers</p>
<p>chris</p>
<p>On 01/21/2014 03:07 PM, Christian Sternagel wrote:</p>
<blockquote>
<p>Dear Tobias,</p>
<p>how about (I used "datatype 'a fin = Fin 'a"),</p>
<p>translations<br>
   "_Numeral i" &lt;= "CONST Fin (i::'a::numeral)"<br>
   "0" &lt;= "CONST Fin (0::'a::zero)"<br>
   "1" &lt;= "CONST Fin (1::'a::one)"</p>
<p>then for</p>
<p>term "(Fin 0, Fin 1, Fin 10, Fin x)"</p>
<p>I get</p>
<p>"(0, 1, 10, Fin x)"<br>
   :: "'a fin × 'b fin × 'c fin × 'd fin"</p>
<p>Note that when leaving of "zero" and "one I get "Fin 0" and "Fin 1" as<br>
output.<br>
</p>
</blockquote>
<p>On 01/21/2014 02:41 PM, Tobias Nipkow wrote:</p>
<blockquote>
<blockquote>
<p>I am using Library/Extended that defines a datatype with a unary<br>
constructor<br>
Fin. I want to print terms like "Fin 5" as "5" and am using the following<br>
translations:</p>
<p>translations<br>
"_Numeral i" &lt;= "CONST Fin(_Numeral i)"<br>
"0" &lt;= "CONST Fin 0"<br>
"1" &lt;= "CONST Fin 1"</p>
<p>When I generate latex from</p>
<p>text{* @{term "Fin(5::int)"} *}</p>
<p>this works fine, I get "5".</p>
<p>But when I write</p>
<p>term "Fin(5::int)"</p>
<p>in a theory, the output is "Fin 5". Why is that? And what can I do to<br>
obtain the<br>
output "5" always, not just from an antiquotation in a text block.</p>
<p>Note that when I use this translation</p>
<p>translations<br>
"x" &lt;= "CONST Fin(x)"</p>
<p>then "Fin" disappears for good, but that is not what I want.</p>
<p>Thanks<br>
Tobias<br>
</p>
</blockquote>
</blockquote>
</blockquote>



<a name="294263078"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294263078" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294263078">(Aug 19 2022 at 13:18)</a>:</h4>
<p>From: Andreas Lochbihler &lt;<a href="mailto:andreas.lochbihler@inf.ethz.ch">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>
Hi Tobias,</p>
<p>here's just another data point. In Isabelle2013-2, your original translation works fine <br>
with ProofGeneral 3.7.1.1, but not with jEdit. I haven't tried PG 4.x.</p>
<p>Andreas</p>



<a name="294263085"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294263085" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294263085">(Aug 19 2022 at 13:18)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Thank you, that explains why the translations worked for me when I wrote them -<br>
I used PG then.</p>
<p>Tobias</p>



<a name="294263134"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294263134" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294263134">(Aug 19 2022 at 13:18)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
Printing is a black art, especially when using the AST representation of <br>
'translations', which can contain additional annotations unexpectedly.</p>
<p>The configuration option syntax_ast_trace generally helps to see what <br>
happens to happen in a particular situation, and it shows additional <br>
constraints and markup in the rich document output of Isabelle/PIDE.</p>
<p>In other print modes, there can be different add-ons.</p>
<p>Instead of these fragile and complicated syntax translations, the usual <br>
way to modify term output systematically is via the "uncheck" phase. It <br>
has the advantage that it operates on regular type-correct lambda terms: <br>
that requires a few more cases to cover (in Isabelle/ML), but there is no <br>
black magic.</p>
<p>The included theory No_Fin demonstrates that.  Note that I am using a <br>
fully official constant no_Fin here, which is not printed in the end due <br>
to its special notation.</p>
<p>Makarius<br>
<a href="/user_uploads/14278/OeWpYw_qSLwLy3UuTNYjdwgp/No_Fin.thy">No_Fin.thy</a></p>



<a name="294263235"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294263235" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294263235">(Aug 19 2022 at 13:19)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
Works like a charm, thanks!</p>
<p>Tobias</p>



<a name="294267586"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294267586" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294267586">(Aug 19 2022 at 13:34)</a>:</h4>
<p>From: Tobias Nipkow &lt;<a href="mailto:nipkow@in.tum.de">nipkow@in.tum.de</a>&gt;<br>
I am using Library/Extended that defines a datatype with a unary constructor<br>
Fin. I want to print terms like "Fin 5" as "5" and am using the following<br>
translations:</p>
<p>translations<br>
"_Numeral i" &lt;= "CONST Fin(_Numeral i)"<br>
"0" &lt;= "CONST Fin 0"<br>
"1" &lt;= "CONST Fin 1"</p>
<p>When I generate latex from</p>
<p>text{* @{term "Fin(5::int)"} *}</p>
<p>this works fine, I get "5".</p>
<p>But when I write</p>
<p>term "Fin(5::int)"</p>
<p>in a theory, the output is "Fin 5". Why is that? And what can I do to obtain the<br>
output "5" always, not just from an antiquotation in a text block.</p>
<p>Note that when I use this translation</p>
<p>translations<br>
"x" &lt;= "CONST Fin(x)"</p>
<p>then "Fin" disappears for good, but that is not what I want.</p>
<p>Thanks<br>
Tobias</p>



<a name="294267600"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294267600" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294267600">(Aug 19 2022 at 13:34)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Dear Tobias,</p>
<p>how about (I used "datatype 'a fin = Fin 'a"),</p>
<p>translations<br>
   "_Numeral i" &lt;= "CONST Fin (i::'a::numeral)"<br>
   "0" &lt;= "CONST Fin (0::'a::zero)"<br>
   "1" &lt;= "CONST Fin (1::'a::one)"</p>
<p>then for</p>
<p>term "(Fin 0, Fin 1, Fin 10, Fin x)"</p>
<p>I get</p>
<p>"(0, 1, 10, Fin x)"<br>
   :: "'a fin × 'b fin × 'c fin × 'd fin"</p>
<p>Note that when leaving of "zero" and "one I get "Fin 0" and "Fin 1" as <br>
output.</p>



<a name="294267618"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20translations%20and%20numerals/near/294267618" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20translations.20and.20numerals.html#294267618">(Aug 19 2022 at 13:35)</a>:</h4>
<p>From: Christian Sternagel &lt;<a href="mailto:c.sternagel@gmail.com">c.sternagel@gmail.com</a>&gt;<br>
Well, what I wrote in my previous mail does not work for "int"s and <br>
"nat"s. The following does</p>
<p>translations<br>
   "i" &lt;= "CONST Fin (i::'a::numeral)"<br>
   "i" &lt;= "CONST Fin (i::int)"<br>
   "i" &lt;= "CONST Fin (i::nat)"<br>
   "0" &lt;= "CONST Fin (0::'a::zero)"<br>
   "1" &lt;= "CONST Fin (1::'a::one)"</p>
<p>But I should mention that I have no clue why ;)... I was just doing <br>
trial and error.</p>
<p>cheers</p>
<p>chris</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>