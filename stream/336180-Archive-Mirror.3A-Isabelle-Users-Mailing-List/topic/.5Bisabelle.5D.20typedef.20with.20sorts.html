<html>
<head><meta charset="utf-8"><title>[isabelle] typedef with sorts · Archive Mirror: Isabelle Users Mailing List · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/index.html">Archive Mirror: Isabelle Users Mailing List</a></h2>
<h3>Topic: <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20typedef.20with.20sorts.html">[isabelle] typedef with sorts</a></h3>

<hr>

<base href="https://isabelle.zulipchat.com/">

<head><link href="http://isabelle.systems/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294660237"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20typedef%20with%20sorts/near/294660237" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20typedef.20with.20sorts.html#294660237">(Aug 22 2022 at 12:00)</a>:</h4>
<p>From: Manuel Eberl &lt;<a href="mailto:eberlm@in.tum.de">eberlm@in.tum.de</a>&gt;<br>
Hallo,</p>
<p>I just noticed the following behaviour that I found a bit puzzling at first:</p>
<p>typedef 'a foo = "if finite (UNIV :: 'a :: finite set) then (UNIV :: 'a <br>
set) else {}"<br>
   by auto</p>
<p>term "undefined :: nat foo"</p>
<p>Essentially, I define a type copy 'a foo for any finite type 'a; <br>
however, Isabelle does not prevent me from using the type copy with an <br>
infinite type like nat. I first thought that this must surely be <br>
inconsistent, because I defined 'a foo to be empty for infinite types, <br>
but to my relief, I found that all the lemmas generated by typedef are <br>
annotated with the proper sort constraints, so it seems that "nat foo" <br>
is logically /not/ an empty type, but more like a completely arbitrary <br>
(non-empty) type that I know nothing about.</p>
<p>My question now is this: is it possible to make writing "nat foo" a type <br>
error? Or, perhaps, is it possible to add the sort constraint 'a :: <br>
finite to the context if 'a foo appears anywhere?</p>
<p>My use case is that I use Fraction_Field from HOL-Library, which demands <br>
its type parameter to be an idom, but whenever I have lemmas using 'a <br>
fraction, I have to annotate 'a :: idom manually, which is annoying.</p>
<p>Cheers,</p>
<p>Manuel</p>



<a name="294660300"></a>
<h4><a href="https://isabelle.zulipchat.com/#narrow/stream/336180-Archive%20Mirror%3A%20Isabelle%20Users%20Mailing%20List/topic/%5Bisabelle%5D%20typedef%20with%20sorts/near/294660300" class="zl"><img src="http://isabelle.systems/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Email Gateway <a href="http://isabelle.systems/zulip-archive/stream/336180-Archive-Mirror.3A-Isabelle-Users-Mailing-List/topic/.5Bisabelle.5D.20typedef.20with.20sorts.html#294660300">(Aug 22 2022 at 12:00)</a>:</h4>
<p>From: Makarius &lt;<a href="mailto:makarius@sketis.net">makarius@sketis.net</a>&gt;<br>
No.  Sorts do not affect the well-formedness of type-expressions, only the <br>
logical meaning.</p>
<p>Makarius</p>



<hr><p>Last updated: Nov 01 2025 at 16:22 UTC</p>
</html>