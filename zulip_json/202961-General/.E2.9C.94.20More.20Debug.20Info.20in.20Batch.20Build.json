[
    {
        "content": "<p>Sorry for the interruption... Guys, I solved this problem.</p>\n<p>It is about the 'sort' of keywords. I quote-marked the sort because I don't know the formal name of those \"prf_open % proof\". I didn't find any documentation about this...</p>\n<p>In my work,<br>\nWrong:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Thy</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kp\">keywords</span><span class=\"w\">  </span><span class=\"s\">\"❴\"</span><span class=\"w\"> </span><span class=\"s\">\"❵\"</span><span class=\"w\">  </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">prf_decl</span><span class=\"w\"> </span><span class=\"n\">%</span><span class=\"w\"> </span><span class=\"s\">\"proof\"</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Correct:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Thy</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kp\">keywords</span><span class=\"w\"> </span><span class=\"s\">\"❴\"</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">prf_open</span><span class=\"w\"> </span><span class=\"n\">%</span><span class=\"w\"> </span><span class=\"s\">\"proof\"</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"kp\">and</span><span class=\"w\"> </span><span class=\"s\">\"❵\"</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">prf_goal</span><span class=\"w\"> </span><span class=\"n\">%</span><span class=\"w\"> </span><span class=\"s\">\"proof\"</span><span class=\"w\"></span>\n</code></pre></div>\n<p>The place where my code goes wrong:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"....\"</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">❴</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"ow\">...</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">❵</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"ow\">.</span><span class=\"w\">  </span><span class=\"c\">(* here it goes wrong! *)</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Command \"❵\" is some magic defined by myself, and I didn't know what the keyword sort does. So I mimicked other commands and wrote \"prf_decl % proof\". It works in the interactive mode, but it seems the batch mode checks more about the outer syntax of Isar. The thing is the command \"❵\" generates some proof obligations and the usage in my theory is like <code>❵ by methods</code>. ❵ changes from the proof mode (forward) to the backward mode. Keyword sort \"prf_decl % proof\" is not for appending a proof scripts like this, so it fails in the syntax check and Isar tells me the command \".\" (corresponding to \"by methods\" here) is at the wrong place. After I corrected the sort to be <code>prf_goal % \"proof\"</code> which is expected to be followed by a proof script. The syntax check is passed and then everything works.</p>\n<p>Again... I really hope for more documentation about the system. Isabelle/Isar is really great art and a complicated video game...  I really enjoy it! again!</p>",
        "id": 312014789,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1669296362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418224\">Qiyuan Xu</span> has marked this topic as resolved.</p>",
        "id": 312014926,
        "sender_full_name": "Notification Bot",
        "timestamp": 1669296401
    }
]