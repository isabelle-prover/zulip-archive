[
    {
        "content": "<p>I wrote some ML code that declares a locale and defines two datatypes and a constant inside this locale. The code marks some theorems of the data types (e.g. selectors) and the definition as <code>code_unfold</code>. I'd like to interpret this locale in an anonymous context where the corresponding theorems should be marked as <code>code_unfold</code>. Unfortunately, this only seems to work with <code>global_interpretation</code>. Is it possible to avoid <code>global_interpretation</code>?</p>\n<p>Example below:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Scratch</span><span class=\"w\"> </span><span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"n\">Main</span>\n<span class=\"k\">begin</span>\n\n<span class=\"k\">locale</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n<span class=\"k\">begin</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"bar = True\"</span>\n<span class=\"k\">declare</span><span class=\"w\"> </span><span class=\"n\">bar_def</span><span class=\"o\">[</span><span class=\"n\">code_unfold</span><span class=\"o\">]</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">context</span>\n<span class=\"k\">begin</span>\n<span class=\"kn\">interpretation</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"ow\">.</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"foobar1 = bar\"</span>\n<span class=\"c\">(* Does not work *)</span>\n<span class=\"k\">export_code</span><span class=\"w\"> </span><span class=\"n\">foobar1</span><span class=\"w\"> </span><span class=\"kp\">in</span><span class=\"w\"> </span><span class=\"n\">SML</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">context</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">global_interpretation</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"ow\">.</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"foobar2 = bar\"</span>\n<span class=\"c\">(* Does work *)</span>\n<span class=\"k\">export_code</span><span class=\"w\"> </span><span class=\"n\">foobar2</span><span class=\"w\"> </span><span class=\"kp\">in</span><span class=\"w\"> </span><span class=\"n\">SML</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">end</span>\n</code></pre></div>",
        "id": 392324204,
        "sender_full_name": "Lukas Stevens",
        "timestamp": 1695303640
    }
]