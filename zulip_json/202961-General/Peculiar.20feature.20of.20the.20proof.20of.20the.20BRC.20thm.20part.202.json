[
    {
        "content": "<p>I tried the following lemma in Isabelle:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">induction_step</span><span class=\"o\">:</span>\n<span class=\"w\">      </span><span class=\"kp\">assumes</span><span class=\"w\">  </span><span class=\"s\">\"a âˆˆ â„•\"</span><span class=\"w\"> </span><span class=\"s\">\"b âˆˆ â„•\"</span><span class=\"w\"> </span><span class=\"s\">\"c âˆˆ â„•\"</span><span class=\"w\"> </span><span class=\"s\">\"d âˆˆ â„•\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x0 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"x1 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"x2 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"x3 âˆˆ â„š\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"a^2 + b^2 + c^2 + d^2 = ğ—„ - Î›\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x âˆˆ rat mat ğ— 1\"</span><span class=\"w\"> </span><span class=\"s\">\"ğ— &gt; 3\"</span><span class=\"w\"> </span><span class=\"s\">\"m &gt; 3\"</span><span class=\"w\"> </span><span class=\"s\">\"x0 = x $$ (0,0)\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x1 = x $$ (1,0)\"</span><span class=\"w\"> </span><span class=\"s\">\"x2 = x $$ (2,0)\"</span><span class=\"w\"> </span><span class=\"s\">\"x3 = x $$ (3,0)\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x0 = one_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x1 = two_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x2 = three_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x3 = four_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"y0 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"y1 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"y2 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"y3 âˆˆ â„š\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"(a âˆˆ â„• âˆ§ b âˆˆ â„• âˆ§ c âˆˆ â„• âˆ§ d âˆˆ â„• âˆ§</span>\n<span class=\"s\">                 x0 âˆˆ â„š âˆ§ x1 âˆˆ â„š âˆ§ x2 âˆˆ â„š âˆ§ x3 âˆˆ â„š âˆ§</span>\n<span class=\"s\">                 (a^2 + b^2 + c^2 + d^2 = ğ—„ - Î›) âˆ§</span>\n<span class=\"s\">                 x âˆˆ rat mat ğ— 1 âˆ§ ğ— &gt; 3 âˆ§ m &gt; 3 âˆ§ x0 = x $$ (0,0) âˆ§</span>\n<span class=\"s\">                 x1 = x $$ (1,0) âˆ§ x2 = x $$ (2,0) âˆ§ x3 = x $$ (3,0) âˆ§</span>\n<span class=\"s\">                 x0 = one_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 x1 = two_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 x2 = three_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 x3 = four_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 y0 âˆˆ â„š âˆ§ y1 âˆˆ â„š âˆ§ y2 âˆˆ â„š âˆ§ y3 âˆˆ â„š) âŸ¶</span>\n<span class=\"s\">                (âˆ‘i âˆˆ {0..&lt;m}.(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">                 of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">                 of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2) +</span>\n<span class=\"s\">                 y0^2 + y1^2 + y2^2 + y3^2\"</span>\n<span class=\"w\">              </span><span class=\"kp\">shows</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,1)) * x $$ (h,0))^2 +</span>\n<span class=\"s\">                      (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,2)) * x $$ (h,0))^2 +</span>\n<span class=\"s\">                      (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,3)) * x $$ (h,0))^2 +</span>\n<span class=\"s\">                      (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">                      y1^2 + y2^2 + y3^2 + of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">                      of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2)\"</span>\n<span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">-</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L0</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,1)) * x $$ (h,0))\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,2)) * x $$ (h,0))\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L3</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,3)) * x $$ (h,0))\"</span>\n\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">sumdef</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;4}.(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    ?L0^2 + ?L1^2 + ?L2^2 + ?L3^2\"</span>\n<span class=\"w\">   </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">numeral.simps</span><span class=\"o\">(</span><span class=\"n\">2</span><span class=\"o\">,</span><span class=\"n\">3</span><span class=\"o\">))</span>\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">split</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"{0..&lt;m} = {0..&lt;4} âˆª {4..&lt;m}\"</span><span class=\"w\"> </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">12</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">inter</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"{} = {0..&lt;4} âˆ© {4..&lt;m}\"</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">        (âˆ‘i âˆˆ {0..&lt;4}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) +</span>\n<span class=\"s\">        (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2)\"</span>\n<span class=\"w\">     </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">split</span><span class=\"w\"> </span><span class=\"n\">inter</span><span class=\"w\"> </span><span class=\"n\">sum.union_disjoint</span><span class=\"o\">[</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"s\">\"{0..&lt;4}\"</span><span class=\"w\"> </span><span class=\"s\">\"{4..&lt;m}\"</span><span class=\"w\"> </span><span class=\"s\">\"Î» i .</span>\n<span class=\"s\">      (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2\"</span><span class=\"o\">]</span>\n<span class=\"w\">     </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">metis</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">no_types</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lifting</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">finite_atLeastLessThan</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    ?L0^2 + ?L1^2 + ?L2^2 + ?L3^2 +</span>\n<span class=\"s\">    (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2)\"</span>\n<span class=\"w\">     </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">sumdef</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"âˆƒe00 e01 e02 e03 :: rat. ?L0 =</span>\n<span class=\"s\">    e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">    (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">     </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">linear_comb_of_y0_part_2</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">1</span><span class=\"o\">-</span><span class=\"n\">24</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n\n<span class=\"w\">   </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">e00</span><span class=\"w\"> </span><span class=\"n\">e01</span><span class=\"w\"> </span><span class=\"n\">e02</span><span class=\"w\"> </span><span class=\"n\">e03</span><span class=\"w\"> </span><span class=\"kp\">where</span><span class=\"w\"> </span><span class=\"n\">lin_comb_key_0</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"s\">\"?L0 = e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">    (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">     </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">fast</span>\n\n<span class=\"w\">   </span><span class=\"k\">assume</span><span class=\"w\"> </span><span class=\"n\">zero_assump</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"y0 = (if e00 = 1 then -(e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">    (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)))/2 else</span>\n<span class=\"s\">    (e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">    (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)))/(1-e00))\"</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">first_fact</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = ?L0^2\"</span>\n<span class=\"w\">   </span><span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"s\">\"e00 = 1\"</span><span class=\"o\">)</span>\n<span class=\"w\">     </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"n\">True</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0 = -(e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))) / 2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">zero_assump</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"-y0 = y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(-y0)^2 = (y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0)))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">argo</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = (e00* y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0)))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)) =</span>\n<span class=\"s\">         e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">lin_comb_key_0</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">thesis</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">   </span><span class=\"k\">next</span>\n<span class=\"w\">    </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"n\">False</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0 = (e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))) / (1 - e00)\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">zero_assump</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(1 - e00) * y0 = e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0 = e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">          (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">algebra_simps</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"(y0)^2 = (e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">          (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0)))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">argo</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)) =</span>\n<span class=\"s\">            e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">            (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">lin_comb_key_0</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">thesis</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">algebra_simps</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">qed</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;m}.(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">                 of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">                 of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2) +</span>\n<span class=\"s\">                 y0^2 + y1^2 + y2^2 + y3^2\"</span>\n<span class=\"w\">    </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">1</span><span class=\"o\">-</span><span class=\"n\">25</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">zero_assump</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">split_eq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"?L0^2 + ?L1^2 + ?L2^2 + ?L3^2 +</span>\n<span class=\"s\">    (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    y0^2 + y1^2 + y2^2 + y3^2 + of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">    of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2)\"</span>\n<span class=\"w\">    </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"?L1^2 + ?L2^2 + ?L3^2 +</span>\n<span class=\"s\">    (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    y1^2 + y2^2 + y3^2 + of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">    of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2)\"</span>\n<span class=\"w\">    </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">split_eq</span><span class=\"w\"> </span><span class=\"n\">first_fact</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"k\">thus</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">thesis</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"k\">qed</span>\n</code></pre></div>\n<p>Isabelle accepted every step of the proof except for the last line \"thus ?thesis by simp\", even though the line before that is identical to the thesis. The error message was, \"Illegal application of proof command in \"state\" mode\" and \"Result contains obtained parameters: e03 e02 e01 e00\" and \"Local statement fails to refine any pending goal\". I assume this has to do with the fact that I used \"assume\" in the proof. I had anticipated that Isabelle would have problems with this in my first post \"Peculiar feature of the proof of the Bruck Ryser Chowla thm\". And I was right unfortunately. I'm not sure how to get Isabelle to recognize that it is a valid proof even though it is peculiar - the thesis doesn't say anything about y0, even though the proof assumes that y0 is a specific linear combination of the other y variables. Therefore, the assumption is irrelevant to whether the lemma is correct.</p>\n<p>Any explanations or ideas?</p>",
        "id": 490344332,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734828577
    },
    {
        "content": "<p>Iâ€™m starting to think perhaps I should rewrite the thesis instead as â€œthere exists y1 y2 y3 and vector x such that â€¦.â€ Since the thesis is correct only with the assumption in my proof.</p>",
        "id": 490359502,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734844049
    },
    {
        "content": "<p>But there is a problem with this - I canâ€™t repeat the induction step to get rid of y1, y2, y3, etc. with this strategy. So I am at a loss as to what to do next.</p>",
        "id": 490359916,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734844504
    },
    {
        "content": "<p>Thinking about this more perhaps the answer is putting the assume part in the initial assumption.</p>",
        "id": 490406831,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734889985
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"736162\">Craig Alan Feinstein</span> <a href=\"#narrow/channel/202961-General/topic/Peculiar.20feature.20of.20the.20proof.20of.20the.20BRC.20thm.20part.202/near/490344332\">said</a>:</p>\n<blockquote>\n<p>And I was right unfortunately. I'm not sure how to get Isabelle to recognize that it is a valid proof even though it is peculiar - the thesis doesn't say anything about y0, even though the proof assumes that y0 is a specific linear combination of the other y variables. Therefore, the assumption is irrelevant to whether the lemma is correct.</p>\n<p>Any explanations or ideas?</p>\n</blockquote>\n<ol>\n<li>Adding random assumptions is incorrect even if they to not appear in the goal. If I assume that there is a number that is both even and odd, everything will go through.</li>\n<li>How about rephrasing your theorem into proper mathematical term? Your assume is not an assume. It is a <em>definition</em> of <code>y0</code>. So why not use the keyword <code>define</code>?</li>\n</ol>",
        "id": 490408776,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734891768
    },
    {
        "content": "<p>Also your theorem is a mess currently. At least you could: </p>\n<ul>\n<li>use defines for abbreviations in your theorem</li>\n<li>think about deduplicating assumptions</li>\n</ul>",
        "id": 490408918,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734891907
    },
    {
        "content": "<p>Remark that you did not follow the suggested proof pattern from Fabian. Why?</p>",
        "id": 490409390,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734892373
    },
    {
        "content": "<p>At least from what I can see here, there <em>are</em> assumption on <code>y0</code></p>",
        "id": 490409857,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734892883
    },
    {
        "content": "<p>So it is not a free variable as you suggested in the other thread</p>",
        "id": 490409925,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734892943
    },
    {
        "content": "<p>My idea to put the assume part in the assumptions worked. Isabelle recognizes the lemma proof as valid.</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">induction_step</span><span class=\"o\">:</span>\n<span class=\"w\">      </span><span class=\"kp\">assumes</span><span class=\"w\">  </span><span class=\"s\">\"a âˆˆ â„•\"</span><span class=\"w\"> </span><span class=\"s\">\"b âˆˆ â„•\"</span><span class=\"w\"> </span><span class=\"s\">\"c âˆˆ â„•\"</span><span class=\"w\"> </span><span class=\"s\">\"d âˆˆ â„•\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x0 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"x1 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"x2 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"x3 âˆˆ â„š\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"a^2 + b^2 + c^2 + d^2 = ğ—„ - Î›\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x âˆˆ rat mat ğ— 1\"</span><span class=\"w\"> </span><span class=\"s\">\"ğ— &gt; 3\"</span><span class=\"w\"> </span><span class=\"s\">\"m &gt; 3\"</span><span class=\"w\"> </span><span class=\"s\">\"x0 = x $$ (0,0)\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x1 = x $$ (1,0)\"</span><span class=\"w\"> </span><span class=\"s\">\"x2 = x $$ (2,0)\"</span><span class=\"w\"> </span><span class=\"s\">\"x3 = x $$ (3,0)\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x0 = one_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x1 = two_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x2 = three_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"x3 = four_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3)))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"y0 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"y1 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"y2 âˆˆ â„š\"</span><span class=\"w\"> </span><span class=\"s\">\"y3 âˆˆ â„š\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)) =</span>\n<span class=\"s\">                 e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">                 (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"y0 = (if e00 = 1 then -(e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">                 (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)))/2 else</span>\n<span class=\"s\">                 (e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">                 (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)))/(1-e00))\"</span>\n<span class=\"w\">                </span><span class=\"s\">\"(a âˆˆ â„• âˆ§ b âˆˆ â„• âˆ§ c âˆˆ â„• âˆ§ d âˆˆ â„• âˆ§</span>\n<span class=\"s\">                 x0 âˆˆ â„š âˆ§ x1 âˆˆ â„š âˆ§ x2 âˆˆ â„š âˆ§ x3 âˆˆ â„š âˆ§</span>\n<span class=\"s\">                 (a^2 + b^2 + c^2 + d^2 = ğ—„ - Î›) âˆ§</span>\n<span class=\"s\">                 x âˆˆ rat mat ğ— 1 âˆ§ ğ— &gt; 3 âˆ§ m &gt; 3 âˆ§ x0 = x $$ (0,0) âˆ§</span>\n<span class=\"s\">                 x1 = x $$ (1,0) âˆ§ x2 = x $$ (2,0) âˆ§ x3 = x $$ (3,0) âˆ§</span>\n<span class=\"s\">                 x0 = one_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 x1 = two_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 x2 = three_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 x3 = four_of(y_inv_of((a, b, c, d),(y0, y1, y2, y3))) âˆ§</span>\n<span class=\"s\">                 y0 âˆˆ â„š âˆ§ y1 âˆˆ â„š âˆ§ y2 âˆˆ â„š âˆ§ y3 âˆˆ â„š) âŸ¶</span>\n<span class=\"s\">                (âˆ‘i âˆˆ {0..&lt;m}.(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">                 of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">                 of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2) +</span>\n<span class=\"s\">                 y0^2 + y1^2 + y2^2 + y3^2\"</span>\n<span class=\"w\">              </span><span class=\"kp\">shows</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,1)) * x $$ (h,0))^2 +</span>\n<span class=\"s\">                      (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,2)) * x $$ (h,0))^2 +</span>\n<span class=\"s\">                      (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,3)) * x $$ (h,0))^2 +</span>\n<span class=\"s\">                      (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">                      y1^2 + y2^2 + y3^2 + of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">                      of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2)\"</span>\n<span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">-</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L0</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,1)) * x $$ (h,0))\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,2)) * x $$ (h,0))\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">L3</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,3)) * x $$ (h,0))\"</span>\n\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">sumdef</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;4}.(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    ?L0^2 + ?L1^2 + ?L2^2 + ?L3^2\"</span>\n<span class=\"w\">   </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">numeral.simps</span><span class=\"o\">(</span><span class=\"n\">2</span><span class=\"o\">,</span><span class=\"n\">3</span><span class=\"o\">))</span>\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">split</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"{0..&lt;m} = {0..&lt;4} âˆª {4..&lt;m}\"</span><span class=\"w\"> </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">12</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">inter</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"{} = {0..&lt;4} âˆ© {4..&lt;m}\"</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">   </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">        (âˆ‘i âˆˆ {0..&lt;4}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) +</span>\n<span class=\"s\">        (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2)\"</span>\n<span class=\"w\">     </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">split</span><span class=\"w\"> </span><span class=\"n\">inter</span><span class=\"w\"> </span><span class=\"n\">sum.union_disjoint</span><span class=\"o\">[</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"s\">\"{0..&lt;4}\"</span><span class=\"w\"> </span><span class=\"s\">\"{4..&lt;m}\"</span><span class=\"w\"> </span><span class=\"s\">\"Î» i .</span>\n<span class=\"s\">      (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2\"</span><span class=\"o\">]</span>\n<span class=\"w\">     </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">metis</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">no_types</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lifting</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">finite_atLeastLessThan</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    ?L0^2 + ?L1^2 + ?L2^2 + ?L3^2 +</span>\n<span class=\"s\">    (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2)\"</span>\n<span class=\"w\">     </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">sumdef</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">first_fact</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = ?L0^2\"</span>\n<span class=\"w\">   </span><span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"s\">\"e00 = 1\"</span><span class=\"o\">)</span>\n<span class=\"w\">     </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"n\">True</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0 = -(e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))) / 2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">26</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"-y0 = y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(-y0)^2 = (y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0)))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">argo</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = (e00* y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0)))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)) =</span>\n<span class=\"s\">         e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">25</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">thesis</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">   </span><span class=\"k\">next</span>\n<span class=\"w\">    </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"n\">False</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0 = (e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))) / (1 - e00)\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">26</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(1 - e00) * y0 = e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">         (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0 = e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">          (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">algebra_simps</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"(y0)^2 = (e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">          (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int (N $$ (h, 0)) * x $$ (h, 0)))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">argo</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0)) =</span>\n<span class=\"s\">            e00 * y0 + e01 * y1 + e02 * y2 + e03 * y3 +</span>\n<span class=\"s\">            (âˆ‘h âˆˆ {4..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">25</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"y0^2 = (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,0)) * x $$ (h,0))^2\"</span>\n<span class=\"w\">      </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">eq</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">thesis</span>\n<span class=\"w\">      </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">algebra_simps</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">qed</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"(âˆ‘i âˆˆ {0..&lt;m}.(âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">                 of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">                 of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2) +</span>\n<span class=\"s\">                 y0^2 + y1^2 + y2^2 + y3^2\"</span>\n<span class=\"w\">    </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">assms</span><span class=\"o\">(</span><span class=\"n\">1</span><span class=\"o\">-</span><span class=\"n\">27</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">split_eq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"?L0^2 + ?L1^2 + ?L2^2 + ?L3^2 +</span>\n<span class=\"s\">    (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    y0^2 + y1^2 + y2^2 + y3^2 + of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">    of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2)\"</span>\n<span class=\"w\">    </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"s\">\"?L1^2 + ?L2^2 + ?L3^2 +</span>\n<span class=\"s\">    (âˆ‘i âˆˆ {4..&lt;m}. (âˆ‘h âˆˆ {0..&lt;ğ—}. of_int(N $$ (h,i)) * x $$ (h,0))^2) =</span>\n<span class=\"s\">    y1^2 + y2^2 + y3^2 + of_int Î› * (âˆ‘j âˆˆ {0..&lt;ğ—}.(x $$ (j, 0)))^2 +</span>\n<span class=\"s\">    of_int (ğ—„ - Î›) * (âˆ‘j âˆˆ {4..&lt;m}. (x $$ (j, 0))^2)\"</span>\n<span class=\"w\">    </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">split_eq</span><span class=\"w\"> </span><span class=\"n\">first_fact</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"k\">thus</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">thesis</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"k\">qed</span>\n</code></pre></div>\n<p>Thank you Mathias Fleury for your remarks. I now agree with you that the proof does not have the peculiar property that I suggested in the thread, as y0 is not a free variable as I thought in the other thread. Also I agree that the theorem is a mess for readers to read. My goal now is to get my proofs accepted by Isabelle and later I'll worry about making my proofs readable.</p>",
        "id": 490428901,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734911712
    },
    {
        "content": "<p>\"My goal now is to get my proofs accepted by Isabelle and later I'll worry about making my proofs readable.\"</p>\n<p>this is surely the wrong way to go for formalized math; even if your proofs are messy, the theorem statements should really not be a mess, both for your own context management and also for others to inspect your results. It is also very difficult (I assume) for <span class=\"user-mention\" data-user-id=\"233198\">@Mathias Fleury</span> and others to figure out what's wrong with your proofs.</p>",
        "id": 490434461,
        "sender_full_name": "Yong Kiam",
        "timestamp": 1734916863
    },
    {
        "content": "<p>Yong Kiam, this particular lemma (along with three other similar lemmas) is central to the proof of the BRC theorem. Everything else in the proof is high school algebra with some linear algebra and elementary number theory. The only way I know of to make it more readable would be to stick this lemma in another lemma, which I just might do. But every assumption is necessary for the lemma to work, even though there are twenty something assumptions. Also anyone who reads the proof in Stinsonâ€™s book of the BRC should be able to understand the lemma since it uses the same variable names.</p>",
        "id": 490443562,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734924311
    },
    {
        "content": "<p>Also the lemma needs to be modified since it only looks at four columns of matrix N instead of all columns. But that shouldnâ€™t be too hard to do.</p>",
        "id": 490443716,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734924424
    },
    {
        "content": "<p>Also Yong Kiam thank you for your comments.</p>",
        "id": 490444284,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734924850
    },
    {
        "content": "<p>sure, but there are many more things that you can do even in its current state, such as the points <span class=\"user-mention\" data-user-id=\"233198\">@Mathias Fleury</span>  has mentioned about defining variables with the <code>defines</code> keyword</p>\n<p>just looking quickly, the role of <code>x0</code> etc. are all just acting as (local) definitions</p>\n<p>you only need to define, e.g., <code>x0 = x $$ (0,0)</code> once instead of writing it in every assumption</p>",
        "id": 490448677,
        "sender_full_name": "Yong Kiam",
        "timestamp": 1734928349
    },
    {
        "content": "<p>You mean I can just put â€œdefine x0 = x$$(0,0)â€ in the middle of the proof? That would definitely help to make it more readable.</p>",
        "id": 490450248,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734929513
    },
    {
        "content": "<p>you can write <code>defines</code> as a keyword in the theorem statement, not in the middle of the proof</p>",
        "id": 490450321,
        "sender_full_name": "Yong Kiam",
        "timestamp": 1734929548
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/channel/202961-General/topic/Peculiar.20feature.20of.20the.20proof.20of.20the.20BRC.20thm.20part.202/near/490408918\">said</a>:</p>\n<blockquote>\n<p>Also your theorem is a mess currently. At least you could: </p>\n<ul>\n<li>use defines for abbreviations in your theorem</li>\n<li>think about deduplicating assumptions</li>\n</ul>\n</blockquote>\n<p>^ what I mean following what Mathias has written here would be a good step to clean up your theorem for subsequent use</p>",
        "id": 490450363,
        "sender_full_name": "Yong Kiam",
        "timestamp": 1734929594
    },
    {
        "content": "<p>You mean the assumptions part?</p>",
        "id": 490450386,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734929620
    },
    {
        "content": "<p>Can you please give an example?</p>",
        "id": 490450506,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734929723
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"kp\">defines</span><span class=\"w\"> </span><span class=\"s\">\"x0 \\equiv x $$ (0,0)\"</span>\n<span class=\"w\">  </span><span class=\"kp\">assumes</span><span class=\"w\"> </span><span class=\"s\">\".... just use x0 in here ...\"</span>\n</code></pre></div>",
        "id": 490450741,
        "sender_full_name": "Yong Kiam",
        "timestamp": 1734929888
    },
    {
        "content": "<p>Ok thank you.</p>",
        "id": 490452629,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734931046
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"234226\">Yong Kiam</span> <a href=\"#narrow/channel/202961-General/topic/Peculiar.20feature.20of.20the.20proof.20of.20the.20BRC.20thm.20part.202/near/490434461\">said</a>:</p>\n<blockquote>\n<p>\"My goal now is to get my proofs accepted by Isabelle and later I'll worry about making my proofs readable.\"</p>\n<p>this is surely the wrong way to go for formalized math; even if your proofs are messy, the theorem statements should really not be a mess, both for your own context management and also for others to inspect your results. It is also very difficult (I assume) for <span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> and others to figure out what's wrong with your proofs.</p>\n</blockquote>\n<p>I actually tried to run the proof in Isabelle but failed to guess what imports it needed, so I stopped</p>",
        "id": 490530630,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734965007
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"736162\">Craig Alan Feinstein</span> <a href=\"#narrow/channel/202961-General/topic/Peculiar.20feature.20of.20the.20proof.20of.20the.20BRC.20thm.20part.202/near/490443562\">said</a>:</p>\n<blockquote>\n<p>Yong Kiam, this particular lemma (along with three other similar lemmas) is central to the proof of the BRC theorem. Everything else in the proof is high school algebra with some linear algebra and elementary number theory. The only way I know of to make it more readable would be to stick this lemma in another lemma, which I just might do. But every assumption is necessary for the lemma to work, even though there are twenty something assumptions. Also anyone who reads the proof in Stinsonâ€™s book of the BRC should be able to understand the lemma since it uses the same variable names.</p>\n</blockquote>\n<p>I have not read the book, but does I doubt that Stinson put everything as an assumption. This for example just looks fishy:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">x0</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">x3</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"o\">(</span><span class=\"n\">a^2</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">b^2</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">c^2</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">d^2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">ğ—„</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">Î›</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">rat</span><span class=\"w\"> </span><span class=\"n\">mat</span><span class=\"w\"> </span><span class=\"n\">ğ—</span><span class=\"w\"> </span><span class=\"n\">1</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">ğ—</span><span class=\"w\"> </span><span class=\"n\">&gt;</span><span class=\"w\"> </span><span class=\"n\">3</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">&gt;</span><span class=\"w\"> </span><span class=\"n\">3</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">x0</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">0</span><span class=\"o\">,</span><span class=\"n\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">1</span><span class=\"o\">,</span><span class=\"n\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">2</span><span class=\"o\">,</span><span class=\"n\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">x3</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">3</span><span class=\"o\">,</span><span class=\"n\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">x0</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">one_of</span><span class=\"o\">(</span><span class=\"n\">y_inv_of</span><span class=\"o\">((</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">),(</span><span class=\"n\">y0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y3</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">two_of</span><span class=\"o\">(</span><span class=\"n\">y_inv_of</span><span class=\"o\">((</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">),(</span><span class=\"n\">y0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y3</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">three_of</span><span class=\"o\">(</span><span class=\"n\">y_inv_of</span><span class=\"o\">((</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">),(</span><span class=\"n\">y0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y3</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">x3</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">four_of</span><span class=\"o\">(</span><span class=\"n\">y_inv_of</span><span class=\"o\">((</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">),(</span><span class=\"n\">y0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y3</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span>\n<span class=\"w\">                 </span><span class=\"n\">y0</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"w\"> </span><span class=\"n\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">y3</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">âŸ¶</span>\n<span class=\"w\">                </span><span class=\"o\">(</span><span class=\"n\">âˆ‘i</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"ow\">{</span><span class=\"n\">0..&lt;m</span><span class=\"ow\">}.</span><span class=\"o\">(</span><span class=\"n\">âˆ‘h</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"ow\">{</span><span class=\"n\">0..&lt;ğ—</span><span class=\"ow\">}.</span><span class=\"w\"> </span><span class=\"n\">of_int</span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">i</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">0</span><span class=\"o\">))</span><span class=\"n\">^2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">                 </span><span class=\"n\">of_int</span><span class=\"w\"> </span><span class=\"n\">Î›</span><span class=\"w\"> </span><span class=\"n\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">âˆ‘j</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"ow\">{</span><span class=\"n\">0..&lt;ğ—</span><span class=\"ow\">}.</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">0</span><span class=\"o\">)))</span><span class=\"n\">^2</span><span class=\"w\"> </span><span class=\"o\">+</span>\n<span class=\"w\">                 </span><span class=\"n\">of_int</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ—„</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">Î›</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">âˆ‘j</span><span class=\"w\"> </span><span class=\"n\">âˆˆ</span><span class=\"w\"> </span><span class=\"ow\">{</span><span class=\"n\">4..&lt;m</span><span class=\"ow\">}.</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">$$</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">0</span><span class=\"o\">))</span><span class=\"n\">^2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">+</span>\n<span class=\"w\">                 </span><span class=\"n\">y0^2</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">y1^2</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">y2^2</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">y3^2</span>\n</code></pre></div>",
        "id": 490531327,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734965287
    },
    {
        "content": "<p>It looks like you are having an induction around and this is the induction hypothesis</p>",
        "id": 490531429,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1734965323
    },
    {
        "content": "<p>I have imports:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Bruck_Ryser_Chowla</span><span class=\"w\"> </span><span class=\"kp\">imports</span>\n<span class=\"w\">  </span><span class=\"n\">Fishers_Inequality.Fishers_Inequality</span><span class=\"w\"> </span><span class=\"n\">SumSquares.FourSquares</span><span class=\"w\"> </span><span class=\"n\">Pell.Pell</span>\n<span class=\"k\">begin</span>\n</code></pre></div>\n<p>The assumptions in my lemma use functions that I defined elsewhere though. I will use the lemma in my induction argument, which I haven't created yet.</p>",
        "id": 490592408,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1734992447
    },
    {
        "content": "<p>that is not the problem with your assumptions, rather, you have assumptions like this:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kp\">assumes</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"kp\">assumes</span><span class=\"w\"> </span><span class=\"s\">\"P âŸ¶ Q\"</span>\n</code></pre></div>\n<p>you can just write that as</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kp\">assumes</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"kp\">assumes</span><span class=\"w\"> </span><span class=\"n\">Q</span>\n</code></pre></div>",
        "id": 490607825,
        "sender_full_name": "Yong Kiam",
        "timestamp": 1735000687
    },
    {
        "content": "<p>Yong Kiam, excellent point. That gets rid of almost half of the assumptions without affecting the validity of the proof. Thank you.</p>",
        "id": 490613773,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1735004319
    }
]