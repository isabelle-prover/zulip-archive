[
    {
        "content": "<p>It seems to be impossible use <code>interpretation</code> with the locale <code>factorial_monoid</code> from <code>HOL-Algebra.Ring_Divisibility</code>. The commands <code>sublocale</code> and <code>interpret</code> still work. This issue extends to sublocales of <code>factorial_monoid</code> such as <code>factorial_domain</code>, <code>euclidean_domain</code> and <code>field</code>. Here is a MWE:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Scratch</span>\n<span class=\"w\">  </span><span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"s\">\"HOL-Algebra.Ring_Divisibility\"</span>\n<span class=\"k\">begin</span>\n\n<span class=\"kn\">interpretation</span><span class=\"w\"> </span><span class=\"n\">factorial_monoid</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"k\">end</span>\n</code></pre></div>\n<p>The error printout is</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">Duplicate</span><span class=\"w\"> </span><span class=\"n\">fact</span><span class=\"w\"> </span><span class=\"k\">declaration</span><span class=\"w\"> </span><span class=\"s\">\"Scratch.wfactors_exist\"</span><span class=\"w\"> </span><span class=\"n\">vs.</span><span class=\"w\"> </span><span class=\"s\">\"Scratch.wfactors_exist\"</span><span class=\"n\">⌂</span>\n<span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">above</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">occurred</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">activating</span><span class=\"w\"> </span><span class=\"n\">facts</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"k\">locale</span><span class=\"w\"> </span><span class=\"kn\">instance</span>\n<span class=\"n\">factorial_monoid</span><span class=\"w\"> </span><span class=\"s\">\"G\"</span>\n</code></pre></div>\n<p>Indeed, <code>find_theorems</code> gives two matches: <code>Divisibility.divisor_chain_condition_monoid.wfactors_exist</code> and <code>Divisibility.factorial_monoid.wfactors_exist</code>. I think the issue might come from the fact that <code>factorial_monoid</code> is a sublocale of <code>divisor_chain_condition_monoid</code>.</p>\n<p>Is this an issue with the library, or am I doing something wrong? I am trying to create a global interpretation of the (HOL-Algebra) <code>field</code> locale.</p>",
        "id": 389255439,
        "sender_full_name": "Artem Khovanov",
        "timestamp": 1693938211
    },
    {
        "content": "<p>I believe this is an issue with the library: </p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">Divisibility.divisor_chain_condition_monoid.wfactors_exist</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">divisor_chain_condition_monoid</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">⟹</span>\n<span class=\"w\">    </span><span class=\"o\">?</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">∈</span><span class=\"w\"> </span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">⟹</span><span class=\"w\"> </span><span class=\"n\">∃as.</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">⊆</span><span class=\"w\"> </span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">∧</span><span class=\"w\"> </span><span class=\"n\">wfactors</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">Divisibility.factorial_monoid.wfactors_exist</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">factorial_monoid</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">⟹</span>\n<span class=\"w\">    </span><span class=\"o\">?</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">∈</span><span class=\"w\"> </span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">⟹</span><span class=\"w\"> </span><span class=\"n\">∃fs.</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">fs</span><span class=\"w\"> </span><span class=\"n\">⊆</span><span class=\"w\"> </span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">∧</span><span class=\"w\"> </span><span class=\"n\">wfactors</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">fs</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"n\">a</span>\n</code></pre></div>\n<p>Apart from the names and the locale precondition, these two lemma statements are identical. Moreover, considering <code>factorial_monoid</code> is a sublocale of <code>divisor_chain_condition_monoid</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">sublocale</span><span class=\"w\"> </span><span class=\"n\">factorial_monoid</span><span class=\"w\">  </span><span class=\"n\">⊆</span><span class=\"w\"> </span><span class=\"n\">divisor_chain_condition_monoid</span>\n<span class=\"w\">  </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">divisor_chain_condition_monoid_axioms</span><span class=\"w\"> </span><span class=\"ow\">.</span>\n</code></pre></div>\n<p>The <code>factorial_monoid</code> one should be able to be inherited from <code>divisor_chain_condition_monoid</code>.</p>",
        "id": 389414559,
        "sender_full_name": "Wenda Li",
        "timestamp": 1694005207
    }
]