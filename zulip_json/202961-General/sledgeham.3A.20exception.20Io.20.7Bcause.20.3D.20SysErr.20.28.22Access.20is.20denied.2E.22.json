[
    {
        "content": "<p>Hi,</p>\n<p>I got this error when doing some sledgehammer calls on Windows (using Isabelle2023):</p>\n<p>Warning: exception Io {cause = SysErr (\"Access is denied.\", SOME ERROR_ACCESS_DENIED), function = \"BinIO.openOut\", name =<br>\n                       \"prob15193332_1_proof.p\"} raised (line 124 of \"./basis/BinIO.sml\")</p>\n<p>has anyone else encountered this?<br>\nHow do you fix this?</p>\n<p>Thanks a lot,<br>\nChengsong</p>",
        "id": 469470366,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726075574
    },
    {
        "content": "<p>that means that sledgehammer is trying to read a proof file but does not have the rights to do so</p>",
        "id": 469473039,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726076419
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469473039\">said</a>:</p>\n<blockquote>\n<p>that means that sledgehammer is trying to read a proof file but does not have the rights to do so</p>\n</blockquote>\n<p>Thank you! But if it created that file itself, what could cause this to happen? Weirdly that after downloading and decompressing Isabelle2023 again to a different folder (Documents instead of Desktop) this issue does not turn up for the same s/h call now......</p>",
        "id": 469593651,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726128902
    },
    {
        "content": "<p>An antivirus maybe?</p>",
        "id": 469596543,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726129468
    },
    {
        "content": "<p>the proof files are stored somewhere /tmp or whatever this is called under windows</p>",
        "id": 469596762,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726129510
    },
    {
        "content": "<p>especially for antivirus, waiting longer can make issues appear and disappear…</p>",
        "id": 469596859,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726129540
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469596543\">said</a>:</p>\n<blockquote>\n<p>An antivirus maybe?</p>\n</blockquote>\n<p>I've turned off windows defender and no antivirus other than that installed.</p>",
        "id": 469597611,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726129766
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469596859\">said</a>:</p>\n<blockquote>\n<p>especially for antivirus, waiting longer can make issues appear and disappear…</p>\n</blockquote>\n<p>Windows sledgehammer is so buggy.......</p>",
        "id": 469597656,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726129783
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469596762\">said</a>:</p>\n<blockquote>\n<p>the proof files are stored somewhere /tmp or whatever this is called under windows</p>\n</blockquote>\n<p>I do lots of s/h calls at the same time. Could it be the case that at some point a certain problem file's name collides with another, such that it cannot be created?</p>",
        "id": 469597835,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726129824
    },
    {
        "content": "<p>no they cannot collide (unless you use the overlord option)</p>",
        "id": 469598004,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726129888
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"241231\">Chengsong Tan</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469597656\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469596859\">said</a>:</p>\n<blockquote>\n<p>especially for antivirus, waiting longer can make issues appear and disappear…</p>\n</blockquote>\n<p>Windows sledgehammer is so buggy.......</p>\n</blockquote>\n<p>No really. Some people encounter a lot of issues, but most are fine (including students)</p>",
        "id": 469598333,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726129954
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469598004\">said</a>:</p>\n<blockquote>\n<p>no they cannot collide (unless you use the overlord option)</p>\n</blockquote>\n<p>LOL that's a funny name for an option</p>",
        "id": 469598390,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726129968
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 469598677,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726130024
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469598333\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"241231\">Chengsong Tan</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469597656\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469596859\">said</a>:</p>\n<blockquote>\n<p>especially for antivirus, waiting longer can make issues appear and disappear…</p>\n</blockquote>\n<p>Windows sledgehammer is so buggy.......</p>\n</blockquote>\n<p>No really. Some people encounter a lot of issues, but most are fine (including students)</p>\n</blockquote>\n<p>Not sure if raised in the mailing list/forum, but haven't you noticed that Isabelle 2024 on windows will have e provers hanging around even after sledgehammer has terminated?</p>",
        "id": 469598919,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726130057
    },
    {
        "content": "<p>which will quickly exhaust system memory after you do a number of s/h calls.</p>",
        "id": 469599105,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726130094
    },
    {
        "content": "<p>Yeah I saw this one (and my last take is that we still do not know why)</p>",
        "id": 469599927,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726130231
    },
    {
        "content": "<p>in particular sledgehammer is supposed to kill jobs</p>",
        "id": 469600155,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726130269
    },
    {
        "content": "<p>so windows for some reason is not killing jobs properly</p>",
        "id": 469600264,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726130284
    },
    {
        "content": "<p>There are good reasons why most heavy Isabelle users are on linux or mac…</p>",
        "id": 469600397,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726130310
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469600264\">said</a>:</p>\n<blockquote>\n<p>so windows for some reason is not killing jobs properly</p>\n</blockquote>\n<p>But could we integrate a stronger killing method into Isabelle2024 on windows? Say <code>taskkill</code>, which does kill properly (which is how I try to kill eprover.exe).</p>",
        "id": 469601855,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726130599
    },
    {
        "content": "<p>Sure. But for that we need someone who uses windows <em>and</em> bothers enough to try to fix the issue.</p>",
        "id": 469602478,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726130697
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469602478\">said</a>:</p>\n<blockquote>\n<p>Sure. But for that we need someone who uses windows <em>and</em> bothers enough to try to fix the issue.</p>\n</blockquote>\n<p>I use Windows. Is this an easy fix? It does sound like one and presumably you can just find the place where the killing API is called in isabelle/ML and do a search+replace?</p>",
        "id": 469607008,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726131596
    },
    {
        "content": "<p>It will not be as easy as a search and replace.<br>\nSo:</p>\n<ul>\n<li>open isabelle with base theory Pure</li>\n<li>open the file Sledgehammer.thy</li>\n<li>Now try to find a lemma where you can trigger the issue. Maybe this does:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"(∀(x::nat). P x)\"</span>\n<span class=\"w\">  </span><span class=\"kt\">sledgehammer</span><span class=\"o\">[</span><span class=\"n\">e</span><span class=\"o\">,</span><span class=\"n\">verbose</span><span class=\"o\">]</span>\n</code></pre></div>\n<ul>\n<li>Then you will have to look at the file timeout.ML and see why the interrupt is not working properly</li>\n</ul>",
        "id": 469611040,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726132612
    },
    {
        "content": "<p>They issue might go down as far as it is a polyml bug (after unpealing the Isabelle_Threads layer and so on). In that case, it might be end up with a Polyml bug if you can reproduce it without isabelle</p>",
        "id": 469611479,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726132731
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469611479\">said</a>:</p>\n<blockquote>\n<p>They issue might go down as far as it is a polyml bug (after unpealing the Isabelle_Threads layer and so on). In that case, it might be end up with a Polyml bug if you can reproduce it without isabelle</p>\n</blockquote>\n<p>Have you ever encountered a polyml bug before?</p>",
        "id": 469971802,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726235296
    },
    {
        "content": "<p>I have not</p>",
        "id": 469972064,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726235367
    },
    {
        "content": "<p>but I have debugged weird Windows + Sledgehammer problems before</p>",
        "id": 469972179,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726235389
    },
    {
        "content": "<p>(where that file  you have issues with was empty instead of containing the proof)</p>",
        "id": 469972401,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726235420
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/stream/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469972401\">said</a>:</p>\n<blockquote>\n<p>(where that file  you have issues with was empty instead of containing the proof)</p>\n</blockquote>\n<p>What tends to be the cause of such problems?</p>",
        "id": 469972695,
        "sender_full_name": "Chengsong Tan",
        "timestamp": 1726235467
    },
    {
        "content": "<p>In that case, there was a weird timing problems. In that case if you waited just a tiny bit longer the file had the content (like if the flush was too slow)</p>",
        "id": 469973188,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726235542
    },
    {
        "content": "<p>Usually the hard part is to identify what is the issue exactly</p>",
        "id": 469973416,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726235579
    },
    {
        "content": "<p>or at least finding a way to reproduce it consistently (or consistently enough)</p>",
        "id": 469973570,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1726235606
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/channel/202961-General/topic/sledgeham.3A.20exception.20Io.20.7Bcause.20.3D.20SysErr.20.28.22Access.20is.20denied.2E.22/near/469611040\">said</a>:</p>\n<blockquote>\n<p>It will not be as easy as a search and replace.<br>\nSo:</p>\n<ul>\n<li>open isabelle with base theory Pure</li>\n<li>open the file Sledgehammer.thy</li>\n<li>Now try to find a lemma where you can trigger the issue. Maybe this does:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"(∀(x::nat). P x)\"</span>\n<span class=\"w\">  </span><span class=\"kt\">sledgehammer</span><span class=\"o\">[</span><span class=\"n\">e</span><span class=\"o\">,</span><span class=\"n\">verbose</span><span class=\"o\">]</span>\n</code></pre></div>\n<ul>\n<li>Then you will have to look at the file timeout.ML and see why the interrupt is not working properly</li>\n</ul>\n</blockquote>\n<p>if your interested <span class=\"user-mention\" data-user-id=\"768294\">@Moritz R</span>  you could try to fix this.</p>",
        "id": 480350461,
        "sender_full_name": "irvin",
        "timestamp": 1730680321
    },
    {
        "content": "<p>note that there appear to have some changes in sledgehammer so base your work on the latest branch.</p>",
        "id": 480350624,
        "sender_full_name": "irvin",
        "timestamp": 1730680467
    }
]