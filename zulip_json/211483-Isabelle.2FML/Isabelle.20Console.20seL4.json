[
    {
        "content": "<p>We’re able to run <code>isabelle process</code> on theories in the AFP via the command:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">isabelle</span><span class=\"w\"> </span><span class=\"n\">process</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"ow\">..</span><span class=\"n\">/afp/thys/Word_Lib/Word_8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"s\">\"Thy_Info.get_names () |&gt; map writeln\"</span><span class=\"w\"></span>\n</code></pre></div>\n<p>This gives us the following output:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">Pure</span><span class=\"w\"></span>\n<span class=\"n\">HOL</span><span class=\"o\">-</span><span class=\"n\">Eisbach.Eisbach</span><span class=\"w\"></span>\n<span class=\"n\">…</span><span class=\"w\"></span>\n<span class=\"n\">Draft.Word_Lemmas</span><span class=\"w\"></span>\n<span class=\"n\">Draft.Word_8</span><span class=\"w\"></span>\n<span class=\"n\">…</span><span class=\"w\"></span>\n</code></pre></div>\n<p>However, when we run a similar command on l4v:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">isabelle</span><span class=\"w\"> </span><span class=\"n\">process</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"ow\">..</span><span class=\"n\">/l4v/proof/bisim/Separation</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"s\">\"Thy_Info.get_names () |&gt; map writeln\"</span><span class=\"w\"></span>\n</code></pre></div>\n<p>We get errors like this:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"w\"> </span><span class=\"n\">Fail</span><span class=\"w\"> </span><span class=\"n\">raised</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">57</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"s\">\"System/isabelle_system.ML\"</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Bad</span><span class=\"w\"> </span><span class=\"n\">bash_process</span><span class=\"w\"> </span><span class=\"n\">server</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"w\"></span>\n<span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">At</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"s\">\"apply\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">2964</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"s\">\"~~/src/HOL/Library/Word.thy\"</span><span class=\"o\">)</span><span class=\"w\"></span>\n</code></pre></div>\n<p>We saw mention of a server here, so we started an isabelle server like so:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">isabelle</span><span class=\"w\"> </span><span class=\"n\">server</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Then, when we re-run the command, we get a different error:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">Malformed</span><span class=\"w\"> </span><span class=\"n\">message</span><span class=\"w\"> </span><span class=\"gh\">header</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"OK {\"</span><span class=\"n\">isabelle_id\"</span><span class=\"o\">:</span><span class=\"s\">\"c2a2be496f35\"</span><span class=\"o\">,</span><span class=\"s\">\"isabelle_name\"</span><span class=\"o\">:</span><span class=\"s\">\"Isabelle2021-1\"</span><span class=\"ow\">}</span><span class=\"s\">\"</span>\n<span class=\"s\">*** At command \"</span><span class=\"k\">by</span><span class=\"s\">\" (line 139 of \"</span><span class=\"n\">~/workspace/l4v/lib/More_Numeral_Type.thy\"</span><span class=\"o\">)</span><span class=\"w\"></span>\n<span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">Malformed</span><span class=\"w\"> </span><span class=\"n\">message</span><span class=\"w\"> </span><span class=\"gh\">header</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"OK</span>\n</code></pre></div>\n<p>When we start the server and then use a client and run</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">session_start</span><span class=\"w\"> </span><span class=\"ow\">{</span><span class=\"s\">\"session\"</span><span class=\"o\">:</span><span class=\"s\">\"HOL\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s\">\"dirs\"</span><span class=\"o\">:[</span><span class=\"s\">\"/workspace/l4v\"</span><span class=\"o\">]</span><span class=\"ow\">}</span><span class=\"w\"></span>\n<span class=\"n\">use_theories</span><span class=\"w\"> </span><span class=\"ow\">{</span><span class=\"s\">\"session_id\"</span><span class=\"o\">:</span><span class=\"s\">\"263e7eca-9b8a-43ed-b94a-ae835d60555f\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s\">\"theories\"</span><span class=\"o\">:[</span><span class=\"s\">\"/workspace/l4v//proof/bisim/Separation\"</span><span class=\"o\">]</span><span class=\"ow\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>We are able to load theories<br>\nI've had a hard time deciphering this error message and no luck reading the manual. Any thoughts :)?<br>\nOur goal is to drop into an ML process/console with L4V theories loaded so that we can perform data extraction using ML code.</p>",
        "id": 298887375,
        "sender_full_name": "Eric Bond",
        "timestamp": 1663203753
    }
]