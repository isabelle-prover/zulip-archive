[
    {
        "content": "<p>Here's a tiny theorem and somewhat wordy proof as I might write it as a mathematician, giving an example of induction to someone who's new to the idea. </p>\n<p>Theorem: For any natural number k, there's a natural number n with k + 5 &lt; n.<br>\nProof: In the case where k is 0, the number  0 + 5 is less than n = 6, and we're done.</p>\n<p>In the case where k is a successor, we suppose (inductive hypothesis) that m is a natural number with<br>\nk + 5 &lt; m; we then need to exhibit a natural number larger than Succ(k) + 5. </p>\n<p>Let n = Succ(m). <br>\nWe have</p>\n<p>k + 5 &lt; m</p>\n<p>Applying the successor operation to both sides, we get<br>\nSucc(k+5) &lt; Succ(m)<br>\nand applying [a lemma about addition] we have<br>\nSucc(k) + 5 = Succ(k + 5).<br>\nCombining, we get <br>\nSucc(k) + 5 &lt; Succ(m), and thus <br>\nSucc(k) + 5 &lt; n<br>\nas needed. QED</p>\n<p>I'd like to mimic this proof in Isabelle. I know that there are other easy proofs of this tiny theorem (presburger can do it, for instance), but I'd really like to write out <em>this</em> proof, and I'm failing in my attempts. So far I have</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Scratch</span>\n<span class=\"w\">  </span><span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"n\">Main</span>\n<span class=\"k\">begin</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"T5\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\" ∃ (n::nat) . (k::nat) + 5 &lt; n\"</span>\n<span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"n\">0</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"k\">next</span>\n<span class=\"w\">  </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Suc</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c\">(* problem *)</span>\n<span class=\"k\">qed</span>\n\n<span class=\"k\">end</span>\n</code></pre></div>\n<p>My challenge is that at the line marked \"problem\", I have that <code>this</code> is <code>  ∃n. k + 5 &lt; n</code>, and the goal is <code> ⋀k. ∃n. k + 5 &lt; n ⟹ ∃n. Suc k + 5 &lt; n</code>. </p>\n<p>I have three problems:</p>\n<ul>\n<li>From <code>this</code>, I'd like to say \"OK, so there's some n with that property. Let's call it <code>m</code>.\", but I don't know how to do that in Isabelle.</li>\n<li>The two uses of \"∃n\" in the goal refer to different things. I can read it OK, and I know that if I show that <code>Suc k + 5 &lt; p</code> for some <code>p</code> (as I did in the k = 0 case), Isabelle can infer the \"there-exists\" result from that instance, using <code>P(a) =&gt; EX x . P(x)</code>.  </li>\n<li>The goal has that <code>/\\k</code> at the front now. I can get rid of it by saying </li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"k\">case</span>\n<span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">-</span>\n</code></pre></div>\n<p>but I honestly don't know why it's there in the first place. </p>\n<p>If someone could complete my proof (mimicking the English-language proof), OR address any of these problems, I'd be grateful.</p>",
        "id": 426156044,
        "sender_full_name": "John  Hughes",
        "timestamp": 1710258161
    },
    {
        "content": "<p>I am doing it this time, but you should look up the prog-prove  for the Isabelle tutorial:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"T5\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\" ∃ (n::nat) . (k::nat) + 5 &lt; n\"</span>\n<span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"n\">0</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"k\">next</span>\n<span class=\"w\">  </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Suc</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"kp\">where</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">‹k + 5 &lt; n›</span><span class=\"w\"> </span><span class=\"n\">―‹From</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">I'd</span><span class=\"w\"> </span><span class=\"n\">like</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">say</span><span class=\"w\"> </span><span class=\"s\">\"OK, so there's some n with that property. Let's call it m.›</span>\n<span class=\"s\">    by blast</span>\n<span class=\"s\">  let ?p = ‹Suc n›</span>\n<span class=\"s\">  from n have ‹Suc k + 5 &lt; ?p› ―‹I show that Suc k + 5 &lt; p for some p (as I did in the k = 0 case)›</span>\n<span class=\"s\">    by auto</span>\n<span class=\"s\">  then show ?case</span>\n<span class=\"s\">    by (rule exI[of _ ‹Suc n›]) ―‹Isabelle can infer the \"</span><span class=\"n\">there</span><span class=\"o\">-</span><span class=\"n\">exists\"</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"n\">&gt;</span><span class=\"w\"> </span><span class=\"n\">EX</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"ow\">.</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"ow\">.</span><span class=\"w\"> </span><span class=\"n\">›</span>\n<span class=\"k\">qed</span>\n</code></pre></div>",
        "id": 426157856,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1710258660
    },
    {
        "content": "<p>I should have prefaced this with \"I read the prog-prove discussion over and over and just  couldn't piece it together after an hour of experimentation last night, which is why I've come back to the well again this morning\" The word \"obtain\" is the one I needed, obviously.  Having spent a lot of time answering naive questions on math stackexchange, I certainly appreciate your willingness to assist.</p>",
        "id": 426162499,
        "sender_full_name": "John  Hughes",
        "timestamp": 1710259902
    },
    {
        "content": "<p>Generally having a look at the examples in src/HOL/Examples/ can be useful to see what constructs exists</p>",
        "id": 426165067,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1710260544
    },
    {
        "content": "<p>The appendix <a href=\"https://isabelle.in.tum.de/doc/isar-ref.pdf\">https://isabelle.in.tum.de/doc/isar-ref.pdf</a> can also give some hints</p>",
        "id": 426165431,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1710260629
    }
]