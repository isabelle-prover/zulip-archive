[
    {
        "content": "<p>Hi everyone,</p>\n<p>first of all I am a complete beginner with Isabelle, so please be kind if I missed something obvious. </p>\n<p>I have the following <code>function</code> definition:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">function</span><span class=\"w\"> </span><span class=\"n\">UTSS_r</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"s\">\"Pool_Size ⇒ Rank_Threshold  ⇒ 'a Electoral_Module\"</span><span class=\"w\"> </span><span class=\"kp\">where</span>\n<span class=\"w\"> </span><span class=\"s\">\"UTSS_r S rt A p  = ((max_count_rule S rt) ▹ (min_sum_rule S rt)) A p\"</span>\n<span class=\"w\"> </span><span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"n\">goal_cases</span>\n<span class=\"w\">   </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">1</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">metis</span><span class=\"w\"> </span><span class=\"n\">prod.exhaust_sel</span><span class=\"o\">)</span>\n<span class=\"w\"> </span><span class=\"k\">next</span>\n<span class=\"w\">   </span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">2</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">rt</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">rt</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">?</span><span class=\"k\">case</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">blast</span>\n<span class=\"w\"> </span><span class=\"k\">qed</span>\n</code></pre></div>\n<p>Isabelle hangs on the <code>qed</code> command, and after a few seconds the message<br>\n<code>linarith_split_limit exceeded (current value is 9)</code><br>\nis printed to the output repeatedly every few seconds.</p>\n<p>Any ideas as to </p>\n<ul>\n<li>what is happening here?</li>\n<li>how to solve this?</li>\n</ul>\n<p>Thanks a lot!</p>",
        "id": 355130607,
        "sender_full_name": "Lukas Löring",
        "timestamp": 1683029577
    },
    {
        "content": "<p>It would be good if you could post a full working example so that people can actually test this.</p>\n<p>From the looks of it I suspect that it isn't really your proof or the <code>qed</code> as such that are causing the problem but probably some internal work that the function package does once you've completed the exhaustiveness/non-overlappingness proof. Maybe the derivation of the function elimination rules?</p>\n<p>In any case someone (perhaps me) should investigate this, so please give us enough information to reproduce this.</p>",
        "id": 356356434,
        "sender_full_name": "Manuel Eberl",
        "timestamp": 1683398621
    }
]