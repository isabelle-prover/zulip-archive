[
    {
        "content": "<p>Hello,</p>\n<p>I have proved the following about reordering of summations on arbitrary functions:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">∀r.</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">∑m</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">1..Suc</span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"ow\">.</span><span class=\"w\"> </span><span class=\"n\">∑j</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">0..m</span><span class=\"o\">-</span><span class=\"n\">1.</span><span class=\"w\">  </span><span class=\"n\">f</span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">))</span>\n<span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">∑j</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">0..r.</span><span class=\"w\"> </span><span class=\"n\">∑m</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">j</span><span class=\"o\">+</span><span class=\"n\">1..Suc</span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"ow\">.</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">))</span><span class=\"s\">\"</span>\n</code></pre></div>\n<p>I want to show:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">∑m</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">1..Suc</span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"o\">-</span><span class=\"n\">1</span><span class=\"o\">)</span><span class=\"ow\">.</span>\n<span class=\"w\">               </span><span class=\"n\">∑j</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">0..m</span><span class=\"o\">-</span><span class=\"n\">1.</span>\n<span class=\"w\">                        </span><span class=\"n\">list_sum</span><span class=\"o\">(</span>\n<span class=\"w\">                          </span><span class=\"o\">(</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">λy.</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">multinomial_term</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j#</span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">-</span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"n\">#y</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod_term</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">lis</span><span class=\"o\">)</span>\n<span class=\"w\">                   </span><span class=\"o\">((</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"n\">#y</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">*</span><span class=\"w\"> </span><span class=\"n\">x^j</span><span class=\"o\">)</span>\n<span class=\"w\">                          </span><span class=\"o\">(</span><span class=\"n\">generate</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">length</span><span class=\"o\">(</span><span class=\"n\">lis</span><span class=\"o\">))))))</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">              </span><span class=\"o\">(</span><span class=\"n\">∑j</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">0..r</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">1.</span>\n<span class=\"w\">               </span><span class=\"n\">∑m</span><span class=\"o\">::</span><span class=\"n\">nat</span><span class=\"o\">=</span><span class=\"n\">j</span><span class=\"o\">+</span><span class=\"n\">1..Suc</span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">1</span><span class=\"o\">)</span><span class=\"ow\">.</span>\n<span class=\"w\">                        </span><span class=\"n\">list_sum</span><span class=\"o\">(</span>\n<span class=\"w\">                          </span><span class=\"o\">(</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">λy.</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">multinomial_term</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j#</span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">-</span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"n\">#y</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod_term</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">lis</span><span class=\"o\">)</span>\n<span class=\"w\">                   </span><span class=\"o\">((</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"n\">#y</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">*</span><span class=\"w\"> </span><span class=\"n\">x^j</span><span class=\"o\">)</span>\n<span class=\"w\">                          </span><span class=\"o\">(</span><span class=\"n\">generate</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">length</span><span class=\"o\">(</span><span class=\"n\">lis</span><span class=\"o\">))))))</span>\n</code></pre></div>\n<p>Where the inner functions are the same.  However using the lemma I proved previously and trying sledgehammer led to nothing. What am I missing?</p>",
        "id": 356304609,
        "sender_full_name": "Ryan Shao",
        "timestamp": 1683379761
    }
]