[
    {
        "content": "<p>How to disable the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">\\eta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>-contraction when print terms?<br>\nFor example,</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">translations</span> <span class=\"s\">\"{x. P}\"</span> <span class=\"err\">⇌</span> <span class=\"s\">\"CONST MyCollect (λx. P)\"</span>\n</code></pre></div>\n<p>this translation works in every case except the <code>{x. P x}</code>.<br>\nFor <code>{x. P x}</code>, it is printed as <code>MyCollect P</code> because the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi><mi>x</mi><mi mathvariant=\"normal\">.</mi><mi>P</mi><mtext> </mtext><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda x. P\\,x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">\\eta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>-contracted to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi></mrow><annotation encoding=\"application/x-tex\">P</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span>.</p>\n<p>In the reference manual, it is mentioned that such <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">\\eta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>-contracted can be prevented by print-translations in ML, but there is no further information about this.</p>",
        "id": 245643677,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1626063907
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 245644002,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1626064269
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 245646155,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1626066908
    },
    {
        "content": "<p>Finally, i found the solution when i read the source <code>Set.thy</code>. The eta contraction is disabled by print_translations</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">print_translation</span> <span class=\"err\">‹</span>\n <span class=\"o\">[</span><span class=\"n\">Syntax_Trans.preserve_binder_abs2_tr'</span> <span class=\"err\">\\&lt;^</span><span class=\"n\">const_syntax</span><span class=\"err\">&gt;‹</span><span class=\"n\">Ball</span><span class=\"err\">›</span> <span class=\"err\">\\&lt;^</span><span class=\"n\">syntax_const</span><span class=\"err\">&gt;‹</span><span class=\"o\">_</span><span class=\"n\">Ball</span><span class=\"err\">›</span><span class=\"o\">,</span>\n  <span class=\"n\">Syntax_Trans.preserve_binder_abs2_tr'</span> <span class=\"err\">\\&lt;^</span><span class=\"n\">const_syntax</span><span class=\"err\">&gt;‹</span><span class=\"n\">Bex</span><span class=\"err\">›</span> <span class=\"err\">\\&lt;^</span><span class=\"n\">syntax_const</span><span class=\"err\">&gt;‹</span><span class=\"o\">_</span><span class=\"n\">Bex</span><span class=\"err\">›</span><span class=\"o\">]</span>\n<span class=\"err\">›</span> <span class=\"err\">―</span> <span class=\"err\">‹</span><span class=\"n\">to</span> <span class=\"n\">avoid</span> <span class=\"n\">eta</span><span class=\"o\">-</span><span class=\"n\">contraction</span> <span class=\"n\">of</span> <span class=\"n\">body</span><span class=\"err\">›</span>\n</code></pre></div>",
        "id": 269063393,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1643004341
    }
]