[
    {
        "content": "<p>Hi :)</p>\n<p>I encountered an exception, of which I am not sure whether it is intentional or not. I have the following folder structure:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">SomeFolder/</span>\n<span class=\"n\">├─</span><span class=\"w\"> </span><span class=\"n\">Test.thy</span>\n<span class=\"n\">Test.thy</span>\n</code></pre></div>\n<p>The content of <code>SomeFolder/Test.thy</code> is just</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"w\">  </span><span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"n\">Main</span>\n<span class=\"k\">begin</span><span class=\"w\"> </span><span class=\"k\">end</span>\n</code></pre></div>\n<p>while <code>Test.thy</code> imports this theory:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"w\">  </span><span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"s\">\"SomeFolder/Test.thy\"</span>\n<span class=\"k\">begin</span><span class=\"w\"> </span><span class=\"k\">end</span>\n</code></pre></div>\n<p>Now, everything works fine: I can define Lemmas in <code>SomeFolder/Test.thy</code> and use them in <code>Test.thy</code>. However, executing commands like <code>find_theorems</code> or <code>sledgehammer</code> inside <code>Test.thy</code> generates the following exception:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">exception</span><span class=\"w\"> </span><span class=\"n\">CONTEXT</span>\n<span class=\"w\">            </span><span class=\"o\">(</span><span class=\"s\">\"Cannot transfer: not a super theory\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[],</span><span class=\"w\"> </span><span class=\"o\">[],</span>\n<span class=\"w\">             </span><span class=\"o\">[</span><span class=\"s\">\"??.HOL.Trueprop</span>\n<span class=\"s\">                (??.HOL.eq</span>\n<span class=\"s\">                  (??.Bit_Operations.semiring_bits_class.bit</span>\n<span class=\"s\">                    (??.Power.power_class.power</span>\n<span class=\"s\">                      (??.Num.numeral_class.numeral (??.Num.num.Bit0 ??.Num.num.One)) ?m)</span>\n<span class=\"s\">                    ?n)</span>\n<span class=\"s\">                  (??.HOL.conj</span>\n<span class=\"s\">                    (??.Bit_Operations.semiring_bits_class.possible_bit TYPE(?'a) ?n)</span>\n<span class=\"s\">                    (??.HOL.eq ?m ?n)))\"</span><span class=\"o\">],</span>\n<span class=\"w\">             </span><span class=\"n\">SOME</span>\n<span class=\"w\">              </span><span class=\"o\">(</span>\n<span class=\"w\">                 </span><span class=\"n\">Theory</span>\n<span class=\"w\">                  </span><span class=\"ow\">{</span><span class=\"n\">Pure</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tools.Code_Generator</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.HOL</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Orderings</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Groups</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Lattices</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Boolean_Algebras</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Set</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Fun</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Complete_Lattices</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Ctr_Sugar</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Typedef</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Inductive</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Rings</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Product_Type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Sum_Type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Fields</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Finite_Set</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Relation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Transitive_Closure</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Wellfounded</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Wfrec</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Order_Relation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Hilbert_Choice</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.BNF_Wellorder_Relation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.BNF_Wellorder_Embedding</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Zorn</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.BNF_Wellorder_Constructions</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.BNF_Cardinal_Order_Relation</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.BNF_Cardinal_Arithmetic</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Fun_Def_Base</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.BNF_Def</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.BNF_Composition</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Basic_BNFs</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.BNF_Fixpoint_Base</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.BNF_Least_Fixpoint</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Meson</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.ATP</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Basic_BNF_LFPs</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Metis</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Equiv_Relations</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Transfer</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Lifting</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Num</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Power</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Complete_Partial_Order</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Option</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Argo</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Partial_Function</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.SAT</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Quotient</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Groups_Big</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Fun_Def</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Int</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Lattices_Big</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Euclidean_Division</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Parity</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Numeral_Simprocs</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Semiring_Normalization</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Groebner_Basis</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Set_Interval</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Divides</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Presburger</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.SMT</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Sledgehammer</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Lifting_Set</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.List</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Groups_List</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Bit_Operations</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Code_Numeral</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Map</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Enum</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.String</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Predicate</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Lazy_Sequence</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Typerep</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Limited_Sequence</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Random</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Code_Evaluation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Quickcheck_Random</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Random_Pred</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Random_Sequence</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Quickcheck_Exhaustive</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Predicate_Compile</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Record</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.GCD</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Nitpick</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Factorial</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Quickcheck_Narrowing</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Mirabelle</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Extraction</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Nunchaku</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.BNF_Greatest_Fixpoint</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">HOL.Filter</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Conditionally_Complete_Lattices</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HOL.Binomial</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Main</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">Draft.Test</span><span class=\"ow\">}</span>\n<span class=\"w\">                 </span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">raised</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">612</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"s\">\"thm.ML\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Is this intentional or a bug?</p>",
        "id": 347449889,
        "sender_full_name": "Jakob Schulz",
        "timestamp": 1680794119
    },
    {
        "content": "<p>I'm not sure if it's intended behaviour that you are getting such an ugly error message, but the problem (and this is something that is known and unlikely to change any time soon) is that theory names have to be globally unique. If you have two theories with the exact same name, you cannot import both of them (even if they were to come from two different sessions).</p>\n<p>This is probably an artefact of the fact that Isabelle was first developed some 30 years ago as a fun little experiment, and no one at the time thought it would ever be used on developments big enough for this to be a problem.</p>",
        "id": 347466900,
        "sender_full_name": "Manuel Eberl",
        "timestamp": 1680798356
    },
    {
        "content": "<p>This issue is the reason why I prefix all my theory names with the session names: if I have a session called <code>My_Session</code> and a theory that should morally be called <code>My_Theory</code>, I name the theory <code>My_Session-My_Theory</code> (note the use of a hyphen instead of an underscore between the two name components; you need to surround the whole theory name with quotation marks for this to work).</p>",
        "id": 347472188,
        "sender_full_name": "Wolfgang Jeltsch",
        "timestamp": 1680799730
    },
    {
        "content": "<p>I see, thank you both for your explanations and insights!</p>",
        "id": 347595337,
        "sender_full_name": "Jakob Schulz",
        "timestamp": 1680854640
    }
]