[
    {
        "content": "<p>I learned from \"Programming and Proving\" that when we create a function with <code>fun</code> we get a custom induction rule to be used with the <code>induction</code> method. So I create the following function, which is supposed to be the less-than-or-equal relation.</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">lesseq</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"s\">\"nat =&gt; nat =&gt; nat\"</span><span class=\"w\"> </span><span class=\"kp\">where</span>\n<span class=\"w\">    </span><span class=\"s\">\"lesseq 0 _ = True\"</span>\n<span class=\"o\">|</span><span class=\"w\">   </span><span class=\"s\">\"lesseq (Suc _) 0 = False\"</span>\n<span class=\"o\">|</span><span class=\"w\">   </span><span class=\"s\">\"lesseq (Suc m) (Suc n) = lesseq m n\"</span>\n</code></pre></div>\n<p>Now if I try</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"lesseq 0 n\"</span>\n<span class=\"w\">  </span><span class=\"kp\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">rule</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lesseq.induct</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I get three goals, the second of which is obviously unprovable.</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">proof</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prove</span><span class=\"o\">)</span>\n<span class=\"n\">goal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">3</span><span class=\"w\"> </span><span class=\"n\">subgoals</span><span class=\"o\">):</span>\n<span class=\"w\"> </span><span class=\"n\">1.</span><span class=\"w\"> </span><span class=\"n\">⋀uu_.</span><span class=\"w\"> </span><span class=\"n\">lesseq</span><span class=\"w\"> </span><span class=\"n\">0</span><span class=\"w\"> </span><span class=\"n\">uu_</span>\n<span class=\"w\"> </span><span class=\"n\">2.</span><span class=\"w\"> </span><span class=\"n\">⋀uv_.</span><span class=\"w\"> </span><span class=\"n\">lesseq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Suc</span><span class=\"w\"> </span><span class=\"n\">uv_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">0</span>\n<span class=\"w\"> </span><span class=\"n\">3.</span><span class=\"w\"> </span><span class=\"n\">⋀m</span><span class=\"w\"> </span><span class=\"n\">n.</span><span class=\"w\"> </span><span class=\"n\">lesseq</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">⟹</span><span class=\"w\"> </span><span class=\"n\">lesseq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Suc</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Suc</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and indeed if I apply <code>simp</code> twice the first goal gets solved but the second goal reduces to <code>False</code>. The lemma is certainly true. What am I missing?</p>",
        "id": 472314265,
        "sender_full_name": "Alexandre Soares",
        "timestamp": 1727120090
    },
    {
        "content": "<p>The induct schema of lesseq is for 2 variables. You could use it for something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"n ≤ m ⟹ lesseq n m\"</span>\n<span class=\"w\">  </span><span class=\"kp\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">rule</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lesseq.induct</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n</code></pre></div>\n<p>For the 1 variable of your example you can just induct over the variable without special induction schema.</p>",
        "id": 472327038,
        "sender_full_name": "Jonas Stahl",
        "timestamp": 1727123885
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"664940\">@Jonas Stahl</span> thank you. I did notice that plain induction was enough, I was just wondering why the scheme was requiring that I prove something that was false.</p>",
        "id": 472551211,
        "sender_full_name": "Alexandre Soares",
        "timestamp": 1727202483
    },
    {
        "content": "<p>That's actually a thing of induction schemas. Not every schema can be used for every proof and sometimes they generate you those \"dead\" goals. Here it's actually up to you to choose the correct schema.</p>",
        "id": 472556321,
        "sender_full_name": "Jonas Stahl",
        "timestamp": 1727204460
    }
]