[
    {
        "content": "<p><strong>Sorry for this disturbance. This post was a moment of foolishness on my part, please close/dismiss this thread.</strong></p>\n<p><strong>This post is about some dirty hacks that users shouldn't take. Please close and ignore this post.</strong></p>\n<hr>\n<p>Hi, until today, I believe I can be called an Isabelle hacker, but I find today I cannot troubleshoot even a simple problem.</p>\n<p>I have following package hierarchy:</p>\n<p>auto_sledgehammer/ROOT</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">session</span><span class=\"w\"> </span><span class=\"n\">Auto_Sledgehammer</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">HOL</span><span class=\"w\"> </span><span class=\"o\">+</span>\n<span class=\"w\">  </span><span class=\"n\">theories</span><span class=\"w\"> </span><span class=\"n\">Auto_Sledgehammer</span>\n<span class=\"w\">  </span><span class=\"n\">document_files</span>\n<span class=\"w\">    </span><span class=\"s\">\"root.tex\"</span>\n</code></pre></div>\n<p>Isa_REPL/ROOT</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">session</span><span class=\"w\"> </span><span class=\"n\">Isa_REPL</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Auto_Sledgehammer</span><span class=\"w\"> </span><span class=\"o\">+</span>\n<span class=\"w\">  </span><span class=\"n\">theories</span><span class=\"w\"> </span><span class=\"n\">Isa_REPL</span>\n</code></pre></div>\n<p>REPL224139/ROOT</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">session</span><span class=\"w\"> </span><span class=\"n\">REPL224139</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">HOL</span>\n<span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">sessions</span><span class=\"w\"> </span><span class=\"n\">Auto_Sledgehammer</span><span class=\"w\"> </span><span class=\"n\">Isa_REPL</span>\n<span class=\"w\">   </span><span class=\"n\">theories</span><span class=\"w\"> </span><span class=\"n\">REPL224139</span>\n</code></pre></div>\n<p>Isa_REPL/Isa_REPL.thy</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Isa_REPL</span>\n<span class=\"w\">  </span><span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"n\">Auto_Sledgehammer.Auto_Sledgehammer</span>\n<span class=\"k\">begin</span>\n\n<span class=\"k\">ML_file</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span><span class=\"s\">contrib/mlmsgpack/mlmsgpack-aux.sml</span><span class=\"ss\">\\&lt;close&gt;</span>\n<span class=\"k\">ML_file</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span><span class=\"s\">contrib/mlmsgpack/realprinter-packreal.sml</span><span class=\"ss\">\\&lt;close&gt;</span>\n<span class=\"k\">ML_file</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span><span class=\"s\">contrib/mlmsgpack/mlmsgpack.sml</span><span class=\"ss\">\\&lt;close&gt;</span>\n\n<span class=\"k\">ML_file</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span><span class=\"s\">library/REPL.ML</span><span class=\"ss\">\\&lt;close&gt;</span>\n<span class=\"k\">ML_file</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span><span class=\"s\">library/REPL_serializer.ML</span><span class=\"ss\">\\&lt;close&gt;</span>\n<span class=\"k\">ML_file</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span><span class=\"s\">library/REPL_aux.ML</span><span class=\"ss\">\\&lt;close&gt;</span>\n<span class=\"k\">ML_file</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span><span class=\"s\">library/Server.ML</span><span class=\"ss\">\\&lt;close&gt;</span>\n\n<span class=\"k\">end</span>\n</code></pre></div>\n<p>REPL224139/REPL224139.thy</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">REPL224139</span>\n<span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"s\">\"Isa_REPL.Isa_REPL\"</span>\n<span class=\"k\">begin</span>\n<span class=\"k\">ML</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span>\n<span class=\"s\">REPL.disable_output () ;</span>\n<span class=\"s\">Thy_Info.register_thy @{theory Isa_REPL} ;</span>\n<span class=\"s\">Isabelle_Thread.join (REPL_Server.startup (Path.explode \"/tmp/repl_outputs\") NONE \"127.0.0.1:6666\")</span>\n<span class=\"ss\">\\&lt;close&gt;</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n<p>The problem is I try to build the packages above.</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">isabelle</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">Auto_Sledgehammer</span><span class=\"w\"> </span><span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">OK</span><span class=\"o\">!</span>\n<span class=\"n\">isabelle</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">Isa_REPL</span><span class=\"w\"> </span><span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">OK</span><span class=\"o\">!</span>\n<span class=\"n\">isabelle</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">REPL224139</span><span class=\"w\"> </span><span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">!</span>\n<span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">Theory</span><span class=\"w\"> </span><span class=\"n\">loader</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">nothing</span><span class=\"w\"> </span><span class=\"n\">known</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"s\">\"Auto_Sledgehammer.Auto_Sledgehammer\"</span>\n<span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">***</span>\n<span class=\"n\">#</span><span class=\"w\"> </span><span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">At</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"s\">\"ML\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">4</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"s\">\"/tmp/tmp.S6GNgYxXUy/REPL224139.thy\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>The theory loader cannot find Auto_Sledgehammer.Auto_Sledgehammer but I have specify it in both REPL224139/ROOT and Isa_REPL/ROOT.</p>",
        "id": 506654008,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1742369914
    },
    {
        "content": "<p>Alternatively, everything works if I change <code>REPL224139/ROOT</code> into</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">session</span><span class=\"w\"> </span><span class=\"n\">REPL224139</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Auto_Sledgehammer</span>\n<span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">sessions</span><span class=\"w\"> </span><span class=\"n\">Isa_REPL</span>\n<span class=\"w\">   </span><span class=\"n\">theories</span><span class=\"w\"> </span><span class=\"n\">REPL224139</span>\n</code></pre></div>\n<p>However, this change is not acceptable in my REPL system. Could some one tell me what is the exact difference between a parent session and the session indicated in the <code>sessions</code> clause? This subtle behavior is really confusing</p>",
        "id": 506654465,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1742370079
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">auto_sledgehammer/ROOT</span>\n</code></pre></div>\n<p>is a typo for Auto_Sledgehammer right? or are you relying on the underlying file system to be case insensitive? (yes macos users, you are the only ones that can do that)</p>",
        "id": 506655171,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1742370363
    },
    {
        "content": "<p>(because this is exactly the kind of weird bugs I would expect to happen if you the get the case wrong)</p>",
        "id": 506655247,
        "sender_full_name": "Mathias Fleury",
        "timestamp": 1742370407
    },
    {
        "content": "<p>I am a fool!<br>\nI find I should just register the Auto_Sledgehammer theory to the system.</p>\n<p>REPL224139/REPL224139.thy</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">REPL224139</span>\n<span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"s\">\"Isa_REPL.Isa_REPL\"</span>\n<span class=\"k\">begin</span>\n<span class=\"k\">ML</span><span class=\"w\"> </span><span class=\"ss\">\\&lt;open&gt;</span>\n<span class=\"s\">REPL.disable_output () ;</span>\n<span class=\"s\">(*Add the following line solves the issue!*)</span>\n<span class=\"s\">Thy_Info.register_thy @{theory Auto_Sledgehammer} ;</span>\n<span class=\"s\">Thy_Info.register_thy @{theory Isa_REPL} ;</span>\n<span class=\"s\">Isabelle_Thread.join (REPL_Server.startup (Path.explode \"/tmp/repl_outputs\") NONE \"127.0.0.1:6666\");</span>\n<span class=\"s\">error \"IGNORE THIS ERROR\"</span>\n<span class=\"ss\">\\&lt;close&gt;</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n<p>Cry, this must be the payback for all the dirty hacks I've taken. Sorry for the disturbance, let's drop this topic/thread.</p>",
        "id": 506655468,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1742370489
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"233198\">Mathias Fleury</span> <a href=\"#narrow/channel/238552-Beginner-Questions/topic/nothing.20known.20about.20theory/near/506655247\">said</a>:</p>\n<blockquote>\n<p>(because this is exactly the kind of weird bugs I would expect to happen if you the get the case wrong)</p>\n</blockquote>\n<p>Hi, Mathias, thank your response. The error in this post was caused by some dirty hacks taken by me (and my sudden foolishness). Please just ignore this post, and my bad.</p>",
        "id": 506656700,
        "sender_full_name": "Qiyuan Xu",
        "timestamp": 1742370969
    }
]