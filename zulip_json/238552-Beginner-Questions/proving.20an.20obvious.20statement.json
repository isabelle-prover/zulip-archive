[
    {
        "content": "<p>I'm trying to prove   </p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">i0_in</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"0 ∈ {0..&lt;4}\"</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">i1_in</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"1 ∈ {0..&lt;4}\"</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">i2_in</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"2 ∈ {0..&lt;4}\"</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">i3_in</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"3 ∈ {0..&lt;4}\"</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I sledgehammered it, but no luck. Why?</p>",
        "id": 554521839,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1762647795
    },
    {
        "content": "<p>Usually failing to prove this kind of \"obvious\" statement involving numerals is because the type of numerals (<code>0</code>, <code>1</code>, <code>2</code>, ...) is much more general than one expects. If you fix some type for those numerals, the propositions should become easy to prove, e.g.:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span>\n<span class=\"w\">  </span><span class=\"s\">\"(0 :: nat) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"s\">\"(1 :: nat) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"s\">\"(2 :: int) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"s\">\"(3 :: int) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"s\">\"finite ({0..&lt;4} :: nat set)\"</span>\n<span class=\"w\">  </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp_all</span>\n</code></pre></div>\n<p>depending on what you're after. In general, whenever you find yourself stumped on some trivial lemma like this, it's always a good idea to check which types Isabelle has inferred and/or annotate them yourself.</p>\n<p>In fact, we can find a type <code>'a :: numeral</code> for which the propositions can be falsified. With a little help from a friendly chatbot and sledgehammer:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Counterexample</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">datatype</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Rev</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">unrev</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">nat</span><span class=\"o\">)</span>\n\n<span class=\"k\">instantiation</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"k\">begin</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"0 = Rev 0\"</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"ow\">..</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">instantiation</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">begin</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"1 = Rev 1\"</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"ow\">..</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">instantiation</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">plus</span><span class=\"w\"> </span><span class=\"k\">begin</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"(x + y) = Rev (unrev x + unrev y)\"</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"ow\">..</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">instantiation</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">times</span><span class=\"w\"> </span><span class=\"k\">begin</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"(x * y) = Rev (unrev x * unrev y)\"</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"ow\">..</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">instantiation</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">ord</span><span class=\"w\"> </span><span class=\"k\">begin</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"(x ≤ y) ≡ unrev y ≤ unrev x\"</span>\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"s\">\"(x &lt; y) ≡ unrev y &lt; unrev x\"</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"ow\">..</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">instantiation</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">linorder</span>\n<span class=\"k\">begin</span>\n<span class=\"kn\">instance</span>\n<span class=\"w\">  </span><span class=\"kp\">apply</span><span class=\"w\"> </span><span class=\"n\">standard</span>\n<span class=\"w\">  </span><span class=\"k\">unfolding</span><span class=\"w\"> </span><span class=\"n\">less_eq_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">less_rev_nat_def</span><span class=\"w\"> </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">rev_nat.expand</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">auto</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">instantiation</span><span class=\"w\"> </span><span class=\"n\">rev_nat</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">semiring_1</span>\n<span class=\"k\">begin</span>\n<span class=\"kn\">instance</span>\n<span class=\"w\">  </span><span class=\"kp\">apply</span><span class=\"w\"> </span><span class=\"n\">standard</span>\n<span class=\"w\">  </span><span class=\"k\">unfolding</span>\n<span class=\"w\">    </span><span class=\"n\">zero_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">one_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">plus_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">times_rev_nat_def</span>\n<span class=\"w\">      </span><span class=\"n\">less_eq_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">less_rev_nat_def</span><span class=\"w\"> </span><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">rev_nat.expand</span>\n<span class=\"w\">  </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">algebra_simps</span><span class=\"o\">)</span>\n<span class=\"k\">end</span>\n\n<span class=\"kn\">lemma</span>\n<span class=\"w\">  </span><span class=\"s\">\"¬ (0 :: rev_nat) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"s\">\"¬ (1 :: rev_nat) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"s\">\"¬ (2 :: rev_nat) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"s\">\"¬ (3 :: rev_nat) ∈ {0..&lt;4}\"</span>\n<span class=\"w\">  </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">numeral_Bit0</span><span class=\"w\"> </span><span class=\"n\">numeral_Bit1</span><span class=\"w\"> </span><span class=\"n\">zero_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">one_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">plus_rev_nat_def</span><span class=\"w\"> </span><span class=\"n\">less_rev_nat_def</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Also</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"¬ finite ({0..&lt;4} :: real set)\"</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n</code></pre></div>\n</div></div>",
        "id": 554541762,
        "sender_full_name": "Max Lang",
        "timestamp": 1762672710
    },
    {
        "content": "<p>Thank you, that works fine.</p>",
        "id": 554588583,
        "sender_full_name": "Craig Alan Feinstein",
        "timestamp": 1762718986
    }
]