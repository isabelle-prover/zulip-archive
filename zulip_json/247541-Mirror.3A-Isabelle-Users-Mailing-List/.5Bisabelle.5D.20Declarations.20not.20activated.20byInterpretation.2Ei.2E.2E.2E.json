[
    {
        "content": "<p>From: Norbert Schirmer via Cl-isabelle-users &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nHi,</p>\n<p>When using Interpretation.interpretation within Isabelle/ML the declarations of the interpreted locale are surprisingly not activated.</p>\n<p>I attempt to accumulate some facts in named theorems that come from the interpretation.</p>\n<p>In Isar it reads and works perfectly fine as follows:</p>\n<p>named_theorems<br>\nmy_rules</p>\n<p>locale nonzero =<br>\n fixes n::nat<br>\n assumes non_zero: \"0 &lt; n\"<br>\nbegin<br>\nlemma le [my_rules]: \"Suc 0 &lt; Suc n\"<br>\n by (simp add: non_zero)<br>\nthm my_rules ―‹Suc 0 &lt; Suc n›<br>\nend</p>\n<p>thm my_rules ―‹empty›</p>\n<p>locale foo =<br>\n fixes m::nat<br>\n assumes m[simp]: \"m = Suc (Suc 0)\"<br>\nbegin</p>\n<p>thm my_rules ―‹empty›</p>\n<p>interpretation two: nonzero where n=m<br>\n by (unfold_locales) simp<br>\nthm two.le<br>\nthm my_rules ―‹@{term ‹Suc 0 &lt; Suc m›}›</p>\n<p>interpretation one: nonzero where n=\"Suc 0\"<br>\n by (unfold_locales) simp</p>\n<p>thm my_rules ―‹@{term ‹Suc 0 &lt; Suc m›}, @{term ‹Suc 0 &lt; Suc (Suc 0)›}›<br>\nthm one.le<br>\nthm two.le</p>\n<p>end</p>\n<p>=================================</p>\n<p>I expected the same to happen in Isabelle/ML using Interpretation.interpretation.<br>\nHowever there is no effect on my_rules</p>\n<p>ML ‹<br>\nval expr_one = ([(@{locale \"nonzero\"}, ((\"one\", true), <br>\n          (Expression.Positional ([SOME @{term \"Suc 0\"}]), [])))], [])<br>\n›</p>\n<p>context foo<br>\nbegin<br>\nML_val ‹<br>\nval lthy = <br>\n @{context} <br>\n |&gt; Interpretation.interpretation expr_one             <br>\n |&gt; Proof.global_terminal_proof ((Method.Basic (fn ctxt =&gt;  SIMPLE_METHOD (<br>\n      (Locale.intro_locales_tac {strict = false, eager = true} ctxt [] THEN <br>\n       asm_full_simp_tac ctxt 1))), <a href=\"http://Position.no\">Position.no</a> &lt;<a href=\"http://position.no/&gt;_range\">http://position.no/&gt;_range</a>), NONE)</p>\n<p>val thms = Named_Theorems.get lthy @{named_theorems my_rules} ―‹[]›</p>\n<p>›<br>\nend</p>\n<p>ML_val ‹<br>\nval lthy = <br>\n @{theory}<br>\n |&gt; Named_Target.init [] @{locale foo}<br>\n |&gt; Interpretation.interpretation expr_one                <br>\n |&gt; Proof.global_terminal_proof ((Method.Basic (fn ctxt =&gt;  SIMPLE_METHOD (<br>\n      (Locale.intro_locales_tac {strict = false, eager = true} ctxt [] THEN <br>\n       asm_full_simp_tac ctxt 1))), <a href=\"http://Position.no\">Position.no</a> &lt;<a href=\"http://position.no/&gt;_range\">http://position.no/&gt;_range</a>), NONE)</p>\n<p>val thms = Named_Theorems.get lthy @{named_theorems my_rules}<br>\n›</p>\n<p>Any suggestions on how to approach this in Isabelle/ML?</p>\n<p>Find the source and some more examples in the attachment.</p>\n<p>Regards,<br>\nNorbert</p>\n<p>--</p>\n<p>Norbert Schirmer (<a href=\"mailto:nschirmer@apple.com\">nschirmer@apple.com</a> &lt;mailto:<a href=\"mailto:nschirmer@apple.com\">nschirmer@apple.com</a>&gt;)<br>\n SEG Formal Verification<br>\nRegards,<br>\nNorbert</p>\n<p>--</p>\n<p>Norbert Schirmer (<a href=\"mailto:nschirmer@apple.com\">nschirmer@apple.com</a>)<br>\n SEG Formal Verification<br>\n<a href=\"/user_uploads/14278/hb_9pGb-Cuxy7af2hrnp0h8U/Interpretation_Ex.thy\">Interpretation_Ex.thy</a></p>",
        "id": 253741814,
        "sender_full_name": "Email Gateway",
        "timestamp": 1631885387
    }
]