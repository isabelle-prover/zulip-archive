[
    {
        "content": "<p>From: Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@cit.tum.de\">florian.haftmann@cit.tum.de</a>&gt;</p>\n<blockquote>\n<p>As far I can see, the best solution is to disregard <br>\nword_eq_numeral_iff_iszero [simp] and calculate equality on word values <br>\nin the same manner as &lt;= and &lt; is calculated by default in HOL- <br>\nLibrary.Word.</p>\n</blockquote>\n<p>I started to re-arrange this but stumbled over an elementary issue: IMHO <br>\nnon-trivial computations on word numerals should only be carried out if <br>\nthe length is fixed – otherwise there will be artifacts of the <br>\nconversion to int in the resulting term. Practically, this could be <br>\nachieved using a precondition ‹LENGTH('a) = numeral n› on the <br>\ncorresponding rewrites. @list Any opinions?</p>\n<p>Cheers,<br>\n    Florian</p>\n<p><a href=\"/user_uploads/14278/67EBstmp0DY27uHBSADLT4Ra/OpenPGP_0xA707172232CFA4E9.asc\">OpenPGP_0xA707172232CFA4E9.asc</a><br>\n<a href=\"/user_uploads/14278/tPrP_2r3esR4Cz_QhlJUru10/OpenPGP_signature.asc\">OpenPGP_signature.asc</a></p>",
        "id": 513667951,
        "sender_full_name": "Email Gateway",
        "timestamp": 1745343452
    },
    {
        "content": "<p>From: Gerwin Klein &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>\n<blockquote>\n<p>On 23 Apr 2025, at 03:37, Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@cit.tum.de\">florian.haftmann@cit.tum.de</a>&gt; wrote:</p>\n<blockquote>\n<p>As far I can see, the best solution is to disregard word_eq_numeral_iff_iszero [simp] and calculate equality on word values in the same manner as &lt;= and &lt; is calculated by default in HOL- Library.Word.</p>\n</blockquote>\n<p>I started to re-arrange this but stumbled over an elementary issue: IMHO non-trivial computations on word numerals should only be carried out if the length is fixed – otherwise there will be artifacts of the conversion to int in the resulting term. Practically, this could be achieved using a precondition ‹LENGTH('a) = numeral n› on the corresponding rewrites. @list Any opinions?</p>\n</blockquote>\n<p>I agree that restricting non-trivial numeric computation to instances makes sense (depending on what non-trivial turns out to be), but I’m not a fan of conditional rewrites like that. They will always apply and be rejected often. Even if it might not obviously impact performance immediately, it is an ingredient for performance problems later on and at the least it will make all simp traces involving words very annoying to read.</p>\n<p>If we’re in a simproc, could we match more explicitly on the type in the term?</p>\n<p>A bit less general: it might be enough to instantiate the corresponding rules to numeral type arguments. That would mean arithmetic only works on numeral word lengths, not other types people have built. We could alleviate that by providing a lemma set where the length type has a known consistent name so that it is easy to produce those instances with [where .. ] for people who are using non-numeral types for lengths (we do a few times for abstraction, but rarely).</p>\n<p>Cheers,<br>\nGerwin</p>",
        "id": 513743305,
        "sender_full_name": "Email Gateway",
        "timestamp": 1745363938
    }
]