[
    {
        "content": "<p>From: Norbert Schirmer via Cl-isabelle-users &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nHi,</p>\n<p>After a “Theory.join_theory” a file antiquotation reports an error “no such file” for which it is perfectly happy before the join theory. <br>\nNote that the markup displayed in Isabelle/Jedit still appears as expected, only decorated with the error twigglies.</p>\n<p>This can be demonstrated by HOl-ex.Join_Theory.thy<br>\n<a href=\"/user_uploads/14278/w7jZALqvk-cNhcVrU9PHgGNo/Join_Theory_Error.png\">Join_Theory_Error.png</a><br>\n<a href=\"/user_uploads/14278/XTz_86kvG_QHr5YbdgzzmN0k/Join_Theory_Markup.png\">Join_Theory_Markup.png</a><br>\n<a href=\"/user_uploads/14278/QnUiQxLXYzLBZdkXdzD0CrsX/Join_Theory.thy\">Join_Theory.thy</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/14278/w7jZALqvk-cNhcVrU9PHgGNo/Join_Theory_Error.png\" title=\"Join_Theory_Error.png\"><img src=\"/user_uploads/14278/w7jZALqvk-cNhcVrU9PHgGNo/Join_Theory_Error.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/14278/XTz_86kvG_QHr5YbdgzzmN0k/Join_Theory_Markup.png\" title=\"Join_Theory_Markup.png\"><img src=\"/user_uploads/14278/XTz_86kvG_QHr5YbdgzzmN0k/Join_Theory_Markup.png\"></a></div>",
        "id": 203963131,
        "sender_full_name": "Email Gateway",
        "timestamp": 1594823691
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThe problem is that Theory.join_theory performs a regular theory merge, which<br>\nhistorically appeared only in theory header position. Thus a few data slots<br>\nare reset to an empty value, notably the master directory of the theory: this<br>\nmakes the @{file} antiquotation fail.</p>\n<p>For now you can use the following change on Isabelle2020:<br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle/rev/2c7cfd2f9b6c\">https://isabelle.sketis.net/repos/isabelle/rev/2c7cfd2f9b6c</a></p>\n<p>But this is not the last word: some more data slots need to be treated<br>\nsimilarly. I will probably also change the Theory_Data API to discontinue the<br>\n\"extend\" operation and its implicit impact on the \"merge\" operation. In those<br>\nrare cases where non-standard extend/merge is required, it can be done via<br>\nTheory.at_begin (e.g. see<br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle/rev/b9e9ff3a1e1c\">https://isabelle.sketis.net/repos/isabelle/rev/b9e9ff3a1e1c</a>).</p>\n<p>Makarius</p>",
        "id": 204143152,
        "sender_full_name": "Email Gateway",
        "timestamp": 1594933660
    }
]