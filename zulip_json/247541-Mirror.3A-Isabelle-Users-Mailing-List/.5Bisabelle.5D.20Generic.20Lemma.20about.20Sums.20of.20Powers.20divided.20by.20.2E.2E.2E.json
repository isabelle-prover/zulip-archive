[
    {
        "content": "<p>From: Florian Märkl &lt;<a href=\"mailto:isabelle-users@florianmaerkl.de\">isabelle-users@florianmaerkl.de</a>&gt;<br>\nHello,</p>\n<p>in my current project I have to reason about right bit shifts, among other things.<br>\nIn particular I needed to prove the following (simplified) equalities:</p>\n<p>X &gt;&gt; 1<br>\n= (x_0 * 2^0 + x_1 * 2^1 + x_2 * 2^2 + …) div 2<br>\n= x_1 * 2^0 + x_2 * 2^1 + …</p>\n<p>where x_0, … are the individual bits of X. The first = is pretty much the definition already given in the word library, but the second turned out to be a bit trickier.<br>\nI formulated this problem of „integer-dividing a sum of powers by their base“ to get a representation without a division inside of it as more generic lemmas saying</p>\n<p>(∑n∈A. b ^ f n) div b = (∑n∈Set.filter (λn. f n ≠ 0) A. b ^ (f n - 1))</p>\n<p>with a few preconditions. I have attached the theory containing this in isolation.<br>\nSince it appears to be a little too generic to not already be formalized somewhere, I wonder if maybe this is either something that already exists in some form and I just have not found it yet or if it should be added to the AFP or distribution.<br>\nIt kind of reminds me of polynomial division, only that here the base is a known constant rather than some variable x.</p>\n<p>Cheers<br>\nFlorian<br>\n<a href=\"/user_uploads/14278/TEtKx_PVmYVkaKDuWUBvhg3u/PowerSum.thy\">PowerSum.thy</a></p>",
        "id": 236515607,
        "sender_full_name": "Email Gateway",
        "timestamp": 1619619884
    }
]