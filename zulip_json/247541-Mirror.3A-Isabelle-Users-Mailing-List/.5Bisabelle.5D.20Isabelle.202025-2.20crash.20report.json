[
    {
        "content": "<p><strong>From:</strong> Gergely Buday &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>\n<p>Hi there,</p>\n<p>I use Isabelle 2025-2 for a moderately large theory. With previous<br>\nversions I did not have any problem. Now Isabelle/jEdit crashed<br>\nseveral times when I invoked Sledgehammer. When viewing with top<br>\nafterwards, two or three veriT processes were there, running on 100%,<br>\nI had to kill them manually.</p>\n<p>This was on an Ubuntu 22.04.</p>\n<p>Is there any setting so that I could mitigate this problem?</p>\n<ul>\n<li>Gergely</li>\n</ul>",
        "id": 570131866,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769443522
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 26/01/2026 16:23, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>I use Isabelle 2025-2 for a moderately large theory. With previous<br>\nversions I did not have any problem. Now Isabelle/jEdit crashed<br>\nseveral times when I invoked Sledgehammer. When viewing with top<br>\nafterwards, two or three veriT processes were there, running on 100%,<br>\nI had to kill them manually.</p>\n<p>This was on an Ubuntu 22.04.</p>\n</blockquote>\n<p>What do you mean by \"crashed\"? Did the Java process actually crash? Or was it <br>\nmerely the Java GUI that became non-responsive?</p>\n<p>veriT processes hanging in the background were observed by a few people just <br>\nbefore the Isabelle2025-1 release, see Nov/Dec-2025 on the isabelle-dev <br>\nmailing list. At that point <br>\n<a href=\"https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-November/018270.html\">https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-November/018270.html</a> I <br>\nconcluded, that the problem has happened before in Isabelle2025, so there is <br>\nnothing further to do right now.</p>\n<blockquote>\n<p>Is there any setting so that I could mitigate this problem?</p>\n</blockquote>\n<p>How much RAM do you actually have?</p>\n<p>Makarius</p>",
        "id": 570306252,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769516665
    },
    {
        "content": "<p><strong>From:</strong> \"Eugene W. Stark\" &lt;<a href=\"mailto:isabelle-users@starkeffect.com\">isabelle-users@starkeffect.com</a>&gt;</p>\n<p>Just to add to this, for what it's worth I have observed (with Isabelle 2025-1)<br>\na 'veriT' process to go unstable and consume unbounded amounts of memory.<br>\nOn my system, this typically causes the Linux OOM killer to nuke the 'poly'<br>\nprocess, which typically is using more memory, though it would actually be<br>\nbetter if it would nuke 'veriT' instead.</p>\n<p>My system has 128GB of RAM.  I limit the PolyML heap to 64GB and the Java heap<br>\nto 16GB.  When veriT goes unstable, it will consume the rest.</p>\n<p>- Gene Stark</p>\n<p>On 1/27/26 07:24, Makarius wrote:</p>\n<blockquote>\n<p>On 26/01/2026 16:23, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>I use Isabelle 2025-2 for a moderately large theory. With previous<br>\nversions I did not have any problem. Now Isabelle/jEdit crashed<br>\nseveral times when I invoked Sledgehammer. When viewing with top<br>\nafterwards, two or three veriT processes were there, running on 100%,<br>\nI had to kill them manually.</p>\n<p>This was on an Ubuntu 22.04.</p>\n</blockquote>\n<p>What do you mean by \"crashed\"? Did the Java process actually crash? Or was it merely the Java GUI that became non-<br>\nresponsive?</p>\n<p>veriT processes hanging in the background were observed by a few people just before the Isabelle2025-1 release, see Nov/<br>\nDec-2025 on the isabelle-dev mailing list. At that point <a href=\"https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-\">https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-</a><br>\nNovember/018270.html I concluded, that the problem has happened before in Isabelle2025, so there is nothing further to<br>\ndo right now.</p>\n<blockquote>\n<p>Is there any setting so that I could mitigate this problem?</p>\n</blockquote>\n<p>How much RAM do you actually have?</p>\n<p>Makarius</p>\n</blockquote>",
        "id": 570307673,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769517076
    },
    {
        "content": "<p><strong>From:</strong> Bryan Alexander Ford &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>\n<p>I can confirm that I have been experiencing this problem intermittently and nondeterministically, but quite regularly, throughout most of 2025 at least, using Isabelle2025 for Mac.  (I can’t remember for sure if I experienced it with Isabelle2024 before the upgrade from that.).  The problem became frequent enough that I have been habitually keeping an Activity Monitor window open alongside Isabelle, in order to notice when there are veriT threads still crunching on something when all sledgehammer activity is supposed to be stopped.  Quitting and restarting Isabelle entirely in that case always proved to be an easy workaround so I assumed it was a well-known issue and didn’t pay much attention to it.</p>\n<p>Although the issue is certainly highly nondeterministic and I couldn’t promise to reproduce it reliably “on demand”, if there is some debug tooling anyone would like to suggest I enable in order to “catch it in the act” and get better information about what’s going on when this happens in the future, I’d be happy to do that.</p>\n<p>Thanks<br>\nBryan</p>\n<blockquote>\n<p>On 27 Jan 2026, at 13:24, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<p>On 26/01/2026 16:23, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>I use Isabelle 2025-2 for a moderately large theory. With previous<br>\nversions I did not have any problem. Now Isabelle/jEdit crashed<br>\nseveral times when I invoked Sledgehammer. When viewing with top<br>\nafterwards, two or three veriT processes were there, running on 100%,<br>\nI had to kill them manually.<br>\nThis was on an Ubuntu 22.04.</p>\n</blockquote>\n<p>What do you mean by \"crashed\"? Did the Java process actually crash? Or was it merely the Java GUI that became non-responsive?</p>\n<p>veriT processes hanging in the background were observed by a few people just before the Isabelle2025-1 release, see Nov/Dec-2025 on the isabelle-dev mailing list. At that point <a href=\"https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-November/018270.html\">https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-November/018270.html</a> I concluded, that the problem has happened before in Isabelle2025, so there is nothing further to do right now.</p>\n<blockquote>\n<p>Is there any setting so that I could mitigate this problem?</p>\n</blockquote>\n<p>How much RAM do you actually have?</p>\n<p>Makarius</p>\n</blockquote>",
        "id": 570311031,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769518034
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 27/01/2026 13:46, Bryan Alexander Ford wrote:</p>\n<blockquote>\n<p>I can confirm that I have been experiencing this problem intermittently and nondeterministically, but quite regularly, throughout most of 2025 at least, using Isabelle2025 for Mac.</p>\n</blockquote>\n<p>Thanks for the report. I take this as another confirmation that it is an old <br>\nproblem from Isabelle2025 (March 2025) at the least, so I was right not to <br>\nattempt any changes in the last minute before Isabelle2025-1 (December 2025), <br>\nwhich is now superseded by Isabelle2025-2 (Jan-2026).</p>\n<p>The window of opportunity to address old problems on the spot is usually <br>\nbetween RC0 (4 weeks before RC1), actual RC1, sometimes until RC2 (2 weeks <br>\nafter RC1). Between the releases, it is up to maintainers of Isabelle <br>\nsubsystems to do or not do anything --- eventually or later.</p>\n<p>Here is the timetable for the next release: <br>\n<a href=\"https://sketis.net/2025/plan-for-isabelle2026-october-2026\">https://sketis.net/2025/plan-for-isabelle2026-october-2026</a></p>\n<p>Generally note, that the Isabelle infrastructure does provide some means to <br>\nmanage process groups via the \"session id\" from POSIX/BSD, but processes may <br>\nchoose to leave that context later on, and can no longer be controlled. This <br>\napproach is not bullet-proof: generic POSIX cannot do any better.</p>\n<p>In contrast, we do see proper process tree management in Docker (on Linux, <br>\nmacOS, Windows), so there must be platform-specific mechanisms to implement <br>\nthat properly.</p>\n<p>Maybe someone has some hints on that, or some example applications with <br>\nexternal processes where this is done successfully.</p>\n<p>Makarius</p>",
        "id": 570322245,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769521081
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 27/01/2026 14:37, Makarius wrote:</p>\n<blockquote>\n<p>In contrast, we do see proper process tree management in Docker (on Linux, <br>\nmacOS, Windows), so there must be platform-specific mechanisms to implement <br>\nthat properly.</p>\n<p>Maybe someone has some hints on that, or some example applications with <br>\nexternal processes where this is done successfully.</p>\n</blockquote>\n<p>Just to answer my own question, after browsing the web for approx. 2h: The <br>\nBazel code base (version 3ad9562ae006) has some notable implementations. E.g. <br>\nlinux-sandbox:</p>\n<p><a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox-pid1.cc\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox-pid1.cc</a><br>\n<a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox.cc\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox.cc</a></p>\n<p>That looks promising due to the \"PID namespace\" of the Linux kernel. It is <br>\nlacking portability, though. The macOS situation is much weaker:</p>\n<p><a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-darwin.cc\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-darwin.cc</a><br>\n<a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-linux.cc\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-linux.cc</a></p>\n<p>The Windows situation is totally unclear to me: maybe that platform has its <br>\nown (better?) ways to manage process trees.</p>\n<p>Anyway, we better stick with our good old bash_process wrapper for now, and <br>\nsort out the problems of veriT before the next Isabelle release.</p>\n<p>Makarius</p>",
        "id": 570401366,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769540729
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 27/01/2026 20:05, Makarius wrote:</p>\n<blockquote>\n<p>That looks promising due to the \"PID namespace\" of the Linux kernel. It is <br>\nlacking portability, though. The macOS situation is much weaker:</p>\n<p><a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-</a> <br>\n<a href=\"http://darwin.cc\">darwin.cc</a><br>\n<a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/process-tools-</a> <br>\n<a href=\"http://linux.cc\">linux.cc</a></p>\n</blockquote>\n<p>Here is a blog entry (from 2019) that appears to be related to the above <br>\nsources: <a href=\"https://jmmv.dev/2019/11/wait-for-process-group-darwin.html\">https://jmmv.dev/2019/11/wait-for-process-group-darwin.html</a></p>\n<p>Quote from the bottom:</p>\n<p>\"\"\"<br>\nHowever, be aware that this solution is not bullet-proof: if a subprocess <br>\ncreates a new process group, it will escape our algorithm and there is nothing <br>\nwe can do about it. (It looks like FreeBSD has a NOTE_TRACK event that could <br>\nlet us track those processes… but of course this doesn’t exist on Darwin.) <br>\nAnyway, in the context of Bazel’s process wrapper, we are willing to live with <br>\nthis limitation.<br>\n\"\"\"</p>\n<p>That sounds familiar. We have been living with these process group limitations <br>\nfor decades.</p>\n<blockquote>\n<p>The Windows situation is totally unclear to me: maybe that platform has its <br>\nown (better?) ways to manage process trees.</p>\n</blockquote>\n<p>I have briefly tried the Windows Sysinternals Process Explorer <br>\n<a href=\"https://learn.microsoft.com/en-us/sysinternals/downloads/process-explorer\">https://learn.microsoft.com/en-us/sysinternals/downloads/process-explorer</a></p>\n<p>The result on running Isabelle.exe: various bash and poly processes show up as <br>\nindependent roots, with their own subtrees. So it looks like the model on <br>\nWindows is as bad as generic Unix.</p>\n<blockquote>\n<p>Anyway, we better stick with our good old bash_process wrapper for now, and <br>\nsort out the problems of veriT before the next Isabelle release.</p>\n</blockquote>\n<p>Conclusion unchanged.</p>\n<p>Makarius</p>",
        "id": 570415319,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769545442
    },
    {
        "content": "<p><strong>From:</strong> Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;</p>\n<p>On 1/27/26 20:05, Makarius wrote:</p>\n<blockquote>\n<p>On 27/01/2026 14:37, Makarius wrote:</p>\n<blockquote>\n<p>In contrast, we do see proper process tree management in Docker (on <br>\nLinux, macOS, Windows), so there must be platform-specific mechanisms <br>\nto implement that properly.</p>\n<p>Maybe someone has some hints on that, or some example applications <br>\nwith external processes where this is done successfully.</p>\n</blockquote>\n<p>Just to answer my own question, after browsing the web for approx. 2h: <br>\nThe Bazel code base (version 3ad9562ae006) has some notable <br>\nimplementations. E.g. linux-sandbox:</p>\n<p><a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox-pid1.cc\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox-pid1.cc</a> </p>\n<p><a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox.cc\">https://github.com/bazelbuild/bazel/blob/master/src/main/tools/linux-sandbox.cc</a> </p>\n<p>That looks promising due to the \"PID namespace\" of the Linux kernel. <br>\nIt is lacking portability, though.</p>\n</blockquote>\n<p>There are also portability problems within Linux: PID namespaces alone <br>\n(CLONE_NEWPID) can only be created by a privileged process. Hence we <br>\nneed to create them as user namespace (CLONE_NEWUSER) -- like in the <br>\nexample -- but this may be a problem with some older linux versions: The <br>\nfeature was introduced in Kernel 3.8.0, but some distributions used to <br>\nnot have them enabled by default (kernel flag CONFIG_USER_NS) due to <br>\nsecurity concerns.</p>\n<p>Fabian</p>",
        "id": 570503980,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769591421
    },
    {
        "content": "<p><strong>From:</strong> Gergely Buday &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>\n<p>Sorry, I did not include this from my terminal, which is displayed at<br>\ncrashing. And yes, crashing as the whole Isabelle/jEdit was shut down.</p>\n<p>environment: line 1:  5788 Killed                  \"$JAVA_HOME/bin/$PRG\" \"$@\"</p>\n<ul>\n<li>Gergely</li>\n</ul>\n<p>On Tue, 27 Jan 2026 at 12:24, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On 26/01/2026 16:23, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>I use Isabelle 2025-2 for a moderately large theory. With previous<br>\nversions I did not have any problem. Now Isabelle/jEdit crashed<br>\nseveral times when I invoked Sledgehammer. When viewing with top<br>\nafterwards, two or three veriT processes were there, running on 100%,<br>\nI had to kill them manually.</p>\n<p>This was on an Ubuntu 22.04.</p>\n</blockquote>\n<p>What do you mean by \"crashed\"? Did the Java process actually crash? Or was it<br>\nmerely the Java GUI that became non-responsive?</p>\n<p>veriT processes hanging in the background were observed by a few people just<br>\nbefore the Isabelle2025-1 release, see Nov/Dec-2025 on the isabelle-dev<br>\nmailing list. At that point<br>\n<a href=\"https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-November/018270.html\">https://mailman46.in.tum.de/pipermail/isabelle-dev/2025-November/018270.html</a> I<br>\nconcluded, that the problem has happened before in Isabelle2025, so there is<br>\nnothing further to do right now.</p>\n<blockquote>\n<p>Is there any setting so that I could mitigate this problem?</p>\n</blockquote>\n<p>How much RAM do you actually have?</p>\n<p>Makarius<br>\n</p>\n</blockquote>",
        "id": 570509396,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769593155
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 28/01/2026 10:38, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>Sorry, I did not include this from my terminal, which is displayed at<br>\ncrashing. And yes, crashing as the whole Isabelle/jEdit was shut down.</p>\n<p>environment: line 1:  5788 Killed                  \"$JAVA_HOME/bin/$PRG\" \"$@\"</p>\n</blockquote>\n<p>Thanks.</p>\n<p>That is the usual \"out-of-memory kill\" on Linux, and thus not really a crash.</p>\n<p>Makarius</p>",
        "id": 570509717,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769593245
    },
    {
        "content": "<p><strong>From:</strong> Gergely Buday &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>\n<p>On Tue, 27 Jan 2026 at 12:24, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On 26/01/2026 16:23, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>Is there any setting so that I could mitigate this problem?</p>\n</blockquote>\n<p>How much RAM do you actually have?</p>\n</blockquote>\n<p>16 Gigabytes.</p>\n<ul>\n<li>Gergely</li>\n</ul>",
        "id": 570514217,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769594542
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 28/01/2026 11:01, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>On Tue, 27 Jan 2026 at 12:24, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On 26/01/2026 16:23, Gergely Buday (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>Is there any setting so that I could mitigate this problem?</p>\n</blockquote>\n<p>How much RAM do you actually have?</p>\n</blockquote>\n<p>16 Gigabytes.</p>\n</blockquote>\n<p>OK. It is the standard size for current Isabelle, so it needs to work <br>\nproperly, i.e. we need to improve the veriT situation.</p>\n<p>Makarius</p>",
        "id": 570540132,
        "sender_full_name": "Email Gateway",
        "timestamp": 1769602276
    }
]