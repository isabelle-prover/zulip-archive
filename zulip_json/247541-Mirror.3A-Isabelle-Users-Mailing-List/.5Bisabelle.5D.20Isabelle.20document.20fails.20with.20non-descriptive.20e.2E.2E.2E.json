[
    {
        "content": "<p>From: \"Max W. Haslbeck\" &lt;<a href=\"mailto:max.haslbeck@gmx.de\">max.haslbeck@gmx.de</a>&gt;<br>\nHi everyone,</p>\n<p>We ran into the following problem last week when we had a new submission to the AFP.</p>\n<p>Consider this minimal Isabelle session (see also the attached archive):</p>\n<ul>\n<li>Submission.thy (the Isabelle thy file doesn’t really matter)</li>\n<li>document/root.bib</li>\n<li>document/root.tex</li>\n<li>ROOT</li>\n</ul>\n<p>The ROOT file has the following content:</p>\n<div class=\"codehilite\"><pre><span></span><code>session Minimal = HOL +\n  theories\n    Submission\n  document_files\n    &quot;root.tex&quot;\n    &quot;root.bib&quot;\n</code></pre></div>\n\n\n<p>The root.tex file is a minimal Isabelle LaTeX file with NO \\bibliography command.</p>\n<p>The command <code>isabelle build -d . -o document=pdf Minimal</code> has the following output:</p>\n<div class=\"codehilite\"><pre><span></span><code>Running Minimal ...\nMinimal FAILED\n(see also /Users/mhaslbeck/.isabelle/Isabelle2020/heaps/polyml-5.8.1_x86_64-darwin/log/Minimal)\nLoading theory &quot;Minimal.Submission&quot;\n### theory &quot;Minimal.Submission&quot;\n### 0.014s elapsed time, 0.027s cpu time, 0.000s GC time\nisabelle document -d /Users/mhaslbeck/.isabelle/Isabelle2020/browser_info/Unsorted/Minimal/document -o pdf -n document\n*** Failed to build document in &quot;/Users/mhaslbeck/.isabelle/Isabelle2020/browser_info/Unsorted/Minimal/document&quot;\nUnfinished session(s): Minimal\n0:00:05 elapsed time\n</code></pre></div>\n\n\n<p>The \"*** Failed to build …\" line is the only error message I was able to find and nothing more. <code>isabelle document</code> seems to have a problem with the reference to the root.bib file in the ROOT file that then isn’t actually used in root.tex.</p>\n<p>If I remove the reference to \"root.bib\" from the ROOT file, the build process succeeds. Or I can add</p>\n<div class=\"codehilite\"><pre><span></span><code>\\cite{LNCS2283}\n\\bibliographystyle{abbrv}\n\\bibliography{root}\n</code></pre></div>\n\n\n<p>to root.tex for a successful build.</p>\n<p>So, I just wanted to report that. I think, a more descriptive error message would be helpful here.</p>\n<p>Gruß<br>\nMax<br>\n<a href=\"/user_uploads/14278/P6yE_MlR7qZGDZ6eW5jJ2fv1/minimal_isabelle_document_session.zip\">minimal_isabelle_document_session.zip</a></p>",
        "id": 205780808,
        "sender_full_name": "Email Gateway",
        "timestamp": 1596451663
    },
    {
        "content": "<p>From: Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@informatik.tu-muenchen.de\">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>\nHi Max,</p>\n<blockquote>\n<p>The root.tex file is a minimal Isabelle LaTeX file with NO \\bibliography command.</p>\n<p>The command <code>isabelle build -d . -o document=pdf Minimal</code> has the following output:<br>\n```<br>\nRunning Minimal ...<br>\nMinimal FAILED<br>\n(see also /Users/mhaslbeck/.isabelle/Isabelle2020/heaps/polyml-5.8.1_x86_64-darwin/log/Minimal)<br>\nLoading theory \"Minimal.Submission\"</p>\n<h3>theory \"Minimal.Submission\"</h3>\n<h3>0.014s elapsed time, 0.027s cpu time, 0.000s GC time</h3>\n<p>isabelle document -d /Users/mhaslbeck/.isabelle/Isabelle2020/browser_info/Unsorted/Minimal/document -o pdf -n document<br>\n*** Failed to build document in \"/Users/mhaslbeck/.isabelle/Isabelle2020/browser_info/Unsorted/Minimal/document\"<br>\nUnfinished session(s): Minimal<br>\n0:00:05 elapsed time</p>\n</blockquote>\n<p>as far as I know this terse message is due to bibtex returning a non-0<br>\nexit value without further error messages in absence of bib entries,<br>\nmaking the &amp;&amp;-chain</p>\n<blockquote>\n<p>bash(<br>\n          List(<br>\n            latex_bash(\"sty\"),<br>\n            latex_bash(document_format),<br>\n            \"{ [ ! -f \" + root_bash(\"bib\") + \" ] || \" + latex_bash(\"bbl\") + \"; }\", (***)<br>\n            \"{ [ ! -f \" + root_bash(\"idx\") + \" ] || \" + latex_bash(\"idx\") + \"; }\",<br>\n            latex_bash(document_format),<br>\n            latex_bash(document_format)).mkString(\" &amp;&amp; \"))</p>\n</blockquote>\n<p>in present.scala break at (***), where bibtex is called by «isabelle<br>\nlatex -o bbl«</p>\n<p>Maybe an explicit error message issued by isabelle latex in that case<br>\nwould be appropriate.  But that would need further investigation.</p>\n<p>Cheers,<br>\n    Florian<br>\n<a href=\"/user_uploads/14278/ENd8-PXB2dPhA-c6kep-BEF4/signature.asc\">signature.asc</a></p>",
        "id": 205815225,
        "sender_full_name": "Email Gateway",
        "timestamp": 1596472005
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nI have investigated this: the bibtex tool is very old-fashioned, and does not<br>\nknow about Unix conventions for stdout vs. stderr.</p>\n<p>So I have inserted a little perl magic (for the Isabelle2021 release,<br>\npresumably in Feb-2021): <a href=\"https://isabelle-dev.sketis.net/rISABELLE4710dd5093a3\">https://isabelle-dev.sketis.net/rISABELLE4710dd5093a3</a></p>\n<p>The result is like this:</p>\n<p>Running Minimal ...<br>\nMinimal FAILED<br>\n(see also /home/makarius/.isabelle/heaps/polyml-5.8.2_x86_64_32-linux/log/Minimal)<br>\nLoading theory \"Minimal.Submission\"</p>\n<h3>theory \"Minimal.Submission\"</h3>\n<h3>0.026s elapsed time, 0.051s cpu time, 0.000s GC time</h3>\n<p>isabelle document -d output/document -o pdf -n document<br>\n*** bibtex found no \\citation commands---while reading file root.aux<br>\n*** bibtex found no \\bibdata command---while reading file root.aux<br>\n*** bibtex found no \\bibstyle command---while reading file root.aux<br>\n*** Failed to build document in \"/home/makarius/tmp/Minimal/output/document\"<br>\nUnfinished session(s): Minimal</p>\n<p>Makarius</p>",
        "id": 208568688,
        "sender_full_name": "Email Gateway",
        "timestamp": 1598885985
    }
]