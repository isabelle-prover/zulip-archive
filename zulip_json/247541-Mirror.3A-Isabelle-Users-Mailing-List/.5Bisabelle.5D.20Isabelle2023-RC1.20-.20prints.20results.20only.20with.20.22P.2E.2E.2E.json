[
    {
        "content": "<p>From: Fabian Immler &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nDear Isabelle developers,</p>\n<p>The output of \"results\" has changed (already in Isabelle2022), and I don't think this behavior is desirable:</p>\n<p>With \"results\", I mean some output of commands, e.g.,</p>\n<p>- \"definition c = ...\" outputs the result \"consts c :: ...\"<br>\n  - \"lemmas thm_name\" outputs the theorem statement of thm_name<br>\n  - \"lemma ... by ...\" outputs the theorem statement</p>\n<p>Isabelle2021-1 (and earlier) used to always output \"results\" to the Output panel.</p>\n<p>In Isabelle2023-RC1 (also already in Isabelle2022), \"results\" only appear in the Output panel when the \"Proof state\" checkbox is enabled.</p>\n<p>I don't think this is desirable, because \"results\" have nothing to do with the notion of \"Proof state\".<br>\nI do want to keep the proof state (in the State panel) separate from the Output panel.<br>\nMoreover, I believe there is a reason that \"Proof state\" is disabled by default (performance?).</p>\n<p>A closely related thread:<br>\n[isabelle] Automatic theorem/definition printing appears not work in interactive mode<br>\n<a href=\"https://lists.cam.ac.uk/sympa/arc/cl-isabelle-users/2023-05/msg00045.html\">https://lists.cam.ac.uk/sympa/arc/cl-isabelle-users/2023-05/msg00045.html</a></p>\n<p>Best wishes,<br>\nFabian</p>\n<p>—<br>\nFabian Immler<br>\n<a href=\"mailto:fimmler@apple.com\">fimmler@apple.com</a> &lt;mailto:<a href=\"mailto:fimmler@apple.com\">fimmler@apple.com</a>&gt;<br>\n SEG Formal Verification</p>",
        "id": 376420448,
        "sender_full_name": "Email Gateway",
        "timestamp": 1689700091
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 18/07/2023 18:07, Fabian Immler (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>The output of \"results\" has changed (already in Isabelle2022), and I don't <br>\nthink this behavior is desirable:</p>\n</blockquote>\n<p>The first thing to do in such a situation is to provide some \"proof from the <br>\nhistory\", to see where the change has happened (and maybe what its intentions <br>\nhave been). \"hg bisect\" can easily do that; there is no need to understand the <br>\nsources for that.</p>\n<p>The result is as follows:</p>\n<p>changeset:   75840:f8c412a45af8<br>\nuser:        wenzelm<br>\ndate:        Sat Aug 13 14:29:59 2022 +0200<br>\nsummary:     more accurate treatment of option \"editor_output_state\", e.g. <br>\nwhen changed via Isabelle/jEdit Plugin Options panel;</p>\n<blockquote>\n<p>Isabelle2021-1 (and earlier) used to always output \"results\" to the Output panel.</p>\n<p>In Isabelle2023-RC1 (also already in Isabelle2022), \"results\" only appear in <br>\nthe Output panel when the \"Proof state\" checkbox is enabled.</p>\n</blockquote>\n<p>Some further digging into the history shows that such \"result messages\" have <br>\nbeen counted as \"state output\" already since 2014:</p>\n<p>changeset:   56897:c668735fb8b5<br>\nuser:        wenzelm<br>\ndate:        Wed May 07 13:55:16 2014 +0200<br>\nfiles:       src/Pure/Isar/obtain.ML src/Pure/Isar/proof.ML <br>\nsrc/Pure/Isar/proof_display.ML src/Pure/Isar/specification.ML <br>\nsrc/Pure/Isar/toplevel.ML<br>\ndescription:<br>\nprint results as \"state\", to avoid intrusion into the source text;<br>\nprint new local theory (again);</p>\n<p>With a bit more browsing and reasoning over the history, it becomes apparent <br>\nthat f8c412a45af8 is more correct concerning \"state messages\" than before. <br>\n(But it also shows more clearly that \"toplevel results\" might be better <br>\ntreated differently.)</p>\n<p>I will skip further details of the reasoning due to lack of time at this stage <br>\nof the release process. The proper time for such discussions is usually before <br>\nthe release process actually start, e.g. the now traditional \"RC0\" preview.</p>\n<blockquote>\n<p>I don't think this is desirable, because \"results\" have nothing to do with the <br>\nnotion of \"Proof state\".<br>\nI do want to keep the proof state (in the State panel) separate from the <br>\nOutput panel.</p>\n</blockquote>\n<p>I will make a quick experiment this afternoon to use the regular <br>\nOutput.writeln channel instead of Output.state, and a quick adhoc decision if <br>\nit goes into Isabelle2023-RC2.</p>\n<p>We then still have a final change to revert it for Isabelle2023-RC3 in &lt; 2 <br>\nweeks. (In violation of all good manners for a release.)</p>\n<blockquote>\n<p>Moreover, I believe there is a reason that \"Proof state\" is disabled by<br>\ndefault (performance?).</p>\n</blockquote>\n<p>Yes, there is a long standing track record of problems stemming from <br>\nover-ambitios printing of such state information. (It is particularly bad for <br>\n\"tracing\", where people often think it does not matter, and later find that <br>\n99% time is spent printing.)</p>\n<p>Thus any kind of proof state (or result) output needs to be done with extra <br>\ncare. The NEWS for Isabelle2021-1 have an example for that:</p>\n<ul>\n<li>\n<p>Configuration option \"show_results\" controls output of final results<br>\nin commands like 'definition' or 'theorem'. Output is normally enabled<br>\nin interactive mode, but it could occasionally cause unnecessary<br>\nslowdown. It can be disabled like this:</p>\n<p>context notes [[show_results = false]]<br>\n begin<br>\n   definition \"test = True\"<br>\n   theorem test by (simp add: test_def)<br>\n end</p>\n</li>\n</ul>\n<blockquote>\n<p>A closely related thread:<br>\n[isabelle] Automatic theorem/definition printing appears not work in <br>\ninteractive mode<br>\n<a href=\"https://lists.cam.ac.uk/sympa/arc/cl-isabelle-users/2023-05/msg00045.html\">https://lists.cam.ac.uk/sympa/arc/cl-isabelle-users/2023-05/msg00045.html</a> </p>\n</blockquote>\n<p>I had seen that, but ignored it at that point because there was no attempt for <br>\nprovide \"proof from the history\" via \"hg bisect\".</p>\n<p>Makarius</p>",
        "id": 378818849,
        "sender_full_name": "Email Gateway",
        "timestamp": 1690380839
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThe result of the \"quick experiment\" in now in Isabelle2023-RC2: <br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release/rev/53b59fa42696\">https://isabelle.sketis.net/repos/isabelle-release/rev/53b59fa42696</a></p>\n<p>We have time until Isabelle2023-RC3 to figure out if it is a good idea or bad <br>\nidea. (This assumes that actual testing starts now, not after the final release.)</p>\n<p>Makarius</p>",
        "id": 378951724,
        "sender_full_name": "Email Gateway",
        "timestamp": 1690407602
    }
]