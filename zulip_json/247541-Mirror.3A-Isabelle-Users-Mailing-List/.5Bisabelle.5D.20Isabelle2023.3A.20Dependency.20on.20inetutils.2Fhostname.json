[
    {
        "content": "<p>From: Frederik Krogsdal Jacobsen &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nDear Isabelle developers,</p>\n<p>While trying Isabelle2023-RC4, I noticed a \"bug\"/dependency which has <br>\nbeen present since Isabelle2023-RC0.<br>\nI apologize for not catching this earlier, but I was out of office until <br>\nrecently.</p>\n<p>The issue seems to have surfaced after commit eaf234b0c849, which moves <br>\nthe detection of the ISABELLE_HOSTNAME variable from a bash call in <br>\nScala to a bash script.<br>\nThe detection is implemented using the command \"hostname -s\" which on <br>\nLinux is provided by the inetutils package. Since this package was not <br>\ninstalled on my system, the script halts at that line, which for me <br>\nmanifested as follows: when I open Isabelle/jEdit, the GUI comes up, but <br>\nthe prover never starts, and I get a popup saying: \"Undefined Isabelle <br>\nenvironment variable: \"ISABELLE_HOSTNAME\"\" and a terminal line saying: <br>\n\"Isabelle2023-RC4/lib/scripts/getsettings: line 81: hostname: command <br>\nnot found\". This yields Isabelle/jEdit essentially unusable, since no <br>\nstatements are ever checked by the prover.</p>\n<p>In Isabelle2022, where the ISABELLE_HOSTNAME variable is still detected <br>\nin Scala, the \"hostname -s\" command still fails, but this is \"caught\" by <br>\nScala, and the variable simply ends up being empty.</p>\n<p>In any case, the issue is easily fixed by installing inetutils. I don't <br>\nknow what the ISABELLE_HOSTNAME variable is used for, and Isabelle2022 <br>\nhas worked fine for me even with the variable being empty, though I <br>\nguess the previous behaviour of silently ending up with an empty <br>\nISABELLE_HOSTNAME is not intentional.</p>\n<p>If the dependency on inetutils is intentional, maybe this should be <br>\nnoted somewhere (a few Google searches with related keywords did not <br>\nyield anything about this issue). The inetutils package mostly contains <br>\nclients and servers for obsolete networking protocols, and so it will <br>\nprobably be more common not to have it installed in the future. The <br>\nhostname could perhaps instead be detected by using the command \"uname <br>\n-n\", which should work on all Linux distributions (being part of <br>\ncoreutils) and macOS.</p>\n<p>Thanks,<br>\nFrederik</p>",
        "id": 387612341,
        "sender_full_name": "Email Gateway",
        "timestamp": 1693206724
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 28/08/2023 09:05, Frederik Krogsdal Jacobsen (via cl-isabelle-users Mailing <br>\nList) wrote:</p>\n<blockquote>\n<p>The detection is implemented using the command \"hostname -s\" which on Linux is <br>\nprovided by the inetutils package.</p>\n</blockquote>\n<p>Which Linux distribution is this actually?</p>\n<p>On my Ubuntu 22.04, there is a \"required\" package called \"hostname\" that <br>\nprovides the \"hostname\" executable.</p>\n<p>I find it hard to imagine a version of Linux without \"hostname\" executable, <br>\nbut after seeing the ancient \"kill\" command being effectively killed in 2013, <br>\neverything can happen.</p>\n<blockquote>\n<p>The hostname could perhaps instead be <br>\ndetected by using the command \"uname -n\", which should work on all Linux <br>\ndistributions (being part of coreutils) and macOS.</p>\n</blockquote>\n<p>\"uname -n\" should work, although it lacks the \"hostname -s\" option.</p>\n<p>Makarius</p>",
        "id": 387630084,
        "sender_full_name": "Email Gateway",
        "timestamp": 1693214456
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nFor the record: the Perl guys are doing it like this in module Sys::Hostname: <br>\n<a href=\"https://fastapi.metacpan.org/source/RJBS/perl-5.38.0/ext/Sys-Hostname/Hostname.pm\">https://fastapi.metacpan.org/source/RJBS/perl-5.38.0/ext/Sys-Hostname/Hostname.pm</a></p>\n<p>The source contains many odd comments, but it is often unclear if they should <br>\nbe taken seriously. For example: \"# method 3 - trusty old hostname command\"</p>\n<p>Makarius</p>",
        "id": 387635301,
        "sender_full_name": "Email Gateway",
        "timestamp": 1693216491
    },
    {
        "content": "<p>From: Frederik Krogsdal Jacobsen &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nOn 28/08/2023 11:16, Makarius wrote:</p>\n<blockquote>\n<p>Which Linux distribution is this actually?</p>\n<p>On my Ubuntu 22.04, there is a \"required\" package called \"hostname\" <br>\nthat provides the \"hostname\" executable.</p>\n<p>I find it hard to imagine a version of Linux without \"hostname\" <br>\nexecutable, but after seeing the ancient \"kill\" command being <br>\neffectively killed in 2013, everything can happen.</p>\n</blockquote>\n<p>I am using Archlinux, and the package I am referring to is GNU <br>\nInetutils, but the situation is relatively common on systemd-based <br>\ndistributions where the \"trusty old\" tools have been replaced by <br>\n\"hostnamectl\" and there is no mandatory \"legacy\" package to provide the <br>\n\"hostname\" command directly like in Ubuntu. Sadly, the syntax for <br>\nhostnamectl is not backward compatible, so my best bet is to use \"uname\" <br>\ninstead, since this should be available on essentially any Linux system <br>\ncapable of running Isabelle in the first place.<br>\nAlternatively, maybe the JVM has some built-in cross-platform way of <br>\ndetermining the hostname, but I don't know if this is easily available <br>\nfrom Scala.</p>\n<blockquote>\n<p>\"uname -n\" should work, although it lacks the \"hostname -s\" option. <br>\nI don't know what ISABELLE_HOSTNAME is actually used for, so I have no <br>\ncomment on whether it is important that ISABELLE_HOSTNAME has some <br>\nspecial format. I imagine that for most users on personal computers, the <br>\nhostname is only a single word anyway.</p>\n</blockquote>\n<p>It is certainly also a solution to simply note somewhere that Isabelle <br>\nrequires that the \"hostname\" command is available since any reasonable <br>\nLinux distribution should have it easily available for installation.</p>\n<p>Cheers,<br>\nFrederik</p>",
        "id": 387643438,
        "sender_full_name": "Email Gateway",
        "timestamp": 1693220090
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 28/08/2023 12:54, Frederik Krogsdal Jacobsen wrote:</p>\n<blockquote>\n<p>On 28/08/2023 11:16, Makarius wrote:</p>\n<blockquote>\n<p>Which Linux distribution is this actually?</p>\n<p>I find it hard to imagine a version of Linux without \"hostname\" executable, <br>\nbut after seeing the ancient \"kill\" command being effectively killed in <br>\n2013, everything can happen.</p>\n</blockquote>\n<p>I am using Archlinux, and the package I am referring to is GNU Inetutils, but <br>\nthe situation is relatively common on systemd-based distributions where the <br>\n\"trusty old\" tools have been replaced by \"hostnamectl\" and there is no <br>\nmandatory \"legacy\" package to provide the \"hostname\" command directly like in <br>\nUbuntu.</p>\n</blockquote>\n<p>Thanks for the explanation.</p>\n<p>It means that the \"hostname\" command has been effectively killed as well: <br>\nmeaning that there is no cross-platform invocation for it that works on common <br>\nLinuxes, macOS, Windows/Cygwin.</p>\n<p>To address this problem of Linux, I have now made the following change: <br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release/rev/b96b73a79da3\">https://isabelle.sketis.net/repos/isabelle-release/rev/b96b73a79da3</a></p>\n<p>changeset:   78578:b96b73a79da3<br>\ntag:         tip<br>\nuser:        wenzelm<br>\ndate:        Mon Aug 28 13:00:24 2023 +0200<br>\nfiles:       lib/scripts/getsettings<br>\ndescription:<br>\nmore robust: \"hostname\" command might be absent, notably on Arch Linux (and <br>\nother systemd-based distributions);</p>\n<blockquote>\n<p>Alternatively, maybe the JVM has some built-in cross-platform way of <br>\ndetermining the hostname, but I don't know if this is easily available from <br>\nScala.</p>\n</blockquote>\n<p>Before using the hostname command, I had checked that already. There is <br>\nnothing special in the Java library: it looks all a bit crude and fragile, <br>\ncompared to what Perl is doing.</p>\n<blockquote>\n<p>I don't know what ISABELLE_HOSTNAME is actually used for, so I have no comment <br>\non whether it is important that ISABELLE_HOSTNAME has some special format. I <br>\nimagine that for most users on personal computers, the hostname is only a <br>\nsingle word anyway.</p>\n</blockquote>\n<p>For example, it is used to say which cluster build node runs a job. This is <br>\nmainly a \"comment\" and does not have to be authentic.</p>\n<p>Preferably it is an unqualified name that identifies the \"node\".</p>\n<p>(I have derived that \"by induction over the current sources\", and the <br>\ninterpretation might change over time.)</p>\n<p>Makarius</p>",
        "id": 387645661,
        "sender_full_name": "Email Gateway",
        "timestamp": 1693221111
    }
]