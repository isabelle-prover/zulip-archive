[
    {
        "content": "<p><strong>From:</strong> Peter Lammich &lt;<a href=\"mailto:lammich@in.tum.de\">lammich@in.tum.de</a>&gt;</p>\n<p>Hello List,</p>\n<p>the \"HOL-Data_Structures.Leftist_Heap\" contains an</p>\n<p>unbundle pattern_aliases</p>\n<p>at top level. This, unfortunately, causes problems with function <br>\ndefinitions later, see below for boiled-down example.</p>\n<p>Workaround: use \"case ... of (_,_) =&gt; _\" instead of \"let (_,_) = ... in\".</p>\n<p>Why not restrict opening the bundle to a local context? Anyway, this <br>\nmight also be a deeper issue with Pattern_Aliases here?</p>\n<p>--</p>\n<p>Peter</p>\n<p>(Note, this is not a regression against 2025-1, it already occurs in <br>\nIsabelle2025)</p>\n<p>imports Main \"HOL-Data_Structures.Leftist_Heap\"<br>\nbegin</p>\n<p>fun bfs :: \"nat ⇒ unit × unit\" where<br>\n   \"bfs 0 = ((),())\"<br>\n| \"bfs (Suc n) = (let (V,F) = bfs n in ((),()))\"</p>\n<hr>\n<p>exception THM 1 raised (line 706 of \"drule.ML\"):<br>\n   COMP<br>\n   (case h_fd n of (V, F) ⇒ ((), ())) = (case bfs_sumC n of (V, F) ⇒ <br>\n((), ()))<br>\n     [⋀z. bfs_rel z x_fd ⟹ ∃!y. bfs_graph z y, x_fd = Suc n, bfs_graph n <br>\n(h_fd n),<br>\n       bfs_rel ≡ ??.Week5_Heaps.bfs_rel, bfs_sumC ≡ <br>\n??.Week5_Heaps.bfs_sumC, bfs_graph ≡ ??.Week5_Heaps.bfs_graph]<br>\n   (case bfs_sumC n of (V, F) ⇒ ((), ())) = (case bfs_sumC n of (V, F) ⇒ <br>\n((), ())) ⟹<br>\n   let (V, F) = h_fd n in ((), ()) ≡ let (V, F) = bfs_sumC n in ((), ())<br>\n     [⋀z. bfs_rel z x_fd ⟹ ∃!y. bfs_graph z y, x_fd = Suc n, bfs_graph n <br>\n(h_fd n),<br>\n       bfs_rel ≡ ??.Week5_Heaps.bfs_rel, bfs_sumC ≡ <br>\n??.Week5_Heaps.bfs_sumC, bfs_graph ≡ ??.Week5_Heaps.bfs_graph]</p>",
        "id": 562529243,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765216637
    },
    {
        "content": "<p><strong>From:</strong> Tobias Nipkow &lt;<a href=\"mailto:nipkow@in.tum.de\">nipkow@in.tum.de</a>&gt;</p>\n<p>Thanks, yes, pattern_aliases is too naive here. I'll look into it (later).</p>\n<p>Tobias</p>\n<p>On 08/12/2025 18:56, Peter Lammich wrote:</p>\n<blockquote>\n<p>Hello List,</p>\n<p>the \"HOL-Data_Structures.Leftist_Heap\" contains an</p>\n<p>unbundle pattern_aliases</p>\n<p>at top level. This, unfortunately, causes problems with function definitions <br>\nlater, see below for boiled-down example.</p>\n<p>Workaround: use \"case ... of (_,_) =&gt; _\" instead of \"let (_,_) = ... in\".</p>\n<p>Why not restrict opening the bundle to a local context? Anyway, this might also <br>\nbe a deeper issue with Pattern_Aliases here?</p>\n<p>-- </p>\n<p>Peter</p>\n<p>(Note, this is not a regression against 2025-1, it already occurs in Isabelle2025)</p>\n<p>imports Main \"HOL-Data_Structures.Leftist_Heap\"<br>\nbegin</p>\n<p>fun bfs :: \"nat ⇒ unit × unit\" where<br>\n   \"bfs 0 = ((),())\"<br>\n| \"bfs (Suc n) = (let (V,F) = bfs n in ((),()))\"</p>\n<hr>\n<p>exception THM 1 raised (line 706 of \"drule.ML\"):<br>\n   COMP<br>\n   (case h_fd n of (V, F) ⇒ ((), ())) = (case bfs_sumC n of (V, F) ⇒ ((), ()))<br>\n     [⋀z. bfs_rel z x_fd ⟹ ∃!y. bfs_graph z y, x_fd = Suc n, bfs_graph n (h_fd n),<br>\n       bfs_rel ≡ ??.Week5_Heaps.bfs_rel, bfs_sumC ≡ ??.Week5_Heaps.bfs_sumC, <br>\nbfs_graph ≡ ??.Week5_Heaps.bfs_graph]<br>\n   (case bfs_sumC n of (V, F) ⇒ ((), ())) = (case bfs_sumC n of (V, F) ⇒ ((), <br>\n())) ⟹<br>\n   let (V, F) = h_fd n in ((), ()) ≡ let (V, F) = bfs_sumC n in ((), ())<br>\n     [⋀z. bfs_rel z x_fd ⟹ ∃!y. bfs_graph z y, x_fd = Suc n, bfs_graph n (h_fd n),<br>\n       bfs_rel ≡ ??.Week5_Heaps.bfs_rel, bfs_sumC ≡ ??.Week5_Heaps.bfs_sumC, <br>\nbfs_graph ≡ ??.Week5_Heaps.bfs_graph]<br>\n</p>\n</blockquote>\n<p><a href=\"/user_uploads/14278/KhDD8uZZZuvfwXFvH2iWHnhY/smime.p7s\">smime.p7s</a></p>",
        "id": 562633564,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765272337
    }
]