[
    {
        "content": "<p>From: Matthew Torrence &lt;<a href=\"mailto:matthew.torrence@twosixtech.com\">matthew.torrence@twosixtech.com</a>&gt;<br>\n(also sent to zulip:<br>\n<a href=\"#narrow/stream/202961-General/topic/ML.20cleanup.20problems/near/263007923\">https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/ML.20cleanup.20problems/near/263007923</a><br>\n)</p>\n<p>Hi, I'm having a problem with a large project, where every couple of<br>\nseconds, there's a large ML cleanup that halts the entire JEdit interface<br>\nfor a few seconds. Here's a condensed code example that causes the problem<br>\n(Isabelle 2021):</p>\n<p>theory MWE</p>\n<p>imports \"HOL-Library.Word\"</p>\n<p>begin</p>\n<p>fun numbits' :: \"nat ⇒ nat\" where<br>\n  \"numbits' 0 = 0\"<br>\n| \"numbits' n = 1 + numbits' (n div 2)\"</p>\n<p>(* Ceiling of log2 a *)<br>\ndefinition numbits :: \"'a::len word ⇒ nat\" where<br>\n  \"numbits x = numbits' ((unat x)-1)\"</p>\n<p>lemma<br>\n  assumes m_nonzero: \"m &gt; 1\"<br>\n  shows md_less': \"2 ^ (2 * numbits m) div unat (m :: 128 word) &lt; 2 ^ 129\"<br>\nproof -<br>\n  show ?thesis sorry<br>\nqed</p>\n<p>end</p>\n<p>on loading this file into JEdit, very often the ML memory viewer in the<br>\nbottom right corner shows \"ML Cleanup\" for a few seconds, during which the<br>\nJEdit interface becomes unresponsive. It looks like this example also uses<br>\na very disproportionate amount of memory as well. I was encountering very<br>\nsimilar problems in Isabelle 2020. Any ideas for helping this?</p>\n<p>To go into more detail, when I load the file in JEdit in Isabelle 2021, it<br>\nuses &lt;100mb to run all the dependencies, then it hits md_less', and<br>\nimmediately triggers an ML cleanup that takes a few seconds. After, it sits<br>\nat around 4gb of memory used.</p>",
        "id": 263118972,
        "sender_full_name": "Email Gateway",
        "timestamp": 1638264508
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 29/11/2021 14:44, Matthew Torrence wrote:</p>\n<blockquote>\n<p>Hi, I'm having a problem with a large project, where every couple of seconds,<br>\nthere's a large ML cleanup that halts the entire JEdit interface for a few<br>\nseconds. Here's a condensed code example that causes the problem (Isabelle<br>\n2021):</p>\n</blockquote>\n<p>Thank you for working out this example. Testing it with<br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release/rev/d54b3c96ee50\">https://isabelle.sketis.net/repos/isabelle-release/rev/d54b3c96ee50</a> it now<br>\nlooks fine, so the return to strict physical timeouts for quick check helps.</p>\n<p>There is often an illusion of \"complete control over the virtual world\", but<br>\nin reality, many unexpected situations can happen.</p>\n<blockquote>\n<p>(also sent to<br>\nzulip: <a href=\"#narrow/stream/202961-General/topic/ML.20cleanup.20problems/near/263007923\">https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/ML.20cleanup.20problems/near/263007923</a><br>\n&lt;<a href=\"#narrow/stream/202961-General/topic/ML.20cleanup.20problems/near/263007923\">https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/ML.20cleanup.20problems/near/263007923</a>&gt;)</p>\n</blockquote>\n<p>Thank you for posting on this traditional (and still official) channel for all<br>\ntopics concerning official Isabelle releases.</p>\n<p>Already in 1991, I have resolved not to participate in any real-time chat<br>\nsystems, and Zulip is even worse: non-free, non-public, essentially a black<br>\ndata-hole.</p>\n<p>Makarius</p>",
        "id": 263129879,
        "sender_full_name": "Email Gateway",
        "timestamp": 1638270967
    },
    {
        "content": "<p>From: Lukas Stevens &lt;lukas.stevens+isabelle-users@in.tum.de&gt;<br>\nWhat do you mean with non-free and non-public?</p>\n<p>The software is Free and Open Source. Furthermore, the discussions in <br>\npublic streams are also publicly archived and accessible to everyone <br>\n(<a href=\"https://isabelle.systems/zulip-archive/\">https://isabelle.systems/zulip-archive/</a>). You are correct that the <br>\nIsabelle Zulip instance is not self-hosted right now but we could <br>\ncertainly self-host in the future. Zulip also provides you with the <br>\ntools to migrate from hosted to self-hosted <br>\n(<a href=\"https://zulip.com/help/export-your-organization\">https://zulip.com/help/export-your-organization</a>).</p>",
        "id": 263132735,
        "sender_full_name": "Email Gateway",
        "timestamp": 1638272889
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 30/11/2021 12:47, Lukas Stevens wrote:</p>\n<blockquote>\n<p>What do you mean with non-free and non-public?</p>\n</blockquote>\n<ul>\n<li>\n<p>non-free: users have to enter a data-prison (or \"walled garden\")</p>\n</li>\n<li>\n<p>non-public: it is difficult to browse or search the archives</p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"https://isabelle.systems/zulip-archive\">https://isabelle.systems/zulip-archive</a></p>\n</blockquote>\n<p>That is a technically poor workaround. How is this progress over ancient Mailman?</p>\n<blockquote>\n<p>Zulip also provides you with the tools to migrate from hosted&gt; to self-hosted (<a href=\"https://zulip.com/help/export-your-organization\">https://zulip.com/help/export-your-organization</a>).</p>\n</blockquote>\n<p>I am not part of this world of real-time data addiction.</p>\n<p>Makarius</p>",
        "id": 263149301,
        "sender_full_name": "Email Gateway",
        "timestamp": 1638281309
    }
]