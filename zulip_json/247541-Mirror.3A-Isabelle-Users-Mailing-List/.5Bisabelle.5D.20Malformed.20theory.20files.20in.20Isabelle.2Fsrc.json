[
    {
        "content": "<p>From: Xiaokun Luan &lt;<a href=\"mailto:luanxiaokun@pku.edu.cn\">luanxiaokun@pku.edu.cn</a>&gt;<br>\nHi all,</p>\n<p>I found that many theory files located in Isabelle/src seem to exhibit issues<br>\nwhen loaded in jEdit.<br>\nHowever, most of these files can be imported with no error and can be built<br>\nsuccessfully.<br>\nI'm wondering why a theory file that cannot pass proof checking in jEdit can<br>\nbe built and imported with no error.<br>\nIs this as expected and intentional, or am I doing something wrong?</p>\n<p>Here are some examples:</p>\n<ol>\n<li>Theories that are not listed in the ROOT files but can be imported</li>\n</ol>\n<p>I found four files of this kind:</p>\n<ul>\n<li>Doc/Tutorial/Advanced/Partial.thy</li>\n<li>Doc/Tutorial/Advanced/WFrec.thy</li>\n<li>HOL/Proofs/Extraction/QuotRem.thy</li>\n<li>HOL/Predicate_Compile_Examples/Hotel_Example_Small_Generator.thy.</li>\n</ul>\n<p>Partial.thy is importing \"Tutorial.While_Combinator\", which has been moved to<br>\nHOL-Library, so it cannot be imported.<br>\nWFrec.thy uses deprecated command recdef, QuoRem.thy complains that there is<br>\nillegal free variable.<br>\nHotel_Example_Small_Generator.thy complains there is a type error.<br>\nAll of these three files can be imported with no error.</p>\n<ol start=\"2\">\n<li>Theories that are not listed in the ROOT files and cannot be imported</li>\n</ol>\n<p>Theory files in Doc/Tutorial/Recdef seem to be about the deprecated command<br>\nrecdef.<br>\nThey cannot be imported since the folder Recdef is not declared in the<br>\nTutorial session.<br>\nThe first two kinds of malformed files are not checked during the build<br>\nprocess.</p>\n<ol start=\"3\">\n<li>Theories that are listed in the ROOT files but have errors</li>\n</ol>\n<p>I found seven theory files listed in the ROOT files that throw errors when<br>\nloaded in jEdit:</p>\n<ul>\n<li>HOL/Proofs/Extraction/Euclid.thy, invalid free variable</li>\n<li>HOL/Proofs/Extraction/Greatest_Common_Divisor.thy, illegal free variable</li>\n<li>HOL/Proofs/Extraction/Higman_Extraction.thy, exception THM 0 raised</li>\n<li>HOL/Proofs/Extraction/Pigeonhole.thy, extra variable on rhs</li>\n<li>HOL/Proofs/Extraction/Warshall.thy, undefined fact</li>\n<li>HOL/Proofs/Lambda/WeakNorm.thy, exception THM 0 raised</li>\n<li>HOL/Proofs/ex/XML_Data.thy, partial proof term</li>\n</ul>\n<p>All of these files can be imported with no error, and the build process also<br>\nsucceeds.<br>\nI'm aware that some theory files use oops to skip unsuccessful proof attempts,<br>\nbut none of these files do that.</p>\n<p>Maybe the first two kinds of malformed (if so) theory files could just be<br>\nremoved to keep things a little tidier.<br>\nAs for the third kind of files, I'm not sure if these errors are expected,<br>\nsince they can be built and imported, or if they are just malformed and should<br>\nbe fixed or removed.</p>\n<p>Cheers,<br>\nXiaokun</p>",
        "id": 433907904,
        "sender_full_name": "Email Gateway",
        "timestamp": 1713409099
    },
    {
        "content": "<p>From: Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;<br>\nThe recdef doc looks like it might actually be unused (nowadays there is <br>\nonly old_recdef), maybe someone knows what should happen with the docs.</p>\n<p>As for your other problems, you have some misconceptions here:</p>\n<p>(1) Theory files do not all need to be listed in a ROOT file -- for <br>\ninstance, they can just be imported by a theory that is listed (e.g., <br>\nQuotRem is imported by Greatest_Common_Divisor).</p>\n<p>(3) You'll have to start jEdit with the right logic/session -- use <br>\n<code>isabelle jedit -R HOL-Proofs-Extraction</code>, for example.</p>\n<p>Fabian</p>",
        "id": 433994057,
        "sender_full_name": "Email Gateway",
        "timestamp": 1713429147
    },
    {
        "content": "<p>From: Xiaokun Luan &lt;<a href=\"mailto:luanxiaokun@pku.edu.cn\">luanxiaokun@pku.edu.cn</a>&gt;<br>\nHi Fabian,</p>\n<p>Thanks for your reply and explanation, it seems clearer to me now.</p>\n<p>Theory files do not all need to be listed in a ROOT file, but I've seen many<br>\ncases (mainly in AFP) where the theory file is neither imported by any other<br>\ntheory files in the session, nor listed in the ROOT file. I think in such<br>\ncase, this file will never be checked during the build process, correct?</p>\n<p>What makes it worse is that, if the file (that not listed nor imported) is<br>\nplaced in the root folder of the session, or in any directory that is listed<br>\nin the ROOT file, it can still be imported by using A.B where A is the session<br>\nname and B the theory name. (Please correct me if I'm wrong) I imagine that<br>\nthese files will eventually end up like the malformed doc theory files. Though<br>\nthings still work as long as we don't import these \"dead code\", I think it<br>\nwould be tidier if these files can be listed in the ROOT file and fixed<br>\naccordingly, or just removed.</p>",
        "id": 434641048,
        "sender_full_name": "Email Gateway",
        "timestamp": 1713754692
    },
    {
        "content": "<p>From: Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;<br>\nOn 4/22/24 04:58, Xiaokun Luan wrote:</p>\n<blockquote>\n<p>Theory files do not all need to be listed in a ROOT file, but I've seen many<br>\ncases (mainly in AFP) where the theory file is neither imported by any other<br>\ntheory files in the session, nor listed in the ROOT file. I think in such<br>\ncase, this file will never be checked during the build process, correct?</p>\n</blockquote>\n<p>Yes. In fact, you can find out those particular theories using (with <br>\nisabelle-devel + afp-devel installed):</p>\n<p>isabelle afp_check_roots -C unused_thys</p>\n<blockquote>\n<p>What makes it worse is that, if the file (that not listed nor imported) is<br>\nplaced in the root folder of the session, or in any directory that is listed<br>\nin the ROOT file, it can still be imported by using A.B where A is the session<br>\nname and B the theory name. (Please correct me if I'm wrong)<br>\nUnfortunately yes.<br>\n  I imagine that<br>\nthese files will eventually end up like the malformed doc theory files. Though<br>\nthings still work as long as we don't import these \"dead code\", I think it<br>\nwould be tidier if these files can be listed in the ROOT file and fixed<br>\naccordingly, or just removed.</p>\n</blockquote>\n<p>Agreed. For new submissions, we do not allow such dangling theories but <br>\nyes there are some entries that still have them -- it is on the authors <br>\nto check their material if it is relevant and should be checked or <br>\nirrelevant and can be removed. I guess one could message them about that.</p>\n<p>Fabian</p>",
        "id": 434734492,
        "sender_full_name": "Email Gateway",
        "timestamp": 1713788580
    }
]