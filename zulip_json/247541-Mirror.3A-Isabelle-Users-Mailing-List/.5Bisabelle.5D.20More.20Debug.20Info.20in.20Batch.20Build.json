[
    {
        "content": "<p>From: Qiyuan XU ????? &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nDear Isabelle players,</p>\n<p>Sorry for the interruption again... Guys, I solved the problem.</p>\n<p>It is about the 'sort' of keywords. I quote-marked the sort because I don't know the formal name of those \"prf_open % proof\". I didn't find any documentation about this...</p>\n<p>The following code is more readable on zulip <a href=\"#narrow/stream/202961-General/topic/.E2.9C.94.20More.20Debug.20Info.20in.20Batch.20Build\">https://isabelle.zulipchat.com/#narrow/stream/202961-General/topic/.E2.9C.94.20More.20Debug.20Info.20in.20Batch.20Build</a><br>\nWrong:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Thy</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kp\">keywords</span><span class=\"w\">  </span><span class=\"s\">\"❴\"</span><span class=\"w\"> </span><span class=\"s\">\"❵\"</span><span class=\"w\">  </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">prf_decl</span><span class=\"w\"> </span><span class=\"n\">%</span><span class=\"w\"> </span><span class=\"s\">\"proof\"</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Correct:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">Thy</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kp\">keywords</span><span class=\"w\"> </span><span class=\"s\">\"❴\"</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">prf_open</span><span class=\"w\"> </span><span class=\"n\">%</span><span class=\"w\"> </span><span class=\"s\">\"proof\"</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"kp\">and</span><span class=\"w\"> </span><span class=\"s\">\"❵\"</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"n\">prf_goal</span><span class=\"w\"> </span><span class=\"n\">%</span><span class=\"w\"> </span><span class=\"s\">\"proof\"</span><span class=\"w\"></span>\n</code></pre></div>\n<p>The place where my code goes wrong:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\"....\"</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">❴</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"ow\">...</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">❵</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"ow\">.</span><span class=\"w\">  </span><span class=\"c\">(* here it goes wrong! *)</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Command \"❵\" is some magic defined by myself, and I didn't know what the keyword sort does. So I mimicked other commands and wrote \"prf_decl % proof\". It works in the interactive mode, but it seems the batch mode checks more about the outer syntax of Isar. The thing is the command \"❵\" generates some proof obligations and the usage in my theory is like <code>❵ by methods</code>. However, keyword sort \"prf_decl % proof\" is not for appending a proof script like this, so it fails in the syntax check and what Isar wanted to tell me is actually that the command \".\" (corresponding to \"by methods\" here) is used at the wrong place.</p>\n<p>After I corrected the sort to be <code>prf_goal % \"proof\"</code> which is expected to be followed by a proof script. The syntax check is passed and then everything works.</p>\n<p>Again... I really hope for more documentation about the system. Isabelle/Isar is really great art and a complicated video game...  I really enjoy it! again!</p>\n<p>Sincerely<br>\nQiyuan Xu</p>\n<hr>\n<p>发件人: Qiyuan XU ?????<br>\n发送时间: 2022年11月24日 17:51<br>\n收件人: <a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a> &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\n主题: More Debug Info in Batch Build</p>\n<p>Dear Isabelle players,</p>\n<p>I am struggling with the batch build command <code>isabelle build</code>. It is true I used heavily ML code that works with locales and contexts, so I think there must be some bug in my code. The thing is, in the interactive GUI mode my theory works well, whereas in the batch build mode, it raises an error with only one line message</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">Bad</span><span class=\"w\"> </span><span class=\"k\">context</span><span class=\"w\"> </span><span class=\"kp\">for</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"s\">\".\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">7057</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"ow\">...</span><span class=\"o\">)</span><span class=\"w\"></span>\n<span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">At</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"s\">\".\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">7057</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"ow\">...</span><span class=\"o\">)</span><span class=\"w\"></span>\n</code></pre></div>\n<p>The source code looks like</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\".....\"</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">some_of_my_proof_commands</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"ow\">.</span><span class=\"w\">  </span><span class=\"c\">(* it fails! it is the last command to finish the lemma.*)</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Clearly, I need more infos to debug it. I know there are a lot differences between the batch mode and the interactive mode. So I need to either turn on some options to let the batch mode print more debug info like even stack trace, or, reproduce the problem in the interactive mode where I can have stack trace (maybe I need to turn on some options to simulate the batch mode in the interactive mode, I dunno).</p>\n<p>Is there anybody who knows how to turn on those features?</p>\n<p>Best Regards<br>\nQiyuan Xu</p>\n<hr>\n<p>CONFIDENTIALITY: This email is intended solely for the person(s) named and may be confidential and/or privileged. If you are not the intended recipient, please delete it, notify us and do not copy, use, or disclose its contents.<br>\nTowards a sustainable earth: Print only when necessary. Thank you.</p>",
        "id": 312016858,
        "sender_full_name": "Email Gateway",
        "timestamp": 1669296985
    },
    {
        "content": "<p>From: Qiyuan XU ????? &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nDear Isabelle players,</p>\n<p>I am struggling with the batch build command <code>isabelle build</code>. It is true I used heavily ML code that works with locales and contexts, so I think there must be some bug in my code. The thing is, in the interactive GUI mode my theory works well, whereas in the batch build mode, it raises an error with only one line message</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">Bad</span><span class=\"w\"> </span><span class=\"k\">context</span><span class=\"w\"> </span><span class=\"kp\">for</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"s\">\".\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">7057</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"ow\">...</span><span class=\"o\">)</span><span class=\"w\"></span>\n<span class=\"n\">***</span><span class=\"w\"> </span><span class=\"n\">At</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"s\">\".\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"n\">7057</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"ow\">...</span><span class=\"o\">)</span><span class=\"w\"></span>\n</code></pre></div>\n<p>The source code looks like</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"s\">\".....\"</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">some_of_my_proof_commands</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"ow\">.</span><span class=\"w\">  </span><span class=\"c\">(* it fails! it is the last command to finish the lemma.*)</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Clearly, I need more infos to debug it. I know there are a lot differences between the batch mode and the interactive mode. So I need to either turn on some options to let the batch mode print more debug info like even stack trace, or, reproduce the problem in the interactive mode where I can have stack trace (maybe I need to turn on some options to simulate the batch mode in the interactive mode, I dunno).</p>\n<p>Is there anybody who knows how to turn on those features?</p>\n<p>Best Regards<br>\nQiyuan Xu</p>\n<hr>\n<p>CONFIDENTIALITY: This email is intended solely for the person(s) named and may be confidential and/or privileged. If you are not the intended recipient, please delete it, notify us and do not copy, use, or disclose its contents.<br>\nTowards a sustainable earth: Print only when necessary. Thank you.</p>",
        "id": 312214388,
        "sender_full_name": "Email Gateway",
        "timestamp": 1669391070
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 24/11/2022 14:35, Qiyuan XU ????? (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>It is about the 'sort' of keywords. I quote-marked the sort because I don't <br>\nknow the formal name of those \"prf_open % proof\". I didn't find any <br>\ndocumentation about this...</p>\n</blockquote>\n<p>That 'sort' of a command keyword is actually called 'kind': you can see this <br>\nin the ML and Scala sources, which are the primary documentation.</p>\n<p>It is a running gag of Isabelle history that command kinds are not very <br>\nwell-defined: the meaning fluctuates according to the gradual change of the <br>\nlanguage structure and meaning, and the front-ends. The concept was first <br>\nintroduced for Proof General Emacs, approx. 1998.</p>\n<p>For theory commands and diagnostic commands it is usually sufficient to <br>\nimitate examples: there are not so many possibilities.</p>\n<p>For proof commands the situation is much more complex, but strictly speaking <br>\nthis is not a regular programming interface anyway: the Isar proof language is <br>\ngiven as is, it is one of the rare spots in Isabelle that are not open for <br>\nadd-ons by the user.</p>\n<blockquote>\n<p><code>\nCorrect:\n</code>isabelle<br>\ntheory Thy<br>\n     keywords \"❴\" :: prf_open % \"proof\"<br>\n   and \"❵\" :: prf_goal % \"proof\"<br>\n```</p>\n</blockquote>\n<blockquote>\n<p>Command \"❵\" is some magic defined by myself, and I didn't know what the <br>\nkeyword sort does.</p>\n</blockquote>\n<p>I doubt that this is going to work at all. Proof blocks and nested proofs need <br>\nto be properly balanced. Both \"prf_open\" and \"prf_goal\" are an \"open\", but of <br>\na different kind.</p>\n<p>Can you say what you intend to do? What is the application?</p>\n<blockquote>\n<p>Again... I really hope for more documentation about the system. Isabelle/Isar <br>\nis really great art and a complicated video game...  I really enjoy it! again!</p>\n</blockquote>\n<p>It is certainly and art and a game. But new Isar proof commands are difficult <br>\nto introduce: for me as the language designer it usually takes years to add <br>\nsomething that makes sense.</p>\n<p>Makarius</p>",
        "id": 312256759,
        "sender_full_name": "Email Gateway",
        "timestamp": 1669409871
    }
]