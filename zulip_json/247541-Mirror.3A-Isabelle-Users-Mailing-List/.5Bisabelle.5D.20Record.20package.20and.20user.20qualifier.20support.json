[
    {
        "content": "<p>From: Nicolas Méric &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nDear Isabelle users,</p>\n<p>do you know if the record package supports names with user qualifiers?</p>\n<p>With the following code, the \"state\" record is added to the theory:</p>\n<p>theory Test_Record<br>\n   imports \"HOL-Examples.Records\"</p>\n<p>begin</p>\n<p>ML‹<br>\nval state_b = Binding.make (\"state\",  Position.none)</p>\n<p>val state_attr_b = Binding.make (\"a\", Position.none)</p>\n<p>val create_record = Record.add_record {overloaded=false} ([],state_b) NONE<br>\n                                       ((state_attr_b, \\&lt;^typ&gt;‹int›, <br>\nMixfix.NoSyn) |&gt; single)<br>\n                                |&gt; Theory.setup<br>\n›</p>\n<p>end</p>\n<p>But if I add a qualifier to the binding state_b, like this :</p>\n<p>theory Test_Record<br>\n   imports \"HOL-Examples.Records\"</p>\n<p>begin</p>\n<p>ML‹<br>\nval state_b = Binding.make (\"state\",  Position.none)<br>\n                      |&gt; Binding.qualify false \"A\"</p>\n<p>val state_attr_b = Binding.make (\"a\", Position.none)</p>\n<p>val create_record = Record.add_record {overloaded=false} ([],state_b) NONE<br>\n                                       ((state_attr_b, \\&lt;^typ&gt;‹int›, <br>\nMixfix.NoSyn) |&gt; single)<br>\n                                |&gt; Theory.setup<br>\n›</p>\n<p>end</p>\n<p>the definition fails with the following error:</p>\n<p>Undeclared type constructor: \"Test_Record.state.A.state_ext\"<br>\nin declaration of constant \"state_ext\"<br>\nFailed to define record \"A.state\"</p>\n<p>Is it a feature or a bug?</p>\n<p>Best regards.</p>\n<p>Nicolas Méric</p>",
        "id": 441465230,
        "sender_full_name": "Email Gateway",
        "timestamp": 1717078115
    },
    {
        "content": "<p>From: Thomas Sewell &lt;<a href=\"mailto:tals4@cam.ac.uk\">tals4@cam.ac.uk</a>&gt;<br>\nNicolas Méric<br>\n30/05/2024 15:08<br>\nqualify</p>\n<p>Hi Nicolas.</p>\n<p>That looks like a bug. Some of the record package depends on naming schemes, e.g. the relationship between a field name f and its related updator f_update and a record type name r and its related record extension constructor r_ext. Probably this is done incorrectly somewhere if you add a qualifier to the name via this part of the ML interface.</p>\n<p>I seem to recall that the record package does work if you qualify everything by entering a local scope, however. I'm not sure if that's helpful.</p>\n<p>If it's important to make this work for whatever you're doing, it might not be that difficult to fix things up. To my understanding, though, nobody has looked at the record package much in quite a while.</p>\n<p>All the best,<br>\n    Thomas.</p>",
        "id": 441656903,
        "sender_full_name": "Email Gateway",
        "timestamp": 1717146775
    }
]