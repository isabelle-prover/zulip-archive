[
    {
        "content": "<p><strong>From:</strong> \"\\\"Becker, Hanno\\\"\" &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>\n<p>Hi all,</p>\n<p>Humbly asking to not get the “Why are you doing this?” question in return, is it expected that the following fails?</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span>\n<span class=\"w\">  </span><span class=\"kp\">shows</span><span class=\"w\"> </span><span class=\"s\">‹⋀x. (True ⟶ x = y) ∧ z ⟹ PROP P ⟹ U›</span>\n<span class=\"w\">  </span><span class=\"kp\">apply</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n\n<span class=\"c\">(* Tactic failed</span>\n<span class=\"c\">The error(s) above occurred for the goal statement:</span>\n<span class=\"c\">(⋀x. x = y ∧ z ⟹ PROP P ⟹ U) ≡ (⋀x. x = y ⟹ z ⟹ PROP P ⟹ U) *)</span>\n</code></pre></div>\n<p>It works as soon as you replace the <code>x=y</code> equality by another HOL term, or remove <code>PROP P</code>, or remove <code>z</code>.</p>\n<p>All the best,<br>\nHanno</p>",
        "id": 560742376,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764322674
    },
    {
        "content": "<p><strong>From:</strong> \"\\\"Becker, Hanno\\\"\" &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;</p>\n<p>Small correction: The <code> True ⟶ …</code> is not necessary, the following fails as well:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span>\n<span class=\"w\">  </span><span class=\"kp\">shows</span><span class=\"w\"> </span><span class=\"s\">‹⋀x. PROP P ⟹ (x = y) ∧ z ⟹ U›</span>\n<span class=\"w\">     </span><span class=\"kp\">apply</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>Also, note this is not an ‘ordinary’ tactic failure that can be caught by <code>?</code>: <code>apply (simp?)</code> still fails.</p>\n<p>From: &lt;<a href=\"mailto:cl-isabelle-users-request@lists.cam.ac.uk\">cl-isabelle-users-request@lists.cam.ac.uk</a>&gt; on behalf of &lt;Becker&gt;, Hanno &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nReply-To: \"Becker, Hanno\" &lt;<a href=\"mailto:beckphan@amazon.co.uk\">beckphan@amazon.co.uk</a>&gt;<br>\nDate: Friday, 28 November 2025 at 09:38<br>\nTo: \"<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>\" &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nSubject: [EXTERNAL] [isabelle] Simplifier fails when dealing with mix of Pure and HOL terms</p>\n<p>CAUTION: This email originated from outside of the organization. Do not click links or open attachments unless you can confirm the sender and know the content is safe.</p>\n<p>Hi all,</p>\n<p>Humbly asking to not get the “Why are you doing this?” question in return, is it expected that the following fails?</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"kn\">lemma</span>\n<span class=\"w\">  </span><span class=\"kp\">shows</span><span class=\"w\"> </span><span class=\"s\">‹⋀x. (True ⟶ x = y) ∧ z ⟹ PROP P ⟹ U›</span>\n<span class=\"w\">  </span><span class=\"kp\">apply</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n\n<span class=\"c\">(* Tactic failed</span>\n<span class=\"c\">The error(s) above occurred for the goal statement:</span>\n<span class=\"c\">(⋀x. x = y ∧ z ⟹ PROP P ⟹ U) ≡ (⋀x. x = y ⟹ z ⟹ PROP P ⟹ U) *)</span>\n</code></pre></div>\n<p>It works as soon as you replace the <code>x=y</code> equality by another HOL term, or remove <code>PROP P</code>, or remove <code>z</code>.</p>\n<p>All the best,<br>\nHanno</p>",
        "id": 560745732,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764323784
    },
    {
        "content": "<p><strong>From:</strong> Manuel Eberl &lt;<a href=\"mailto:manuel@pruvisto.org\">manuel@pruvisto.org</a>&gt;</p>\n<p>This doesn't look like intended behaviour to me. I tracked the problem <br>\nto the \"defined_all\" simproc, specifically to the ML function <br>\n\"Quantifier1.rearrange_all\". If you remove that simproc from the <br>\nsimpset, the exception does not occur.</p>\n<p>Perhaps this helps somebody who knows that part of the code understand <br>\nwhat is going on.</p>\n<p>Cheers,</p>\n<p>Manuel</p>\n<p>On 28/11/2025 10:55, \"Becker, Hanno\" (via cl-isabelle-users Mailing <br>\nList) wrote:</p>\n<blockquote>\n<p>Small correction: The <code>True ⟶ …</code> is not necessary, the following fails <br>\nas well:</p>\n<p>```</p>\n<p>lemma</p>\n<p>shows ‹⋀x. PROP P ⟹(x = y) ∧z ⟹U›</p>\n<p>apply simp</p>\n<p>```</p>\n<p>Also, note this is not an ‘ordinary’ tactic failure that can be caught <br>\nby <code>?</code>: <code>apply (simp?)</code> still fails.</p>\n<p>*From: *&lt;<a href=\"mailto:cl-isabelle-users-request@lists.cam.ac.uk\">cl-isabelle-users-request@lists.cam.ac.uk</a>&gt; on behalf of <br>\n&lt;Becker&gt;, Hanno &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\n*Reply-To: *\"Becker, Hanno\" &lt;<a href=\"mailto:beckphan@amazon.co.uk\">beckphan@amazon.co.uk</a>&gt;<br>\n*Date: *Friday, 28 November 2025 at 09:38<br>\n*To: *\"<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>\" <br>\n&lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\n*Subject: *[EXTERNAL] [isabelle] Simplifier fails when dealing with <br>\nmix of Pure and HOL terms</p>\n<p><em>CAUTION</em>: This email originated from outside of the organization. Do <br>\nnot click links or open attachments unless you can confirm the sender <br>\nand know the content is safe.</p>\n<p>Hi all,</p>\n<p>Humbly asking to not get the “Why are you doing this?” question in <br>\nreturn, is it expected that the following fails?</p>\n<p>```Isabelle</p>\n<p>lemma</p>\n<p>shows ‹⋀x. (True ⟶x = y) ∧z ⟹PROP P ⟹U›</p>\n<p>apply simp</p>\n<p>(* Tactic failed</p>\n<p>The error(s) above occurred for the goal statement:</p>\n<p>(⋀x. x = y ∧z ⟹PROP P ⟹U) ≡ (⋀x. x = y ⟹z ⟹PROP P ⟹U) *)</p>\n<p>```</p>\n<p>It works as soon as you replace the <code>x=y</code> equality by another HOL <br>\nterm, or remove <code>PROP P</code>, or remove <code>z</code>.</p>\n<p>All the best,</p>\n<p>Hanno<br>\n</p>\n</blockquote>",
        "id": 560758340,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764327646
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 28/11/2025 10:55, \"Becker, Hanno\" (via cl-isabelle-users Mailing List) wrote:</p>\n<blockquote>\n<p>Small correction: The <code>True ⟶ …</code> is not necessary, the following fails as well:</p>\n<p><code>\nlemma\n   shows ‹⋀x. PROP P ⟹(x = y) ∧z ⟹U›\n      apply simp\n</code></p>\n<p>Also, note this is not an ‘ordinary’ tactic failure that can be caught by <code>?</code>: <br>\n<code>apply (simp?)</code> still fails.</p>\n</blockquote>\n<p>I've quickly tried thy \"apply simp?\" variant as a test with recent stable <br>\nreleases. Their is a change of behaviour from Isabelle2020 to Isabelle2021.</p>\n<p>All other recent releases are the same as Isabelle2025 and Isabelle2025-1-RC2, <br>\nso this is not a regression and thus it is not relevant for Isabelle2025-1 <br>\n(December 2025).</p>\n<p>Generally note, that the system can be driven into many unusual corner cases <br>\nwith undefined or weakly defined behaviour.</p>\n<p>Makarius</p>",
        "id": 560772812,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764332311
    }
]