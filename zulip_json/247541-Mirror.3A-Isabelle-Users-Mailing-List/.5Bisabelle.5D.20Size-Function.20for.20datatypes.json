[
    {
        "content": "<p>From: \"Thiemann, René\" &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nDear all,</p>\n<p>when doing some refactoring, we were surprised about the auto-generated size-function of a data-type.</p>\n<p>datatype 'a foo = Bar | More \"'a foo\" \"'a list\" \"'a option list\"</p>\n<p>What we observe is that </p>\n<ul>\n<li>\"'a list\" gets turned into \"length\", whereas </li>\n<li>\"'a option list\" gets turned into \"size_list size”.</li>\n</ul>\n<p>Both arguments are non-recursive arguments and the foo type, and are lists, so why is there this difference?</p>\n<p>Is this intentional?</p>\n<p>With best regards,<br>\nAkihisa and René</p>",
        "id": 472625971,
        "sender_full_name": "Email Gateway",
        "timestamp": 1727247593
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@ifi.lmu.de\">jasmin.blanchette@ifi.lmu.de</a>&gt;<br>\nDear Akihisa and René,</p>\n<p>This part of the code was rewritten around 2014, but I couldn't get an old version of Isabelle to run on my Mac, so I don't know which of these two possibilities is correct:</p>\n<ol>\n<li>\n<p>The auto-generated size function has always had that behavior for reasons that Stefan Berghofer might be able to illuminate.</p>\n</li>\n<li>\n<p>This behavior was introduced in 2014 by me.</p>\n</li>\n</ol>\n<p>I'm almost certain it's 1 and not 2, because (apart from an \"off by one\" issue that has been discussed around 2015-2016 on this list) I did my best to keep compatibility with the old datatype package.</p>\n<p>I can only speculate to the reasons for choosing 1 as the behavior. Maybe it was felt that a \"deeper\" definition (one that takes into account all type constructors along the way to 'a) would yield more desirable results.</p>\n<p>Be aware that there's nothing magical about Isabelle's default size function. You can disable it with</p>\n<p>datatype (plugins del: size) 'a foo = Bar | More \"'a foo\" \"'a list\" \"'a option list\"</p>\n<p>and define your own. There are examples of this in the AFP.</p>\n<p>Best,<br>\nJasmin</p>\n<p>--<br>\nProf. Dr. Jasmin Blanchette<br>\nChair of Theoretical Computer Science and Theorem Proving<br>\nLudwig-Maximilians-Universität München<br>\nOettingenstr. 67, 80538 München, Germany<br>\nTel.: +49 (0)89 2180 9341<br>\nWeb: <a href=\"https://www.tcs.ifi.lmu.de/mitarbeiter/jasmin-blanchette_de.html\">https://www.tcs.ifi.lmu.de/mitarbeiter/jasmin-blanchette_de.html</a></p>\n<blockquote>\n<p>On 25. Sep 2024, at 08:30, Thiemann, René (via cl-isabelle-users Mailing List) &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt; wrote:</p>\n<p>Dear all,</p>\n<p>when doing some refactoring, we were surprised about the auto-generated size-function of a data-type.</p>\n<p>datatype 'a foo = Bar | More \"'a foo\" \"'a list\" \"'a option list\"</p>\n<p>What we observe is that </p>\n<ul>\n<li>\"'a list\" gets turned into \"length\", whereas </li>\n<li>\"'a option list\" gets turned into \"size_list size”.</li>\n</ul>\n<p>Both arguments are non-recursive arguments and the foo type, and are lists, so why is there this difference?</p>\n<p>Is this intentional?</p>\n<p>With best regards,<br>\nAkihisa and René</p>\n</blockquote>\n<p><a href=\"/user_uploads/14278/fI1SgP8TQ6Dj_jrDeXBaVkLN/smime.p7s\">smime.p7s</a></p>",
        "id": 472932012,
        "sender_full_name": "Email Gateway",
        "timestamp": 1727367267
    }
]