[
    {
        "content": "<p>From: Mikhail Chekhov &lt;<a href=\"mailto:mikhail.chekhov.w@gmail.com\">mikhail.chekhov.w@gmail.com</a>&gt;<br>\nDear Aaron Crighton/All,</p>\n<p>I would like to offer several comments with regard to your query. However,<br>\nplease do not treat this as an official reply, as I am merely an<br>\nindependent user of Isabelle, and I am not affiliated with the<br>\ndevelopers/maintainers.</p>\n<p>Firstly, the definition that you have chosen looks slightly odd. I believe<br>\nthat a conventional form of the definition would be closer to the following<br>\ndefinition:</p>\n<p>locale abstract_localization = ring_hom_cring R S h +<br>\nmult_submonoid_of_crng R D<br>\n  for eT :: \"'e itself\" and R and S and h and D +<br>\n  assumes localization_units: \"h <code> D ⊆ Units S\"\n  assumes localization_universal_property:\n    \"⋀(T::'e ring) ψ.\n      ⟦ cring T; ψ ∈ ring_hom R T; ψ </code> D ⊆ Units T⟧ ⟹<br>\n        (<br>\n          ∃!φ::'c⇒'e.<br>\n            φ ∈ ring_hom S T ∩ extensional (carrier S) ∧<br>\n            (∀a ∈ carrier R. φ (h a) = ψ a)<br>\n        )\"</p>\n<p>In this case, the type of T is still fixed, but the type variable<br>\nassociated with the type of T is independent of the type variables<br>\nassociated with the type of R.</p>\n<p>This definition does not work, however, because the locale fixes a type for</p>\n<blockquote>\n<p>the elements of the ring T in the axiom, and so the axiom only applies to<br>\nrings of this type. Of course this means that there will be many instances<br>\nof this locale satisfied by rings S which are not the localization of R.<br>\n</p>\n</blockquote>\n<p>I believe that you may have exaggerated the problem, but I do not<br>\nhave complete confidence in anything that is stated below.</p>\n<p>When you provide an instantiation of abstract_localization, you provide a<br>\nlemma like</p>\n<p>lemma (in eq_obj_rng_of_frac) eq_obj_rng_of_frac_abstract_localization:<br>\n  fixes eT :: \"'e itself\"<br>\n  shows \"abstract_localization TYPE('e) R rec_rng_of_frac<br>\nrng_to_rng_of_frac S\"<br>\n  ―‹Follows Theorem 4.5 in Thomas W. Hungerford's Algebra.›<br>\nsorry<br>\n(*I did sketch the proof for my own needs, and can provide it upon request,<br>\nbut it is very rough*)</p>\n<p>The lemma eq_obj_rng_of_frac_abstract_localization proves that the<br>\nconstructions from the theory Localization in the AFP satisfy the universal<br>\nproperty, as defined above. Once the lemma is proven, it is possible to<br>\ninstantiate it for any type variable 'e:</p>\n<p>abstract_localization TYPE(?'e) R rec_rng_of_frac rng_to_rng_of_frac S</p>\n<p>Thus, in a certain meta-sense, it does hold for rings with elements of<br>\narbitrary types. Suppose, you have also proven abstract_localization_Q<br>\nbelow:</p>\n<p>context eq_obj_rng_of_frac<br>\nbegin</p>\n<p>context<br>\n  fixes Q :: \"'c ring\"<br>\n    and t :: \"'a ⇒ 'c\"<br>\nbegin</p>\n<p>thm eq_obj_rng_of_frac_abstract_localization</p>\n<p>lemma abstract_localization_Q:<br>\n  fixes eT :: \"'e itself\" and fT :: \"'f itself\"<br>\n  shows \"abstract_localization TYPE('e) R Q t S\"<br>\n  sorry</p>\n<p>end</p>\n<p>I believe (but not entirely certain) that it should be possible to prove<br>\nthat Q and rec_rng_of_frac are isomorphic by<br>\ninstantiating abstract_localization_Q<br>\nand eq_obj_rng_of_frac_abstract_localization for suitable types via<br>\ninstantiations like</p>\n<p>interpret cd:<br>\n    abstract_localization ‹TYPE('c)› R rec_rng_of_frac rng_to_rng_of_frac S<br>\n    by (rule eq_obj_rng_of_frac_abstract_localization)<br>\n   interpret Q_aa: abstract_localization ‹TYPE(('a × 'a) set)› R Q t S<br>\n    by (rule abstract_localization_Q)<br>\n  interpret Q_cc: abstract_localization ‹TYPE('c)› R Q t S<br>\n    by (rule abstract_localization_Q)</p>\n<p>Thence, the universal property should work as expected across types.<br>\nNonetheless, I believe that it is not possible to state a single theorem in<br>\nthe logic that captures this: one needs to instantiate<br>\nabstract_localization for every construction independently and then prove<br>\nthe relevant theorems for the specific definitions (I believe that the<br>\nfollowing post is relevant in this context:<br>\n<a href=\"https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-September/msg00097.html\">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2019-September/msg00097.html</a>.<br>\nStill, some aspects of this problem can be automated in Isabelle/ML.<br>\nFor example, see<br>\n<a href=\"https://lists.cam.ac.uk/mailman/htdig/cl-isabelle-users/2020-July/msg00050.html\">https://lists.cam.ac.uk/mailman/htdig/cl-isabelle-users/2020-July/msg00050.html</a>,<br>\nwhere I showcase an attempt to develop a meta-category theory that could<br>\nwork across types in HOL by using schematic polymorphism. However,<br>\nfollowing this attempt, I arrived at the conclusion that \"applied category<br>\ntheory\" can hardly be done in pure HOL conveniently (I would like to be<br>\nproven wrong though). Nonetheless, it can be done conveniently (to a point)<br>\nin ZFC in HOL, e.g. see<br>\n<a href=\"https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2021-March/msg00022.html\">https://lists.cam.ac.uk/pipermail/cl-isabelle-users/2021-March/msg00022.html</a><br>\n(otherwise you may wish to look at other strong foundational systems<br>\nalready implemented in Isabelle, e.g.<br>\n<a href=\"https://bitbucket.org/cezaryka/tyset/src\">https://bitbucket.org/cezaryka/tyset/src</a>,<br>\n<a href=\"https://github.com/jaycech3n/Isabelle-HoTT\">https://github.com/jaycech3n/Isabelle-HoTT</a>).</p>\n<p>Kind Regards,<br>\nMikhail Chekhov</p>\n<p>On 15/03/2021 15:35:28 Aaron Crighton wrote:</p>\n<blockquote>\n<p>Hello Everyone,<br>\nI have been working on a project in HOL-Algebra and have encountered an<br>\nissue with a certain kind of construction I'd like to perform. I would like<br>\nto prove some lemmas and perform constructions involving ring<br>\nlocalizations. I understand that there is an AFP submission which<br>\nconstructs the localization of a ring at a multiplicative subset, but I was<br>\nhoping I could formulate an abstract locale for a ring R and a localization<br>\nof that ring in terms of the universal property of localizations. This<br>\nwould be desirable because in many cases the localization of a ring can<br>\narise in ways other than the canonical construction (such as when one is<br>\nalready working with a local ring). In my case, I would like to be able to<br>\nview localizations of the integers as subrings of the field of rational<br>\nnumbers. My first attempt at this definition was:<br>\nlocale abstract_localization = ring_hom_cring R S h +<br>\nmult_submonoid_of_crng R D for<br>\n                                R and S and h and D<br>\n+  assumes localization_universal_property:<br>\n        \"⋀T ψ. ⟦ cring T; ψ ∈ ring_hom R T; ψ ` D ⊆ Units T⟧ ⟹<br>\n          (∃! φ. φ ∈ ring_hom R S ∩ extensional (carrier R) ∧<br>\n          (∀ a ∈ carrier R. φ (h a) = ψ a))  \"<br>\nThis definition does not work, however, because the locale fixes a type<br>\nfor the elements of the ring T in the axiom, and so the axiom only applies<br>\nto rings of this type. Of course this means that there will be many<br>\ninstances of this locale satisfied by rings S which are not the<br>\nlocalization of R.<br>\nOne workaround for this that I have considered would be to replace my<br>\naxiom with the assertion that my ring is isomorphic to the concrete<br>\nconstruction of the localization from the AFP, and then prove a lemma which<br>\nstates that the universal property above is necessary and sufficient for<br>\nverifying an instance of this locale.<br>\nI was wondering if anyone might have any thoughts on a general way to do<br>\nthis kind of construction, or if there are reasons why this construction is<br>\nsuboptimal in HOL-Algebra.<br>\nThanks for your consideration,<br>\nAaron</p>\n</blockquote>",
        "id": 231267500,
        "sender_full_name": "Email Gateway",
        "timestamp": 1616393508
    },
    {
        "content": "<p>From: Mikhail Chekhov &lt;<a href=\"mailto:mikhail.chekhov.w@gmail.com\">mikhail.chekhov.w@gmail.com</a>&gt;<br>\nDear All,</p>\n<p>I noticed that I forgot to provide references for my previous post on the<br>\nmailing list and also that there is at least one case of the misuse of<br>\nterminology.</p>\n<p>Thus, the sentence \"I believe (but not entirely certain) that it should be<br>\npossible to prove that Q and rec_rng_of_frac are isomorphic by<br>\ninstantiating abstract_localization_Q<br>\nand eq_obj_rng_of_frac_abstract_localization for suitable types via<br>\ninstantiations like...\" should read \"I believe (but not entirely certain)<br>\nthat it should be possible to prove that Q and rec_rng_of_frac are<br>\nisomorphic by instantiating abstract_localization_Q<br>\nand eq_obj_rng_of_frac_abstract_localization for suitable types via<br>\n<em>interpretations</em> like\".</p>\n<p>The missing references are<br>\n[1]. Hungerford TW. Algebra. New York: Springer; 2003.<br>\n[2]. Localization (commutative algebra) (Wikipedia) [Internet]. 2001.<br>\nAvailable from:<br>\n<a href=\"https://en.wikipedia.org/wiki/Localization_(commutative_algebra)\">https://en.wikipedia.org/wiki/Localization_(commutative_algebra)</a></p>\n<p>Kind Regards,<br>\nMikhail Chekhov</p>",
        "id": 231531863,
        "sender_full_name": "Email Gateway",
        "timestamp": 1616528597
    }
]