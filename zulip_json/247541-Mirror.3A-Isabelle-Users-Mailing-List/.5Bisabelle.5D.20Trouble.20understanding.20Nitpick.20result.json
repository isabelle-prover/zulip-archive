[
    {
        "content": "<p>From: Patrick Nicodemus &lt;<a href=\"mailto:gadget142@gmail.com\">gadget142@gmail.com</a>&gt;<br>\nI got a strange result from Nitpick.</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span><span class=\"w\"> </span><span class=\"n\">ProductCategory</span>\n<span class=\"w\">  </span><span class=\"kp\">imports</span><span class=\"w\"> </span><span class=\"n\">Main</span>\n<span class=\"k\">begin</span>\n\n<span class=\"k\">record</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n n-Type\">'obj</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n n-Type\">'arr</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Precategory</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">    </span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"s\">\"'obj ⇒ 'obj ⇒ 'arr set\"</span>\n<span class=\"w\">    </span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"s\">\"'obj ⇒ 'obj ⇒ 'obj ⇒ 'arr ⇒ 'arr ⇒ 'arr\"</span>\n\n<span class=\"k\">locale</span><span class=\"w\"> </span><span class=\"n\">Assoc</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">  </span><span class=\"kp\">fixes</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"s\">\"('obj, 'arr) Precategory\"</span>\n<span class=\"w\">  </span><span class=\"kp\">assumes</span>\n<span class=\"w\">    </span><span class=\"n\">comp_assoc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"⟦ f ∈ hom C w x ; g ∈ hom C x y ; h ∈ hom C y z ⟧ ⟹</span>\n<span class=\"s\">      comp C w y z (comp C w x y f g) h = comp C w x z f (comp C x y z g h)\"</span>\n\n<span class=\"k\">definition</span><span class=\"w\"> </span><span class=\"n\">ProductPrecategory</span><span class=\"w\"> </span><span class=\"o\">::</span><span class=\"w\"> </span><span class=\"s\">\"('objC, 'arrC) Precategory ⇒ ('objD,</span>\n<span class=\"s\">'arrD) Precategory ⇒</span>\n<span class=\"s\">    ('objC × 'objD, 'arrC × 'arrD) Precategory\"</span><span class=\"w\"> </span><span class=\"kp\">where</span>\n<span class=\"w\">  </span><span class=\"s\">\"ProductPrecategory C D ≡</span>\n<span class=\"s\">    ⦇</span>\n<span class=\"s\">    hom = λ c1 c2. (hom C (fst c1) (fst c2)) × (hom D (snd c1) (snd c2)),</span>\n<span class=\"s\">    comp = λ c1 c2 c3 f g.</span>\n<span class=\"s\">      (comp C (fst c1) (fst c2) (fst c3) (fst f) (fst g),</span>\n<span class=\"s\">       comp D (snd c1) (snd c2) (snd c3) (snd f) (snd g))</span>\n<span class=\"s\"> ⦈\"</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"Assoc C ⟹</span>\n<span class=\"s\">f ∈ hom (ProductPrecategory C D) x y ⟹ (fst f) ∈ hom C (fst x) (fst y)\"</span>\n<span class=\"w\">  </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">metis</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">no_types</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lifting</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ProductPrecategory_def</span><span class=\"w\"> </span><span class=\"n\">SigmaD1</span><span class=\"w\"> </span><span class=\"n\">ext_inject</span>\n<span class=\"n\">prod.exhaust_sel</span><span class=\"w\"> </span><span class=\"n\">surjective</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">test2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s\">\"Assoc C ⟹</span>\n<span class=\"s\">f ∈ hom (ProductPrecategory C D) x y ⟹ (fst f) ∈ hom C (fst x) (fst y)\"</span>\n<span class=\"w\">  </span><span class=\"kt\">nitpick</span>\n</code></pre></div>\n<p>I wrote the following code. To my surprise Nitpick claims to find a<br>\ncounterexample to the claim I just proved. What is going on here?<br>\nI originally posted this to the Isabelle zulip chat so apologies for<br>\nreposting it but Mathias Fleury also said it was weird.</p>",
        "id": 412343917,
        "sender_full_name": "Email Gateway",
        "timestamp": 1704980288
    },
    {
        "content": "<p>From: Mathias Fleury &lt;<a href=\"mailto:mathias.fleury12@gmail.com\">mathias.fleury12@gmail.com</a>&gt;<br>\nJust because I already looked a bit at that problem (see <br>\n<a href=\"#narrow/stream/238552-Beginner-Questions/topic/Nitpick.3F\">https://isabelle.zulipchat.com/#narrow/stream/238552-Beginner-Questions/topic/Nitpick.3F</a>). <br>\nBy using:</p>\n<p>|nitpick[eval=\"hom C (fst x) (fst y)\"]|</p>\n<p>it seems that nitpick believes that f is in the set, while auto can <br>\nprove that the set is actually empty |(hom (ProductPrecategory C D) x y) <br>\n= {}, so f cannot be in the set. I have no idea why this is the case…<br>\n|</p>\n<table>\n<thead>\n<tr>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>Mathias</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td></td>\n</tr>\n</tbody>\n</table>",
        "id": 412350124,
        "sender_full_name": "Email Gateway",
        "timestamp": 1704982215
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@ifi.lmu.de\">jasmin.blanchette@ifi.lmu.de</a>&gt;<br>\nDear Patrick, Mathias,</p>\n<p>Yes, this is weird indeed. I knew after all these years that Nitpick isn't fully sound, so I'm not entirely surprised. The example is nicely self-contained, so I'll have a look in the coming days and see if I can isolate the issue.</p>\n<p>Thanks for the report.</p>\n<p>Best,<br>\nJasmin</p>",
        "id": 412498511,
        "sender_full_name": "Email Gateway",
        "timestamp": 1705048401
    }
]