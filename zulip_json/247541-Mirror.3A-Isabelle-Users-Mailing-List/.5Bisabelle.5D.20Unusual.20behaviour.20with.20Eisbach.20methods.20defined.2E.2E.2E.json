[
    {
        "content": "<p>From: Seung Park &lt;<a href=\"mailto:seunghoon.park@cs.ox.ac.uk\">seunghoon.park@cs.ox.ac.uk</a>&gt;<br>\nHi everyone,</p>\n<p>I have encountered an unusual behaviour with Eisbach methods/tactics defined within locales.</p>\n<p>I have reproduced the problem with the following example:</p>\n<p>locale foo =<br>\n  fixes P :: \"'a ⇒ bool\"<br>\nbegin</p>\n<p>inductive Q :: \"'a ⇒ bool\"<br>\n  where<br>\n  Rule1: \"P a ⟹ Q a\"</p>\n<p>method bar =<br>\n  (rule Rule1, blast)</p>\n<p>lemma \"P a ⟹ Q a\"<br>\n  by bar</p>\n<p>end</p>\n<p>abbreviation P :: \"'a ⇒ bool\"<br>\n  where<br>\n  \"P ≡ λ _. True\"</p>\n<p>interpretation foo_nat:<br>\n  foo \"P :: nat ⇒ bool\"<br>\n  .</p>\n<p>interpretation foo_int:<br>\n  foo \"P :: int ⇒ bool\"<br>\n  .</p>\n<p>lemma<br>\n  fixes x :: int<br>\n  shows \"P x ⟹ foo_int.Q x\"<br>\n  by <a href=\"http://foo_int.bar\">foo_int.bar</a> (* Works as intended *)</p>\n<p>lemma<br>\n  fixes x :: nat<br>\n  shows \"P x ⟹ foo_nat.Q x\"<br>\n  apply <a href=\"http://foo_nat.bar\">foo_nat.bar</a> (* Does not work *)<br>\n  oops</p>\n<p>lemma<br>\n  fixes x :: int<br>\n  shows \"P x ⟹ foo_int.Q (x :: int)\"<br>\n  by <a href=\"http://foo_nat.bar\">foo_nat.bar</a> (* Works but is not intended behaviour *)</p>\n<p>In the example above, I have defined a locale 'foo' and also defined a tactic 'bar' within the locale.<br>\nThe intent is that if I were to provide an interpretation named 'int' of this locale and want to use the tactic I defined afterwards, I would use '<a href=\"http://int.bar\">int.bar</a>'.<br>\nThis way, even if I provided another interpretation, I should still be able to use '<a href=\"http://int.bar\">int.bar</a>' when proving anything related to 'int'.</p>\n<p>When there is only one interpretation given, there are no problems. By removing the interpretation 'foo_int' in the example above, the second lemma can be proved using '<a href=\"http://foo_nat.bar\">foo_nat.bar</a>'.</p>\n<p>However, when two or more interpretations are given, something unusual happens. It seems like the tactic of the most recent interpretation overrides all the tactics of the older interpretations. In the example, the tactic used in the second lemma does not work (noting that the interpretation 'foo_nat' was given before 'foo_int'). However, the same tactic works in the last lemma, strangely enough, as if the method '<a href=\"http://foo_nat.bar\">foo_nat.bar</a>' has been overriden by '<a href=\"http://foo_int.bar\">foo_int.bar</a>'.</p>\n<p>Is there a way to select the appropriate tactic in this case? It would be wonderful if there was a solution.</p>\n<p>Many thanks,<br>\nSimon</p>",
        "id": 280652558,
        "sender_full_name": "Email Gateway",
        "timestamp": 1651248164
    }
]