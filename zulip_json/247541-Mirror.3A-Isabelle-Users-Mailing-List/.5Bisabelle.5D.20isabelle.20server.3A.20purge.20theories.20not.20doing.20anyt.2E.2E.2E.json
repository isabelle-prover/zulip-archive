[
    {
        "content": "<p>From: pdevant &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nHi,<br>\nI am experimenting with the isabelle server and came across a problem with the<br>\npurge_theories command.</p>\n<p>Given: A basic theory with a trivial lemma in it like this:</p>\n<p>lemma test: \"true = true\"<br>\nsledgehammer<br>\nsorry</p>\n<p>The Goal is to make isabelle server run sledgehammer and then insert the found<br>\nsolution.<br>\nBy using isabelle server together with start_session and use_theories i am<br>\nalready able to get the proof  and insert it using my own script.<br>\nThen i want to run sledgehammer again by executing use_theories in the same<br>\nway on the same theory file that now looks like this:</p>\n<p>lemma test: \"true = true\"<br>\nby simp<br>\nsledgehammer<br>\nsorry</p>\n<p>I would expect isabelle server to say something like \"bad context\" or \"no<br>\nsubgoals to solve\". But what actually happens is that it prints the exact same<br>\nsledgehammer output again. After carefully reading the documentation i found<br>\nout that in order to actually update the theory, that isabelle server<br>\nprocesses, you need to run \"purge_theories\" before executing \"use_theories\" a<br>\nsecond time. However this does not affect the outcome, although the server<br>\nconfirms that it did the purge.</p>\n<p>{'purged': [{'node_name': '&lt;REMOVED&gt;/tests/ressources/prove/testfile3.thy',<br>\n'theory_name': 'Draft.testfile3'}], 'retained': []}</p>\n<p>Is there anything i am missing? Did I missinterpret the documentation? Or is<br>\nthis a bug?</p>\n<p>Best regards,<br>\nPascal</p>",
        "id": 303232012,
        "sender_full_name": "Email Gateway",
        "timestamp": 1665396881
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nI have spent a few days investigating the situation, and producing a few <br>\nlast-minute changes for the headless PIDE session, which is behind e.g. <br>\n\"isabelle server\" and \"isabelle dump\".</p>\n<p>The result is now <br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release/rev/14cf5a50c1e9\">https://isabelle.sketis.net/repos/isabelle-release/rev/14cf5a50c1e9</a> which has <br>\nthe following update on Isabelle2022/NEWS:</p>\n<ul>\n<li>\n<p>The headless PIDE session now supports adhoc editing of theories via<br>\nrepeated \"use_theories\" on changed files. This functionality was<br>\noriginally intended (e.g. see Isabelle2018), but it got lost due to<br>\nlater improvements of \"isabelle dump\". Now it should work again, e.g. as<br>\nfollows for \"isabelle server &amp;\" and \"isabelle client\":</p>\n<p>session_start {\"session\": \"HOL\", \"options\": <br>\n[\"headless_consolidate_delay=0.5\", \"headless_prune_delay=5\"]}<br>\n use_theories {\"session_id\": \"...\", \"theories\": [\"/home/makarius/tmp/Test\"]}<br>\n use_theories {\"session_id\": \"...\", \"theories\": [\"/home/makarius/tmp/Test\"]}<br>\n purge_theories {\"session_id\":\"...\", \"all\": true}<br>\n session_stop {\"session_id\": \"...\"}<br>\n shutdown</p>\n</li>\n</ul>\n<p>The next release candidate Isabelle2022-RC4 will appear within 1-2 days. You <br>\ncan either wait and hope for the best, or try out the above repository version <br>\nin the meantime: it is relatively simple to build as explained in <br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release/file/tip/README_REPOSITORY\">https://isabelle.sketis.net/repos/isabelle-release/file/tip/README_REPOSITORY</a> <br>\n-- but you need to clone <a href=\"https://isabelle.sketis.net/repos/isabelle-release\">https://isabelle.sketis.net/repos/isabelle-release</a></p>\n<p>The final release of Isabelle2022 will appear 1 week later. It will remain <br>\nunchanged until the next release after it (approx. Sep-2023).</p>\n<p>Makarius</p>",
        "id": 304474365,
        "sender_full_name": "Email Gateway",
        "timestamp": 1666016801
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThat was only 1 day, and only 1 week left for last-minute final testing.</p>\n<p>See <a href=\"https://isabelle.sketis.net/website-Isabelle2022-RC4\">https://isabelle.sketis.net/website-Isabelle2022-RC4</a> and <br>\n<a href=\"https://isabelle-dev.sketis.net/phame/post/view/58/release_candidates_for_isabelle2022/\">https://isabelle-dev.sketis.net/phame/post/view/58/release_candidates_for_isabelle2022/</a></p>\n<p>Makarius</p>",
        "id": 304683281,
        "sender_full_name": "Email Gateway",
        "timestamp": 1666101280
    }
]