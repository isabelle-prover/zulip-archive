[
    {
        "content": "<p>From: \"\\\"Putti, Edoardo (UT-EEMCS)\\\"\" &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nHello all,<br>\nI'm surely working against the pretty-printing and syntax but what I found in Pure/HOL/AFP does not seems to address this issue I am facing.<br>\nI want to print a type in prefix notation, e.g. option 'a, in place of postfix notation, 'a option.<br>\nAfter spelunking in pure_theory.ML I got to the syntax definition for type application and I can override the normal syntax with mine for a custom print mode.</p>\n<p>syntax (pvl output)<br>\n    \"_tapp\" :: \"type =&gt; type_name =&gt; type\" (\"(1_&lt;_&gt;)\")</p>\n<p>typ \"'a option\"       (* prints as 'a option  *)<br>\ntyp (pvl) \"'a option\" (* prints as 'a&lt;option&gt; *)</p>\n<p>I cannot exchange the order of in the mixfix declaration but I can declare a new pattern _pvl_tapp and a translation from _tapp to _pvl_tapp.</p>\n<p>syntax (pvl output)<br>\n    \"_pvl_tapp\" :: \" type_name =&gt; type =&gt; type\" (\"(1_&lt;_&gt;)\") (* note inversion of type_name and type in production *)</p>\n<p>typ \"'a option\"       (* prints as 'a option *)<br>\ntyp (pvl) \"'a option\" (* prints as 'a option, expected as I have no translation yet *)</p>\n<p>translation<br>\n  \"_pvl_tapp tc ty\" == \"_tapp ty tc\"</p>\n<p>typ \"'a option\"       (* prints as 'a option *)<br>\ntyp (pvl) \"'a option\" (* prints as 'a option *)</p>\n<p>I even got as far as looking at type_syntax but that binds one syntax constant to one type or type synonym. I would need to<br>\ndo this binding for each type which is unsatisfactory.<br>\nDecorating the translation with the (type) qualifier (?) yields the error Undefined type name: \"_pvl_tapp\", example below.</p>\n<p>translation<br>\n  (type) \"_pvl_tapp tc ty\" == (type) \"_tapp ty tc\"</p>\n<p>Is this use-case supported in any way? It's also unclear how to interface with the type pretty printing and I cannot find anybody attempting this.<br>\nThe second question is, it there a way to scope translations to one printing mode? In the previous example the translation from _tapp to _pvl_tapp makes no<br>\nsense in normal output so it should be ignored by the system, which is what I am observing now.<br>\nI'm attaching a theory file where you can reproduce this behavior.</p>\n<p><a href=\"/user_uploads/14278/0_lxbTghTaGJl_rWWLfAVLHM/Scratch.thy\">Scratch.thy</a></p>",
        "id": 548139467,
        "sender_full_name": "Email Gateway",
        "timestamp": 1761912199
    }
]