[
    {
        "content": "<p>From: Gerwin Klein &lt;<a href=\"mailto:kleing@unsw.edu.au\">kleing@unsw.edu.au</a>&gt;<br>\nIt looks like since 12 Nov at isabelle@2b212c8138a5 the AFP build has been timing out towards the end of theory/file presentation despite everything else being successful (logs at <a href=\"https://ci.isabelle.systems/jenkins/job/isabelle-all/3298/\">https://ci.isabelle.systems/jenkins/job/isabelle-all/3298/</a> for the morbidly curious). For some reason Jenkins decided that no emails needed to be sent for that.</p>\n<p>I haven't been able to reproduce the problem locally, but this is happening even for small AFP changes where the proofs are finished after a few minutes, e.g. in <a href=\"https://ci.isabelle.systems/jenkins/job/isabelle-all/3301/consoleText\">https://ci.isabelle.systems/jenkins/job/isabelle-all/3301/consoleText</a> (for afp-devel@7c831b848ada135a and isabelle@4f1c1c7eb95f4) so it's not the global timeout that is the issue. It does really seem to either hang or take very long for the presentation part.</p>\n<p>To make testing worse, the entry Complex_Bounded_Operators is currently broken since (I think) Manuel's recent afp-devel commit 7aec7688b019. Manuel, could you please have a look at that?</p>\n<p>In any case, I can't do the AFP release fork in this state, and will have to postpone until we've figured out what is going on with the presentation part.</p>\n<p>Cheers,<br>\nGerwin</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 261600299,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637041378
    },
    {
        "content": "<p>From: Manuel Eberl &lt;<a href=\"mailto:manuel@pruvisto.org\">manuel@pruvisto.org</a>&gt;<br>\nHave you tested Complex_Bounded_Operators with the latest <br>\nisabelle-release? <a href=\"https://isabelle.sketis.net/repos/isabelle-release\">https://isabelle.sketis.net/repos/isabelle-release</a></p>\n<p>That afp-devel push of mine was to adapt Complex_Bounded_Operators to <br>\nthe changes I had Makarius add to isabelle-release. At least on my <br>\nmachine it built fine.</p>\n<p>Manuel</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 261607393,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637049229
    },
    {
        "content": "<p>From: Gerwin Klein &lt;<a href=\"mailto:kleing@unsw.edu.au\">kleing@unsw.edu.au</a>&gt;<br>\nYou were too fast :-), afp-devel is is for isabelle-devel, it shouldn't have isabelle-release changes in it.</p>\n<p>It's unfortunate that isabelle-release has already diverged in content. Not a real problem, just a bit more overhead.</p>\n<p>Ok, so I'll make an afp-2021-1 fork now, and it would be good if somebody could set up Jenkins to test this branch against isabelle-release. Lars used to do that -- I'm not sure who has taken over Jenkins.</p>\n<p>After the fork we should temporarily revert that commit for Complex_Bounded_Operators in afp-devel (but keep it on afp-2021-1) until the release has happened. We should try to fix the timeout problem on the afp-2021-1/isabelle-release combination. After the release those changes will then be merged into both devel versions.</p>\n<p>Cheers,<br>\nGerwin</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 261609007,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637050589
    },
    {
        "content": "<p>From: Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;<br>\nOn 11/16/21 09:16, Gerwin Klein wrote:</p>\n<blockquote>\n<p>You were too fast :-), afp-devel is is for isabelle-devel, it shouldn't have isabelle-release changes in it.</p>\n<p>It's unfortunate that isabelle-release has already diverged in content. Not a real problem, just a bit more overhead.</p>\n<p>Ok, so I'll make an afp-2021-1 fork now, and it would be good if somebody could set up Jenkins to test this branch against isabelle-release. Lars used to do that -- I'm not sure who has taken over Jenkins.</p>\n</blockquote>\n<p>I'm responsible for that now and will set that up.</p>\n<p>Fabian</p>\n<blockquote>\n<p>After the fork we should temporarily revert that commit for Complex_Bounded_Operators in afp-devel (but keep it on afp-2021-1) until the release has happened. We should try to fix the timeout problem on the afp-2021-1/isabelle-release combination. After the release those changes will then be merged into both devel versions.</p>\n<p>Cheers,<br>\nGerwin</p>\n<p>On 16 Nov 2021, at 18:53, Manuel Eberl &lt;<a href=\"mailto:manuel@pruvisto.org\">manuel@pruvisto.org</a>&gt; wrote:</p>\n<blockquote>\n<p>Have you tested Complex_Bounded_Operators with the latest isabelle-release? <a href=\"https://isabelle.sketis.net/repos/isabelle-release\">https://isabelle.sketis.net/repos/isabelle-release</a></p>\n<p>That afp-devel push of mine was to adapt Complex_Bounded_Operators to the changes I had Makarius add to isabelle-release. At least on my machine it built fine.</p>\n<p>Manuel</p>\n</blockquote>\n<p>On 16/11/2021 06:42, Gerwin Klein wrote:</p>\n<blockquote>\n<blockquote>\n<p>It looks like since 12 Nov at isabelle@2b212c8138a5 the AFP build has been timing out towards the end of theory/file presentation despite everything else being successful (logs at <a href=\"https://ci.isabelle.systems/jenkins/job/isabelle-all/3298/\">https://ci.isabelle.systems/jenkins/job/isabelle-all/3298/</a> for the morbidly curious). For some reason Jenkins decided that no emails needed to be sent for that.</p>\n<p>I haven't been able to reproduce the problem locally, but this is happening even for small AFP changes where the proofs are finished after a few minutes, e.g. in <a href=\"https://ci.isabelle.systems/jenkins/job/isabelle-all/3301/consoleText\">https://ci.isabelle.systems/jenkins/job/isabelle-all/3301/consoleText</a> (for afp-devel@7c831b848ada135a and isabelle@4f1c1c7eb95f4) so it's not the global timeout that is the issue. It does really seem to either hang or take very long for the presentation part.</p>\n<p>To make testing worse, the entry Complex_Bounded_Operators is currently broken since (I think) Manuel's recent afp-devel commit 7aec7688b019. Manuel, could you please have a look at that?</p>\n<p>In any case, I can't do the AFP release fork in this state, and will have to postpone until we've figured out what is going on with the presentation part.</p>\n<p>Cheers,<br>\nGerwin</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>\n</blockquote>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>\n</blockquote>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>\n</blockquote>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 261610729,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637051864
    },
    {
        "content": "<p>From: Gerwin Klein &lt;<a href=\"mailto:kleing@unsw.edu.au\">kleing@unsw.edu.au</a>&gt;<br>\nPerfect, thanks. The push is still running, turns out the afp has grown quite<br>\na bit. Will let you know when it's there.</p>\n<p>Cheers,</p>\n<p>Gerwin</p>",
        "id": 261611102,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637052123
    },
    {
        "content": "<p>From: Gerwin Klein &lt;<a href=\"mailto:kleing@unsw.edu.au\">kleing@unsw.edu.au</a>&gt;<br>\n&lt;ssh://hg@foss.heptapod.net/isa-afp/afp-2021-1&gt; is now available.</p>\n<p>Cheers,</p>\n<p>Gerwin</p>",
        "id": 261613646,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637053721
    },
    {
        "content": "<p>From: Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;<br>\nAppropriate build job is also online: <br>\n<a href=\"https://ci.isabelle.systems/jenkins/job/isabelle-2021-1/\">https://ci.isabelle.systems/jenkins/job/isabelle-2021-1/</a></p>\n<p>Fabian</p>",
        "id": 261615671,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637055066
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 16/11/2021 09:16, Gerwin Klein wrote:</p>\n<blockquote>\n<p>You were too fast :-), afp-devel is is for isabelle-devel, it shouldn't have isabelle-release changes in it.</p>\n</blockquote>\n<p>We have had this time of uncertainty of the pair isabelle-dev vs. afp-devel<br>\nafter the fork of isabelle-dev to isabelle-release routinely in the past few<br>\nyears.</p>\n<p>From the Isabelle side, the \"window of uncertainty\" is only 30min .. 2h. For<br>\nAFP we often had many days, sometimes 1-2 weeks (IIRC).</p>\n<p>So can this be organized in a better way?<br>\nE.g. have the \"call to finalize AFP\" earlier in the process and maybe have a<br>\nseparate \"afp-release\" fork for it.</p>\n<blockquote>\n<p>After the fork we should temporarily revert that commit for Complex_Bounded_Operators in afp-devel (but keep it on afp-2021-1) until the release has happened.<br>\nNote that I will occasionally merge isabelle-release back to isabelle-dev<br>\nbefore final lift-off. It will happen within 2-3 days, for example.</p>\n</blockquote>\n<p>Makarius</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 261627368,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637061884
    },
    {
        "content": "<p>From: Gerwin Klein &lt;<a href=\"mailto:kleing@unsw.edu.au\">kleing@unsw.edu.au</a>&gt;</p>\n<blockquote>\n<p>On 16 Nov 2021, at 22:24, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<p>On 16/11/2021 09:16, Gerwin Klein wrote:</p>\n<blockquote>\n<p>You were too fast :-), afp-devel is is for isabelle-devel, it shouldn't have isabelle-release changes in it.</p>\n</blockquote>\n<p>We have had this time of uncertainty of the pair isabelle-dev vs. afp-devel<br>\nafter the fork of isabelle-dev to isabelle-release routinely in the past few<br>\nyears.</p>\n<p>From the Isabelle side, the \"window of uncertainty\" is only 30min .. 2h. For<br>\nAFP we often had many days, sometimes 1-2 weeks (IIRC).</p>\n<p>So can this be organized in a better way?<br>\nE.g. have the \"call to finalize AFP\" earlier in the process and maybe have a<br>\nseparate \"afp-release\" fork for it.</p>\n</blockquote>\n<p>You're right that the uncertainty period is not really ideal. It relies on there not being any major content changes in isabelle-release. Often that works fine, but occasionally content drift does happen as it did this cycle.</p>\n<p>What I've usually done in the past (and now) when content drift occurs, is what you suggest, i.e. an afp-release fork, which here is directly getting the name afp-2021-1. It can get that name, because the model for the AFP is that the release remains a separate fork, so what now operates as the pre-release fork will become the official release fork when everything is done.</p>\n<p>We could remove the uncertainty period by always doing that and coordinating on the fork time. I'd be happy to try that out for the next release. </p>\n<blockquote>\n<blockquote>\n<p>After the fork we should temporarily revert that commit for Complex_Bounded_Operators in afp-devel (but keep it on afp-2021-1) until the release has happened.<br>\nNote that I will occasionally merge isabelle-release back to isabelle-dev<br>\nbefore final lift-off. It will happen within 2-3 days, for example.</p>\n</blockquote>\n</blockquote>\n<p>That is nice, and makes the situation with afp-devel a bit easier to manage (the smaller the merge in the end, the less work there is at the actual release point).</p>\n<p>Cheers,<br>\nGerwin</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 261721687,
        "sender_full_name": "Email Gateway",
        "timestamp": 1637104455
    }
]