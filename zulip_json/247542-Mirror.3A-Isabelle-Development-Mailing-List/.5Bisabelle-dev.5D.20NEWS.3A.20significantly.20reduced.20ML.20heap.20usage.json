[
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\n<strong>* General </strong>*</p>\n<ul>\n<li>ML heap usage and stored heap size has been significantly reduced,<br>\nespecially for applications with a lot of definitions in a 'locale' or<br>\n'class' context. The shrink factor is usually in the range 1.1 .. 2.0,<br>\nbut a factor 3 .. 10 has been seen in unusual situations. This often<br>\nallows big applications to return to the \"small\" 64_32 memory model with<br>\nits hard limit of 16 GiB, and thus reduce the heap size by another<br>\nfactor 1.8.</li>\n</ul>\n<p>This refers to current f3d19c8445ec: many changesets are leading towards this <br>\ngreat improvement. The key point is actually rather small:</p>\n<p>changeset:   78048:f16067da45ef<br>\nuser:        wenzelm<br>\ndate:        Mon May 15 14:13:58 2023 +0200<br>\nfiles:       src/Pure/Isar/proof_context.ML src/Pure/assumption.ML <br>\nsrc/Pure/variable.ML<br>\ndescription:<br>\navoid capture of inner/outer context and thus reduce heaps sizes by 20..40% <br>\n(see also dd04a8b654fc, e49bf4ebf330, 9c19e15c8548, 71467e35fc3c);</p>\n<p>That factor 1.2 .. 1.4 was merely for HOL and HOL-Analysis. Better factors are <br>\nseen here:</p>\n<p>HOL-Algebra  3.6<br>\n   HOL-Probability 1.6</p>\n<p>Category3  5.2<br>\n   MonoidalCategory   7.6</p>\n<p>Makarius</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 362134221,
        "sender_full_name": "Email Gateway",
        "timestamp": 1685441709
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nHere are some more measurements to show the quite significant effect on <br>\nlocale-laden applications.</p>\n<p>This is (1) current Isabelle/f3d19c8445ec + AFP/d34609a6a678 versus (2) <br>\nIsabelle2022 + afp-2022/2458cc9f2178 on the rather heavy session Padic_Ints.</p>\n<p>The whole stack of contributing sessions is shown below, with shrink factor:</p>\n<p>HOL 1.56<br>\nHOL-Library 1.43<br>\nHOL-Computational_Algebra 1.80<br>\nHOL-Algebra 4.03<br>\nPadic_Ints 5.18<br>\nPadic_Field 12.5<br>\nALL 2.87 (1.45 GiB / 0.50 GiB)</p>\n<p>This is isabelle build -o parallel_proofs=0 to shrink the heap a bit more.</p>\n<p>Timing did not change significantly:</p>\n<p>(1)<br>\nFinished HOL (0:06:13 elapsed time, 0:10:31 cpu time, factor 1.69)<br>\nFinished HOL-Library (0:04:11 elapsed time, 0:11:14 cpu time, factor 2.69)<br>\nFinished HOL-Computational_Algebra (0:01:14 elapsed time, 0:02:22 cpu time, <br>\nfactor 1.91)<br>\nFinished HOL-Algebra (0:04:39 elapsed time, 0:10:42 cpu time, factor 2.30)<br>\nFinished Padic_Ints (0:03:23 elapsed time, 0:07:18 cpu time, factor 2.16)<br>\nFinished Padic_Field (0:12:49 elapsed time, 0:21:32 cpu time, factor 1.68)</p>\n<p>(2)<br>\nFinished Pure (0:00:14 elapsed time, 0:00:14 cpu time, factor 0.97)<br>\nFinished HOL (0:06:05 elapsed time, 0:11:26 cpu time, factor 1.88)<br>\nFinished HOL-Library (0:03:58 elapsed time, 0:10:30 cpu time, factor 2.65)<br>\nFinished HOL-Computational_Algebra (0:01:08 elapsed time, 0:02:11 cpu time, <br>\nfactor 1.92)<br>\nFinished HOL-Algebra (0:04:20 elapsed time, 0:10:06 cpu time, factor 2.33)<br>\nFinished Padic_Ints (0:02:51 elapsed time, 0:05:34 cpu time, factor 1.95)<br>\nFinished Padic_Field (0:14:34 elapsed time, 0:24:42 cpu time, factor 1.70)</p>\n<p>Makarius</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 362290561,
        "sender_full_name": "Email Gateway",
        "timestamp": 1685477461
    },
    {
        "content": "<p>From: Lawrence Paulson &lt;<a href=\"mailto:lp15@cam.ac.uk\">lp15@cam.ac.uk</a>&gt;<br>\nThese are tremendous improvements! Many thanks.</p>\n<p>As you know, people are relying more and more locales to structure elaborate definition hierarchies, so we need this. And I gather that the users of certain other systems have to put up with major performance issues once a proof is more than a couple of dozen lines long.</p>\n<p>Larry</p>\n<hr>\n<p>isabelle-dev mailing list<br>\n<a href=\"mailto:isabelle-dev@in.tum.de\">isabelle-dev@in.tum.de</a><br>\n<a href=\"https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev\">https://mailman46.in.tum.de/mailman/listinfo/isabelle-dev</a></p>",
        "id": 362417898,
        "sender_full_name": "Email Gateway",
        "timestamp": 1685530396
    }
]