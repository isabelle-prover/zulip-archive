[
    {
        "content": "<p><strong>From:</strong> Daniel Matichuk via isabelle-dev &lt;<a href=\"mailto:isabelle-dev@mailman.proof.cit.tum.de\">isabelle-dev@mailman.proof.cit.tum.de</a>&gt;</p>\n<p>In Isabelle-2025-RC1 the following theory yields an incorrect result from<br>\n\"value\" (Hex_Words is optional):</p>\n<p><em>theory</em> \"Scratch\"<br>\n<em>imports</em> \"HOL-Library.Word\"  \"HOL-Library.Code_Target_Numeral\"<br>\n\"Word_Lib.Hex_Words\"<br>\n<em>begin</em></p>\n<p><em>value</em> \"signed_drop_bit 5 ((0x80000010 :: 32 word))\"<br>\n(* \"0xFC000001\" :: \"32 word\" *)</p>\n<p><em>end</em></p>\n<p>However the correct result (0xFC000000) is given if Code_Target_Numeral is<br>\nnot imported.</p>\n<p>After some investigation I've determined that this is an issue that was<br>\nintroduced in PolyML 5.6.2, which I've reported here:</p>\n<p><a href=\"https://github.com/polyml/polyml/issues/243\">https://github.com/polyml/polyml/issues/243</a></p>",
        "id": 562000798,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764895486
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 05/12/2025 01:43, Daniel Matichuk via isabelle-dev wrote:</p>\n<blockquote>\n<p>After some investigation I've determined that this is an issue that was <br>\nintroduced in PolyML 5.6.2, which I've reported here:</p>\n<p><a href=\"https://github.com/polyml/polyml/issues/243\">https://github.com/polyml/polyml/issues/243</a> &lt;<a href=\"https://github.com/polyml/polyml/\">https://github.com/polyml/polyml/</a> <br>\nissues/243&gt;</p>\n</blockquote>\n<p>Thanks for the report. It is very relevant for the Isabelle2025-1 release: in <br>\nthe worst case we need to switch back to Poly/ML 5.9.1, see also <br>\nIsabelle/08722f90a439.</p>\n<p>For now, lets hope that David Matthews will do something on the spot --- I've <br>\nadded some further bits of information to the above ticket.</p>\n<p>Makarius</p>",
        "id": 562090346,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764938086
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 05/12/2025 13:34, Makarius wrote:</p>\n<blockquote>\n<blockquote>\n<p><a href=\"https://github.com/polyml/polyml/issues/243\">https://github.com/polyml/polyml/issues/243</a> &lt;<a href=\"https://github.com/polyml/\">https://github.com/polyml/</a> <br>\npolyml/ issues/243&gt;</p>\n</blockquote>\n<p>Thanks for the report. It is very relevant for the Isabelle2025-1 release: in <br>\nthe worst case we need to switch back to Poly/ML 5.9.1, see also <br>\nIsabelle/08722f90a439.</p>\n</blockquote>\n<p>The worst case is probably not that bad: it should be sufficient to revert <br>\nthis change: <a href=\"https://github.com/polyml/polyml/commit/ed1ff06d7b53\">https://github.com/polyml/polyml/commit/ed1ff06d7b53</a></p>\n<p>There is also an interesting comment in the old version:</p>\n<p>(* These could be implemented in the RTS although I doubt if it's<br>\n      really worth it. *)</p>\n<p>Makarius</p>",
        "id": 562103762,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764942310
    },
    {
        "content": "<p><strong>From:</strong> Daniel Matichuk via isabelle-dev &lt;<a href=\"mailto:isabelle-dev@mailman.proof.cit.tum.de\">isabelle-dev@mailman.proof.cit.tum.de</a>&gt;</p>\n<p>I tried to test the updated polyml version, but ran into an issue with<br>\ncomponent_polyml:</p>\n<p>./bin/isabelle component_polyml -V 64eb08b0a4bcb20d39167550034f30d05a61f121<br>\nCreating component directory<br>\n\"/Users/dmatichuk/Code/isabelle/polyml-64eb08b0a4bcb20d39167550034f30d05a61f121\"<br>\nGetting \"<a href=\"https://gmplib.org/download/gmp/gmp-6.3.0.tar.bz2\">https://gmplib.org/download/gmp/gmp-6.3.0.tar.bz2</a>\"<br>\nBuilding GMP library ...<br>\nGetting \"<br>\n<a href=\"https://github.com/polyml/polyml/archive/64eb08b0a4bcb20d39167550034f30d05a61f121.tar.gz\">https://github.com/polyml/polyml/archive/64eb08b0a4bcb20d39167550034f30d05a61f121.tar.gz</a><br>\n\"<br>\nGetting \"<a href=\"https://files.sketis.net/sha1/archive/0ce12663fe76.tar.gz\">https://files.sketis.net/sha1/archive/0ce12663fe76.tar.gz</a>\"<br>\nBuilding Poly/ML arm64_32-darwin<br>\n*** error: /Library/Developer/CommandLineTools/usr/bin/install_name_tool:<br>\nmore than one input file specified (poly and poly)<br>\n*** Usage: /Library/Developer/CommandLineTools/usr/bin/install_name_tool<br>\n[-change old new] ... [-rpath old new] ... [-add_rpath new] ...<br>\n[-delete_rpath old] ... [-id name] input</p>\n<p>A quick fix was to simply modify executable.scala/library_closure to<br>\ninstead call install_name_tool multiple times.</p>\n<p>On Fri, Dec 5, 2025 at 5:44 AM Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On 05/12/2025 13:34, Makarius wrote:</p>\n<blockquote>\n<blockquote>\n<p><a href=\"https://github.com/polyml/polyml/issues/243\">https://github.com/polyml/polyml/issues/243</a> &lt;<a href=\"https://github.com/polyml/\">https://github.com/polyml/</a><br>\npolyml/ issues/243&gt;</p>\n</blockquote>\n<p>Thanks for the report. It is very relevant for the Isabelle2025-1<br>\nrelease: in<br>\nthe worst case we need to switch back to Poly/ML 5.9.1, see also<br>\nIsabelle/08722f90a439.</p>\n</blockquote>\n<p>The worst case is probably not that bad: it should be sufficient to revert<br>\nthis change: <a href=\"https://github.com/polyml/polyml/commit/ed1ff06d7b53\">https://github.com/polyml/polyml/commit/ed1ff06d7b53</a></p>\n<p>There is also an interesting comment in the old version:</p>\n<p>(* These could be implemented in the RTS although I doubt if it's<br>\n      really worth it. *)</p>\n<p>Makarius</p>\n</blockquote>",
        "id": 562186715,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764970460
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 05/12/2025 22:33, Daniel Matichuk wrote:</p>\n<blockquote>\n<p>I tried to test the updated polyml version, but ran into an issue with <br>\ncomponent_polyml:</p>\n<p>./bin/isabelle component_polyml -V 64eb08b0a4bcb20d39167550034f30d05a61f121<br>\nCreating component directory \"/Users/dmatichuk/Code/isabelle/ <br>\npolyml-64eb08b0a4bcb20d39167550034f30d05a61f121\"</p>\n</blockquote>\n<blockquote>\n<p>*** error: /Library/Developer/CommandLineTools/usr/bin/install_name_tool: more <br>\nthan one input file specified (poly and poly)<br>\n*** Usage: /Library/Developer/CommandLineTools/usr/bin/install_name_tool [- <br>\nchange old new] ... [-rpath old new] ... [-add_rpath new] ... [-delete_rpath <br>\nold] ... [-id name] input</p>\n<p>A quick fix was to simply modify executable.scala/library_closure to instead <br>\ncall install_name_tool multiple times.</p>\n</blockquote>\n<p>That is a conflict of a locally installed libgmp with the one that is built <br>\nvia \"isabelle component_polyml\". The usual workaround is to remove that other <br>\nlibgmp, which is usually in /usr/local.</p>\n<p>That is indeed a bit awkward, but \"isabelle component_polyml\" is merely an <br>\nadministrative tool for limited contexts. I usually need several attempts to <br>\nmake it work with \"current\" OS versions, whatever they are.</p>\n<p>Right now our main problem is that 64eb08b0a4bc is on top of \"latest\" Poly/ML <br>\ndevelopment and experiments. Thus it does not quite work for Isabelle yet, <br>\nespecially HOL-Codegenerator_Test. For the release the change needs to sit on <br>\ntop of official v5.9.2.</p>\n<p>Makarius</p>",
        "id": 562187703,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764970962
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 05/12/2025 22:42, Makarius wrote:</p>\n<blockquote>\n<p>Right now our main problem is that 64eb08b0a4bc is on top of \"latest\" Poly/ML <br>\ndevelopment and experiments. Thus it does not quite work for Isabelle yet, <br>\nespecially HOL-Codegenerator_Test. For the release the change needs to sit on <br>\ntop of official v5.9.2.</p>\n</blockquote>\n<p>I now see 638379c583a5, and that looks fine so far in a quick test of <br>\nHOL-Codegenerator_Test ...</p>\n<p>Makarius</p>",
        "id": 562189399,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764971961
    },
    {
        "content": "<p><strong>From:</strong> Daniel Matichuk via isabelle-dev &lt;<a href=\"mailto:isabelle-dev@mailman.proof.cit.tum.de\">isabelle-dev@mailman.proof.cit.tum.de</a>&gt;</p>\n<p>Some quick tests with the code generator indicate that this revision seems<br>\nto have resolved the issue (compiled with GMP enabled, using arm64_32).</p>\n<p>On Fri, Dec 5, 2025 at 1:58 PM Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On 05/12/2025 22:42, Makarius wrote:</p>\n<blockquote>\n<p>Right now our main problem is that 64eb08b0a4bc is on top of \"latest\"<br>\nPoly/ML<br>\ndevelopment and experiments. Thus it does not quite work for Isabelle<br>\nyet,<br>\nespecially HOL-Codegenerator_Test. For the release the change needs to<br>\nsit on<br>\ntop of official v5.9.2.</p>\n</blockquote>\n<p>I now see 638379c583a5, and that looks fine so far in a quick test of<br>\nHOL-Codegenerator_Test ...</p>\n<p>Makarius</p>\n</blockquote>",
        "id": 562191608,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764973128
    },
    {
        "content": "<p><strong>From:</strong> Peter Lammich &lt;<a href=\"mailto:lammich@in.tum.de\">lammich@in.tum.de</a>&gt;</p>\n<p>We have to disable code generator setup that could cause by eval to<br>\nmalfunction, when this buggy polyml makes it into the release. And check that<br>\nIsabelle itself doesn't rely on the shift operation </p>\n<p>On 5 Dec 2025 14:44, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:  </p>\n<blockquote>\n<p>On 05/12/2025 13:34, Makarius wrote:  </p>\n<blockquote>\n<blockquote>\n<p><a href=\"https://github.com/polyml/polyml/issues/243\">https://github.com/polyml/polyml/issues/243</a> &lt;<a href=\"https://github.com/polyml/\">https://github.com/polyml/</a>  <br>\npolyml/ issues/243&gt;  </p>\n</blockquote>\n<p>Thanks for the report. It is very relevant for the Isabelle2025-1<br>\nrelease: in  <br>\nthe worst case we need to switch back to Poly/ML 5.9.1, see also  <br>\nIsabelle/08722f90a439.  </p>\n</blockquote>\n<p>The worst case is probably not that bad: it should be sufficient to revert  <br>\n this change: <a href=\"https://github.com/polyml/polyml/commit/ed1ff06d7b53\">https://github.com/polyml/polyml/commit/ed1ff06d7b53</a>  </p>\n<p>There is also an interesting comment in the old version:  </p>\n<p>(* These could be implemented in the RTS although I doubt if it's  <br>\n       really worth it. *)  </p>\n<p>Makarius  </p>\n</blockquote>",
        "id": 562224976,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765006329
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<blockquote>\n<p>On 5 Dec 2025 14:44, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<p>On 05/12/2025 13:34, Makarius wrote:<br>\n     &gt;&gt;<br>\n     &gt;&gt; <a href=\"https://github.com/polyml/polyml/issues/243\">https://github.com/polyml/polyml/issues/243</a> &lt;<a href=\"https://github.com/polyml/\">https://github.com/polyml/</a><br>\n     &gt;&gt; polyml/ issues/243&gt;<br>\n     &gt;<br>\n     &gt; Thanks for the report. It is very relevant for the Isabelle2025-1<br>\n    release: in<br>\n     &gt; the worst case we need to switch back to Poly/ML 5.9.1, see also<br>\n     &gt; Isabelle/08722f90a439.</p>\n<p>The worst case is probably not that bad: it should be sufficient to revert<br>\n    this change: <a href=\"https://github.com/polyml/polyml/commit/ed1ff06d7b53\">https://github.com/polyml/polyml/commit/ed1ff06d7b53</a></p>\n<p>There is also an interesting comment in the old version:</p>\n<p>(* These could be implemented in the RTS although I doubt if it's<br>\n           really worth it. *)</p>\n</blockquote>\n<p>On 05/12/2025 18:20, Peter Lammich wrote:</p>\n<blockquote>\n<p>We have to disable code generator setup that could cause by eval to <br>\nmalfunction, when this buggy polyml makes it into the release. And check that <br>\nIsabelle itself doesn't rely on the shift operation</p>\n</blockquote>\n<p>It is clear that this version will not be in the final release. There will <br>\nalready be a different polyml setup for Isabelle2025-1-RC4, published next week.</p>\n<p>Makarius</p>",
        "id": 562238446,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765023198
    },
    {
        "content": "<p><strong>From:</strong> Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@cit.tum.de\">florian.haftmann@cit.tum.de</a>&gt;</p>\n<p>Am 05.12.25 um 22:58 schrieb Makarius:</p>\n<blockquote>\n<p>On 05/12/2025 22:42, Makarius wrote:</p>\n<blockquote>\n<p>Right now our main problem is that 64eb08b0a4bc is on top of \"latest\" <br>\nPoly/ML development and experiments. Thus it does not quite work for <br>\nIsabelle yet, especially HOL-Codegenerator_Test. For the release the <br>\nchange needs to sit on top of official v5.9.2.</p>\n</blockquote>\n<p>I now see 638379c583a5, and that looks fine so far in a quick test of <br>\nHOL-Codegenerator_Test ...</p>\n</blockquote>\n<p>It is interesting that this remained undiscovered – AFP session <br>\nNative_Word contains considerable tests for code generation for word types.</p>\n<p>I’ll investigate what is missing there.</p>\n<p>Cheers,<br>\n    Florian</p>\n<p><a href=\"/user_uploads/14278/08dhkSUEnPjmnLf6WQZzmNpO/OpenPGP_0xA707172232CFA4E9.asc\">OpenPGP_0xA707172232CFA4E9.asc</a><br>\n<a href=\"/user_uploads/14278/qIIA3yPdlRWz0AZwtAaEQwX9/OpenPGP_signature.asc\">OpenPGP_signature.asc</a></p>",
        "id": 562249326,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765035902
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 06/12/2025 16:44, Florian Haftmann wrote:</p>\n<blockquote>\n<p>It is interesting that this remained undiscovered – AFP session Native_Word <br>\ncontains considerable tests for code generation for word types.</p>\n<p>I’ll investigate what is missing there.</p>\n</blockquote>\n<p>Maybe this version on isabelle-release helps:</p>\n<p>changeset:   83716:4885450ab48d<br>\ntag:         tip<br>\nuser:        wenzelm<br>\ndate:        Sat Dec 06 23:01:40 2025 +0100<br>\nfiles:       src/Pure/ML/ml_init.ML<br>\ndescription:<br>\nexpose bad IntInf shift operations in Poly/ML via explicit exceptions;</p>\n<p>Testing it with afp-2025-1/3af26ffddf1b (-X slow) does not expose any errors, <br>\nthough.</p>\n<p>Makarius</p>",
        "id": 562270625,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765062090
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>The isabelle-release repository now has this changeset:</p>\n<p>changeset:   83717:f274b63c5b44<br>\ntag:         tip<br>\nuser:        wenzelm<br>\ndate:        Sat Dec 06 23:51:17 2025 +0100<br>\nfiles:       Admin/components/components.sha1 Admin/components/main<br>\ndescription:<br>\nupdate to polyml-5.9.2-2 version ccd3e3717f72 from branch fixes-5.9.2, which <br>\nprovides a corrected implementation of IntInf right shift;<br>\nkeep redundant checks for further testing;</p>\n<p>The plan is to publish it in Isabelle2025-1-RC4 next week (probably Monday), <br>\nand remove the redundant check for the final release.</p>\n<p>The changeset will return to isabelle-dev shortly after Isabelle2025-1-RC4.</p>\n<p>Makarius</p>",
        "id": 562270739,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765062227
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 07/12/2025 00:03, Makarius wrote:</p>\n<blockquote>\n<p>The isabelle-release repository now has this changeset:</p>\n<p>changeset:   83717:f274b63c5b44<br>\ntag:         tip<br>\nuser:        wenzelm<br>\ndate:        Sat Dec 06 23:51:17 2025 +0100<br>\nfiles:       Admin/components/components.sha1 Admin/components/main<br>\ndescription:<br>\nupdate to polyml-5.9.2-2 version ccd3e3717f72 from branch fixes-5.9.2, which <br>\nprovides a corrected implementation of IntInf right shift;<br>\nkeep redundant checks for further testing;</p>\n<p>The plan is to publish it in Isabelle2025-1-RC4 next week (probably Monday), <br>\nand remove the redundant check for the final release.</p>\n<p>The changeset will return to isabelle-dev shortly after Isabelle2025-1-RC4.</p>\n</blockquote>\n<p>That is now isabelle-dev/c445b16fd5a9: it means that the state of affairs is <br>\nthe same as for the final stage of the Isabelle2025-1 release process.</p>\n<p>Makarius</p>",
        "id": 562551590,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765225441
    },
    {
        "content": "<p><strong>From:</strong> Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@cit.tum.de\">florian.haftmann@cit.tum.de</a>&gt;</p>\n<p>For the record:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>Right now our main problem is that 64eb08b0a4bc is on top of \"latest\" <br>\nPoly/ML development and experiments. Thus it does not quite work for <br>\nIsabelle yet, especially HOL-Codegenerator_Test. For the release the <br>\nchange needs to sit on top of official v5.9.2.</p>\n</blockquote>\n<p>I now see 638379c583a5, and that looks fine so far in a quick test of <br>\nHOL-Codegenerator_Test ...</p>\n</blockquote>\n<p>It is interesting that this remained undiscovered – AFP session <br>\nNative_Word contains considerable tests for code generation for word types.</p>\n</blockquote>\n<p>In <a href=\"https://isabelle.in.tum.de/repos/isabelle/rev/490ffe526eeb\">https://isabelle.in.tum.de/repos/isabelle/rev/490ffe526eeb</a> that <br>\nsituation is now explicitly checked.</p>\n<p>My statement concerning word types was misleading – the example does not <br>\nuse target language word types but a generic word type which is <br>\nimplemented by integers, where the target language operation for right <br>\nbit shift obviously was not implemented correctly in the underlying system.</p>\n<p>Cheers,<br>\n    Florian</p>\n<p><a href=\"/user_uploads/14278/zQ9yoKSHT_hZ7Ll7aaEbRpcl/OpenPGP_0xA707172232CFA4E9.asc\">OpenPGP_0xA707172232CFA4E9.asc</a><br>\n<a href=\"/user_uploads/14278/USqbuRX5MXHT3ZfSOXXquEBv/OpenPGP_signature.asc\">OpenPGP_signature.asc</a></p>",
        "id": 564105038,
        "sender_full_name": "Email Gateway",
        "timestamp": 1765908567
    }
]