[
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nIn the past few days we've had more attacks on our servers, presumably by dumb <br>\nAI-bots that cannot read robots.txt</p>\n<p>This happens mainly in the late evening (Royal Bavarian Time).</p>\n<p>Notable services that are compromised:</p>\n<p><a href=\"https://isabelle.sketis.net/components\">https://isabelle.sketis.net/components</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle\">https://isabelle.sketis.net/repos/isabelle</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release\">https://isabelle.sketis.net/repos/isabelle-release</a></p>\n<p>I am presently busy to sort out genuine problems on Isabelle2025-1 release <br>\ncandidates, and don't feel like participating in this non-sense out there. It <br>\nrequires more research what can be done about it, to return to sanity.</p>\n<p>Makarius</p>",
        "id": 556721514,
        "sender_full_name": "Email Gateway",
        "timestamp": 1763334294
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 17/11/2025 00:04, Makarius wrote:</p>\n<blockquote>\n<p>In the past few days we've had more attacks on our servers, presumably by dumb <br>\nAI-bots that cannot read robots.txt</p>\n<p>This happens mainly in the late evening (Royal Bavarian Time).</p>\n</blockquote>\n<p>In the past few days the situation had improved in the morning, but not today.</p>\n<blockquote>\n<p>Notable services that are compromised:</p>\n<p><a href=\"https://isabelle.sketis.net/components\">https://isabelle.sketis.net/components</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle\">https://isabelle.sketis.net/repos/isabelle</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release\">https://isabelle.sketis.net/repos/isabelle-release</a><br>\nThe problem are our hgweb servers (via Apache and its builtin Python engine), <br>\nthis also applies to <a href=\"https://isabelle.in.tum.de/repos\">https://isabelle.in.tum.de/repos</a> which is presently unusable.<br>\nWe need to find a proper solution for hgweb + Apache specifically.</p>\n</blockquote>\n<p>For now I have disabled <a href=\"https://isabelle.sketis.net/repos\">https://isabelle.sketis.net/repos</a> altogether. The main <br>\nIsabelle repositories are still available via <a href=\"https://isabelle-dev.sketis.net\">https://isabelle-dev.sketis.net</a> <br>\n--- but that is for members only: I had to close it some months ago due to <br>\ndumb AI-bots (Phorge is even more vunerable due to its use of PHP + MySQL).</p>\n<p>It should be possible to work with <a href=\"http://isabelle-dev.sketis.net\">isabelle-dev.sketis.net</a> under program <br>\ncontrol using SSH URLs, after suitable SSH public keys have been uploaded. I <br>\nwill see how to change the important isabelle_cronjob (nightly builds) <br>\naccordingly.</p>\n<p>In the mid 1990ies the Open Internet has emerged, where everybody could <br>\nparticipate easily with self-hosted servers. The AI War that started in <br>\nJan-2025 has destroyed that --- but I am not going to participate in any war <br>\nof any kind.</p>\n<p>Makarius</p>",
        "id": 556791214,
        "sender_full_name": "Email Gateway",
        "timestamp": 1763374842
    },
    {
        "content": "<p>From: \"Achim D. Brucker\" &lt;<a href=\"mailto:adbrucker@0x5f.org\">adbrucker@0x5f.org</a>&gt;</p>\n<blockquote>\n<blockquote>\n<p><a href=\"https://isabelle.sketis.net/components\">https://isabelle.sketis.net/components</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle\">https://isabelle.sketis.net/repos/isabelle</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release\">https://isabelle.sketis.net/repos/isabelle-release</a><br>\nThe problem are our hgweb servers (via Apache and its builtin Python <br>\nengine), this also applies to <a href=\"https://isabelle.in.tum.de/repos\">https://isabelle.in.tum.de/repos</a> which <br>\nis presently unusable.<br>\nWe need to find a proper solution for hgweb + Apache specifically.</p>\n</blockquote>\n</blockquote>\n<p>I would not call it a \"proper\" solution, but I am currently using Anubis <br>\n(<a href=\"https://anubis.techaro.lol/\">https://anubis.techaro.lol/</a>) with quite some success. Of course, it's <br>\nan arms race - computing the challenges set out by it are not that <br>\nexpensive. Hence, when enough website use it, the crawlers will <br>\nimplement the challenge solving part ...</p>\n<p>Achim</p>",
        "id": 556792943,
        "sender_full_name": "Email Gateway",
        "timestamp": 1763375377
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 17/11/2025 11:28, Achim D. Brucker wrote:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p><a href=\"https://isabelle.sketis.net/components\">https://isabelle.sketis.net/components</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle\">https://isabelle.sketis.net/repos/isabelle</a><br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle-release\">https://isabelle.sketis.net/repos/isabelle-release</a><br>\nThe problem are our hgweb servers (via Apache and its builtin Python <br>\nengine), this also applies to <a href=\"https://isabelle.in.tum.de/repos\">https://isabelle.in.tum.de/repos</a> which is <br>\npresently unusable.<br>\nWe need to find a proper solution for hgweb + Apache specifically.</p>\n</blockquote>\n</blockquote>\n<p>I would not call it a \"proper\" solution, but I am currently using Anubis <br>\n(<a href=\"https://anubis.techaro.lol/\">https://anubis.techaro.lol/</a>) with quite some success. Of course, it's an arms <br>\nrace - computing the challenges set out by it are not that expensive. Hence, <br>\nwhen enough website use it, the crawlers will implement the challenge solving <br>\npart ...</p>\n</blockquote>\n<p>Anubis emerged early 2025 as a counter-attack, and I don't like it. An \"arms <br>\nrace\" is war against war, and ultimately won't work.</p>\n<p>There must be a proper solution. For us it means that our own programs (or <br>\n\"daemons\") can access the repository servers, without too much additional <br>\ncomplication.</p>\n<p>I am presently thinking of SSH and maybe RSYNC, as well-known non-HTTP <br>\nprotocols. There is also an rsync server that hardly anybody remembers now (we <br>\nactually have one to mirror the Isabelle website).</p>\n<p>Makarius</p>",
        "id": 556795440,
        "sender_full_name": "Email Gateway",
        "timestamp": 1763376113
    },
    {
        "content": "<p>From: \"Achim D. Brucker\" &lt;<a href=\"mailto:adbrucker@0x5f.org\">adbrucker@0x5f.org</a>&gt;<br>\nOn 17/11/2025 10:41, Makarius wrote:</p>\n<blockquote>\n<p>On 17/11/2025 11:28, Achim D. Brucker wrote:</p>\n<blockquote>\n<p>I would not call it a \"proper\" solution, but I am currently using <br>\nAnubis (<a href=\"https://anubis.techaro.lol/\">https://anubis.techaro.lol/</a>) with quite some success. Of <br>\ncourse, it's an arms race - computing the challenges set out by it <br>\nare not that expensive. Hence, when enough website use it, the <br>\ncrawlers will implement the challenge solving part ...</p>\n</blockquote>\n<p>Anubis emerged early 2025 as a counter-attack, and I don't like it. An <br>\n\"arms race\" is war against war, and ultimately won't work.<br>\n</p>\n</blockquote>\n<p>I agree - but it does work at the moment as a relatively easy to install <br>\nworkaround lowering the load on attacked servers a lot. And it allows to <br>\nprovide web access for humans, for which I have not seen much better <br>\nsolutions out there yet.  Needing a solution quickly, I either had to <br>\nswallow the \"Anubis\" pill, allow access only to authorised users, or <br>\nshut it down completely. Anubis was (and likely still is) the better of <br>\nthe three evils.</p>\n<blockquote>\n<p>There must be a proper solution. For us it means that our own programs <br>\n(or \"daemons\") can access the repository servers, without too much <br>\nadditional complication.</p>\n<p>I am presently thinking of SSH and maybe RSYNC, as well-known non-HTTP <br>\nprotocols. There is also an rsync server that hardly anybody remembers <br>\nnow (we actually have one to mirror the Isabelle website).</p>\n</blockquote>\n<p>For downloading Isabelle components, rsync seems to be a viable option - <br>\non my servers, I have not seen high crawler scraping loads for <br>\n\"data/software\" archives (tgz/zip, etc) nor for REST APIs. I am using <br>\nAnubis purely for the web interfaces designed for human consumption.  <br>\nAgain, this will likely change earlier than we all fear.</p>\n<p>For pure programmatic access, any form of weak authentication should <br>\nwork at the moment.</p>\n<p>These AI crawlers are really a threat to the open web ...</p>\n<p>Achim</p>",
        "id": 556800850,
        "sender_full_name": "Email Gateway",
        "timestamp": 1763377660
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 17/11/2025 11:20, Makarius wrote:</p>\n<blockquote>\n<p>We need to find a proper solution for hgweb + Apache specifically.</p>\n</blockquote>\n<p>The Mercurial mailing list has this thread \"HELP: Fighting AI scrapers\":<br>\n<a href=\"https://lists.mercurial-scm.org/pipermail/mercurial/2025-September/106698.html\">https://lists.mercurial-scm.org/pipermail/mercurial/2025-September/106698.html</a></p>\n<p>It is interesting to read, but also converges to Anubis, without any brilliant <br>\nideas. Brilliant ideas is what we need, though. I probably need to study the <br>\nhgweb implementation.</p>\n<p>Makarius</p>",
        "id": 556904336,
        "sender_full_name": "Email Gateway",
        "timestamp": 1763404411
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 17/11/2025 19:32, Makarius wrote:</p>\n<blockquote>\n<p>On 17/11/2025 11:20, Makarius wrote:</p>\n<blockquote>\n<p>We need to find a proper solution for hgweb + Apache specifically.</p>\n</blockquote>\n<p>The Mercurial mailing list has this thread \"HELP: Fighting AI scrapers\":<br>\n<a href=\"https://lists.mercurial-scm.org/pipermail/mercurial/2025-September/106698.html\">https://lists.mercurial-scm.org/pipermail/mercurial/2025-September/106698.html</a></p>\n<p>It is interesting to read, but also converges to Anubis, without any brilliant <br>\nideas. Brilliant ideas is what we need, though. I probably need to study the <br>\nhgweb implementation.</p>\n</blockquote>\n<p>I've now invested 1h to study the hgweb implementation of <br>\n<a href=\"http://isabelle.sketis.net/repos\">isabelle.sketis.net/repos</a>, notably mercurial-6.1.4/mercurial/hgweb/hgweb_mod.py</p>\n<p>The answer is rather plain and simple:</p>\n<p>changeset:   83654:52cd371a36dd<br>\ntag:         tip<br>\nuser:        wenzelm<br>\ndate:        Wed Nov 26 20:00:47 2025 +0100<br>\nfiles:       Admin/Mercurial/mercurial-6.1.4-hgweb.patch<br>\ndescription:<br>\nadhoc patch for hgweb.wsgi: provide \"hg clone\" via HTTP without suffering from <br>\nDenial-of-Service attacks on website content (e.g. by Non-Intelligent Agents);</p>\n<p>diff -r f152543f9e16 -r 52cd371a36dd Admin/Mercurial/mercurial-6.1.4-hgweb.patch<br>\n--- /dev/null   Thu Jan 01 00:00:00 1970 +0000<br>\n+++ b/Admin/Mercurial/mercurial-6.1.4-hgweb.patch   Wed Nov 26 20:00:47 2025 +0100<br>\n@@ -0,0 +1,16 @@<br>\n+diff -ru mercurial-6.1.4/mercurial/hgweb/hgweb_mod.py <br>\nmercurial-6.1.4-patched/mercurial/hgweb/hgweb_mod.py<br>\n+--- mercurial-6.1.4/mercurial/hgweb/hgweb_mod.py   2022-06-16 <br>\n15:09:43.000000000 +0200<br>\n++++ mercurial-6.1.4-patched/mercurial/hgweb/hgweb_mod.py   2025-11-26 <br>\n19:40:54.320858407 +0100<br>\n+@@ -371,6 +371,12 @@</p>\n<ul>\n<li>)</li>\n<li>if handled:</li>\n<li>\n<p>return res.sendresponse()<br>\n++        else:<br>\n++            rctx.tmpl = rctx.templater(req)<br>\n++            res.status = b'500 Internal Server Error'<br>\n++            res.headers[b'Content-Type'] = rctx.tmpl.render(b'mimetype', <br>\n{b'encoding': encoding.encoding})<br>\n++            return rctx.sendtemplate(b'error', error=b'Usage: hg clone URL DIR')<br>\n++<br>\n+</p>\n</li>\n<li>\n<h1>Old implementations of hgweb supported dispatching the request via</h1>\n</li>\n<li>\n<h1>the initial query string parameter instead of using PATH_INFO.</h1>\n</li>\n</ul>\n<p>In other words: there is no longer a website to browse (nor to attack), only <br>\nthe \"wireprotocol\" of the hg client via HTTP.</p>\n<p>Thus all-important automatic jobs with \"hg clone <br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle\">https://isabelle.sketis.net/repos/isabelle</a>\" should work again --- and perform <br>\nbetter than before, because we disregard the AI non-sense altogether.</p>\n<p>The error page could be a bit nicer, saying more clearly what is wrong and <br>\nwhat needs to be done instead, but the main focus is still the Isabelle2025-1 <br>\nrelease.</p>\n<p>Makarius</p>",
        "id": 560459701,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764184494
    },
    {
        "content": "<p><strong>From:</strong> Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;</p>\n<p>On 26/11/2025 20:14, Makarius wrote:</p>\n<blockquote>\n<p>The answer is rather plain and simple:</p>\n<p>In other words: there is no longer a website to browse (nor to attack), only <br>\nthe \"wireprotocol\" of the hg client via HTTP.</p>\n</blockquote>\n<p>I should cite one of my sources for this approach: <br>\n<a href=\"https://www.fsf.org/bulletin/2025/spring/defending-savannah-from-ddos-attacks\">https://www.fsf.org/bulletin/2025/spring/defending-savannah-from-ddos-attacks</a></p>\n<p>\"\"\"<br>\nTo all of the companies crawling the Internet: there is a better way! Do not <br>\nscan code repositories over the web: clone them using version control tools <br>\nsuch as git, cvs, svn, Mercurial, or bzr. Follow the rules set forth in the <br>\nrobots.txt files.<br>\n\"\"\"</p>\n<p>Such a friendly suggestion is not going to work, though. Instead, the policy <br>\nneeds to be enforced, by not offering an open webspace in the first place.</p>\n<p>The rules in robots.txt used to be the foundation of the Free Internet. It was <br>\na nice time, but it is over now.</p>\n<p>Instead we can eventually provide proper repository management and browsing as <br>\npart of the regular Prover IDE. Professional development works better on the <br>\ngood old desktop, not on a web interface.</p>\n<p>Makarius</p>",
        "id": 560467089,
        "sender_full_name": "Email Gateway",
        "timestamp": 1764187273
    }
]