[
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThere is a notable slowdown AFP/Native_Word:</p>\n<p>Isabelle/e4207dfa36b5 AFP/16cb1cb993ae<br>\nFinished HOL (0:01:46 elapsed time, 0:05:36 cpu time, factor 3.16)<br>\nFinished Word_Lib (0:00:26 elapsed time, 0:01:37 cpu time, factor 3.70)<br>\nFinished Native_Word (0:01:36 elapsed time, 0:01:23 cpu time, factor 0.86)</p>\n<p>Isabelle/3704717ed7bf AFP/ccc0b8182357<br>\nFinished HOL (0:01:47 elapsed time, 0:05:41 cpu time, factor 3.17)<br>\nFinished Word_Lib (0:00:25 elapsed time, 0:01:36 cpu time, factor 3.81)<br>\nFinished Native_Word (0:03:27 elapsed time, 0:03:16 cpu time, factor 0.94)</p>\n<p>In the above changeset intervals, I see many changes on words and code <br>\ngeneration setup by Florian Haftmann, both in Isabelle and AFP.</p>\n<p>He needs to say if the effect on Native_Word is to be expected, or if this a <br>\nproblem that has been overlooked.</p>\n<p>Makarius</p>",
        "id": 530980695,
        "sender_full_name": "Email Gateway",
        "timestamp": 1753552681
    },
    {
        "content": "<p>From: Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@cit.tum.de\">florian.haftmann@cit.tum.de</a>&gt;<br>\nHi Makarius,</p>\n<blockquote>\n<p>Isabelle/e4207dfa36b5 AFP/16cb1cb993ae<br>\nFinished HOL (0:01:46 elapsed time, 0:05:36 cpu time, factor 3.16)<br>\nFinished Word_Lib (0:00:26 elapsed time, 0:01:37 cpu time, factor 3.70)<br>\nFinished Native_Word (0:01:36 elapsed time, 0:01:23 cpu time, factor 0.86)</p>\n<p>Isabelle/3704717ed7bf AFP/ccc0b8182357<br>\nFinished HOL (0:01:47 elapsed time, 0:05:41 cpu time, factor 3.17)<br>\nFinished Word_Lib (0:00:25 elapsed time, 0:01:36 cpu time, factor 3.81)<br>\nFinished Native_Word (0:03:27 elapsed time, 0:03:16 cpu time, factor 0.94)</p>\n</blockquote>\n<p>thanks for figuring that out.</p>\n<p>Honestely, these are things were I miss the plain old isatest with its <br>\ngenerated charts.</p>\n<p>Anyway, I will look after those issues, but it will take some time <br>\nbefore I can actually dive into.</p>\n<p>Florian</p>\n<p><a href=\"/user_uploads/14278/emzA8s0De688Yex1nWrUZX8o/OpenPGP_0xA707172232CFA4E9.asc\">OpenPGP_0xA707172232CFA4E9.asc</a><br>\n<a href=\"/user_uploads/14278/v_KCVUobogGL-Ea23EtfNvGc/OpenPGP_signature.asc\">OpenPGP_signature.asc</a></p>",
        "id": 531179684,
        "sender_full_name": "Email Gateway",
        "timestamp": 1753637160
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 27/07/2025 19:25, Florian Haftmann wrote:</p>\n<blockquote>\n<p>Honestely, these are things were I miss the plain old isatest with its <br>\ngenerated charts.</p>\n</blockquote>\n<p>These charts are now here: <br>\n<a href=\"https://isatest.sketis.net/devel/build_status/index.html\">https://isatest.sketis.net/devel/build_status/index.html</a></p>\n<p>The most reliable test hardware is presently:</p>\n<p>* mini3: macOS 13 Ventura (ARM)<br>\n   * studio1: macOS 14 Sonoma (ARM)</p>\n<p>When I have figured out how to rent an old-fashioned server room in Augsburg <br>\nfor a reasonable price, I will put a proper Linux + Windows test machine <br>\nthere, too.</p>\n<p>Makarius</p>",
        "id": 531184844,
        "sender_full_name": "Email Gateway",
        "timestamp": 1753639173
    },
    {
        "content": "<p>From: Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@cit.tum.de\">florian.haftmann@cit.tum.de</a>&gt;</p>\n<blockquote>\n<p>There is a notable slowdown AFP/Native_Word:</p>\n<p>Isabelle/e4207dfa36b5 AFP/16cb1cb993ae<br>\nFinished HOL (0:01:46 elapsed time, 0:05:36 cpu time, factor 3.16)<br>\nFinished Word_Lib (0:00:26 elapsed time, 0:01:37 cpu time, factor 3.70)<br>\nFinished Native_Word (0:01:36 elapsed time, 0:01:23 cpu time, factor 0.86)</p>\n<p>Isabelle/3704717ed7bf AFP/ccc0b8182357<br>\nFinished HOL (0:01:47 elapsed time, 0:05:41 cpu time, factor 3.17)<br>\nFinished Word_Lib (0:00:25 elapsed time, 0:01:36 cpu time, factor 3.81)<br>\nFinished Native_Word (0:03:27 elapsed time, 0:03:16 cpu time, factor 0.94)</p>\n<p>In the above changeset intervals, I see many changes on words and code <br>\ngeneration setup by Florian Haftmann, both in Isabelle and AFP.</p>\n<p>He needs to say if the effect on Native_Word is to be expected, or if <br>\nthis a problem that has been overlooked.</p>\n</blockquote>\n<p>This decay stems from calls to code_simp.</p>\n<p>The deviation comes from the code equations for int_of_integer: in the <br>\nprevious situations, there was a compromise in the code setup which used <br>\na variant of int_of_integer to speed up execution of code_simp in trade <br>\nfor that the code setup would not be executable stand-alone in a plain <br>\ntarget language built would need additional modifications of the code setup.</p>\n<p>The equations in question are<br>\n   ‹int_of_integer 0 = 0›<br>\n   ‹int_of_integer (Code_Numeral.Pos n) = Int.Pos n›<br>\n   ‹int_of_integer (Code_Numeral.Neg n) = Int.Neg n›<br>\n   ‹int_of_integer k = …› (*)<br>\nwhere for real target languages only the last one is used (*), where the <br>\nconversion happens by explicit binary cuts, which is fine for an unknown <br>\nrepresentation, but does not compute that well in the logic.<br>\nThe first three equations are fine for abstract representations (Pure, <br>\nNBE). For NBE there is no decay, so it seems to work as intended there.</p>\n<p>But for some unknown reason, the simplifier prefers the last equation, <br>\nas can be seen in HOL-Main:</p>\n<p>declare int_of_integer_code_nbe [code nbe]<br>\ndeclare int_of_integer_code [code]<br>\ndeclare [[code_simp_trace]]</p>\n<p>lemma<br>\n   ‹P (int_of_integer (Code_Numeral.Pos Num.One))›<br>\n   apply code_simp</p>\n<p>Can anybody familiar with the simplifier explain what is going on?</p>\n<p>Bzw. the timing panel in Isabelle/jEdit is an excellent tool to pin down <br>\nsuch things.</p>\n<p>Cheers,<br>\n    Florian</p>\n<p><a href=\"/user_uploads/14278/EpKSBrz1OA98SxZF0KkDk2xr/OpenPGP_0xA707172232CFA4E9.asc\">OpenPGP_0xA707172232CFA4E9.asc</a><br>\n<a href=\"/user_uploads/14278/HZBKt5U-aBwCIEetuthu2rAs/OpenPGP_signature.asc\">OpenPGP_signature.asc</a></p>",
        "id": 532035051,
        "sender_full_name": "Email Gateway",
        "timestamp": 1753957222
    }
]