[
    {
        "content": "<p>From: Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;<br>\nAs of Isabelle/3e1521dc095d and AFP/8851801a38e0, I am getting SMT failures:</p>\n<blockquote>\n<p>isabelle build -A: Modular_arithmetic_LLL_and_HNF_algorithms<br>\nRunning Modular_arithmetic_LLL_and_HNF_algorithms ...<br>\nModular_arithmetic_LLL_and_HNF_algorithms FAILED (see also \"isabelle <br>\nbuild_log -H Error Modular_arithmetic_LLL_and_HNF_algorithms\")<br>\n*** Failed to apply initial proof method (line 6705 of <br>\n\"$AFP/Modular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\"):<br>\n*** goal (1 subgoal):<br>\n***  1. A $$ (0, 0) =<br>\n***     A'' $$<br>\n***     (0, 0)<br>\n*** At command \"by\" (line 6705 of <br>\n\"$AFP/Modular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\")<br>\nUnfinished session(s): Modular_arithmetic_LLL_and_HNF_algorithms<br>\n0:15:36 elapsed time, 1:39:03 cpu time, factor 6.35</p>\n</blockquote>\n<p>This is both in the build and interactive session; declaring <br>\n[[smt_reconstruction_step_timeout=0]] helps. Can the SMT situation be <br>\nimproved so we don't have these timeout issues even if things are <br>\nslightly slower?</p>\n<p>The problem appears after the merge in Isabelle/1e39653de974. But I have <br>\nthe suspicion that those changes only uncovered an existing problem, <br>\nwhich otherwise manifests as spurious SMT failures during scheduled build.</p>\n<p>Fabian</p>",
        "id": 528889233,
        "sender_full_name": "Email Gateway",
        "timestamp": 1752593824
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@ifi.lmu.de\">jasmin.blanchette@ifi.lmu.de</a>&gt;</p>\n<blockquote>\n<p>This is both in the build and interactive session; declaring [[smt_reconstruction_step_timeout=0]] helps. Can the SMT situation be improved so we don't have these timeout issues even if things are slightly slower?</p>\n</blockquote>\n<p>The obvious fix is to disable the timeout or crank it up very high. But since it's \"smt_reconstruction_step_timeout\" and not \"smt_timeout\", I'm wondering if there might be some nonmonotonic aspects to consider. E.g. is there any code of the form \"try reconstruction step A for smt_reconstruction_step_timeout seconds; if this fails, try reconstruction step B\". I guess the best way to find out is to try it out.</p>\n<p>Note that I (like you) have inherited this situation. I didn't invent this timeout and am generally suspicious of tactic-specific timeouts.</p>\n<p>Jasmin</p>\n<p>--<br>\nProf. Dr. Jasmin Blanchette<br>\nChair of Theoretical Computer Science and Theorem Proving<br>\nLudwig-Maximilians-Universität München<br>\nOettingenstr. 67, 80538 München, Germany<br>\nTel.: +49 (0)89 2180 9341<br>\nWeb: <a href=\"https://www.tcs.ifi.lmu.de/mitarbeiter/jasmin-blanchette_de.html\">https://www.tcs.ifi.lmu.de/mitarbeiter/jasmin-blanchette_de.html</a></p>\n<blockquote>\n<p>On 15. Jul 2025, at 17:36, Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt; wrote:</p>\n<p>As of Isabelle/3e1521dc095d and AFP/8851801a38e0, I am getting SMT failures:</p>\n<blockquote>\n<p>isabelle build -A: Modular_arithmetic_LLL_and_HNF_algorithms<br>\nRunning Modular_arithmetic_LLL_and_HNF_algorithms ...<br>\nModular_arithmetic_LLL_and_HNF_algorithms FAILED (see also \"isabelle build_log -H Error Modular_arithmetic_LLL_and_HNF_algorithms\")<br>\n*** Failed to apply initial proof method (line 6705 of \"$AFP/Modular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\"):<br>\n*** goal (1 subgoal):<br>\n***  1. A $$ (0, 0) =<br>\n***     A'' $$<br>\n***     (0, 0)<br>\n*** At command \"by\" (line 6705 of \"$AFP/Modular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\")<br>\nUnfinished session(s): Modular_arithmetic_LLL_and_HNF_algorithms<br>\n0:15:36 elapsed time, 1:39:03 cpu time, factor 6.35</p>\n</blockquote>\n<p>This is both in the build and interactive session; declaring [[smt_reconstruction_step_timeout=0]] helps. Can the SMT situation be improved so we don't have these timeout issues even if things are slightly slower?</p>\n<p>The problem appears after the merge in Isabelle/1e39653de974. But I have the suspicion that those changes only uncovered an existing problem, which otherwise manifests as spurious SMT failures during scheduled build.</p>\n<p>Fabian<br>\n</p>\n</blockquote>",
        "id": 528891147,
        "sender_full_name": "Email Gateway",
        "timestamp": 1752594388
    },
    {
        "content": "<p>From: Lawrence Paulson via isabelle-dev &lt;<a href=\"mailto:isabelle-dev@mailman.proof.cit.tum.de\">isabelle-dev@mailman.proof.cit.tum.de</a>&gt;<br>\nThis also wasted my time. Seeing the failure, I tried to run the session locally and nothing happened. Like Jasmin I am not sure why a timeout is there.</p>\n<blockquote>\n<p>On 15 Jul 2025, at 16:36, Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt; wrote:</p>\n<blockquote>\n<p>isabelle build -A: Modular_arithmetic_LLL_and_HNF_algorithms<br>\nRunning Modular_arithmetic_LLL_and_HNF_algorithms ...<br>\nModular_arithmetic_LLL_and_HNF_algorithms FAILED (see also \"isabelle build_log -H Error Modular_arithmetic_LLL_and_HNF_algorithms\")<br>\n*** Failed to apply initial proof method (line 6705 of \"$AFP/Modular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\"):<br>\n*** goal (1 subgoal):<br>\n***  1. A $$ (0, 0) =<br>\n***     A'' $$<br>\n***     (0, 0)<br>\n*** At command \"by\" (line 6705 of \"</p>\n</blockquote>\n</blockquote>",
        "id": 528908718,
        "sender_full_name": "Email Gateway",
        "timestamp": 1752600203
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 15/07/2025 17:36, Fabian Huch wrote:</p>\n<blockquote>\n<p>As of Isabelle/3e1521dc095d and AFP/8851801a38e0, I am getting SMT failures:</p>\n<blockquote>\n<p>isabelle build -A: Modular_arithmetic_LLL_and_HNF_algorithms<br>\nRunning Modular_arithmetic_LLL_and_HNF_algorithms ...<br>\nModular_arithmetic_LLL_and_HNF_algorithms FAILED (see also \"isabelle build_log <br>\n-H Error Modular_arithmetic_LLL_and_HNF_algorithms\")<br>\n*** Failed to apply initial proof method (line 6705 of \"$AFP/ <br>\nModular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\"):<br>\n*** goal (1 subgoal):<br>\n***  1. A $$ (0, 0) =<br>\n***     A'' $$<br>\n***     (0, 0)<br>\n*** At command \"by\" (line 6705 of \"$AFP/ <br>\nModular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\")<br>\nUnfinished session(s): Modular_arithmetic_LLL_and_HNF_algorithms<br>\n0:15:36 elapsed time, 1:39:03 cpu time, factor 6.35</p>\n</blockquote>\n<p>This is both in the build and interactive session; declaring <br>\n[[smt_reconstruction_step_timeout=0]] helps. Can the SMT situation be improved <br>\nso we don't have these timeout issues even if things are slightly slower?</p>\n<p>The problem appears after the merge in Isabelle/1e39653de974. But I have the <br>\nsuspicion that those changes only uncovered an existing problem, which <br>\notherwise manifests as spurious SMT failures during scheduled build.</p>\n</blockquote>\n<p>I only managed to reproduce the problem by using <br>\nsmt_reconstruction_step_timeout=3 instead of the default 10 --- both my local <br>\ntest machine and the build cluster are too fast for it.</p>\n<p>Doing a bisection, reveals the following result:</p>\n<p>changeset:   82837:8aa1c98b948b<br>\nuser:        wenzelm<br>\ndate:        Fri Jul 11 14:03:09 2025 +0200<br>\nfiles:       src/HOL/Tools/Sledgehammer/sledgehammer_fact.ML <br>\nsrc/Provers/classical.ML src/Pure/bires.ML<br>\ndescription:<br>\nmaintain collective rule declarations via type Bires.decls, with netpair <br>\noperations derived from it;</p>\n<p>I've been there many times recently, to sort out remaining omissions in the <br>\nrather delicate treatment of classical rules.</p>\n<p>I will sort this out very soon, but not tomorrow.</p>\n<p>Makarius</p>",
        "id": 529350376,
        "sender_full_name": "Email Gateway",
        "timestamp": 1752783775
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 17/07/2025 22:22, Makarius wrote:</p>\n<blockquote>\n<p>Doing a bisection, reveals the following result:</p>\n<p>changeset:   82837:8aa1c98b948b<br>\nuser:        wenzelm<br>\ndate:        Fri Jul 11 14:03:09 2025 +0200<br>\nfiles:       src/HOL/Tools/Sledgehammer/sledgehammer_fact.ML src/Provers/ <br>\nclassical.ML src/Pure/bires.ML<br>\ndescription:<br>\nmaintain collective rule declarations via type Bires.decls, with netpair <br>\noperations derived from it;</p>\n<p>I've been there many times recently, to sort out remaining omissions in the <br>\nrather delicate treatment of classical rules.</p>\n</blockquote>\n<p>I've finished this now, after a few more sidetracks:</p>\n<p>changeset:   82890:72707b844734<br>\nuser:        wenzelm<br>\ndate:        Mon Jul 21 12:57:58 2025 +0200<br>\nfiles:       NEWS src/Pure/bires.ML<br>\ndescription:<br>\nclarified merge order: accurately reproduce the stable status-quo from <br>\n53e56e6a67c3 --- e.g. relevant for smt proof reconstruction in (line 6705 of <br>\n\"$AFP/Modular_arithmetic_LLL_and_HNF_algorithms/HNF_Mod_Det_Soundness.thy\") of <br>\nAFP/f1299d4f896c;</p>\n<p>changeset:   15862:eae86974a665<br>\ntag:         tip<br>\nuser:        wenzelm<br>\ndate:        Mon Jul 21 15:24:31 2025 +0200<br>\nfiles:       thys/Buchi_Complementation/Complementation_Implement.thy <br>\nthys/Tree_Enumeration/Rooted_Tree.thy<br>\ndescription:<br>\nbackout d06954e7388a: no longer required thanks to Isabelle/72707b844734;</p>\n<p>I will say more about the cumulative archeological findings on a different thread.</p>\n<p>Makarius</p>",
        "id": 529907925,
        "sender_full_name": "Email Gateway",
        "timestamp": 1753109516
    }
]