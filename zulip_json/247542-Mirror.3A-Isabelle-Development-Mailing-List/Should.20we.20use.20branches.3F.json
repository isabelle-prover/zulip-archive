[
    {
        "content": "<p>From: Lawrence Paulson via isabelle-dev &lt;<a href=\"mailto:isabelle-dev@mailman.proof.cit.tum.de\">isabelle-dev@mailman.proof.cit.tum.de</a>&gt;<br>\nOne thing I've noticed at Amazon is that they insist on a single threaded revision trail. They do this by requiring everybody to make their changes within a personal branch, which they then re-base to the main branch before pushing. Sometimes they also merge adjacent commits. In return for mastering a couple of extra commands, everybody benefits from a much cleaner revision history. Do we want to try this?</p>\n<p>Larry<br>\n[cid:6ce32522-80e2-4611-8cd1-3eecd6e69d1d@GBRP265.PROD.OUTLOOK.COM]</p>\n<p><a href=\"/user_uploads/14278/mPvVF6BFVgH7w_nVqg70Pbe4/hg.jpeg\">hg.jpeg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/14278/mPvVF6BFVgH7w_nVqg70Pbe4/hg.jpeg\" title=\"hg.jpeg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"592x481\" src=\"/user_uploads/thumbnail/14278/mPvVF6BFVgH7w_nVqg70Pbe4/hg.jpeg/840x560.webp\"></a></div>",
        "id": 518511262,
        "sender_full_name": "Email Gateway",
        "timestamp": 1747392240
    },
    {
        "content": "<p>From: Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;<br>\nThe danger of such a model is that branches quickly become stale and a <br>\nnightmare to rebase. In my experience this model only really works well <br>\nif developers are well synchronized, so people work on largely distinct <br>\npieces of code, or everybody integrates their changes with the trunk <br>\nfrequently, e.g. once per day.</p>\n<p>The former doesn't really apply in this environment. The latter one can <br>\nalready do when appropriate, since we have a trunk-based model.</p>\n<p>Note that in hg, /branches/ mean divergent lines of work that can't be <br>\nre-based. What you describe here are /topics/ in hg.</p>\n<p>Fabian</p>\n<p>On 5/16/25 12:34, Lawrence Paulson via isabelle-dev wrote:</p>\n<blockquote>\n<p>One thing I've noticed at Amazon is that they insist on a single <br>\nthreaded revision trail. They do this by requiring everybody to make <br>\ntheir changes within a personal branch, which they then re-base to the <br>\nmain branch before pushing. Sometimes they also merge adjacent <br>\ncommits. In return for mastering a couple of extra commands, everybody <br>\nbenefits from a much cleaner revision history. Do we want to try this?</p>\n<p>Larry</p>\n</blockquote>\n<p><a href=\"/user_uploads/14278/4gDpl-2V8gNWtvh4vjjBz2LT/hg.jpeg\">hg.jpeg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/14278/4gDpl-2V8gNWtvh4vjjBz2LT/hg.jpeg\" title=\"hg.jpeg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"592x481\" src=\"/user_uploads/thumbnail/14278/4gDpl-2V8gNWtvh4vjjBz2LT/hg.jpeg/840x560.webp\"></a></div>",
        "id": 518516057,
        "sender_full_name": "Email Gateway",
        "timestamp": 1747393614
    },
    {
        "content": "<p>From: Lawrence Paulson via isabelle-dev &lt;<a href=\"mailto:isabelle-dev@mailman.proof.cit.tum.de\">isabelle-dev@mailman.proof.cit.tum.de</a>&gt;<br>\nThanks for the correction regarding topics in hg. </p>\n<p>My impression is that developers do rebase daily in order to avoid merge issues. Of course, these rebase steps leave no trace in the commit history, and there are no visible merges either.</p>\n<p>Larry</p>\n<blockquote>\n<p>On 16 May 2025, at 12:06, Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt; wrote:</p>\n<p>The danger of such a model is that branches quickly become stale and a nightmare to rebase. In my experience this model only really works well if developers are well synchronized, so people work on largely distinct pieces of code, or everybody integrates their changes with the trunk frequently, e.g. once per day.<br>\nThe former doesn't really apply in this environment. The latter one can already do when appropriate, since we have a trunk-based model.<br>\nNote that in hg, branches mean divergent lines of work that can't be re-based. What you describe here are topics in hg.<br>\n</p>\n</blockquote>",
        "id": 518517209,
        "sender_full_name": "Email Gateway",
        "timestamp": 1747394019
    },
    {
        "content": "<p>From: Gerwin Klein via isabelle-dev &lt;<a href=\"mailto:isabelle-dev@mailman.proof.cit.tum.de\">isabelle-dev@mailman.proof.cit.tum.de</a>&gt;<br>\nFor seL4 we also have a rebase workflow in git. It’s possible to do in hg, but not as nicely and needs people who know how to deal with it.</p>\n<p>Given the problems people get into with just plain hg, I don’t think it would be a good idea for Isabelle or the AFP. It also doesn’t fit with our commit culture on Isabelle (\"tuned;\"). I would advise against.</p>\n<p>I do feel the need to point out that we have long-running branches in our rebase workflow (months, not years, but not daily) — that works perfectly fine if you rebase your branch frequently enough over the trunk, you don’t need to integrate back frequently. But the main benefit of rebase branches is a linear, rational commit history, i.e. a history that is not true but that is the history you would have had if you knew everything in the beginning and wrote the perfect commits. That’s not really the Isabelle model.</p>\n<p>There is a lot of benefit in recording the true history as we do in Isabelle, even if that history is less perfect.</p>\n<p>Cheers,<br>\nGerwin</p>\n<p>On 16 May 2025, at 13:06, Fabian Huch [isabelle-dev-bounces@mailman.proof.cit.tum.de] &lt;<a href=\"mailto:forwarded_for@cse.unsw.edu.au\">forwarded_for@cse.unsw.edu.au</a>&gt; wrote:</p>\n<p>The danger of such a model is that branches quickly become stale and a nightmare to rebase. In my experience this model only really works well if developers are well synchronized, so people work on largely distinct pieces of code, or everybody integrates their changes with the trunk frequently, e.g. once per day.</p>\n<p>The former doesn't really apply in this environment. The latter one can already do when appropriate, since we have a trunk-based model.</p>\n<p>Note that in hg, branches mean divergent lines of work that can't be re-based. What you describe here are topics in hg.</p>\n<p>Fabian</p>\n<p>On 5/16/25 12:34, Lawrence Paulson via isabelle-dev wrote:<br>\nOne thing I've noticed at Amazon is that they insist on a single threaded revision trail. They do this by requiring everybody to make their changes within a personal branch, which they then re-base to the main branch before pushing. Sometimes they also merge adjacent commits. In return for mastering a couple of extra commands, everybody benefits from a much cleaner revision history. Do we want to try this?</p>\n<p>Larry<br>\n&lt;hg.jpeg&gt;</p>",
        "id": 518518870,
        "sender_full_name": "Email Gateway",
        "timestamp": 1747394589
    },
    {
        "content": "<p>From: Fabian Huch &lt;<a href=\"mailto:huch@in.tum.de\">huch@in.tum.de</a>&gt;</p>\n<p>On 5/16/25 13:22, Gerwin Klein via isabelle-dev wrote:</p>\n<blockquote>\n<p>It’s possible to do in hg, but not as nicely</p>\n</blockquote>\n<p>Actually I find it much easier to do such operations in hg: Because it <br>\nallows you to simply talk about changesets, all the operations and <br>\ncommands get a lot easier (especially for beginners!).</p>\n<p>E.g. to rebase one commit onto another you just do</p>\n<p>hg rebase --source xxx --dest yyy</p>\n<p>And the histedit extension allows you to do a lot more operations with <br>\nease as well.</p>\n<blockquote>\n<p>and needs people who know how to deal with it. </p>\n</blockquote>\n<p>That's certainly a problem.</p>\n<p>Fabian</p>",
        "id": 518519879,
        "sender_full_name": "Email Gateway",
        "timestamp": 1747394925
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 16/05/2025 12:34, Lawrence Paulson via isabelle-dev wrote:</p>\n<blockquote>\n<p>One thing I've noticed at Amazon is that they insist on a single threaded <br>\nrevision trail. They do this by requiring everybody to make their changes <br>\nwithin a personal branch, which they then re-base to the main branch before <br>\npushing. Sometimes they also merge adjacent commits. In return for mastering a <br>\ncouple of extra commands, everybody benefits from a much cleaner revision <br>\nhistory. Do we want to try this?</p>\n</blockquote>\n<p>No.</p>\n<p>Isabelle has a much better culture than most projects out there.</p>\n<p>See also README_REPOSITORY.</p>\n<p>Makarius</p>",
        "id": 518529244,
        "sender_full_name": "Email Gateway",
        "timestamp": 1747397730
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 16/05/2025 13:22, Gerwin Klein via isabelle-dev wrote:</p>\n<blockquote>\n<p>There is a lot of benefit in recording the true history as we do in Isabelle, <br>\neven if that history is less perfect.</p>\n</blockquote>\n<p>True history is very important. I would call that more perfect than a history <br>\nthat is manipulated to \"look better\".</p>\n<p>Makarius</p>",
        "id": 518529891,
        "sender_full_name": "Email Gateway",
        "timestamp": 1747397884
    }
]