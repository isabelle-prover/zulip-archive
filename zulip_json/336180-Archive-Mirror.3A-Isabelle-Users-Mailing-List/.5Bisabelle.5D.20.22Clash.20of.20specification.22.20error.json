[
    {
        "content": "<p>From: Dominic Mulligan via Cl-isabelle-users &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nHi,</p>\n<p>It seems I'm unable to use the Word_Enum theory from the AFP Word<br>\nlibrary and List_lexord theory from the HOL Library concurrently as<br>\nIsabelle-2016 raises the following exception when processing<br>\ndependencies:</p>\n<p>Clash of specifications for less:<br>\n  \"List_lexord.ord_list_inst.less_list_def\"⌂<br>\n  \"Prefix_Order.ord_list_inst.less_list_def\"⌂</p>\n<p>Minimum example:</p>\n<p>theory<br>\n  Error_Monad<br>\nimports<br>\n  Main<br>\n  \"$AFP/Word_Lib/Word_Enum\"<br>\n  \"~~/src/HOL/Library/List_lexord\"<br>\nbegin</p>\n<p>(* XXX *)</p>\n<p>end</p>\n<p>(In my development, I'm importing List_lexord in X.thy and Word_Enum<br>\nin Y.thy with a dependency between the two.)</p>\n<p>Is there a way around this?</p>\n<p>Thanks,<br>\nDominic</p>",
        "id": 294700885,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179144
    },
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:andreas.lochbihler@inf.ethz.ch\">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>\nHi Dominic,</p>\n<p>Every type class can be instantiated only once for each type. For lists, there are two <br>\ndifferent instantiations in different theories in HOL/Library: List_lexord defines the <br>\norder on lists to be lexicographic and Prefix_Order defines the order to be by prefix. <br>\nTherefore, you cannot import both into one theory, but this happens in your example, <br>\nbecause Word_Lib transitively imports the theory Prefix_Order. There's no way around this.</p>\n<p>Best,<br>\nAndreas</p>",
        "id": 294700937,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179155
    },
    {
        "content": "<p>From: Dominic Mulligan via Cl-isabelle-users &lt;<a href=\"mailto:cl-isabelle-users@lists.cam.ac.uk\">cl-isabelle-users@lists.cam.ac.uk</a>&gt;<br>\nHi Andreas,</p>\n<p>Thanks for the reply.</p>\n<p>After a bit of digging through the Word_Lib code it seems that<br>\nPrefix_Order is being imported in WordBitwise_Signed, which itself<br>\ndoes not use any of the functionality provided by Prefix_Order itself,<br>\nbut as it is quite a basic theory in Word_Lib, the library becomes<br>\n\"infected\" with this type class instantiation along with any other<br>\ncode that imports any Word_Lib theory.  Rather, the only theories that<br>\nseems to rely on Prefix_Order at all is WordLemmas and theories that<br>\ndepend on it.</p>\n<p>Therefore, unless I'm missing something important, the import of<br>\nPrefix_Order in WordBitwise_Signed can be removed and be placed in<br>\nWordLemmas with no effect on the functionality of the library,<br>\nreducing the amount of \"infected\" code and allowing users to split out<br>\ne.g. Word_Enum in contexts where List_lexord is also imported.</p>\n<p>Thanks,<br>\nDominic</p>",
        "id": 294700970,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179165
    },
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:andreas.lochbihler@inf.ethz.ch\">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>\nHi Dominic,</p>\n<p>Indeed, you are right. If you are only interested in Word_Enum, then Prefix_Order does not <br>\nseem to be necessary. I've committed the appropriate change to the AFP testboard</p>\n<p><a href=\"https://bitbucket.org/isa-afp/afp-testboard/commits/e0f29efc9e56a2c94424263832ab7f833e63ffba\">https://bitbucket.org/isa-afp/afp-testboard/commits/e0f29efc9e56a2c94424263832ab7f833e63ffba</a></p>\n<p>If this does not cause any problems, I'll push it to AFP-devel such that in the next AFP <br>\nrelease (for Isabelle2016-1) you can use Word_Enum in combination with List_lexord.</p>\n<p>Best,<br>\nAndreas</p>",
        "id": 294700978,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179168
    },
    {
        "content": "<p>From: Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@informatik.tu-muenchen.de\">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>\nHi Andreas,</p>\n<blockquote>\n<p>Indeed, you are right. If you are only interested in Word_Enum, then<br>\nPrefix_Order does not seem to be necessary. I've committed the<br>\nappropriate change to the AFP testboard</p>\n<p><a href=\"https://bitbucket.org/isa-afp/afp-testboard/commits/e0f29efc9e56a2c94424263832ab7f833e63ffba\">https://bitbucket.org/isa-afp/afp-testboard/commits/e0f29efc9e56a2c94424263832ab7f833e63ffba</a></p>\n<p>If this does not cause any problems, I'll push it to AFP-devel such that<br>\nin the next AFP release (for Isabelle2016-1) you can use Word_Enum in<br>\ncombination with List_lexord.</p>\n</blockquote>\n<p>that is surely a step in the right direction.</p>\n<p>But also note that only a dozen of lemmas on WordLemmas requires<br>\nPrefix_Order, and these seem to be not related to words or bits at all, e.g.</p>\n<blockquote>\n<p>lemma sublist_equal_part:<br>\n  \"xs ≤ ys ⟹ take (length xs) ys = xs\"<br>\n  by (clarsimp simp: prefix_def less_eq_list_def)</p>\n</blockquote>\n<p>It would be much better to move these to Prefix_Order and relieve<br>\nWord_Lib of that dependency altogether.</p>\n<p>Cheers,<br>\n    Florian</p>\n<blockquote>\n<p>Best,<br>\nAndreas</p>\n<p>On 17/11/16 16:57, Dominic Mulligan wrote:</p>\n<blockquote>\n<p>Hi Andreas,</p>\n<p>Thanks for the reply.</p>\n<p>After a bit of digging through the Word_Lib code it seems that<br>\nPrefix_Order is being imported in WordBitwise_Signed, which itself<br>\ndoes not use any of the functionality provided by Prefix_Order itself,<br>\nbut as it is quite a basic theory in Word_Lib, the library becomes<br>\n\"infected\" with this type class instantiation along with any other<br>\ncode that imports any Word_Lib theory.  Rather, the only theories that<br>\nseems to rely on Prefix_Order at all is WordLemmas and theories that<br>\ndepend on it.</p>\n<p>Therefore, unless I'm missing something important, the import of<br>\nPrefix_Order in WordBitwise_Signed can be removed and be placed in<br>\nWordLemmas with no effect on the functionality of the library,<br>\nreducing the amount of \"infected\" code and allowing users to split out<br>\ne.g. Word_Enum in contexts where List_lexord is also imported.</p>\n<p>Thanks,<br>\nDominic<br>\n</p>\n</blockquote>\n<p>On 17 November 2016 at 15:37, Andreas Lochbihler</p>\n<blockquote>\n<p>&lt;<a href=\"mailto:andreas.lochbihler@inf.ethz.ch\">andreas.lochbihler@inf.ethz.ch</a>&gt; wrote:</p>\n<blockquote>\n<p>Hi Dominic,</p>\n<p>Every type class can be instantiated only once for each type. For lists,<br>\nthere are two different instantiations in different theories in<br>\nHOL/Library:<br>\nList_lexord defines the order on lists to be lexicographic and<br>\nPrefix_Order<br>\ndefines the order to be by prefix. Therefore, you cannot import both<br>\ninto<br>\none theory, but this happens in your example, because Word_Lib<br>\ntransitively<br>\nimports the theory Prefix_Order. There's no way around this.</p>\n<p>Best,<br>\nAndreas</p>\n</blockquote>\n<p>On 17/11/16 16:22, Dominic Mulligan via Cl-isabelle-users wrote:</p>\n<blockquote>\n<blockquote>\n<p>Hi,</p>\n<p>It seems I'm unable to use the Word_Enum theory from the AFP Word<br>\nlibrary and List_lexord theory from the HOL Library concurrently as<br>\nIsabelle-2016 raises the following exception when processing<br>\ndependencies:</p>\n<p>Clash of specifications for less:<br>\n  \"List_lexord.ord_list_inst.less_list_def\"⌂<br>\n  \"Prefix_Order.ord_list_inst.less_list_def\"⌂</p>\n<p>Minimum example:</p>\n<p>theory<br>\n  Error_Monad<br>\nimports<br>\n  Main<br>\n  \"$AFP/Word_Lib/Word_Enum\"<br>\n  \"~~/src/HOL/Library/List_lexord\"<br>\nbegin</p>\n<p>(* XXX *)</p>\n<p>end</p>\n<p>(In my development, I'm importing List_lexord in X.thy and Word_Enum<br>\nin Y.thy with a dependency between the two.)</p>\n<p>Is there a way around this?</p>\n<p>Thanks,<br>\nDominic</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<p><a href=\"/user_uploads/14278/dJ0MhITnh7J3O6O5rgyauMNP/signature.asc\">signature.asc</a></p>\n</blockquote>",
        "id": 294701127,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179211
    }
]