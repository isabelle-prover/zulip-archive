[
    {
        "content": "<p>From: Walther Neuper &lt;<a href=\"mailto:walther.neuper@jku.at\">walther.neuper@jku.at</a>&gt;<br>\nBuilding our project by \"isabelle jedit\" leads to</p>\n<p>exception Size raised (line 171 of \"./basis/LibrarySupport.sml\")</p>\n<p>at several places for some time already. But \"isabelle build\" works fine<br>\nover all code without exceptions, so we didn't care so far. We use the<br>\nstandard etc/setting</p>\n<p>ISABELLE_JAVA_SYSTEM_OPTIONS=\"-server -Dfile.encoding=UTF-8 -Disabelle.threads=0 -Djdk.gtk.version=2.2\"<br>\n    ISABELLE_TOOL_JAVA_OPTIONS=\"-Djava.awt.headless=true -Xms512m -Xmx2560m -Xss16m\"</p>\n<p>for this operating system and hardware:</p>\n<p>Ubuntu 16.04 LTS<br>\n    Memory: 15,3 GiB<br>\n    Processor: ntel® Core™ i7-4810MQ CPU @ 2.80GHz × 8</p>\n<p>Since update to Isabelle2019, however, the same exception is raised<br>\nseveral times within our test-suite (which uses series of \"ML_file<br>\n*.sml\" [1]) and we have to out-comment parts of tests (which we don't<br>\nlike at all). So the question:</p>\n<p>Is there a way to bypass limitations of Java buffers and run a<br>\ntest-suite using a kind of \"isabelle build\" ?</p>\n<p>Many thanks in advance,</p>\n<p>Walther</p>\n<p>[1] <a href=\"https://hg.risc.uni-linz.ac.at/wneuper/isa/file/5c4230e32124/test/Tools/isac/Test_Isac.thy\">https://hg.risc.uni-linz.ac.at/wneuper/isa/file/5c4230e32124/test/Tools/isac/Test_Isac.thy</a></p>",
        "id": 294762617,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200362
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThis is a limitation of Poly/ML in 32bit address mode: that is always<br>\nused by default in Isabelle2019, because of the great new x86_64_32 mode<br>\nof Poly/ML 5.8.</p>\n<p>The limitation is approx. 64MB for single items on the heap, e.g.<br>\nstrings. So there must be something rather big in your application, e.g.<br>\na huge XML tree printed in YXML.</p>\n<p>It would be better to figure out where this happens, but it should work<br>\nas before if you add this to $ISABELLE_HOME_USER/etc/preferences:</p>\n<p>ML_system_64 = \"true\"</p>\n<p>Makarius</p>",
        "id": 294762619,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200364
    },
    {
        "content": "<p>From: Walther Neuper &lt;<a href=\"mailto:walther.neuper@jku.at\">walther.neuper@jku.at</a>&gt;<br>\nthank you for the quick answer.</p>\n<p>Our quick trial with ML_system_64 = \"true\" did not help, so we shall<br>\nfind tools to figure out in detail, what is going on here.</p>\n<p>Walther</p>\n<p>This is a limitation of Poly/ML in 32bit address mode: that is always<br>\nused by default in Isabelle2019, because of the great new x86_64_32 mode<br>\nof Poly/ML 5.8.</p>\n<p>The limitation is approx. 64MB for single items on the heap, e.g.<br>\nstrings. So there must be something rather big in your application, e.g.<br>\na huge XML tree printed in YXML.</p>\n<p>It would be better to figure out where this happens, but it should work<br>\nas before if you add this to $ISABELLE_HOME_USER/etc/preferences:</p>\n<p>ML_system_64 = \"true\"</p>\n<p>Makarius</p>",
        "id": 294762625,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200370
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nIt is unlikely that you get a Size exception in full x86_64 mode.</p>\n<p>Do you really have this enabled? You can check within the running<br>\nIsabelle session as follows:</p>\n<p>ML ‹open ML_System›</p>\n<p>Makarius</p>",
        "id": 294762649,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200381
    },
    {
        "content": "<p>From: Walther Neuper &lt;<a href=\"mailto:walther.neuper@jku.at\">walther.neuper@jku.at</a>&gt;<br>\nThis gives</p>\n<p>val platform_is_windows = false: bool<br>\n    val platform = \"x86_64_32-linux\": string<br>\n    val standard_path = fn: string -&gt; string<br>\n    val name = \"polyml-5.8\": string<br>\n    val platform_is_64 = false: bool<br>\n    val platform_path = fn: string -&gt; string</p>\n<p>in spite of</p>\n<p>~/.isabelle$ cat etc/preferences<br>\n    (* generated by Isabelle Sat Dec 05 14:56:44 CET 2015 *)<br>\n    ML_system_64 = \"true\"</p>\n<p>Might these preferences be overridden somehow?</p>\n<p>Walther</p>",
        "id": 294762661,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200388
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nYou need to use the proper ISABELLE_HOME_USER directory. The<br>\ncommand-line \"isabelle getenv ISABELLE_HOME_USE\" will tell you where it is.</p>\n<p>Makarius</p>",
        "id": 294762745,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200431
    },
    {
        "content": "<p>From: Walther Neuper &lt;<a href=\"mailto:walther.neuper@jku.at\">walther.neuper@jku.at</a>&gt;<br>\nright, sorry for inattention.</p>\n<p>But now I struggle with an unexpected reset of the preferences:</p>\n<p>Updating in ISABELLE_HOME to</p>\n<p>isabisacREP$ cat etc/preferences<br>\n    (* generated by Isabelle 14-Sep-2019 12:34:51 +0200 *)<br>\n    (* avoid exception Size raised (line 171 of \"./basis/LibrarySupport.sml\") *)<br>\n    ML_system_64 = \"true\"</p>\n<p>and in ISABELLE_HOME_USER to</p>\n<p>~/.isabelle$ cat isabisacREP/etc/preferences<br>\n    (* generated by Isabelle 14-Sep-2019 12:34:51 +0200 *)<br>\n    (* avoid exception Size raised (line 171 of \"./basis/LibrarySupport.sml\") *)<br>\n    ML_system_64 = \"true\"</p>\n<p>causes running Isabelle </p>\n<p>isabisacREP$ ./bin/isabelle jedit &amp;</p>\n<p>?!?--------- to reset ---------?!? in ISABELLE_HOME_USER  to</p>\n<p>~/.isabelle$ cat isabisacREP/etc/preferences    <br>\n    (* generated by Isabelle 14-Sep-2019  13:12:44 +0200 *)</p>\n<p>Scanning system.pdf seems not to explain this kind of reset of<br>\npreferences, the system behaviour (exn Size) didn't change and from</p>\n<p>isabisacREP$ ./bin/isabelle jedit &amp;<br>\n          :<br>\n          ML ‹open ML_System›<br>\n          :</p>\n<p>we still get</p>\n<p>val platform_is_windows = false: bool<br>\n    val platform = \"x86_64_32-linux\": string<br>\n    val standard_path = fn: string -&gt; string<br>\n    val name = \"polyml-5.8\": string<br>\n    val platform_is_64 = false: bool           &lt;&lt;&lt;==========================<br>\n    val platform_path = fn: string -&gt; string</p>\n<p>What would inhibit the reset, or how/where must &lt;ML_system_64 = \"true\"&gt;<br>\nbe applied in order to make an effect ?</p>\n<p>Walther</p>\n<p>PS:</p>\n<p>(1) switching to shell format</p>\n<p># avoid exception Size raised (line 171 of \"./basis/LibrarySupport.sml\")</p>\n<p>doesn't change anything.</p>\n<p>(2) The Isabelle installation used above is described here</p>\n<p><a href=\"https://isac.miraheze.org/wiki/Fix_kernel_installation\">https://isac.miraheze.org/wiki/Fix_kernel_installation</a></p>",
        "id": 294762828,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200464
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThis \"lost update\" is to be expected: when you have \"isabelle jedit\"<br>\nstill running, it will re-generate the preferences file on shutdown. See<br>\nalso section 1.2.3 in the Isabelle/jEdit manual.</p>\n<p>Inside Isabelle/jEdit you can actually use the plugin options panel to<br>\nedit this option.</p>\n<p>Makarius</p>",
        "id": 294762832,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661200468
    }
]