[
    {
        "content": "<p>From: Lars Hupel &lt;<a href=\"mailto:hupel@in.tum.de\">hupel@in.tum.de</a>&gt;<br>\nMakarius,</p>\n<p>you've introduced a warning for \"isabelle build\" that tells me when<br>\nfiles are not part of a Mercurial repository, like so:</p>\n<h3>Unknown files (not part of a Mercurial repository):</h3>\n<h3>/home/lars/work/reify/isabelle-cakeml/thy/generated/CakeML/Ast.thy</h3>\n<h3>... many more lines ...</h3>\n<p>While this is technically correct – they're indeed not part of a<br>\nMercurial repository –, it is also annoying, because they are part of a<br>\nGit repository.</p>\n<p>Would it at least be possible to opt out of this warning? If I'm reading<br>\nthe sources correctly, it is triggered by whether or not Isabelle itself<br>\nis under Mercurial control:</p>\n<p>check_unknown_files = Mercurial.is_repository(Path.explode(\"~~\"))</p>\n<p>That doesn't seem particularly useful to me. (The warning may be useful<br>\nto people who run stable Isabelle, for example.)</p>\n<p>Lars</p>",
        "id": 294728595,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661187235
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 05/03/18 16:41, Lars Hupel wrote:</p>\n<blockquote>\n<h3>Unknown files (not part of a Mercurial repository):</h3>\n<h3>/home/lars/work/reify/isabelle-cakeml/thy/generated/CakeML/Ast.thy</h3>\n<h3>... many more lines ...</h3>\n<p>While this is technically correct – they're indeed not part of a<br>\nMercurial repository –, it is also annoying, because they are part of a<br>\nGit repository.</p>\n</blockquote>\n<p>I have now changed it here:</p>\n<p>changeset:   67782:7e223a05e6d8<br>\ntag:         tip<br>\nuser:        wenzelm<br>\ndate:        Thu Mar 08 11:46:37 2018 +0100<br>\nfiles:       src/Pure/General/mercurial.scala src/Pure/Tools/build.scala<br>\ndescription:<br>\nclarified notion of unknown files: ignore files outside of a Mercurial<br>\nrepository;</p>\n<blockquote>\n<p>If I'm reading<br>\nthe sources correctly, it is triggered by whether or not Isabelle itself<br>\nis under Mercurial control:</p>\n<p>check_unknown_files = Mercurial.is_repository(Path.explode(\"~~\"))</p>\n<p>That doesn't seem particularly useful to me. (The warning may be useful<br>\nto people who run stable Isabelle, for example.)</p>\n</blockquote>\n<p>The main purpose is to guard against accidental pushes on Isabelle or<br>\nAFP, without having added new files. This fits to the standard model of<br>\nIsabelle testing: \"isabelle build -a\" and careful inspection of \"hg<br>\ndiff\" before \"hg push\". The scheme still works for other projects (like<br>\nIsaFoR or IsaFoL) as long as it is for the Isabelle repository.</p>\n<p>That check is inactive for official releases, because finding the<br>\nrepository root of a file means to traverse the whole directory tree to<br>\nthe top. That might be expensive in the case where none such root exists<br>\n-- the check needs to be done for thousands of files. Moreover, towards<br>\nthe top of the file-system it could become dangerous to trip on certain<br>\nspecial mount points, e.g. on Windows this can cause long / infinite delays.</p>\n<p>Makarius</p>",
        "id": 294728851,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661187315
    }
]