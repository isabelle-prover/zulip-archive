[
    {
        "content": "<p>From: Rodrigo Raya &lt;<a href=\"mailto:rodrigo.raya@epfl.ch\">rodrigo.raya@epfl.ch</a>&gt;<br>\nDear all,</p>\n<p>Below I show an example which should go through using the algebra tactic:</p>\n<p>lemma ideal_membership_2:<br>\n   fixes x0 x1 y0 y1 t :: \"'b::idom\"<br>\n   assumes \"x0 ≠ 0\" \"y0 ≠ 0\" \"x1 ≠ 0\" \"y1 ≠ 0\"<br>\n   shows \"∃ q1 q2 q3 q4.<br>\n           y0^2 - x1^2 =<br>\n               q1*(-1 + x0^2 + y0^2 - t^2 * x0^2 * y0^2) +<br>\n               q2*(-1 + x1^2 + y1^2 - t^2 * x1^2 * y1^2) +<br>\n               q3*(x0 * y0 - x1 * y1) +<br>\n               q4*(x1 * y0 + x0 * y1)<br>\n         \"       using assms apply algebra</p>\n<p>but in fact fails with the exception:</p>\n<p>exception Option raised (line 82 of \"General/basics.ML\")</p>\n<p>It looks like there may be a bug in the ideal_tac tactic of groebner.ML.</p>\n<p>I have tried to figure out myself what may be the problem but have not <br>\nsucceeded so far.</p>\n<p>I would thank any advice or insight you can give me to debug this problem.</p>\n<p>Best,</p>\n<p>Rodrigo Raya</p>",
        "id": 294767942,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661202820
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 10/01/2020 15:52, Rodrigo Raya wrote:</p>\n<blockquote>\n<p>Below I show an example which should go through using the algebra tactic:</p>\n<p>lemma ideal_membership_2:<br>\n  fixes x0 x1 y0 y1 t :: \"'b::idom\"<br>\n  assumes \"x0 ≠ 0\" \"y0 ≠ 0\" \"x1 ≠ 0\" \"y1 ≠ 0\"<br>\n  shows \"∃ q1 q2 q3 q4.<br>\n          y0^2 - x1^2 =<br>\n              q1*(-1 + x0^2 + y0^2 - t^2 * x0^2 * y0^2) +<br>\n              q2*(-1 + x1^2 + y1^2 - t^2 * x1^2 * y1^2) +<br>\n              q3*(x0 * y0 - x1 * y1) +<br>\n              q4*(x1 * y0 + x0 * y1)<br>\n        \"       using assms apply algebra</p>\n<p>but in fact fails with the exception:</p>\n<p>exception Option raised (line 82 of \"General/basics.ML\")</p>\n</blockquote>\n<p>For now, I have made a tracker item here: <a href=\"https://isabelle-dev.sketis.net/T21\">https://isabelle-dev.sketis.net/T21</a></p>\n<blockquote>\n<p>It looks like there may be a bug in the ideal_tac tactic of groebner.ML.</p>\n<p>I have tried to figure out myself what may be the problem but have not<br>\nsucceeded so far.</p>\n<p>I would thank any advice or insight you can give me to debug this problem.</p>\n</blockquote>\n<p>Debugging works by building relevant parts of Isabelle with the ML debugger<br>\nenabled, and then run the test with suitable options.</p>\n<p>Here is my test file for \"isabelle jedit -l Pure\":</p>\n<p>theory Scratch<br>\n  imports \"HOL.Groebner_Basis\"<br>\nbegin</p>\n<p>declare [[ML_exception_debugger]]</p>\n<p>lemma ideal_membership_2:<br>\n  fixes x0 x1 y0 y1 t :: \"'b::idom\"<br>\n  assumes \"x0 ≠ 0\" \"y0 ≠ 0\" \"x1 ≠ 0\" \"y1 ≠ 0\"<br>\n  shows \"∃ q1 q2 q3 q4.<br>\n          y0^2 - x1^2 =<br>\n              q1*(-1 + x0^2 + y0^2 - t^2 * x0^2 * y0^2) +<br>\n              q2*(-1 + x1^2 + y1^2 - t^2 * x1^2 * y1^2) +<br>\n              q3*(x0 * y0 - x1 * y1) +<br>\n              q4*(x1 * y0 + x0 * y1)<br>\n        \"<br>\n  using assms apply algebra</p>\n<p>end</p>\n<p>This will load all required theories of Isabelle/HOL into the Pure session.<br>\nYou can then use C-hover-click on \"algebra\" to get to its definition.</p>\n<p>Over there you will see its use of Groebner.algebra_tac and you can change the<br>\npreceeding ML command for that module like this:</p>\n<p>ML_file_debug ‹Tools/groebner.ML›</p>\n<p>Back to Scratch.thy you will now get a more informative exception trace.</p>\n<p>The crash is due to \"try\" and \"|&gt; the\" here:<br>\n<a href=\"https://isabelle.sketis.net/repos/isabelle/file/Isabelle2020/src/HOL/Tools/groebner.ML#l875\">https://isabelle.sketis.net/repos/isabelle/file/Isabelle2020/src/HOL/Tools/groebner.ML#l875</a></p>\n<p>If you insert a dummy invocation of (isolate_variables evs ps) without try, it<br>\nwill crash in a more informative way.</p>\n<blockquote>\n<p>From there you can continue digging into this implementation by Amine Chaieb.</p>\n</blockquote>\n<p>Makarius</p>",
        "id": 294828880,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661245673
    },
    {
        "content": "<p>From: Laurent Thery &lt;<a href=\"mailto:Laurent.Thery@inria.fr\">Laurent.Thery@inria.fr</a>&gt;<br>\nHi,</p>\n<p>I am not an Isabelle expert but did you try if this</p>\n<p>lemma ideal_membership_2:<br>\n  fixes x0 x1 y0 y1 t z0 :: \"'b::idom\"<br>\n  shows \"∃ q0 q1 q2 q3 q4.<br>\n          y0^2 - x1^2 =<br>\n              q0*(1 + x0 * y0 * x1 * y1 * z0) +<br>\n              q1*(-1 + x0^2 + y0^2 - t^2 * x0^2 * y0^2) +<br>\n              q2*(-1 + x1^2 + y1^2 - t^2 * x1^2 * y1^2) +<br>\n              q3*(x0 * y0 - x1 * y1) +<br>\n              q4*(x1 * y0 + x0 * y1)<br>\n        \"</p>\n<p>succeeds. If it succeeds this means that there is a problem with<br>\nhow degenerated cases (_ ≠ 0) are handled.</p>",
        "id": 294828891,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661245679
    }
]