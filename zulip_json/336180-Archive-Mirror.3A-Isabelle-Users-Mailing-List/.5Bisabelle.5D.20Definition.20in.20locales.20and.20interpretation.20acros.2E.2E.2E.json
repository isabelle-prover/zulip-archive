[
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:lochbihl@infosun.fim.uni-passau.de\">lochbihl@infosun.fim.uni-passau.de</a>&gt;<br>\nHi all,</p>\n<p>I have encountered the following problem with locales and<br>\ninterpretation. Normally, I would expect that theorems and definitions<br>\nwhich are added to some locale are also immediately available in their<br>\ninterpretations. However, this does not seem to be the case in the<br>\nfollowing example.</p>\n<p>Theory TestA defines some locale loc:</p>\n<p>theory TestA imports Main begin<br>\nlocale loc = fixes r :: \"'a =&gt; bool\" begin<br>\nend<br>\nend</p>\n<p>Theory TestB extends TestA and adds a definition to loc:</p>\n<p>theory TestB imports TestA begin<br>\ndefinition (in loc) bar :: nat where \"bar == 0\"<br>\nend</p>\n<p>Theory TestC extends TestA interprets this locale:</p>\n<p>theory TestC imports TestA begin<br>\ninterpretation foo: loc[\"%x. True\"] .<br>\nend</p>\n<p>Theory TestD joins TestB and TestC and queries the definition of bar in<br>\nthe interpretation:</p>\n<p>theory TestD imports TestB TestC begin<br>\nthm foo.bar_def</p>\n<p>which gives that foo.bar_def is an unknown theorem, although<br>\nprint_locale loc does show it being part of the locale.<br>\nProbably, this is due to the diamond inheritance structure with the<br>\ntheories. But: Is there some way to tell Isabelle in TestD to add<br>\ndefinitions to the locale loc in TestB to the definitions from TestC<br>\nexcept changing the theory dependencies?</p>\n<p>Thanks,<br>\nAndreas</p>",
        "id": 294056192,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660821678
    },
    {
        "content": "<p>From: Clemens Ballarin &lt;<a href=\"mailto:ballarin@in.tum.de\">ballarin@in.tum.de</a>&gt;<br>\nDear Andreas,</p>\n<blockquote>\n<p>I have encountered the following problem with locales and<br>\ninterpretation. Normally, I would expect that theorems and definitions<br>\nwhich are added to some locale are also immediately available in their<br>\ninterpretations. However, this does not seem to be the case in the<br>\nfollowing example.</p>\n</blockquote>\n<p>due to the operational nature of locales, this does not work.  I  <br>\nagree, though, that it would be desireable to have such a form of  <br>\nbehaviour in the future.</p>\n<blockquote>\n<p>Probably, this is due to the diamond inheritance structure with the<br>\ntheories. But: Is there some way to tell Isabelle in TestD to add<br>\ndefinitions to the locale loc in TestB to the definitions from TestC<br>\nexcept changing the theory dependencies?</p>\n</blockquote>\n<p>You cannot change an ancestor theory, and TestD only sees one locale  <br>\n\"loc\".  You can either move the interpretation to TestA or TestD, or  <br>\ndeclare the missing interpreted theorems from TestB in TestD manually.</p>\n<p>Clemens</p>",
        "id": 294056449,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660821750
    }
]