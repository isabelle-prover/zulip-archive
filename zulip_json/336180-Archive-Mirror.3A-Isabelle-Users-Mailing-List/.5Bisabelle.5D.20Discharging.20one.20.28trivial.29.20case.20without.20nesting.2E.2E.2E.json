[
    {
        "content": "<p>From: Joachim Breitner &lt;<a href=\"mailto:breitner@kit.edu\">breitner@kit.edu</a>&gt;<br>\nDear Isabelle users (and devs),</p>\n<p>Chrisoph’s question (<a href=\"http://stackoverflow.com/questions/16629417\">http://stackoverflow.com/questions/16629417</a>) proofs<br>\nby cases reminded me of a feature wish that I wanted to talk about for a<br>\nwhile.</p>\n<p>In pen-and-paper proofs, if there are corner cases for which the result<br>\nis immediate, I just mention them at the beginning and continue with the<br>\ninteresting cases:</p>\n<p>Lemma: Every set that has property Q also has property P.</p>\n<p>Proof: Let S be a set with property Q. Clearly, empty sets have <br>\n         property P, so assume x ∈ S.<br>\n         [long proof]<br>\n         So S has property P.</p>\n<p>In Isar, I would have to write:</p>\n<p>lemma \"Q S → P S\"<br>\n        proof<br>\n          assume \"Q S\"<br>\n          show \"P S\"<br>\n          proof(cases \"S = {}\")<br>\n            assume True thus \"P S\" by simp<br>\n          next<br>\n            assume False<br>\n            then obtain \"x ∈ S\" by auto<br>\n            ..<br>\n            show \"P S\"<br>\n          qed<br>\n        qed</p>\n<p>What I don’t like about this is that the main proof (..) is indented<br>\ndeeper than it is in my mental model of the proof.</p>\n<p>Note that if I could conclude False from \"S = {}\" and my current facts,<br>\nI could write the proof without additional indenting, e.g. using obtain.<br>\nBut showing False or showing that the result holds is not a huge<br>\ndifference in my understanding of a particular proof, so what I would<br>\nlike to see is, for example,</p>\n<p>lemma \"Q S → P S\"<br>\n    proof<br>\n      assume \"Q S\"</p>\n<p>trivially \"S ~= {}\"<br>\n      proof<br>\n    assume \"~ ~ S = {}\"<br>\n        show \"P S\" by simp<br>\n      qed<br>\n      then obtain \"x ∈ S\" by auto<br>\n      ..<br>\n      show \"P S\"<br>\n    qed</p>\n<p>where (attention, obviously inaccurate understanding of Isar’s workings<br>\nunder the hood following:) \"trivially P\" opens a proof goal \"~P ==&gt; ?P\",<br>\nand the user is expected to finish this proof with \"show Q\" where Q is<br>\nthe same result that he will show in the outer block. After the<br>\n\"trivially P\" command, P is added to the facts and to this. Note the<br>\nsimilarity with the obtain command, where I have to shown an abstract<br>\n\"that\".</p>\n<p>I know that this is but a small reshuffling of the statements that I’d<br>\nhave to write with \"show Q proof(cases P)...\", but it does make a<br>\ndifference for the readability of the proof.</p>\n<p>Bonus points if somehow inside the proof block opened by tivially the<br>\nstatement to be shown is somehow inferred, so that I can just write </p>\n<p>lemma \"Q S → P S\"<br>\n    proof<br>\n      assume \"Q S\"</p>\n<p>trivially \"S ~= {}\" by simp<br>\n      then obtain \"x ∈ S\" by auto<br>\n      ..<br>\n      show \"P S\"<br>\n    qed</p>\n<p>Greetings and happy Whitsun,<br>\nJoachim<br>\n<a href=\"/user_uploads/14278/YNFJa8iyknWelrRp780N29qB/signature.asc\">signature.asc</a></p>",
        "id": 294241653,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660907237
    },
    {
        "content": "<p>From: Christian Sternagel &lt;<a href=\"mailto:c.sternagel@gmail.com\">c.sternagel@gmail.com</a>&gt;<br>\nOn 05/19/2013 07:02 PM, Joachim Breitner wrote:</p>\n<blockquote>\n<p>lemma \"Q S → P S\"<br>\n         proof<br>\n           assume \"Q S\"<br>\n           show \"P S\"<br>\n           proof(cases \"S = {}\")<br>\n             assume True thus \"P S\" by simp<br>\n           next<br>\n             assume False<br>\n             then obtain \"x ∈ S\" by auto<br>\n             ..<br>\n             show \"P S\"<br>\n           qed<br>\n         qed</p>\n</blockquote>\n<p>Instead, you could write:</p>\n<p>lemma \"Q S --&gt; P S\"<br>\nproof<br>\n   assume \"Q S\"<br>\n   show \"P S\"<br>\n   proof (cases \"S = {}\")<br>\n     assume \"S ~= {}\"<br>\n     then obtain \"x : S\" by auto<br>\n     ...<br>\n     show \"P S\"<br>\n   qed simp<br>\nqed</p>\n<p>which looks (I guess) very similar to what you suggested:</p>\n<blockquote>\n<p>lemma \"Q S → P S\"<br>\n     proof<br>\n       assume \"Q S\"<br>\n       trivially \"S ~= {}\"<br>\n       proof<br>\n         assume \"~ ~ S = {}\"<br>\n         show \"P S\" by simp<br>\n       qed<br>\n       then obtain \"x ∈ S\" by auto<br>\n       ..<br>\n       show \"P S\"<br>\n     qed<br>\n</p>\n</blockquote>\n<p>Maybe I do not get your main point?</p>\n<p>cheers</p>\n<p>chris</p>",
        "id": 294241704,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660907260
    },
    {
        "content": "<p>From: Joachim Breitner &lt;<a href=\"mailto:breitner@kit.edu\">breitner@kit.edu</a>&gt;<br>\nHi,</p>\n<p>It does look similar, but I still have to start the proof by stating<br>\nwhat I want to show (which I would not do in the pen-and-paper proof),<br>\nand I still have to have two nested blocks.</p>\n<p>I also have cases in mind where the „trivial“ proof is a bit more<br>\ninvolved than something that you would put after qed, but still much<br>\nshorter than the „main proof“.</p>\n<p>Also, putting it after the qed almost completely hides that the case is<br>\nhandled. Compare this with the pen-and-paper-proof: The trivial case is<br>\nmentioned beforehand (and then discharged as uninteresting).</p>\n<p>I know that my arguing is very much on the „personal preference and<br>\nperception“ level, and getting proofs to look good and to be a pleasant<br>\nread is a very subjective thing...</p>\n<p>Maybe I could also state my idea this way, which does not talk about<br>\nstyle any more and might allow other uses as well:</p>\n<p>Would it be possible to get a variant of obtains where the proof<br>\n        obligation is not an abstract \"this\", but rather the actually<br>\n        goal shown afterwards?</p>\n<p>This introduces a non-linearity into the proof that might feel very<br>\nwrong in ProofGeneral, but with the parallel style of jedit, this might<br>\nactually make sense. One would probably start with a proof of \"sorry\"<br>\nfor the proof, continue the rest, and then finish the obtains proof when<br>\nthe conclusion correctly known.</p>\n<p>Greetings,<br>\nJoachim<br>\n<a href=\"/user_uploads/14278/IoBtKoTTOxVSSaGfXs9wmtWv/signature.asc\">signature.asc</a></p>",
        "id": 294241720,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660907267
    }
]