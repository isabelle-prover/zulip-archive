[
    {
        "content": "<p>From: RF Todd &lt;<a href=\"mailto:R.F.Todd@sms.ed.ac.uk\">R.F.Todd@sms.ed.ac.uk</a>&gt;<br>\nHi,</p>\n<p>I cannot get the following to work. It runs up till the last line of  <br>\ncode here it won't run past the \"by (auto simp add:  <br>\nreal_Add_mult_distrib real_mult_assoc mult_ac\" and I am not sure what  <br>\nis wrong.</p>\n<p>theory CauchySchwarz<br>\nimports Complex_Main<br>\nbegin</p>\n<p>lemma real_sq: \"(a::real)*a = a^2\"<br>\nproof -<br>\nhave \"2 = Suc 1\"<br>\nby simp<br>\nhence \"a^2 = a^(Suc 1)\"<br>\n   apply -<br>\n   apply (erule subst)<br>\n   by simp<br>\nalso have \"\\&lt;dots&gt; = a*(a^1)\" by simp<br>\nalso have \"\\&lt;dots&gt; = a*a\" by simp<br>\nfinally have \"a^2 = a*a\" by auto<br>\nthus ?thesis by simp<br>\nqed</p>\n<p>lemma real_mult_wkorder:<br>\n   fixes x::real<br>\n   assumes xge0: \"0 \\&lt;le&gt; x\" and yge0: \"0 \\&lt;le&gt; y\"<br>\n   shows \"0 \\&lt;le&gt; x*y\"<br>\nproof cases<br>\n   assume \"x = 0\"<br>\n   thus ?thesis by simp<br>\nnext<br>\n   assume \"x \\&lt;noteq&gt; 0\"<br>\n   with xge0 have xgt0: \"x &gt; 0\" by simp<br>\n   show ?thesis<br>\n   proof cases<br>\n     assume \"y = 0\"<br>\n     thus ?thesis by simp<br>\n   next<br>\n     assume \"y \\&lt;noteq&gt; 0\"<br>\n     with yge0 have \"y &gt; 0\" by simp<br>\n     with xgt0 have \"x*y &gt; 0\" by (rule real_mult_order)<br>\n     thus ?thesis by simp<br>\n   qed<br>\nqed</p>\n<p>lemma real_mult_order2:<br>\n   fixes c::real<br>\n   assumes c0: \"0 \\&lt;le&gt; c\"<br>\n   and xy: \"x \\&lt;le&gt; y\"<br>\n   shows \"c<em>x \\&lt;le&gt; c</em>y\"<br>\nproof cases<br>\n   assume \"0 = c\"<br>\n   thus ?thesis by auto<br>\nnext<br>\n   assume \"0 \\&lt;noteq&gt; c\"<br>\n   with c0 have \"0 &lt; c\" by simp<br>\n   with xy show ?thesis by simp<br>\nqed</p>\n<p>lemma real_sq_order:<br>\n   fixes x::real<br>\n   assumes xgt0: \"0 \\&lt;le&gt; x\" and ygt0: \"0 \\&lt;le&gt; y\" and sq: \"x^2 \\&lt;le&gt; y^2\"<br>\n   shows \"x \\&lt;le&gt; y\"<br>\nproof (rule ccontr)<br>\n   assume \"\\&lt;not&gt;(x \\&lt;le&gt; y)\"<br>\n   then have ylx: \"y &lt; x\" by simp<br>\n   hence \"y \\&lt;le&gt; x\" by simp<br>\n   with xgt0 have \"x<em>y \\&lt;le&gt; x</em>x\" by (rule real_mult_order2)<br>\n   moreover<br>\n   have \"\\&lt;not&gt;(y = 0)\"<br>\n   proof<br>\n     assume \"y = 0\"<br>\n     with ylx have xg0: \"0 &lt; x\" by simp<br>\n     from xg0 xg0 have \"0 &lt; x*x\" by (rule real_mult_order)<br>\n     moreover have \"y*y = 0\" by simp<br>\n     ultimately show False using sq by auto<br>\n   qed<br>\n   with ygt0 have \"0 &lt; y\" by simp<br>\n   with ylx have \"y<em>y &lt; x</em>y\" by auto<br>\n   ultimately have \"y<em>y &lt; x</em>x\" by simp<br>\n   with sq show False by (auto simp add: real_sq)<br>\nqed</p>\n<p>lemma real_add_mult_distrib2:<br>\n   fixes x::real<br>\n   shows \"x<em>(y+z) = x</em>y + x*z\"<br>\nproof -<br>\n   have \"x<em>(y+z) = (y+z)</em>x\" by simp<br>\n   also have \"\\&lt;dots&gt; = y<em>x + z</em>x\" by (rule real_add_mult_distrib)<br>\n   also have \"\\&lt;dots&gt; = x<em>y + x</em>z\" by simp<br>\n   finally show ?thesis .<br>\nqed</p>\n<p>lemma real_add_mult_distrib_ex:<br>\n   fixes x::real<br>\n   shows \"(x+y)<em>(z+w) = x</em>z + x<em>w + y</em>z + y*w\"<br>\nproof -<br>\n   have \"(x+y)<em>(z+w) = x</em>(z+w) + y*(z+w)\" by (rule real_add_mult_distrib)<br>\n   also have \"\\&lt;dots&gt; = x<em>z + x</em>w + y<em>z + y</em>w\" by (simp add:  <br>\nreal_add_mult_distrib2)<br>\n   finally show ?thesis by simp<br>\nqed</p>\n<p>lemma real_sub_mult_distrib_ex:<br>\n   fixes x::real<br>\n   shows \"(x-y)<em>(z-w) = x</em>z - x<em>w - y</em>z + y*w\"<br>\nproof -<br>\n   have zw: \"(z-w) = (z+ -w)\" by simp<br>\n   have \"(x-y)<em>(z-w) = (x+ -y)</em>(z-w)\" by simp<br>\n   also have \"\\&lt;dots&gt; = x<em>(z-w) + -y</em>(z-w)\" by (rule real_add_mult_distrib)<br>\n   also from zw have \"\\&lt;dots&gt; = x<em>(z+ -w) + -y</em>(z+ -w)\"<br>\n     apply -<br>\n     apply (erule subst)<br>\n     by simp<br>\n   also have \"\\&lt;dots&gt; = x<em>z + x</em>-w + -y<em>z + -y</em>-w\" by (simp add:  <br>\nreal_add_mult_distrib2)<br>\n   finally show ?thesis by simp<br>\nqed</p>\n<p>lemma double_sum_expand:<br>\n   fixes f::\"nat \\&lt;Rightarrow&gt; real\"<br>\n   shows \"(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f j)*(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. g j) =  <br>\n(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.f k*g j))\"<br>\nproof (induct n)<br>\n   case 0 show ?case by simp<br>\nnext<br>\n   case (Suc n) {<br>\n     assume nz: \"n = 0\"<br>\n     then have<br>\n       \"(\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc n}. f j)*(\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc n}. g j) =  <br>\nf 1 * g 1\" by simp<br>\n     moreover from nz have<br>\n       \"(\\&lt;Sum&gt;k\\&lt;in&gt;{1..Suc n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc n}.(f k)*(g j)))  <br>\n= f 1 * g 1\" by auto<br>\n     ultimately have ?case by simp<br>\n   }<br>\nmoreover {<br>\n   assume \"\\&lt;not&gt;(n = 0)\"<br>\n   then have nge1: \"n \\&lt;ge&gt; 1\" by simp<br>\n   hence sn: \"Suc n &gt; 1\" by simp</p>\n<p>let ?f = \"\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f j\" and ?g = \"\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. g j\"</p>\n<p>from sn setsum_cl_ivl_Suc have \"(\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc n}. f j) = ?f  </p>\n<ul>\n<li>\n<p>f (Suc n)\" by auto<br>\n   moreover<br>\n   from sn setsum_cl_ivl_Suc have \"(\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc n}. g j) = ?g  </p>\n</li>\n<li>\n<p>g (Suc n)\" by auto<br>\n   ultimately have<br>\n     \"(\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc n}. f j)*(\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc n}. g j) =  <br>\n(?f + f (Suc n))*(?g + g (Suc n))\" by simp<br>\n   also have<br>\n     \"\\&lt;dots&gt; = ?f * ?g + ?f<em>(g (Suc n)) + (f (Suc n))</em>?g + (f (Suc  <br>\nn))*(g (Suc n))\"<br>\n     by (auto simp add: real_add_mult_distrib_ex)<br>\n   also have<br>\n     \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.(f k)*(g j)))  </p>\n</li>\n<li>\n<p>?f<em>(g (Suc n)) + (f (Suc n))</em>?g + (f (Suc n))*(g (Suc n))\" using Suc  <br>\nby simp<br>\n   also have<br>\n     \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.(f k)*(g j)))  </p>\n</li>\n<li>\n<p>(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f j * g (Suc n)) + ?g * (f (Suc n)) + (f (Suc  <br>\nn))*(g (Suc n))\" by (auto simp add: setsum_mult real_mult_commute)<br>\n   also have<br>\n     \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.(f k)*(g j)) +  <br>\n(f k * g (Suc n))) + (?g * f (Suc n)) + (f (Suc n))*(g (Suc n))\" by  <br>\n(auto simp add: setsum_addf [symmetric])<br>\n   also have<br>\n     \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(Suc n)}.(f k)*(g  <br>\nj))) + (\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. g j)<em>(f (Suc n)) + g(Suc n)</em>(f (Suc n))\"  <br>\nby simp<br>\n   also have<br>\n     \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(Suc n)}.(f k)*(g  <br>\nj))) + (\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.g j * f (Suc n)) + g(Suc n)*(f (Suc n))\" by  <br>\n(auto simp add: setsum_mult real_mult_commute)<br>\n   also from sn setsum_cl_ivl_Suc have<br>\n     \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(Suc n)}.(f k)*(g  <br>\nj))) + (\\&lt;Sum&gt;j\\&lt;in&gt;{1..Suc  n}.(g j)*(f (Suc n)))\"  by auto<br>\n   also from sn setsum_cl_ivl_Suc have<br>\n     \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..Suc n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(Suc n)}.(f  <br>\nk)*(g j)))\" by (auto simp add: real_mult_commute)<br>\n   finally have ?case .<br>\n}<br>\nultimately show ?case by (rule case_split_thm)<br>\nqed</p>\n</li>\n</ul>\n<p>lemma real_sq_exp:<br>\n   fixes x::real<br>\n   shows \"(x*y)^2 = x^2 * y^2\"<br>\nproof -<br>\n   have \"(x*y)^2 = (x<em>y)</em>(x*y)\" by (simp add: real_sq)<br>\n   also have \"\\&lt;dots&gt; = (x<em>x)</em>(y*y)\" by simp<br>\n   also have \"\\&lt;dots&gt; = x^2 * y^2\" by (simp add: real_sq)<br>\n   finally show ?thesis .<br>\nqed</p>\n<p>lemma real_diff_exp:<br>\n   fixes x::real<br>\n   shows \"(x-y)^2 = x^2 + y^2 - 2<em>x</em>y\"<br>\nproof -<br>\n   have \"(x-y)^2 = (x-y)*(x-y)\" by (simp only: real_sq)<br>\n   also from real_sub_mult_distrib_ex have \"\\&lt;dots&gt; = x<em>x - x</em>y - y*x  </p>\n<ul>\n<li>y*y\" by simp<br>\n   finally show ?thesis by (auto simp add: real_sq)<br>\nqed</li>\n</ul>\n<p>lemma double_sum_equiv:<br>\n   fixes f::\"nat \\&lt;Rightarrow&gt; real\"<br>\n   shows \"(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g j)) =  <br>\n(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f j * g k))\"<br>\nproof -<br>\n   have \"(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. (f k)*(g j))) =  <br>\n(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.f j)*(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.g j)\" by (simp only:  <br>\ndouble_sum_expand)<br>\n   also have \"\\&lt;dots&gt; = (\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. g j)*(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.  <br>\nf j)\" by simp<br>\n   also have \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. g k *  <br>\nf j))\" by (simp only: double_sum_expand)<br>\n   finally show ?thesis by (simp add: real_mult_commute)<br>\nqed</p>\n<p>text {*  Theorem: Take $V$ to be some vector space possessing a norm  <br>\nand inner product, then for all $a,b \\in V$ the following inequality  <br>\nholds: @{text \"|a.b| \\&lt;le&gt; \\&lt;parallel&gt;a\\&lt;parallel&gt; *  <br>\n\\&lt;parallel&gt;b\\&lt;parallel&gt;\"}. Specifically, in the Real case, the norm is  <br>\nin the Euclidean length and the inner product is the standard dot  <br>\nproduct. *}</p>\n<p>types vector = \"(nat \\&lt;Rightarrow&gt; real)*nat\";</p>\n<p>constdefs ith :: \"vector \\&lt;Rightarrow&gt; nat \\&lt;Rightarrow&gt; real\"<br>\n\"ith v i \\&lt;equiv&gt; (fst v) i\"<br>\nvlen :: \"vector \\&lt;Rightarrow&gt; nat\"<br>\n\"vlen v \\&lt;equiv&gt; (snd v)\"</p>\n<p>constdefs dot :: \"vector \\&lt;Rightarrow&gt; vector \\&lt;Rightarrow&gt; real\"<br>\n\"dot a b \\&lt;equiv&gt; (\\&lt;Sum&gt;j\\&lt;in&gt;{1..(vlen a)}.(ith a j)*(ith b j))\"<br>\nnorm :: \"vector \\&lt;Rightarrow&gt; real\"<br>\n\"norm v \\&lt;equiv&gt; sqrt (\\&lt;Sum&gt;j\\&lt;in&gt;{1..(vlen v)}.(ith v j)^2)\"</p>\n<p>syntax(HTML output)</p>\n<p>\"norm\" :: \"vector \\&lt;Rightarrow&gt; real\"</p>\n<p>lemma norm_dot: \"norm(v)=sqrt(dot v v)\"<br>\nproof -<br>\n   have \"sqrt(dot v v) = sqrt(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(vlen v)}. (ith v  <br>\nj)*(ith v j))\" by (unfold dot_def, simp)<br>\n   also with real_sq have \"\\&lt;dots&gt; = sqrt(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(vlen  <br>\nv)}.(ith v j)^2)\" by simp<br>\n   also have \"\\&lt;dots&gt; = norm v\" by (unfold norm_def, simp)<br>\n   finally show ?thesis ..<br>\nqed</p>\n<p>lemma norm_pos: \"norm v  \\&lt;ge&gt; 0\"<br>\nproof -<br>\n   have \"\\&lt;forall&gt;j. (ith v j)^2 \\&lt;ge&gt; 0\" by (unfold ith_def, auto)<br>\n   hence \"\\&lt;forall&gt;j\\&lt;in&gt;{1..(vlen v)}. (ith v j)^2 \\&lt;ge&gt; 0\" by simp<br>\n   with setsum_nonneg have \"(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(vlen v)}. (ith v j)^2) \\&lt;ge&gt; 0\" .<br>\n   with real_sqrt_ge_zero have \"sqrt(\\&lt;Sum&gt;j\\&lt;in&gt;{1..(vlen v)}. (ith v  <br>\nj)^2) \\&lt;ge&gt; 0\" .<br>\n   thus ?thesis by (unfold norm_def)<br>\nqed</p>\n<p>lemma double_sum_aux:<br>\n   fixes f::\"nat \\&lt;Rightarrow&gt; real\"<br>\n   shows \"(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g j)) =  <br>\n(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.(f k * g j + f j * g k)/2))\"<br>\nproof -<br>\n   have \"2 * (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g j)) =  <br>\n(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g j)) +  <br>\n(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g j))\" by simp<br>\n   also have \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k *  <br>\ng j)) + (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f j * g k))\" by (simp  <br>\nonly: double_sum_equiv)<br>\n   also have \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k *  <br>\ng j + f j * g k))\" by (auto simp add: setsum_addf)<br>\n   finally have \"2 * (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g  <br>\nj)) = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g j + f j * g  <br>\nk))\" .<br>\n   hence \"(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}. f k * g j)) =  <br>\n(\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.(f k * g j + f j * g  <br>\nk)))*(1/2)\" by auto<br>\n   also have \"\\&lt;dots&gt; = (\\&lt;Sum&gt;k\\&lt;in&gt;{1..n}.(\\&lt;Sum&gt;j\\&lt;in&gt;{1..n}.(f k *  <br>\ng j + f j* g k)*(1/2)))\" by (simp add: setsum_mult real_mult_commute)<br>\n   finally show ?thesis by (auto simp add: inverse_eq_divide)<br>\nqed</p>\n<p>theorem CauchySchwarzReal:<br>\n   fixes x::vector<br>\n   assumes \"vlen x = vlen y\"<br>\n   shows \"\\&lt;bar&gt;dot x y\\&lt;bar&gt; \\&lt;le&gt; (norm x)*(norm y)\"<br>\nproof -<br>\n   have \"0 \\&lt;le&gt; \\&lt;bar&gt;dot x y\\&lt;bar&gt;\" by simp<br>\n   moreover have \"0 \\&lt;le&gt; (norm x)*(norm y)\" by (auto simp add:  <br>\nnorm_pos intro: mult_nonneg_nonneg)<br>\n   moreover have \"\\&lt;bar&gt;dot x y\\&lt;bar&gt;^2 \\&lt;le&gt; ((norm x)*(norm y))^2\"<br>\nproof -<br>\n   txt {* We<br>\n[message truncated]</p>",
        "id": 294053783,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660820732
    },
    {
        "content": "<p>From: Lawrence Paulson &lt;<a href=\"mailto:lp15@cam.ac.uk\">lp15@cam.ac.uk</a>&gt;<br>\nI can't reproduce your problem. Are you using Isabelle2007 and an up- <br>\nto-date version of the theory file?</p>\n<p>Larry Paulson</p>",
        "id": 294053802,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660820744
    }
]