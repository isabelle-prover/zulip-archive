[
    {
        "content": "<p>From: Christopher Hoskin &lt;<a href=\"mailto:christopher.hoskin@gmail.com\">christopher.hoskin@gmail.com</a>&gt;<br>\nI'm trying to define and work with the Lower Topology on a partially<br>\nordered set (Gierz et al, Definition III-1.1).</p>\n<p>The following works:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"k\">theory</span> <span class=\"n\">Scratch</span>\n  <span class=\"kp\">imports</span> <span class=\"n\">HOL.Lattices</span> <span class=\"n\">Main</span> <span class=\"n\">HOL.Topological_Spaces</span>\n<span class=\"k\">begin</span>\n\n<span class=\"k\">class</span> <span class=\"n\">lower_topology</span> <span class=\"o\">=</span> <span class=\"n\">order</span> <span class=\"o\">+</span> <span class=\"s\">\"open\"</span> <span class=\"o\">+</span>\n  <span class=\"kp\">assumes</span> <span class=\"n\">open_generated_order</span><span class=\"o\">:</span> <span class=\"s\">\"open = generate_topology (range (λJ.</span>\n<span class=\"s\">{K. ¬J≤K}))\"</span>\n<span class=\"k\">begin</span>\n\n<span class=\"kn\">subclass</span> <span class=\"n\">topological_space</span>\n  <span class=\"k\">unfolding</span> <span class=\"n\">open_generated_order</span>\n  <span class=\"k\">by</span> <span class=\"o\">(</span><span class=\"n\">rule</span> <span class=\"n\">topological_space_generate_topology</span><span class=\"o\">)</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">end</span>\n</code></pre></div>\n<p>However, I also want to work with the concept of a topological basis,<br>\nand add \"HOL-Analysis.Elementary_Topology\" to the list of imports.<br>\nThis seems to break my definition of the lower topology - <code>class</code>,<br>\n<code>subclass</code>, <code>unfolding</code> and <code>end</code> are all underlined in red, and I<br>\nhave the following error message:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">Type</span> <span class=\"n\">unification</span> <span class=\"n\">failed</span><span class=\"o\">:</span> <span class=\"n\">Variable</span> <span class=\"n n-Type\">'a</span><span class=\"o\">::</span><span class=\"n\">lower_topology</span> <span class=\"n\">not</span> <span class=\"n\">of</span> <span class=\"n\">sort</span>\n<span class=\"n\">topological_space</span>\n\n<span class=\"n\">Failed</span> <span class=\"n\">to</span> <span class=\"n\">meet</span> <span class=\"n\">type</span> <span class=\"n\">constraint</span><span class=\"o\">:</span>\n\n<span class=\"n\">Term</span><span class=\"o\">:</span>  <span class=\"kp\">open</span> <span class=\"o\">::</span> <span class=\"o\">??</span><span class=\"n n-Type\">'a</span> <span class=\"n\">set</span> <span class=\"err\">⇒</span> <span class=\"n\">bool</span>\n<span class=\"n\">Type</span><span class=\"o\">:</span>  <span class=\"n n-Type\">'a</span> <span class=\"n\">set</span> <span class=\"err\">⇒</span> <span class=\"n\">bool</span>\n\n<span class=\"n\">Coercion</span> <span class=\"n\">Inference</span><span class=\"o\">:</span>\n\n<span class=\"n\">Local</span> <span class=\"n\">coercion</span> <span class=\"n\">insertion</span> <span class=\"n\">on</span> <span class=\"n\">the</span> <span class=\"n\">operand</span> <span class=\"n\">failed</span><span class=\"o\">:</span>\n<span class=\"n\">Variable</span> <span class=\"n n-Type\">'a</span><span class=\"o\">::</span><span class=\"n\">lower_topology</span> <span class=\"n\">not</span> <span class=\"n\">of</span> <span class=\"n\">sort</span> <span class=\"n\">topological_space</span>\n\n<span class=\"n\">Now</span> <span class=\"n\">trying</span> <span class=\"n\">to</span> <span class=\"n\">infer</span> <span class=\"n\">coercions</span> <span class=\"n\">globally.</span>\n\n<span class=\"n\">Coercion</span> <span class=\"n\">inference</span> <span class=\"n\">failed</span><span class=\"o\">:</span>\n<span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">unify</span> <span class=\"n\">invariant</span> <span class=\"n\">arguments</span>\n<span class=\"n\">Variable</span> <span class=\"n n-Type\">'a</span><span class=\"o\">::</span><span class=\"n\">lower_topology</span> <span class=\"n\">not</span> <span class=\"n\">of</span> <span class=\"n\">sort</span> <span class=\"n\">topological_space</span>\n</code></pre></div>\n<p>The same problem occurs if I omit importing <code> HOL.Topological_Spaces</code><br>\nand just import  \"HOL-Analysis.Elementary_Topology\".</p>\n<p>I'm afraid it's beyond my grasp of Isabelle's type system to<br>\nunderstand what is happening here?</p>\n<p>Thanks for any suggestions,</p>\n<p>Christopher</p>",
        "id": 294830015,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661246184
    },
    {
        "content": "<p>From: Christopher Hoskin &lt;<a href=\"mailto:christopher.hoskin@gmail.com\">christopher.hoskin@gmail.com</a>&gt;<br>\nDear Manuel,</p>\n<p>Thanks for the suggestion. I get the same error if I import<br>\n\"HOL-Analysis.Analysis\" (plus a huge performance hit - the time it<br>\ntakes Isabelle to be ready to validate my session goes from about<br>\n20sec to 8 minutes).</p>\n<p>My approach to the lower topology is modeled on the definition of the<br>\n<code>order_topology</code> in the <code>Topological_spaces.thy</code> file.</p>\n<p>Christopher</p>",
        "id": 294830057,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661246203
    },
    {
        "content": "<p>From: Christopher Hoskin &lt;<a href=\"mailto:christopher.hoskin@gmail.com\">christopher.hoskin@gmail.com</a>&gt;<br>\nDear Wenda,</p>\n<p>Thank you for your lucid explanation. Your solution does indeed work.<br>\nThe <code>subclass topological_space...</code> block can then also be removed<br>\nsince this is now in the definition.</p>\n<p>Best wishes,</p>\n<p>Christopher</p>",
        "id": 294830083,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661246215
    }
]