[
    {
        "content": "<p>From: Tjark Weber &lt;<a href=\"mailto:tjark.weber@it.uu.se\">tjark.weber@it.uu.se</a>&gt;<br>\nDear BNF experts,</p>\n<p>HOL/Library/Countable_Set_Type.thy registers 'a cset, the type of<br>\ncountable sets with elements from 'a, as a BNF.</p>\n<p>I was trying to generalize this to the type of sets whose cardinality is<br>\nbounded by some index type 'i. This type may be defined, e.g., as<br>\nfollows:</p>\n<p>typedef ('i,'a) iset = \"{A :: 'a set. ∃f::'i⇒'a. A ⊆ range f}\"<br>\n  by auto</p>\n<p>Of course, 'a should be live, while 'i is dead. However, with the<br>\nobvious definitions for map, sets, bd, wits, and rel,</p>\n<p>bnf \"('i,'a) iset\"</p>\n<p>results in a proof obligation for the relator that I can only prove if<br>\nthe cardinality of 'i × 'i is no greater than the cardinality of 'i.<br>\nObviously, this only holds when 'i is infinite.</p>\n<p>Could you maybe give some intuition for why this condition is<br>\nnecessary, and more generally for what the properties are that the<br>\nrelator needs to satisfy? The documentation, as far as I can see, is<br>\nrelatively silent on this.</p>\n<p>Best,<br>\nTjark</p>",
        "id": 294329163,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660929654
    },
    {
        "content": "<p>From: Dmitriy Traytel &lt;<a href=\"mailto:traytel@in.tum.de\">traytel@in.tum.de</a>&gt;<br>\nHi Tjark,</p>\n<p>coincidentally, we (Johannes Hölzl, Andreas Lochbihler, and I) needed to <br>\nperform the same generalization for a formalization of the probabilistic <br>\nhierarchy [1]. The resulting BNF instance is attached (where we use the <br>\nlibrary of cardinals instead of working with surjections). Indeed, we <br>\nalso notice that the bounded set type is a BNF only for infinite bound <br>\ntypes (or as an exception for at-most-two-element sets, which is not <br>\ncovered in the attached theory, but I can send you another one if you like).</p>\n<p>The relator condition is equivalent to the condition on functor (F, <br>\nFmap) to preserve weak pullback (not sure if this helps). A rough <br>\nintuition is that BNFs must be closed under zip, where the zip is some <br>\nfunction that takes two elements x y related by the relator \"rel \\&lt;top&gt; <br>\nx y\" and returns you the element whose existence is guaranteed by the <br>\nrelator (see e.g. the list.in_rel property)</p>\n<p>rel R x y &lt;-&gt; ?z. set z &lt;= {(x,y). R x y} &amp; map fst z = x &amp; map snd z = y</p>\n<p>For plain lists one obtains the usual zip in that way; for sets the zip <br>\nis the Cartesian product. Hence for bounded sets |A \\times A| =o |A| is <br>\nrequired. For some reason this intuition fails for sets of at most <br>\ncardinality 2---I still need to understand why.</p>\n<p>Anyway, I'm curious to hear about your application of bounded sets.</p>\n<p>Hope this helps,<br>\nDmitriy</p>\n<p>[1] Bartels, Sokolova, de Vink, A hierarchy of probabilistic system <br>\ntypes, TCS, 2004, <a href=\"http://dx.doi.org/10.1016/j.tcs.2004.07.019\">http://dx.doi.org/10.1016/j.tcs.2004.07.019</a><br>\n<a href=\"/user_uploads/14278/s9eVsv_XMYhfFOR_qCjkjtrz/Bounded_Set.thy\">Bounded_Set.thy</a></p>",
        "id": 294329181,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660929661
    },
    {
        "content": "<p>From: Andrei Popescu &lt;<a href=\"mailto:A.Popescu@mdx.ac.uk\">A.Popescu@mdx.ac.uk</a>&gt;<br>\nHi Tjark,</p>\n<blockquote>\n<blockquote>\n<p>more generally for what the properties are that the relator needs to satisfy?</p>\n</blockquote>\n</blockquote>\n<p>Let me just add to Dmitriy's excellent answer a simple intuition that might also help: A (unary) BNF is essentially a functor (F,Fmap) on the category of sets <em>and functions</em>, equipped with a natural transformation Fset that returns the \"atoms\" of the \"compound\" elements in the image of F.  Given these data, namely, (F,Fmap,Fset), there is a natural way to extend it to a functor (F,Frel) on the category of sets <em>and relations</em> -- this is according to the formula shown by Dmitriy:</p>\n<p>Frel R x y &lt;-&gt; ? z. Fset z &lt;= {(x,y). R x y} &amp; Fmap fst z = x &amp; Fmap snd z = y</p>\n<p>If you draw a diagram, you will see that this is the \"obvious\" way to extend Fmap to Frel (in the presence of Fset).<br>\nNow, we simply require that (F,Frel) be also a functor.</p>\n<p>All the best,<br>\n  Andrei</p>\n<hr>\n<p>Please note that Middlesex University's preferred way of receiving all correspondence is via email in line with our Environmental Policy. All incoming post to Middlesex University is opened and scanned by our digital document handler, CDS, and then emailed to the recipient.</p>\n<p>If you do not want your correspondence to Middlesex University processed in this way please email the recipient directly. Parcels, couriered items and recorded delivery items will not be opened or scanned by CDS.  There are items which are \"exceptions\" which will be opened by CDS but will not be scanned a full list of these can be obtained by contacting the University.</p>",
        "id": 294329254,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660929685
    },
    {
        "content": "<p>From: Tjark Weber &lt;<a href=\"mailto:tjark.weber@it.uu.se\">tjark.weber@it.uu.se</a>&gt;<br>\nDmitriy, Andrei,</p>\n<p>Thank you for your answers. Perhaps the theory that you kindly attached<br>\ncould be added to the Isabelle/HOL library at some point.</p>\n<p>On Sat, 2015-03-14 at 08:41 +0100, Dmitriy Traytel wrote:</p>\n<blockquote>\n<p>rel R x y &lt;-&gt; ?z. set z &lt;= {(x,y). R x y} &amp; map fst z = x &amp; map snd z = y</p>\n<p>For plain lists one obtains the usual zip in that way; for sets the zip <br>\nis the Cartesian product. Hence for bounded sets |A \\times A| =o |A| is <br>\nrequired. For some reason this intuition fails for sets of at most <br>\ncardinality 2---I still need to understand why.</p>\n</blockquote>\n<p>Note that for sets of cardinality at most 2, the relator condition<br>\nrequires R to contain a bijection.</p>\n<blockquote>\n<p>Anyway, I'm curious to hear about your application of bounded sets.</p>\n</blockquote>\n<p>I am trying to model an infinitary logic, where one may form the<br>\nconjunction of a set of formulas to obtain a new formula.</p>\n<p>Best,<br>\nTjark</p>",
        "id": 294329271,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660929691
    },
    {
        "content": "<p>From: Dmitriy Traytel &lt;<a href=\"mailto:traytel@in.tum.de\">traytel@in.tum.de</a>&gt;<br>\nHi Tjark,</p>\n<p>On 14.03.2015 13:33, Tjark Weber wrote:</p>\n<blockquote>\n<p>Dmitriy, Andrei,</p>\n<p>Thank you for your answers. Perhaps the theory that you kindly attached<br>\ncould be added to the Isabelle/HOL library at some point.<br>\nI'll add it next week.</p>\n</blockquote>\n<blockquote>\n<p>On Sat, 2015-03-14 at 08:41 +0100, Dmitriy Traytel wrote:</p>\n<blockquote>\n<p>rel R x y &lt;-&gt; ?z. set z &lt;= {(x,y). R x y} &amp; map fst z = x &amp; map snd z = y</p>\n<p>For plain lists one obtains the usual zip in that way; for sets the zip<br>\nis the Cartesian product. Hence for bounded sets |A \\times A| =o |A| is<br>\nrequired. For some reason this intuition fails for sets of at most<br>\ncardinality 2---I still need to understand why.<br>\nNote that for sets of cardinality at most 2, the relator condition<br>\nrequires R to contain a bijection.<br>\nRight, thanks.</p>\n</blockquote>\n</blockquote>\n<blockquote>\n<blockquote>\n<p>Anyway, I'm curious to hear about your application of bounded sets.<br>\nI am trying to model an infinitary logic, where one may form the<br>\nconjunction of a set of formulas to obtain a new formula.<br>\nAh, interesting.</p>\n</blockquote>\n</blockquote>\n<p>Dmitriy</p>",
        "id": 294329302,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660929698
    },
    {
        "content": "<p>From: Dmitriy Traytel &lt;<a href=\"mailto:traytel@in.tum.de\">traytel@in.tum.de</a>&gt;<br>\nSee now Isabelle/7325ffa35038 .</p>\n<p>I could not put the theory in Library, since it depends on the <br>\ncardinals. That's why it is now part of the HOL-Cardinals session.</p>\n<p>Dmitriy</p>",
        "id": 294329935,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660929900
    }
]