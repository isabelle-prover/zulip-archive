[
    {
        "content": "<p>From: \"Yannick Duchêne (Hibou57 )\" &lt;<a href=\"mailto:yannick_duchene@yahoo.fr\">yannick_duchene@yahoo.fr</a>&gt;<br>\nHi all once again,</p>\n<p>I feel so poor and miserable at understanding how “isabelle make” works, I  <br>\nbelieve I should seek for a tutorial about Isabelle variant of make. I've  <br>\nread “~~/doc/system.pdf” multiple times, but I'm still failing to figure  <br>\nwhat's wrong.</p>\n<p>Example of what's going wrong:</p>\n<p>* When I've updated the theory file and run “isabelle make”, it says  <br>\n“nothing to do”</p>\n<p>* Consequence of the above, I have to always invoke “isabelle make clean”<br>\n     prior to “isabelle make TARGET”</p>\n<p>* BASE_DEPENDENCIES seems to be ignored<br>\n   * Produced PDF files always go in an hidden directory beneath  <br>\n$HOME/.isabelle</p>\n<p>* Seems “-V document=theory,proof,ML” specified for USEDIR is ignored in<br>\n     IsaMakefile and always produce both “document.pdf” and “outline.pdf”</p>\n<p>* Specifying the “-b” option for USEDIR, it always complains ROOT.ML is  <br>\nmissing<br>\n     (an SML program ends with an I/O error exception)</p>\n<p>* and so on</p>\n<p>I'm able to run the basic “isabelle mkdir MySession; isabelle make” with  <br>\nan updated ROOT.ML, fine, but any attempt to go beyond that, fails.</p>",
        "id": 294222033,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660898002
    },
    {
        "content": "<p>From: \"Yannick Duchêne (Hibou57 )\" &lt;<a href=\"mailto:yannick_duchene@yahoo.fr\">yannick_duchene@yahoo.fr</a>&gt;<br>\nLe Tue, 07 Aug 2012 22:48:48 +0200, Makarius  <br>\n&lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; a écrit:</p>\n<blockquote>\n<p>On Tue, 7 Aug 2012, Yannick Duchêne (Hibou57) wrote:</p>\n<blockquote>\n<p>I feel so poor and miserable at understanding how “isabelle make” works,<br>\nI believe I should seek for a tutorial about Isabelle variant of make.<br>\nI've read “~~/doc/system.pdf” multiple times, but I'm still failing to<br>\nfigure what's wrong.</p>\n</blockquote>\n<p>Basically the chaper 3 of system.pdf is the tutorial.  Isabelle make is  <br>\nin<br>\nfact easy to explain 100% in 1 line, by giving its implementation:</p>\n<p>exec make -f IsaMakefile \"$@\"</p>\n<p>The rest of the complexity is in \"make\" and \"IsaMakefile\".  There are  <br>\nmany<br>\nversions of \"make\", and all of them are very complex.  The IsaMakefile  <br>\ncan<br>\nin principle do whatever it pleases with the available tools, notably<br>\n\"isabelle usedir\" and \"isabelle document\", but one should imitate  <br>\nexisting<br>\nexamples closely.</p>\n<p>BTW, this is the last release with the canon of isabelle mkdir / usedir /<br>\nmake / makeall tools -- I am working on the replacement since a couple of<br>\nweeks already, after more than 15 years of suffering from isabelle make<br>\nmyself.</p>\n</blockquote>\n<p>OK, I will wait that couple of weeks and learn about the new design (P.S.  <br>\nMe too, I don't enjoy the *NIX make command)</p>\n<blockquote>\n<blockquote>\n<p>Example of what's going wrong:</p>\n<ul>\n<li>When I've updated the theory file and run “isabelle make”, it says<br>\n“nothing to do”</li>\n</ul>\n</blockquote>\n<p>This indicates that your dependencies are not properly declare.  The bad<br>\nthing about \"make\" is that you have to do it yourself, but variants of  <br>\nGNU<br>\nmake allow approxitive <em>.thy document/</em>.tex for example.</p>\n<blockquote>\n<ul>\n<li>BASE_DEPENDENCIES seems to be ignored</li>\n</ul>\n</blockquote>\n<p>What are BASE_DEPENDENCIES?</p>\n</blockquote>\n<p>Somewhere, in a ~~/doc/*.pdf documents, there was a sentence directing to  <br>\n~~/src/HOL/IsaMakefile. I saw this definition, and as I had troubles with  <br>\ndependencies, I though the answer was this. So I was wrong, OK.</p>\n<blockquote>\n<blockquote>\n<ul>\n<li>Produced PDF files always go in an hidden directory beneath<br>\n$HOME/.isabelle</li>\n</ul>\n</blockquote>\n<p>You can say \"usedir -d false -D generated\" to dump the sources in<br>\n\"generated/\" relatively to the session sources, and then run \"isabelle<br>\ndocument\" on the result.</p>\n</blockquote>\n<p>So I have to generate the PDF documents separately, OK.</p>\n<blockquote>\n<blockquote>\n<ul>\n<li>Seems “-V document=theory,proof,ML” specified for USEDIR is ignored in<br>\n  IsaMakefile and always produce both “document.pdf” and “outline.pdf”</li>\n</ul>\n</blockquote>\n<p>Did you actually pass it to the usedir invocation, not just define a<br>\nUSEDIR variable in the IsaMakefile?</p>\n</blockquote>\n<p>I did it with the USEDIR variable, as though it was the most recommanded  <br>\nway.</p>\n<blockquote>\n<blockquote>\n<ul>\n<li>Specifying the “-b” option for USEDIR, it always complains ROOT.ML is<br>\nmissing</li>\n</ul>\n</blockquote>\n<p>Better avoid the -b option; for historic reasons it assumes a quite<br>\ndifferent directory layout: everything in \".\" instead of the session<br>\ndirectory.</p>\n</blockquote>\n<p>I see. I was misleaded by the Example vs Build and though Example was not  <br>\nintended for regular use.</p>\n<blockquote>\n<blockquote>\n<ul>\n<li>and so on</li>\n</ul>\n</blockquote>\n<p>The problems of \"make\" are indeed endless.  In the next release, it will<br>\nno longer be used for Isabelle.</p>\n<blockquote>\n<p>I'm able to run the basic “isabelle mkdir MySession; isabelle make”  <br>\nwith an<br>\nupdated ROOT.ML, fine, but any attempt to go beyond that, fails.</p>\n</blockquote>\n<p>Try staying closer to the generated IsaMakefile.  Uncomment the -D<br>\ngenerated option.  Add some <em>.thy document/</em>.tex dependencies.</p>\n<p>Makarius</p>\n</blockquote>\n<p>Will do that (using the proper Makefile way I guess), thanks for you  <br>\nvaluable comments.</p>",
        "id": 294222077,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660898026
    },
    {
        "content": "<p>From: \"Yannick Duchêne (Hibou57 )\" &lt;<a href=\"mailto:yannick_duchene@yahoo.fr\">yannick_duchene@yahoo.fr</a>&gt;<br>\nAfter Markus's comments,</p>\n<p>Attached document, is an IsaMakefile template. Tested with GNU make (may  <br>\nnot work with other make variant). It's simple enough, you just have to  <br>\nchange “Isa_Test” to match your session name. It rebuilds the session  <br>\nwhenever a theory file has changed, builds “document.pdf”, and IsaMakefile  <br>\nhas a dependence to it‑self, so that build is considered dirty if ever you  <br>\nchange any thing in IsaMakefile.</p>\n<p>As usual, don't forget too, to setup your ROOT.ML file properly.<br>\n<a href=\"/user_uploads/14278/EshwkCTWHN1e6wwohXzrHR_b/IsaMakefile\">IsaMakefile</a></p>",
        "id": 294222085,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660898033
    },
    {
        "content": "<p>From: \"Yannick Duchêne (Hibou57 )\" &lt;<a href=\"mailto:yannick_duchene@yahoo.fr\">yannick_duchene@yahoo.fr</a>&gt;<br>\nSorry, please read “Makarius's comments” (was not the sole time I did this  <br>\nerror)</p>",
        "id": 294222091,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660898039
    }
]