[
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@inria.fr\">jasmin.blanchette@inria.fr</a>&gt;<br>\nFor the record, I have been running into these issues too on my Mac for the past several months. I have also showed them to Makarius during ITP, so it should be on his radar.</p>\n<p>Jasmin</p>",
        "id": 294684940,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661177646
    },
    {
        "content": "<p>From: Manuel Eberl &lt;<a href=\"mailto:eberlm@in.tum.de\">eberlm@in.tum.de</a>&gt;<br>\nI also noticed this. Additionally, it seems that the IDE gets very<br>\nunresponsive if you change stuff in an \"early\" theory in the dependency<br>\ntree. Sometimes it's so bad that I have to restart the entire thing.</p>\n<p>Manuel</p>",
        "id": 294684952,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661177652
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 31/10/16 18:37, Mathias Fleury wrote:</p>\n<blockquote>\n<p>Steps to reproduce:<br>\nRun isabelle such that it loads some theories, e.g.:<br>\n   isabelle jedit -l Pure src/HOL/List.thy</p>\n<p>Wait until all of the theories are processed. </p>\n<p>Scroll in the buffer List.</p>\n<p>Isabelle/jEdit first starts processing List and then restarts processing the buffers from the beginning.</p>\n<p>Instead of waiting that all theories are processed, one can also do some random clicking in the List buffer.</p>\n</blockquote>\n<p>I still cannot reproduce it -- I've seen it last summer on the machine<br>\nof Jasmin once, but never anywhere else.</p>\n<p>Is that really a fresh Isabelle2016-1-RC1 without any special options or<br>\npreferences?</p>\n<blockquote>\n<p>The described reprocessing of the files is done only once. It appears on both macOS (running Sierra) and Linux (archlinux, so another unsupported OS…).</p>\n</blockquote>\n<p>Arch Linux is just untested, but not unsupported. The reason for that is<br>\ndue to the nature of it being individually configured in every respect.<br>\nIt means anything could go wrong, but Arch users are the master of their<br>\nsystem and can make it work.</p>\n<p>In practice, I have never heard of a specific Arch Linux problem with<br>\nIsabelle, although I occasionally see users of that platform.</p>\n<blockquote>\n<p>Is there anyway to give more informations?</p>\n</blockquote>\n<p>Any particular jEdit plugins and preferences. In particular, what is the<br>\nLook-and-feel?</p>\n<p>If it is reliably reproducible for you, you can also make a bisection on<br>\nthe repository to see where the problem is located in the history.</p>\n<p>Makarius</p>",
        "id": 294699624,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178744
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThis sounds more like the normal situation when the JVM heap fills up --<br>\nthis is inherent in JVM memory menagement.  The default configuration<br>\nfor x86_64 platforms has -Xmx2560m in a platform-specific place. A<br>\ntypical value is -Xmx4096m and more can be tried depending on the hardware.</p>\n<p>E.g. the new HOL-Analysis session is so big that it easily exhausts the<br>\ndefaults. I have tried it on the 32bit Windows version, where the JVM is<br>\nconfined to 1 or 1.5 GB, and it locks up almost immediately due to<br>\noverfull heap.</p>\n<p>Here is cumulative information from NEWS for Isabelle2016 and<br>\nIsabelle2016-1:</p>\n<ul>\n<li>\n<p>Java runtime options are determined separately for 32bit vs. 64bit<br>\nplatforms as follows.</p>\n<ul>\n<li>\n<p>Isabelle desktop application: platform-specific files that are<br>\n  associated with the main app bundle</p>\n</li>\n<li>\n<p>isabelle jedit: settings<br>\n  JEDIT_JAVA_SYSTEM_OPTIONS<br>\n  JEDIT_JAVA_OPTIONS32 vs. JEDIT_JAVA_OPTIONS64</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Many Isabelle tools that require a Java runtime system refer to the<br>\nsettings ISABELLE_TOOL_JAVA_OPTIONS32 / ISABELLE_TOOL_JAVA_OPTIONS64,<br>\ndepending on the underlying platform.</p>\n</li>\n</ul>\n<p>Instead of adding more options next time, I will try once again to tune<br>\nthe whole system such that it can carry even bigger application. That<br>\ngame is a variant of Tetris, but so far it could always be continued one<br>\nstep further.</p>\n<p>Makarius</p>",
        "id": 294699842,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178812
    },
    {
        "content": "<p>From: Mathias Fleury &lt;<a href=\"mailto:mathias.fleury12@gmail.com\">mathias.fleury12@gmail.com</a>&gt;<br>\nHello Makarius and Isabelle list,</p>\n<p>@Jasmin and Manuel: a possible workaround consists in deactivating the auto_resolve in the Isabelle options.</p>\n<p>Now the technical details:</p>\n<blockquote>\n<p>On 1 Nov 2016, at 22:32, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<p>If it is reliably reproducible for you, you can also make a bisection on<br>\nthe repository to see where the problem is located in the history.</p>\n</blockquote>\n<p>I've finally done it and the issue is much older than had I expected: it goes back to commit <a href=\"https://isabelle.in.tum.de/repos/isabelle/rev/60916\">https://isabelle.in.tum.de/repos/isabelle/rev/60916</a> &lt;<a href=\"https://isabelle.in.tum.de/repos/isabelle/rev/60916\">https://isabelle.in.tum.de/repos/isabelle/rev/60916</a>&gt; and more precisely to the following part of the change:</p>\n<ul>\n<li>if (change.deps_changed &amp;&amp; PIDE.options.bool(\"jedit_auto_load\")) PIDE.deps_changed()</li>\n<li>if (PIDE.options.bool(\"jedit_auto_load\") &amp;&amp; change.deps_changed ||</li>\n<li>PIDE.options.bool(\"jedit_auto_resolve\") &amp;&amp; change.version.nodes.undefined_blobs.nonEmpty)</li>\n<li>PIDE.deps_changed()</li>\n</ul>\n<p>jedit_auto_resolve is activated (both in this version by default and in my setup). If there are non-processed blobs (i.e. a lot of SML files here) and I click in the List buffer, the processing restarts. I have no idea why the reprocessing happens only once (i.e. there are no undefined_blobs anymore…).</p>\n<blockquote>\n<blockquote>\n<p>Is there anyway to give more informations?</p>\n</blockquote>\n<p>Any particular jEdit plugins and preferences. In particular, what is the<br>\nLook-and-feel?<br>\n</p>\n</blockquote>\n<p>Having a look at this part of the question showed me that opening and closing the option panel triggers the same reprocessing. Or even just activating the auto_resolve option.</p>\n<ul>\n<li>Mac OSX Look-and-feel.</li>\n<li>No plugin.</li>\n</ul>\n<p>Is there a good way to give the list of the Isabelle-relevant options?</p>\n<p>Mathias</p>\n<blockquote>\n<p>On 31/10/16 18:37, Mathias Fleury wrote:</p>\n<blockquote>\n<p>Steps to reproduce:<br>\nRun isabelle such that it loads some theories, e.g.:<br>\n  isabelle jedit -l Pure src/HOL/List.thy</p>\n<p>Wait until all of the theories are processed. </p>\n<p>Scroll in the buffer List.</p>\n<p>Isabelle/jEdit first starts processing List and then restarts processing the buffers from the beginning.</p>\n<p>Instead of waiting that all theories are processed, one can also do some random clicking in the List buffer.</p>\n</blockquote>\n<p>I still cannot reproduce it -- I've seen it last summer on the machine<br>\nof Jasmin once, but never anywhere else.</p>\n<p>Is that really a fresh Isabelle2016-1-RC1 without any special options or<br>\npreferences?</p>\n<blockquote>\n<p>The described reprocessing of the files is done only once. It appears on both macOS (running Sierra) and Linux (archlinux, so another unsupported OS…).</p>\n</blockquote>\n<p>Arch Linux is just untested, but not unsupported. The reason for that is<br>\ndue to the nature of it being individually configured in every respect.<br>\nIt means anything could go wrong, but Arch users are the master of their<br>\nsystem and can make it work.</p>\n<p>In practice, I have never heard of a specific Arch Linux problem with<br>\nIsabelle, although I occasionally see users of that platform.</p>\n<blockquote>\n<p>Is there anyway to give more informations?</p>\n</blockquote>\n<p>Any particular jEdit plugins and preferences. In particular, what is the<br>\nLook-and-feel?</p>\n<p>Makarius</p>\n</blockquote>",
        "id": 294700204,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178935
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThanks for doing the bisection.</p>\n<p>The change above is from August 2015. There are more changes where<br>\njedit_auto_resolve fluctuates back and forth, without clear conclusion:<br>\nsee occurrences of \"auto\" in<br>\n<a href=\"https://isabelle.in.tum.de/repos/isabelle/log/857acb970dfa/src/Tools/jEdit/etc/options\">https://isabelle.in.tum.de/repos/isabelle/log/857acb970dfa/src/Tools/jEdit/etc/options</a></p>\n<p>It is a genuine \"feature\": something added on the spot, without being<br>\nproperly thought out. I had it on my list over some months in 2015, but<br>\ndid not revisit it.</p>\n<p>I will make one round of looking carefully how it behaves at the moment,<br>\nand then see if it is put into proper shape for the release, or removed<br>\noutright.</p>\n<p>There is a bigger plan in the pipeline, to reform the management of all<br>\nsource files for a PIDE session. When that happens, both jedit_auto_load<br>\nand jedit_auto_resolve become obsolete.</p>\n<p>Makarius</p>",
        "id": 294700269,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178959
    },
    {
        "content": "<p>From: Mathias Fleury &lt;<a href=\"mailto:mathias.fleury12@gmail.com\">mathias.fleury12@gmail.com</a>&gt;</p>\n<blockquote>\n<p>On 8 Nov 2016, at 12:26, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<p>On 08/11/16 08:13, Mathias Fleury wrote:</p>\n<blockquote>\n<p>On 1 Nov 2016, at 22:32, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a></p>\n<blockquote>\n<p>&lt;mailto:<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;&gt; wrote:</p>\n<p>If it is reliably reproducible for you, you can also make a bisection on<br>\nthe repository to see where the problem is located in the history.</p>\n</blockquote>\n<p>I've finally done it and the issue is much older than had I expected: it<br>\ngoes back to<br>\ncommit <a href=\"https://isabelle.in.tum.de/repos/isabelle/rev/60916\">https://isabelle.in.tum.de/repos/isabelle/rev/60916</a> and more<br>\nprecisely to the following part of the change:</p>\n<ul>\n<li>if (change.deps_changed &amp;&amp; PIDE.options.bool(\"jedit_auto_load\"))<br>\nPIDE.deps_changed() + if (PIDE.options.bool(\"jedit_auto_load\") &amp;&amp;<br>\nchange.deps_changed || + PIDE.options.bool(\"jedit_auto_resolve\") &amp;&amp;<br>\nchange.version.nodes.undefined_blobs.nonEmpty) + PIDE.deps_changed()</li>\n</ul>\n<p>jedit_auto_resolve is activated (both in this version by default and in<br>\nmy setup). If there are non-processed blobs (i.e. a lot of SML files<br>\nhere) and I click in the List buffer, the processing restarts. I have no<br>\nidea why the reprocessing happens only once (i.e. there are no<br>\nundefined_blobs anymore…).</p>\n</blockquote>\n<p>Thanks for doing the bisection.</p>\n<p>The change above is from August 2015. There are more changes where<br>\njedit_auto_resolve fluctuates back and forth, without clear conclusion:<br>\nsee occurrences of \"auto\" in<br>\n<a href=\"https://isabelle.in.tum.de/repos/isabelle/log/857acb970dfa/src/Tools/jEdit/etc/options\">https://isabelle.in.tum.de/repos/isabelle/log/857acb970dfa/src/Tools/jEdit/etc/options</a> &lt;<a href=\"https://isabelle.in.tum.de/repos/isabelle/log/857acb970dfa/src/Tools/jEdit/etc/options\">https://isabelle.in.tum.de/repos/isabelle/log/857acb970dfa/src/Tools/jEdit/etc/options</a>&gt;</p>\n</blockquote>\n<p>Indeed, but the culprit is the change in the if condition.</p>\n<p>I looked a bit more at it and I failed to understand how the undefined_blobs is emptied when jedit_auto_resolve triggers a reprocessing. I don't even understand why this should happen at all: as far as I got it, the blobs are ML files and theories that have already been loaded in the session (I find the name loaded_theories for the loaded sessions very confusing by the way). So why should a reprocessing be triggered if there is no change in these files?</p>\n<p>Mathias</p>\n<blockquote>\n<p>It is a genuine \"feature\": something added on the spot, without being<br>\nproperly thought out. I had it on my list over some months in 2015, but<br>\ndid not revisit it.</p>\n<p>I will make one round of looking carefully how it behaves at the moment,<br>\nand then see if it is put into proper shape for the release, or removed<br>\noutright.</p>\n</blockquote>\n<blockquote>\n<p>There is a bigger plan in the pipeline, to reform the management of all<br>\nsource files for a PIDE session. When that happens, both jedit_auto_load<br>\nand jedit_auto_resolve become obsolete.</p>\n<p>Makarius<br>\n</p>\n</blockquote>",
        "id": 294700362,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178978
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThis turned out rather unspectacular. It is just a feature that was not<br>\nfully finished in 2015.</p>\n<p>See now<br>\n<a href=\"https://bitbucket.org/isabelle_project/isabelle-release/commits/812c22e556b9\">https://bitbucket.org/isabelle_project/isabelle-release/commits/812c22e556b9</a></p>\n<p>Makarius</p>",
        "id": 294700487,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179020
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 08/11/16 15:42, Mathias Fleury wrote:</p>\n<blockquote>\n<p>I looked a bit more at it and I failed to understand how the<br>\nundefined_blobs is emptied when jedit_auto_resolve triggers a<br>\nreprocessing.</p>\n</blockquote>\n<p>Blobs start out as undefined. Resources.parse_changes and<br>\nJEdit_Resources.commit is the place where incoming edits may request<br>\nfurther resolution of dependencies -- via PIDE.deps_changed(). Thus<br>\nblobs are loaded eventually and become defined in a later edit.</p>\n<p>The problem was caused by the loss of a PIDE.deps_changed() event in a<br>\nsituation of unfinished pipelining of edits. Then after scrolling, which<br>\nis an edit of the document perspective, that was finished and indirectly<br>\ncaused some theories to be reprocessed.</p>\n<p>The deeper conceptual problem behind this: undefined blobs are silently<br>\nloaded from the file-system by the prover. This was done on purpose, in<br>\norder to be able to load Isabelle/HOL into the Prover IDE, on a small<br>\nmachine with \"only\" 8GB. Here the blobs are not part of the PIDE<br>\ndocument content.</p>\n<p>At some point this all needs to be revisited, to make it simpler and<br>\nmore scalable by default, without strange options that can cause problems.</p>\n<blockquote>\n<p>I find the name loaded_theories for the loaded sessions very confusing by the way.</p>\n</blockquote>\n<p>I don't understand the confusion. The background session image has<br>\ncertain theories that are already loaded (and cannot be edited). This<br>\nset is called loaded_theories.</p>\n<p>Makarius</p>",
        "id": 294700504,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179026
    }
]