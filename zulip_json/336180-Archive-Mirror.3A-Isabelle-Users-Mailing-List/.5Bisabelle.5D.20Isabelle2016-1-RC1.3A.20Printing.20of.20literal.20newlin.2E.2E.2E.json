[
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:andreas.lochbihler@inf.ethz.ch\">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>\nDear Isabelle developers,</p>\n<p>The code generator seems to print literal strings (String.literal) differently in <br>\nIsabelle2016-1-RC1 than it did in Isabelle2016, at least for the target language Scala.</p>\n<p>Here's a minimal example:</p>\n<p>definition \"newline = STR [Char Nibble0 NibbleB]\" (* Isabelle2016 *)<br>\ndefinition \"newline = STR ''⏎''\"                  (* Isabelle2016-1-RC1 *)</p>\n<p>export_code newline in Scala</p>\n<p>In Isabelle2016, the newline constant is printed as</p>\n<p>def newline: String = \"\\12\"</p>\n<p>in octal notation. In Isabelle2016-1-RC1, it is printed as</p>\n<p>def newline: String = \"\\u0012\"</p>\n<p>which uses hexadecimal notation, but the numbers are still the same, so this is actually <br>\nthe character at codepoint 18. The same problem occurs for other characters that are <br>\noutput in \\uNNNN notation.</p>\n<p>In Haskell, OCaml, and SML, a newline gets pretty-printed as \"\\n\". Why can't we just use <br>\nthis also for Scala?</p>\n<p>Andreas</p>",
        "id": 294696479,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178247
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn 01/11/16 16:44, Andreas Lochbihler wrote:</p>\n<blockquote>\n<p>definition \"newline = STR ''⏎''\"                  (* Isabelle2016-1-RC1 *)</p>\n<p>export_code newline in Scala</p>\n<p>In Isabelle2016-1-RC1, it is printed as</p>\n<p>def newline: String = \"\\u0012\"</p>\n<p>which uses hexadecimal notation, but the numbers are still the same, so<br>\nthis is actually the character at codepoint 18. The same problem occurs<br>\nfor other characters that are output in \\uNNNN notation.</p>\n</blockquote>\n<p>Interestingly, the deprecation of Scala's octal \\NNN in favour of<br>\nhexadecimal \\uNNNN was motivated by avoidance of such mistakes<br>\nconcerning the base of numerals.</p>\n<p>I have now changed that here<br>\n<a href=\"https://bitbucket.org/isabelle_project/isabelle-release/commits/bed02fca80b\">https://bitbucket.org/isabelle_project/isabelle-release/commits/bed02fca80b</a></p>\n<p>It shows that there can be errors in formally verified and generated<br>\nprograms, but that should not be surprising to users who understand how<br>\nthings work.</p>\n<blockquote>\n<p>In Haskell, OCaml, and SML, a newline gets pretty-printed as \"\\n\". Why<br>\ncan't we just use this also for Scala?</p>\n</blockquote>\n<p>That uniform, but awkward use of \\u actually exposed the mistake in the<br>\nfirst place.</p>\n<p>Florian Haftmann, who is presently on vacation, is free to refine that<br>\nfurther in post-release development.</p>\n<p>Makarius</p>",
        "id": 294699802,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178797
    }
]