[
    {
        "content": "<p>From: \"Eugene W. Stark\" &lt;<a href=\"mailto:isabelle-users@starkeffect.com\">isabelle-users@starkeffect.com</a>&gt;<br>\nI apologize if I am spamming the list with problems: I am just trying to respond to<br>\nMakarius' admonition to test.</p>\n<p>The issue I just experienced with Isabelle2016-RC2 is a lockup of JEdit in which<br>\nJava is now consuming 100% of CPU.  It started with a \"try\" typed in the edit<br>\nwindow, and for awhile Java had 50% of CPU and poly had (a little less than) the other 50%,<br>\nbut now it is all Java.  FWIW, here is the \"ps\" output showing that the Java process<br>\nis actually Isabelle2016-RC2, as opposed to some random other thing running on my system:</p>\n<p>% ps wwuax | fgrep java<br>\ngene      1009  243 11.8 6501292 2891344 pts/0 Sl   18:00  66:32<br>\n/opt/Isabelle2016-RC2/contrib/jdk/x86_64-linux/jre/bin/java -Disabelle.root=/opt/Isabelle2016-RC2 -server<br>\n-Dfile.encoding=UTF-8 -Disabelle.threads=0 -Duser.language=en -Dawt.useSystemAAFontSettings=on -Dswing.aatext=true<br>\n-Dapple.laf.useScreenMenuBar=true -Dapple.awt.application.name=Isabelle -Xms512m -Xmx2560m -Xss8m<br>\n-Disabelle.jedit_server=Isabelle2016-RC2 -classpath<br>\n/opt/Isabelle2016-RC2/lib/classes/Pure.jar:/opt/Isabelle2016-RC2/contrib/jfreechart-1.0.14-1/lib/iText-2.1.5.jar:/opt/Isabelle2016-RC2/contrib/jfreechart-1.0.14-1/lib/jcommon-1.0.18.jar:/opt/Isabelle2016-RC2/contrib/jfreechart-1.0.14-1/lib/jfreechart-1.0.14.jar:/opt/Isabelle2016-RC2/contrib/jortho-1.0-2/jortho.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/akka-actor_2.11-2.3.10.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/config-1.2.1.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/jline-2.12.1.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-actors-2.11.0.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-actors-migration_2.11-1.1.0.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-compiler.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-continuations-library_2.11-1.0.2.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-continuations-plugin_2.11.7-1.0.2.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-library.jar:/opt/Isabell<br>\n e<br>\n2016-RC2/contrib/scala-2.11.7/lib/scalap-2.11.7.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-parser-combinators_2.11-1.0.4.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-reflect.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-swing_2.11-1.0.2.jar:/opt/Isabelle2016-RC2/contrib/scala-2.11.7/lib/scala-xml_2.11-1.0.4.jar:/opt/Isabelle2016-RC2/contrib/xz-java-1.2-1/lib/xz.jar:/opt/Isabelle2016-RC2/src/Tools/jEdit/dist/jedit.jar<br>\n-splash:/opt/Isabelle2016-RC2/lib/logo/isabelle.gif isabelle.Main</p>\n<p>I've attached a screenshot showing results from \"top\".  As you can see it has been<br>\nsome time and it has not recovered.  The JEdit window is unresponsive, but the rest<br>\nof the system is OK (no problem writing this mail).</p>\n<p>I tried using Eclipse/JVM Monitor to connect to the JVM and see what is going on in there,<br>\nbut it reports that Hotspot is not enabled for that process.  So not much other information<br>\nI can provide, other than that it has occurred.  Normally, if I get lockups, it is poly<br>\nthat consumes all the CPU and JEdit stays responsive.  This seems like something new.</p>\n<p>My system:</p>\n<p>Linux <a href=\"http://home.starkeffect.com\">home.starkeffect.com</a> 3.13.0-74-generic #118-Ubuntu SMP Thu Dec 17 22:52:10 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</p>\n<p>It is an Ubuntu 14.04 LTS with pretty much up-to-date patches.</p>\n<p>- Gene<br>\n<a href=\"/user_uploads/14278/vYk0N3Hzn_lmhvte6Pxp6s4u/Screenshot-from-2016-01-29-182034.png\">Screenshot from 2016-01-29 18:20:34.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/14278/vYk0N3Hzn_lmhvte6Pxp6s4u/Screenshot-from-2016-01-29-182034.png\" title=\"Screenshot from 2016-01-29 18:20:34.png\"><img src=\"/user_uploads/14278/vYk0N3Hzn_lmhvte6Pxp6s4u/Screenshot-from-2016-01-29-182034.png\"></a></div>",
        "id": 294664014,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661171016
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn Fri, 29 Jan 2016, Eugene W. Stark wrote:</p>\n<blockquote>\n<p>The issue I just experienced with Isabelle2016-RC2 is a lockup of JEdit in which<br>\nJava is now consuming 100% of CPU.</p>\n</blockquote>\n<blockquote>\n<p>-Xms512m -Xmx2560m -Xss8m</p>\n<p>I've attached a screenshot showing results from \"top\".  As you can see <br>\nit has been some time and it has not recovered.  The JEdit window is <br>\nunresponsive, but the rest of the system is OK.</p>\n</blockquote>\n<p>Top shows resident memory for \"java\" above 2.7g, so the JVM is in normal <br>\ncrisis situation of full heap space (specified as -Xmx2560m above).</p>\n<p>Depending how much total memory you have, you can make this a bit more <br>\ngenerous, e.g. in the file Isabelle2016-RC2.options64 (if you use the <br>\ntoplevel application).</p>\n<p>I have 32GB and usually give -Xmx4096m to java, which is sufficient for <br>\nall practical situations in Isabelle + AFP.</p>\n<blockquote>\n<p>I tried using Eclipse/JVM Monitor to connect to the JVM and see what is <br>\ngoing on in there, but it reports that Hotspot is not enabled for that <br>\nprocess.  So not much other information I can provide, other than that <br>\nit has occurred.</p>\n</blockquote>\n<p>I don't know anything about Eclipse, and normally use the simple <br>\n\"jconsole\" tool that is included in the JDK distribution.  It sometimes <br>\nhelps to push the \"GC\" button there, but probably not in this situation.</p>\n<blockquote>\n<p>Normally, if I get lockups, it is poly that consumes all the CPU and <br>\nJEdit stays responsive.</p>\n</blockquote>\n<p>You should make double sure that Poly/ML runs in x86 (32bit) mode, to <br>\nreduce memory requirements by a factor of 2.  (I think you have that, <br>\nguessing from the \"top\" output, but just make sure anyway.) You can see <br>\nthat in the output of \"isabelle build -?\" for example.</p>\n<p>The general question remains, if your application is really that large, or <br>\nif there are other problems (e.g. memory holes).</p>\n<p>Otherwise I would say it is a matter of normal Harley-Davidson tuning to <br>\nmake the best of limited resources.</p>\n<p>Makarius</p>",
        "id": 294664031,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661171027
    },
    {
        "content": "<p>From: \"Eugene W. Stark\" &lt;<a href=\"mailto:isabelle-users@starkeffect.com\">isabelle-users@starkeffect.com</a>&gt;<br>\nSorry about the subject mess-up.  I don't know how that happened.<br>\nI changed the subject for this follow-up -- I hope I did it in a reasonable way.</p>\n<p>I have not changed any throttling options.</p>\n<p>The \"Enter MATCH ...\" messages are produced in reasonably frequent situations when<br>\nI invoke Sledgehammer by typing \"try\" into the main edit window.  I was aware that<br>\nthey were usually throttled, but in this situation it seemed that they were not.<br>\nSo maybe there is some way that the throttling gets circumvented in some situations.</p>\n<p>- Gene Stark</p>",
        "id": 294664168,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661171070
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThat is interesting to know.</p>\n<p>In principle, the 'try' command tries to suppress such messages, but <br>\nsomething might be wrong in connection to sledgehammer.  Maybe Jasmin <br>\nwants to take a quick look himself.</p>\n<p>Makarius</p>",
        "id": 294664178,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661171076
    }
]