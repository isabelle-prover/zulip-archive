[
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:lochbihl@ipd.info.uni-karlsruhe.de\">lochbihl@ipd.info.uni-karlsruhe.de</a>&gt;<br>\nHi all,</p>\n<p>I found the following behaviour of the lemmas command inside locales <br>\nrather strange and confusing. For example:</p>\n<p>locale loc begin<br>\ndefinition a :: bool where \"a == True\"<br>\ndefinition b :: bool where \"b == a\"<br>\nlemma b_lemma: \"b = True\" unfolding b_def a_def ..</p>\n<p>lemmas a_lemma' = b_lemma[unfolded b_def]<br>\nlemmas a_lemma  = a_lemma'<br>\nend</p>\n<p>Inside the locale, \"thm a_lemma'\" gives \"a = True\" as expected, outside <br>\nthe locale, I get \"b = True\" for \"thm loc.a_lemma'\". Naturally, I would <br>\nwant loc.a_lemma' to be \"a = True\" outside the locale, too.</p>\n<p>Interestingly, loc.a_lemma really is \"a = True\", i.e. loc.a_lemma' is <br>\nnot the same as loc.a_lemma although the definition suggests so.<br>\nBy the way, the same seems to happen with other attributes like OF, <br>\nTHEN, etc.</p>\n<p>Is there some way to get the unfolded attribute beyond the end of the <br>\nlocale other than interpreting the locale (which would do in the <br>\nexample, but not in my actual setting) and other than declaring such <br>\nadditional lemmata?</p>\n<p>Regards,<br>\nAndreas</p>",
        "id": 294060781,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660823586
    },
    {
        "content": "<p>From: Clemens Ballarin &lt;<a href=\"mailto:ballarin@in.tum.de\">ballarin@in.tum.de</a>&gt;<br>\nOn 13 May 2008, at 14:04, Andreas Lochbihler wrote:</p>\n<blockquote>\n<p>locale loc begin<br>\ndefinition a :: bool where \"a == True\"<br>\ndefinition b :: bool where \"b == a\"<br>\nlemma b_lemma: \"b = True\" unfolding b_def a_def ..</p>\n<p>lemmas a_lemma' = b_lemma[unfolded b_def]<br>\nlemmas a_lemma  = a_lemma'<br>\nend</p>\n<p>Inside the locale, \"thm a_lemma'\" gives \"a = True\" as expected,  <br>\noutside the locale, I get \"b = True\" for \"thm loc.a_lemma'\".  <br>\nNaturally, I would want loc.a_lemma' to be \"a = True\" outside the  <br>\nlocale, too.</p>\n</blockquote>\n<p>Attributes only apply to the version of the lemma inside the locale.   <br>\nThis is so, because declaring a lemma say [simp] in a locale should  <br>\nnot change the global simpset.</p>\n<p>Declarations as</p>\n<blockquote>\n<p>lemmas a_lemma' = b_lemma[unfolded b_def]</p>\n</blockquote>\n<p>inside a locale should be avoided for another reason.  Since the  <br>\nattribute is executed whenever the locale is entered, if you have a  <br>\nlot such declarations, the locale can become very slow.</p>\n<p>Clemens</p>",
        "id": 294060833,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660823610
    }
]