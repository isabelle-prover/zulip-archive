[
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThis is a continuation of the thread \"bogus simplifier trace messages\"<br>\nfrom isabelle-users (Jan-2016).</p>\n<p>After the release, I've made the following change:</p>\n<p>changeset:   62980:ba9072b303a2<br>\nuser:        wenzelm<br>\ndate:        Thu Apr 14 16:59:47 2016 +0200<br>\nfiles:       src/Pure/Tools/simplifier_trace.ML src/Tools/quickcheck.ML<br>\ndescription:<br>\navoid misleading Simplifier trace in quickcheck, notably in auto quickcheck;</p>\n<p>That is not suffient, though. Spurious traces remain. The attached<br>\nexperimental setup (ch-test and Test.thy) helps to find the place where<br>\nit happens. To make this work, Pure + HOL need to be build with debugger<br>\ninformation:</p>\n<p>isabelle build -c -b -o ML_debugger Pure HOL</p>\n<p>This takes approx. 25min on my machine (the exclusion of Complex_Main<br>\nhelps a lot).</p>\n<p>The included trace1 and trace2 show the situation before and after the<br>\nfollowing change:</p>\n<p>changeset:   63072:413184c7a2a2<br>\nuser:        wenzelm<br>\ndate:        Mon May 09 14:37:47 2016 +0200<br>\nfiles:       src/Doc/more_antiquote.ML<br>\nsrc/HOL/Tools/Ctr_Sugar/ctr_sugar_code.ML<br>\nsrc/HOL/Tools/Predicate_Compile/predicate_compile.ML<br>\nsrc/HOL/Tools/record.ML src/Pure/Isar/code.ML src/Pure/axclass.ML<br>\nsrc/Tools/Code/code_preproc.ML src/Tools/Code/code_thingol.ML<br>\ndescription:<br>\nclarified context, notably for internal use of Simplifier;</p>\n<p>The codegen setup has quite a few uses Proof_Context.init_global left:<br>\nthat seems to be required for a hard reset of the logical context<br>\n(fixes, sorts of type variables etc.), but it disrupts the use of<br>\noptions in the context to control other tools (notably the Simplifier).</p>\n<p>Is there a chance to make the code generator fully context-conformant?</p>\n<p>Makarius<br>\n<a href=\"/user_uploads/14278/oIKrMAm8yQ6cz21dmmOYwHcL/ch-test\">ch-test</a><br>\n<a href=\"/user_uploads/14278/qttwQL0acnDfZJ-HRB71_MHh/Test.thy\">Test.thy</a><br>\n<a href=\"/user_uploads/14278/dpyE-N-sz0lqlu0Y7baDjhB8/trace1\">trace1</a><br>\n<a href=\"/user_uploads/14278/q00HKX1FuyG7vwkAriLkxlC7/trace2\">trace2</a></p>",
        "id": 294674388,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661174416
    },
    {
        "content": "<p>From: Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@informatik.tu-muenchen.de\">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>\nHi all,</p>\n<blockquote>\n<p>changeset:   63072:413184c7a2a2<br>\nuser:        wenzelm<br>\ndate:        Mon May 09 14:37:47 2016 +0200<br>\nfiles:       src/Doc/more_antiquote.ML<br>\nsrc/HOL/Tools/Ctr_Sugar/ctr_sugar_code.ML<br>\nsrc/HOL/Tools/Predicate_Compile/predicate_compile.ML<br>\nsrc/HOL/Tools/record.ML src/Pure/Isar/code.ML src/Pure/axclass.ML<br>\nsrc/Tools/Code/code_preproc.ML src/Tools/Code/code_thingol.ML<br>\ndescription:<br>\nclarified context, notably for internal use of Simplifier;</p>\n<p>The codegen setup has quite a few uses Proof_Context.init_global left:<br>\nthat seems to be required for a hard reset of the logical context<br>\n(fixes, sorts of type variables etc.), but it disrupts the use of<br>\noptions in the context to control other tools (notably the Simplifier).</p>\n<p>Is there a chance to make the code generator fully context-conformant?</p>\n</blockquote>\n<p>indeed I am currently working in that area, to iron out some of these<br>\nissues which I have stumbled over from a different perspective also.</p>\n<p>The main reasons why significant parts of the code generator<br>\ninfrastructure are not context-conformant are not of logical nature (the<br>\nonly example I am aware of is in nbe.ML) but merely technical: there is<br>\nstill some ancient global-theory background cache.  Over the last years<br>\nat least the user interfaces have gained more and more proper contexts,<br>\nand this will continue hopefully soon.  Maybe the days of that cache are<br>\nalso counted, lets see.</p>\n<p>Cheers,<br>\n    Florian</p>\n<blockquote>\n<p>Makarius</p>\n<p><a href=\"/user_uploads/14278/clwbUg_MHl1xkx19tEyeYfcR/signature.asc\">signature.asc</a></p>\n</blockquote>",
        "id": 294674530,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661174471
    }
]