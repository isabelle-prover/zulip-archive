[
    {
        "content": "<p>From: xanonec xyz &lt;<a href=\"mailto:xanonec@gmail.com\">xanonec@gmail.com</a>&gt;<br>\nDear All,</p>\n<p>There may be a bug in nitpick. The example below exposes the problem. In<br>\nparticular, lemma \"bug_example_proof\" can be proved. However, nitpick finds<br>\na counterexample for the identical lemma \"bug_counterexample\": \"n::nat =<br>\n1::nat\". Many other theorems about intmod2 seem to have the same issue. The<br>\nproblem occurs in Isabelle2017 and Isabelle2018 (macOS).</p>\n<p>theory bug_1<br>\n  imports Complex_Main<br>\n  \"HOL-Algebra.Group\"<br>\nbegin</p>\n<p>declare [[show_types]]<br>\ndeclare [[show_sorts]]<br>\ndeclare [[show_consts]]</p>\n<p>definition qintrel2 :: \"int ⇒ int ⇒ bool\"<br>\n  where \"qintrel2 = (λx y. 2 dvd (x - y))\"</p>\n<p>quotient_type intmod2 = \"int\" / \"qintrel2\"<br>\n  morphisms Rep_IntegMod2 Abs_IntegMod2<br>\nproof (rule equivpI)<br>\n  show \"reflp qintrel2\" by (auto simp: qintrel2_def reflp_def)<br>\n  show \"symp qintrel2\" by (auto simp: qintrel2_def symp_def)<br>\n  show \"transp qintrel2\" by (auto simp: qintrel2_def transp_def)<br>\nqed</p>\n<p>instantiation intmod2 :: comm_ring_1<br>\nbegin</p>\n<p>lift_definition zero_intmod2 :: \"intmod2\" is \"0\" .</p>\n<p>lift_definition one_intmod2 :: \"intmod2\" is \"1\" .</p>\n<p>lift_definition plus_intmod2 :: \"intmod2 ⇒ intmod2 ⇒ intmod2\"<br>\n  is \"λx y. x + y\"<br>\n  by (simp add: qintrel2_def)</p>\n<p>lift_definition uminus_intmod2 :: \"intmod2 ⇒ intmod2\"<br>\n  is \"λx. -x\"<br>\n  by (simp add: qintrel2_def)</p>\n<p>lift_definition minus_intmod2 :: \"intmod2 ⇒ intmod2 ⇒ intmod2\"<br>\n  is \"λx y. x + (-y)\"<br>\n  by (simp add: qintrel2_def)</p>\n<p>lift_definition times_intmod2 :: \"intmod2 ⇒ intmod2 ⇒ intmod2\"<br>\n  is \"λx y. x*y\"<br>\n  by (simp add: qintrel2_def)</p>\n<p>instance<br>\n  by standard (transfer; simp add: qintrel2_def; presburger)+</p>\n<p>end</p>\n<p>lemma bug_example_proof: \"of_int (int n) = (0::intmod2) ⟹ of_int (int (Suc<br>\nn)) = (1::intmod2)\"<br>\n  by simp</p>\n<p>lemma bug_counterexample: \"of_int (int n) = (0::intmod2) ⟹ of_int (int (Suc<br>\nn)) = (1::intmod2)\"<br>\n  by nitpick</p>\n<p>end</p>\n<p>xanonec</p>",
        "id": 294745003,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661193072
    }
]