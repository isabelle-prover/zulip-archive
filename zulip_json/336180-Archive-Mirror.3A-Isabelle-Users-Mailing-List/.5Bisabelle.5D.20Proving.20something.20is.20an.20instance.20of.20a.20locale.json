[
    {
        "content": "<p>From: Lars Hupel &lt;<a href=\"mailto:hupel@in.tum.de\">hupel@in.tum.de</a>&gt;<br>\nDear José,</p>\n<blockquote>\n<p>I seem to be missing something while trying to show a certain<br>\nconstruction is a Ring (a locale in an imported theory).</p>\n</blockquote>\n<p>could you maybe point us to the theory file where this is defined? It<br>\nwould make helping you solve your problem much easier. (The answers<br>\nbelow are speculations because I don't know the details.)</p>\n<blockquote>\n<p>lemma stalk_set_is_ring:<br>\nassumes P: \"x ∈⋃T\"<br>\nshows \"Ring (stalk_ring x)\"<br>\nproof unfold_locales</p>\n<p>although at least most of them must be trivial (I built this ring out of<br>\nan existing one). There must be a gap in my understanding of this<br>\nprocess, since I tried to prove this apparently trivial</p>\n</blockquote>\n<p>Where exactly did you get stuck? This looks at least like the correct<br>\nlemma statement.</p>\n<blockquote>\n<p>lemma (in presheaf) objecstmapringvalued:<br>\nassumes L: \"(U:: 'a set) ∈ T\"<br>\nshows \"Ring (objectsmap U)\"<br>\nproof unfold_locales</p>\n<p>and failed. This should show for each U that objectsmap U is a Ring, and<br>\nhere objectsmap :: \"'a set ⇒ ('a, 'm) Ring_scheme\" is one of the<br>\nparameters of the locale presheaf, so wouldn't that be immediate since<br>\nthe last type is ('a,'m) Ring_schemes?</p>\n</blockquote>\n<p>Again, this is hard to say without seeing the \"Ring\" locale. There could<br>\nbe additional assumptions you have to show.</p>\n<blockquote>\n<p>I also noticed that although I<br>\ncan invoke presheaf_axioms and presheaf_def, I can't directly use<br>\nsomething like the definition of objectsmap itself in a proof.</p>\n</blockquote>\n<p>How so? There should be a theorem called \"objectsmap_def\" if<br>\n\"objectsmap\" is a regular \"definition\". You can unfold that using \"apply<br>\n(subst objectsmap_def)\" or \"unfolding objectsmap_def\".</p>\n<blockquote>\n<p>I'm still not sure about how to tell Isabelle to use an instance of the ring<br>\naxioms or theorems for a particular ring during a proof -- in my<br>\nsituation, for example, all the new ring operations are built out of<br>\nthose of rings objectsmap U, so it would be great to invoke facts for such.</p>\n</blockquote>\n<p>You can use the command \"interpret\" in a proof to obtain the facts for<br>\nan existing structure, like so:</p>\n<p>interpret xyz: Ring \"other_structure\"</p>\n<p>... then, if there's an assumption \"abc\" in the \"Ring\" locale, you can<br>\naccess that via \"<a href=\"http://xyz.abc\">xyz.abc</a>\". See the locale manual for more details on<br>\nthis process.</p>\n<p>Cheers<br>\nLars</p>",
        "id": 294680394,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661176507
    },
    {
        "content": "<p>From: Lars Hupel &lt;<a href=\"mailto:hupel@in.tum.de\">hupel@in.tum.de</a>&gt;<br>\nHi José,</p>\n<blockquote>\n<p>Sorry for the delay, it seems I was missing a hypothesis in my locale<br>\ndeclaration (presheaf) and after adding<br>\nthat I spent some time trying to make it work using your suggestion, to<br>\nno avail (although it's certainly progress).</p>\n</blockquote>\n<p>did you mean to reply to the list instead of privately?</p>\n<blockquote>\n<p>I've attached all the relevant theories. The one I'm building is<br>\n\"Sheaves.thy\", while the locale \"Ring\"<br>\nis declared in \"Algebra4.thy\". It still says \"objectsmap_def\" is an<br>\nundefined fact, by the way.</p>\n</blockquote>\n<p>The reason is that \"objectsmap\" is not a definition.</p>\n<p>If you use a definitional package in Isabelle, for example, \"fun\",<br>\n\"inductive\", or plain old \"definition\", you will get a constant (e.g.<br>\n\"x\") and an accompanying theorem \"x_def\".</p>\n<p>If you however introduce a parameter in a locale (as you did in the<br>\n\"presheaf\" locale), there is no such theorem. You can only use the<br>\nassumptions of the locale.</p>\n<p>Cheers<br>\nLars</p>",
        "id": 294680779,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661176664
    },
    {
        "content": "<p>From: \"J.V. Paiva-Miranda-De-Siqueira\" &lt;<a href=\"mailto:jvp27@cam.ac.uk\">jvp27@cam.ac.uk</a>&gt;<br>\nDear Isabelle Users,</p>\n<p>I seem to be missing something while trying to show a certain <br>\nconstruction is a Ring (a locale in an imported theory).</p>\n<p>I defined all the necessary operations and this</p>\n<p>definition stalk_ring :: \"'a ⇒  ('a set × 'a) set Ring\" where<br>\n    \"stalk_ring x =<br>\n    ⦇carrier = stalk x,<br>\n      pop = stalk_pop x,<br>\n      mop = stalk_mop x,<br>\n      zero = stalk_zero x,<br>\n      tp = stalk_tp x,<br>\n      un = stalk_un x⦈\"<br>\nwhich should give me a Ring stalk_ring x for each x. I then tried to <br>\nshow it's a ring, but have been unable to show any of the subgoals after <br>\nwriting</p>\n<p>lemma stalk_set_is_ring:<br>\nassumes P: \"x ∈⋃T\"<br>\nshows \"Ring (stalk_ring x)\"<br>\nproof unfold_locales</p>\n<p>although at least most of them must be trivial (I built this ring out of <br>\nan existing one). There must be a gap in my understanding of this <br>\nprocess, since I tried to prove this apparently trivial</p>\n<p>lemma (in presheaf) objecstmapringvalued:<br>\nassumes L: \"(U:: 'a set) ∈ T\"<br>\nshows \"Ring (objectsmap U)\"<br>\nproof unfold_locales</p>\n<p>and failed. This should show for each U that objectsmap U is a Ring, and <br>\nhere objectsmap :: \"'a set ⇒ ('a, 'm) Ring_scheme\" is one of the <br>\nparameters of the locale presheaf, so wouldn't that be immediate since <br>\nthe last type is ('a,'m) Ring_schemes? I also noticed that although I <br>\ncan invoke presheaf_axioms and presheaf_def, I can't directly use <br>\nsomething like the definition of objectsmap itself in a proof. I'm still <br>\nnot sure about how to tell Isabelle to use an instance of the ring <br>\naxioms or theorems for a particular ring during a proof -- in my <br>\nsituation, for example, all the new ring operations are built out of <br>\nthose of rings objectsmap U, so it would be great to invoke facts for <br>\nsuch.</p>\n<p>I'm a mathematician recently introduced to Isabelle, so I'd appreciate <br>\nany orientation on the matter.</p>\n<p>Sincerely,</p>\n<p>José Siqueira</p>",
        "id": 294681203,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661176791
    }
]