[
    {
        "content": "<p>From: René Thiemann &lt;<a href=\"mailto:rene.thiemann@uibk.ac.at\">rene.thiemann@uibk.ac.at</a>&gt;<br>\nDear all,</p>\n<p>I have some problems using locales in combination with the code- <br>\ngenerator.</p>\n<p>Consider the following simple example:</p>\n<p>locale loc =<br>\n   fixes foo :: \"'a ⇒ 'a ⇒ 'a\"<br>\n   assumes \"foo x y = foo y x\"<br>\nbegin<br>\nfun bar where \"bar x = foo x x\"<br>\nend</p>\n<p>interpretation interI : loc [ \"op + :: nat ⇒ nat ⇒ nat\"]<br>\n  by (unfold_locales, auto)</p>\n<p>fun myplus :: \"nat ⇒ nat ⇒ nat\" where \"myplus x y = 3 * x + y - 2 *  <br>\nx\"</p>\n<p>interpretation interII : loc [ \"myplus :: nat ⇒ nat ⇒ nat\"]<br>\n  by (unfold_locales, auto)</p>\n<p>(* created two different interpretations of loc *)<br>\n(* and one can extract and reason about corresponding functions *)</p>\n<p>fun doubleI where \"doubleI x = <a href=\"http://interI.bar\">interI.bar</a> x\"<br>\nfun doubleII where \"doubleII x = <a href=\"http://interII.bar\">interII.bar</a> x\"<br>\nfun doubleIII where \"doubleIII x = 2 * x\"</p>\n<p>lemma \"doubleI x = doubleII x\" by simp<br>\nlemma \"doubleI x = doubleIII x\" by simp</p>\n<p>(* however, code generation does not work *)<br>\nexport_code doubleI in Haskell file \"mytest\"</p>\n<p>*** No defining equations for constant \"<a href=\"http://loc.bar\">loc.bar</a>\"<br>\n*** At command \"export_code\".</p>\n<p>If one defines bar outside of the locale, then there is no problem.</p>\n<p>Is there any solution to this problem (beside not using locales)?</p>\n<p>Thanks,<br>\nRené</p>",
        "id": 294075786,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660828815
    }
]