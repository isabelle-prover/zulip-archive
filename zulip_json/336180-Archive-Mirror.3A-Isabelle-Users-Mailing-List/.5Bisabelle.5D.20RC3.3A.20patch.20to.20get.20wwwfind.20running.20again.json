[
    {
        "content": "<p>From: Rafal Kolanski &lt;<a href=\"mailto:xs@xaph.net\">xs@xaph.net</a>&gt;<br>\nSo, here is a minimal patch to get the wwwfind tool working again. It<br>\nhelps that there was nothing wrong with the code itself, only the way it<br>\nwas being invoked.</p>\n<p>For those who care: when working with isabelle-process directly, the<br>\nfollowing scenario breaks:<br>\n use_thy \"MyTheory\"; MyStructure.blah ();<br>\ni.e.</p>\n<ol>\n<li>passing use_thy \"MyTheory\" to isabelle-process</li>\n<li>MyTheory uses ML_file \"blah.ML\" to define ML structures</li>\n<li>trying to refer to structures from (2) after the use_thy from (1)</li>\n</ol>\n<p>I don't know why exactly this is (due to contexts and thread safety?),<br>\nbut I don't object to it. Just makes it hard to pass parameters in.</p>\n<p>I would be interested in the current canonical way to write isabelle<br>\ntools which take some parameters, pass them to ML code to do stuff, then<br>\nat some future point exit. The old route of<br>\nisabelle-process -r -e \"use_thy \\\"my_thy\\\"; Thing.do_stuff \\\"$PARAM\\\";\"<br>\nappears deprecated. This took me a while to grasp.</p>\n<p>Keeping a back door to make this pattern possible will make it easier to<br>\nkeep the ML tools going which are unlikely to be rewritten in scala<br>\nanytime soon.</p>\n<p>Makarius:<br>\nI don't know what your plan for the \"ROOT\" file in WWW_Find is. I have<br>\nassumed that it is for testing purposes, so that \"isabelle build\" will<br>\nrun over the ML files and make sure they at least typecheck. Thus I have<br>\nleft it, and WWW_Find.thy unchanged, creating a \"launcher\" in<br>\nStart_WWW_Find.thy.<br>\nIf my assumption is incorrect, you can delete ROOT and merge<br>\nStart_WWW_Find.thy into WWW_Find.thy quite easily.<br>\nAny other problems, let me know.</p>\n<p>On 11/02/13 21:20, Makarius wrote:</p>\n<blockquote>\n<p>There is also the Isabelle system manual, with a whole chapter on<br>\nIsabelle sessions and build management, including real-life examples.</p>\n</blockquote>\n<p>Yes, I know. I just assumed that \"build\" builds an image, got it wrong<br>\nand apologised.</p>\n<blockquote>\n<blockquote>\n<p>I'll go back to fixing wwwfind now, which definitely does not work.</p>\n</blockquote>\n<p>You have approx. 24h left.  I had reported its broken state almost 3<br>\nmonths ago.  The Isabelle2013 release train will not wait for latecomers.</p>\n</blockquote>\n<p>Please don't treat me as if I broke it.</p>\n<p>Sincerely,</p>\n<p>Rafal Kolanski.<br>\n<a href=\"/user_uploads/14278/yq4LGTffn_RmpFDMdJNmvxK-/wwwfind.patch\">wwwfind.patch</a></p>",
        "id": 294233155,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903493
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nNobody cares who \"broke\" it.  This is not how software maintenance works.</p>\n<p>Makarius</p>",
        "id": 294233190,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903505
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nI've looked only briefly, to understand what it does.  Should there be a <br>\nstatic Start_WWW_Find.thy in the changeset?  It is missing.  (Or is it <br>\nsomehow dynamic?)</p>\n<p>Makarius</p>",
        "id": 294233203,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903511
    },
    {
        "content": "<p>From: Rafal Kolanski &lt;<a href=\"mailto:xs@xaph.net\">xs@xaph.net</a>&gt;<br>\nI apologise, I neglected to add it in the isabelle-release repository.<br>\nHere it is again.</p>\n<p>Rafal Kolanski.<br>\n<a href=\"/user_uploads/14278/1LFX605GlC4pv07a8jqTL3w2/wwwfind.patch\">wwwfind.patch</a></p>",
        "id": 294233217,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903519
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nIt is just the normal context discipline of Isabelle: everything is stored <br>\nas a value within the theory (or other context).  Until approx. 2008 ML <br>\nvalues were not treated properly like that -- it was an old snag going <br>\nback to pioneering days of Proof General, when one could not undo ML <br>\nbindings.</p>\n<p>For multithreaded Isabelle/ML (which became the default in Isabelle2008) <br>\nthere was indeed no more way to ignore this.  So David Matthews and myself <br>\nspent some time to solve this problem once and for all: runtime invocation <br>\nof the ML compiler (via 'ML' commands or 'ML_file' in Isabelle2013) <br>\nhappens within the theory context.</p>\n<p>The reason why WWW_Find broken down after such a long time is here:</p>\n<p>changeset:   48495:bf5b45870110<br>\nuser:        wenzelm<br>\ndate:        Wed Jul 25 10:55:02 2012 +0200<br>\nfiles:       lib/scripts/getsettings src/Tools/WWW_Find/ROOT <br>\nsrc/Tools/WWW_Find/ROOT.ML src/Tools/WWW_Find/WWW_Find.thy<br>\ndescription:<br>\nmore standard session setup for WWW_Find;</p>\n<p>This discontinues the old ROOT.ML with its implicit global context -- <br>\nthere was no way around it in the new isabelle build system.</p>\n<p>It thus indirectly broke WWW_Find, or rather exhibited the latent problem <br>\nthat has been there for a long time.  Or rather, it was probably not even <br>\na problem when WWW_Find was first implemented.  It is totally normal that <br>\nside-conditions are gradually changing, and thus one improvement here and <br>\nanother improvement there, or lack of improvement, eventually cause a <br>\nbreakdown.  Then things need to be renovated.</p>\n<p>Makarius</p>",
        "id": 294233226,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903524
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOK, it is now here <br>\n<a href=\"https://bitbucket.org/isabelle_project/isabelle-release/commits/d90218288d51\">https://bitbucket.org/isabelle_project/isabelle-release/commits/d90218288d51</a></p>\n<p>I can confirm that it works on Linux (as specified).  Being curious about <br>\nits exclusion of Mac OS X and Windows/Cygwin, I've tried the other <br>\nplatforms as well, and it did not work (also as specified).  The problems <br>\nseem to be unportable netstat options (Mac OS X) and other unknown <br>\ndifferences on Cygwin (although netstat and lighttpd are the same there as <br>\non Linux).</p>\n<p>So we are back to the status-quo of WWW_Find for the Isabelle2013 release.</p>\n<p>Makarius</p>",
        "id": 294233253,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903536
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn Mon, 11 Feb 2013, Rafal Kolanski wrote:</p>\n<blockquote>\n<p>The old route of isabelle-process -r -e \"use_thy \\\"my_thy\\\"; <br>\nThing.do_stuff \\\"$PARAM\\\";\" appears deprecated.</p>\n</blockquote>\n<p>Deprecation probably goes back to 2007/2008, when \"the_context\" was the <br>\nbest-known Isabelle insider joke.  Whatever you do in Isabelle, it somehow <br>\nworks within the formal context, including ML.</p>\n<p>There are various ways to ensure that some ML runs within an existing <br>\ntheory context.  The Start_WWW_Find.thy approach looks fine in this <br>\nrespect.</p>\n<blockquote>\n<p>Keeping a back door to make this pattern possible will make it easier to <br>\nkeep the ML tools going which are unlikely to be rewritten in scala <br>\nanytime soon.</p>\n</blockquote>\n<p>When WWW_Find was implemented first several years ago, I pointed already <br>\nout that its technology was outdated.  You don't do a HTTP server in ML. <br>\nThe shell scripts around it only work on Linux.</p>\n<p>The JVM platform is much better at such things, and TCP clients and <br>\nservers usually work uniformly (in contrast to Swing GUI stuff).</p>\n<p>Isabelle/Scala is not an exotic Isabelle add-on that will emerge <br>\neventually -- that was in 2008/2009.  It is here right now, as the <br>\nstandard Isabelle system programming interface.</p>\n<blockquote>\n<p>I don't know what your plan for the \"ROOT\" file in WWW_Find is. I have<br>\nassumed that it is for testing purposes, so that \"isabelle build\" will<br>\nrun over the ML files and make sure they at least typecheck.</p>\n</blockquote>\n<p>The ROOT file is merely the result of porting the old ROOT.ML.  It has <br>\nbeen there from the beginning of WWW_Find to have at least a static test <br>\nof its code-base.</p>\n<p>There was never a proper dynamic test of it.  3 months ago, I realized <br>\nthat it was broken, and was trying to find its maintainer.  Even now, I am <br>\nunsure if it is actually maintained.</p>\n<p>Makarius</p>",
        "id": 294233258,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903542
    }
]