[
    {
        "content": "<p>From: Tobias Nipkow &lt;<a href=\"mailto:nipkow@in.tum.de\">nipkow@in.tum.de</a>&gt;<br>\nTake the following concrete example, session HOL-IMP in HOL. These days the ROOT <br>\nfile says</p>\n<p>session \"HOL-IMP\" (timing) in IMP = \"HOL-Library\" + ...</p>\n<p>Everything works fine. But if I base IMP on HOL itself</p>\n<p>session \"HOL-IMP\" (timing) in IMP = HOL +</p>\n<p>I get</p>\n<p>*** No such file: \"/Users/nipkow/Isabelle2017/src/HOL/IMP/HOL-Library.Extended.thy\"</p>\n<p>because IMP imports HOL-Library.Extended. What do I need to change to make this <br>\nwork? More generally: how do I import theories that are not in the image I build on?</p>\n<p>Thanks<br>\nTobias<br>\n<a href=\"/user_uploads/14278/YGrn5rnU0ezTEBCKMoTrxjJI/smime.p7s\">smime.p7s</a></p>",
        "id": 294720167,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661184499
    },
    {
        "content": "<p>From: Lukas Bulwahn &lt;<a href=\"mailto:lukas.bulwahn@gmail.com\">lukas.bulwahn@gmail.com</a>&gt;<br>\nDear Tobias,</p>\n<p>Thanks for raising that question. I was asking that myself for my own<br>\ntheory development and could not quickly find examples of ROOT files<br>\nin the AFP that just answered how to properly write ROOT files with<br>\nthe new Isabelle version.</p>\n<p>Lukas</p>",
        "id": 294720212,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661184514
    },
    {
        "content": "<p>From: Florian Haftmann &lt;<a href=\"mailto:florian.haftmann@informatik.tu-muenchen.de\">florian.haftmann@informatik.tu-muenchen.de</a>&gt;<br>\nAs far as I understand, to import theories from sessions that are not<br>\ncontained in the base image, you have to add a »sessions« declaration to<br>\nROOT, e.g. in the case of IMP</p>\n<blockquote>\n<p>session \"HOL-IMP\" (timing) in IMP = \"HOL\" +<br>\n  options [document_variants = document]<br>\n  sessions<br>\n    \"HOL-Library\"<br>\n  theories [document = false]</p>\n</blockquote>\n<p>instead of</p>\n<blockquote>\n<p>session \"HOL-IMP\" (timing) in IMP = \"HOL-Library\" +<br>\n  options [document_variants = document]<br>\n  theories [document = false]</p>\n</blockquote>\n<p>Maybe the following analogy is helpful:</p>\n<ul>\n<li>Session dependencies form a DAG.</li>\n<li>Image dependencies form a spanning tree of that DAG.</li>\n<li>Hence there are main edges (given after »=«) and side edges (given<br>\nafter »sessions«)</li>\n</ul>\n<p>Hope this helps,<br>\n    Florian</p>\n<p>Am 18.09.2017 um 12:01 schrieb Lukas Bulwahn:</p>\n<blockquote>\n<p>Dear Tobias,</p>\n<p>Thanks for raising that question. I was asking that myself for my own<br>\ntheory development and could not quickly find examples of ROOT files<br>\nin the AFP that just answered how to properly write ROOT files with<br>\nthe new Isabelle version.</p>\n<p>Lukas</p>\n<p>On Mon, Sep 18, 2017 at 11:55 AM, Tobias Nipkow &lt;<a href=\"mailto:nipkow@in.tum.de\">nipkow@in.tum.de</a>&gt; wrote:</p>\n<blockquote>\n<p>Take the following concrete example, session HOL-IMP in HOL. These days the<br>\nROOT file says</p>\n<p>session \"HOL-IMP\" (timing) in IMP = \"HOL-Library\" + ...</p>\n<p>Everything works fine. But if I base IMP on HOL itself</p>\n<p>session \"HOL-IMP\" (timing) in IMP = HOL +</p>\n<p>I get</p>\n<p>*** No such file:<br>\n\"/Users/nipkow/Isabelle2017/src/HOL/IMP/HOL-Library.Extended.thy\"</p>\n<p>because IMP imports HOL-Library.Extended. What do I need to change to make<br>\nthis work? More generally: how do I import theories that are not in the<br>\nimage I build on?</p>\n<p>Thanks<br>\nTobias<br>\n</p>\n</blockquote>\n<p><a href=\"/user_uploads/14278/SxBEz2BYYRK49uSBfXRrnggq/signature.asc\">signature.asc</a></p>\n</blockquote>",
        "id": 294720219,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661184517
    },
    {
        "content": "<p>From: Lukas Bulwahn &lt;<a href=\"mailto:lukas.bulwahn@gmail.com\">lukas.bulwahn@gmail.com</a>&gt;<br>\nHi Florian, hi others,</p>\n<p>your hint resolved my issue, and I can build my theories again with a<br>\nROOT file like this:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">session</span> <span class=\"n\">MySession</span> <span class=\"o\">(</span><span class=\"n\">AFP</span><span class=\"o\">)</span> <span class=\"o\">=</span> <span class=\"s\">\"HOL-Library\"</span> <span class=\"o\">+</span>\n  <span class=\"n\">sessions</span>\n     <span class=\"n\">AFP_Session_1</span>\n     <span class=\"n\">AFP_Session_2</span>\n<span class=\"ow\">...</span>\n</code></pre></div>\n<p>Unfortunately, building the same theories with this ROOT file does not work:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">session</span> <span class=\"n\">MySession</span> <span class=\"o\">(</span><span class=\"n\">AFP</span><span class=\"o\">)</span> <span class=\"o\">=</span> <span class=\"s\">\"HOL\"</span> <span class=\"o\">+</span>\n  <span class=\"n\">sessions</span>\n     <span class=\"s\">\"HOL-Library\"</span>\n     <span class=\"n\">AFP_Session_1</span>\n     <span class=\"n\">AFP_Session_2</span>\n<span class=\"ow\">...</span>\n</code></pre></div>\n<p>It fails with:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"err\">***</span> <span class=\"n\">exception</span> <span class=\"n\">THEORY</span> <span class=\"n\">raised</span> <span class=\"o\">(</span><span class=\"n\">line</span> <span class=\"n\">230</span> <span class=\"n\">of</span> <span class=\"s\">\"context.ML\"</span><span class=\"o\">):</span>\n<span class=\"err\">***</span> <span class=\"n\">Duplicate</span> <span class=\"k\">theory</span> <span class=\"n\">name</span>\n<span class=\"err\">***</span> <span class=\"ow\">{...</span><span class=\"o\">,</span> <span class=\"n\">Conditionally_Complete_Lattices</span><span class=\"o\">,</span> <span class=\"n\">Binomial</span><span class=\"o\">,</span> <span class=\"n\">Main</span><span class=\"o\">,</span>\n<span class=\"n\">Cancellation</span><span class=\"o\">,</span> <span class=\"n\">HOL</span><span class=\"o\">-</span><span class=\"n\">Library.Multiset</span><span class=\"ow\">}</span>\n<span class=\"err\">***</span> <span class=\"ow\">{...</span><span class=\"o\">,</span> <span class=\"n\">Conditionally_Complete_Lattices</span><span class=\"o\">,</span> <span class=\"n\">Binomial</span><span class=\"o\">,</span> <span class=\"n\">Main</span><span class=\"o\">,</span>\n<span class=\"n\">Cancellation</span><span class=\"o\">,</span> <span class=\"n\">MySession.Multiset</span><span class=\"ow\">}</span>\n<span class=\"err\">***</span> <span class=\"n\">At</span> <span class=\"n\">command</span> <span class=\"s\">\"theory\"</span> <span class=\"o\">(</span><span class=\"n\">line</span> <span class=\"n\">5</span> <span class=\"n\">of</span> <span class=\"s\">\"~/MyIsabelleTheories/SomeTheory.thy\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>So there seems to be another constraint for composing the images,<br>\nsessions and theories that I am not yet aware of.</p>\n<p>Best regards,</p>\n<p>Lukas</p>",
        "id": 294720239,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661184526
    },
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:andreas.lochbihler@inf.ethz.ch\">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>\nHi Lukas,</p>\n<p>Probably there is a mix of old-style path-based imports and new-style session-based <br>\nimports of some theory in HOL-Library. You should only use one style, otherwise the <br>\ntheories will be loaded twice and you get the merge error.</p>\n<p>Andreas</p>",
        "id": 294720244,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661184529
    },
    {
        "content": "<p>From: Lukas Bulwahn &lt;<a href=\"mailto:lukas.bulwahn@gmail.com\">lukas.bulwahn@gmail.com</a>&gt;<br>\nHi Andreas,</p>\n<p>thanks for that further hint.</p>\n<p>I had some old-style theory references in my ROOT file, such as:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">theories</span>\n   <span class=\"s\">\"~~/src/HOL/Library/Theory1\"</span>\n   <span class=\"s\">\"~~/src/HOL/Library/Theory2\"</span>\n   <span class=\"s\">\"$AFP/Entry1/Theory1\"</span>\n</code></pre></div>\n<p>After replacing them by the new-style session-based names:</p>\n<div class=\"codehilite\" data-code-language=\"Isabelle\"><pre><span></span><code><span class=\"n\">theories</span>\n   <span class=\"s\">\"HOL-Library.Theory1\"</span>\n   <span class=\"s\">\"HOL-Library.Theory2\"</span>\n   <span class=\"s\">\"Entry1.Theory1\"</span>\n</code></pre></div>\n<p>the build process now works fine.</p>\n<p>By the way, there was no need to touch the theory files, but probably<br>\nI can now also clean them up with the new-style imports as well.</p>\n<p>Lukas</p>",
        "id": 294720295,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661184548
    }
]