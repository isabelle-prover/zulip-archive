[
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nUsing -D generated is indeed the usual way to achieve any custom <br>\nbehaviour, beyond that what the example setup of the document preparation <br>\ntool is doing.</p>\n<p>BTW, \"isatool\" and the $ISATOOL variable are way old.  The tool wrapper is <br>\ncalled \"isabelle\", and \"$ISABELLE_TOOL\" refers to it within the process <br>\nenvironment.</p>\n<p>Makarius</p>",
        "id": 294099534,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660833344
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn Mon, 22 Feb 2010, Rafal Kolanski wrote:</p>\n<blockquote>\n<p>Makarius wrote:</p>\n<blockquote>\n<blockquote>\n<p>USEDIR = $(ISATOOL) usedir -v true -i false -d false -D generated -C false</p>\n</blockquote>\n<p>Using -D generated is indeed the usual way to achieve any custom behaviour, <br>\nbeyond that what the example setup of the document preparation tool is <br>\ndoing.</p>\n</blockquote>\n<p>I understand, but that isn't my problem. The issue I'm having is that <br>\neverything copied into generated by isabelle during the document <br>\ngeneration process is timestamped with the time of the document <br>\ngeneration process, not the timestamps of the original files in the <br>\ndocument directory.</p>\n</blockquote>\n<p>Alternatively, you can use \"-D document\" to dump the generated sources <br>\ninto that very same directly, and of course keep \"-C false\".  Or you dump <br>\nto a completely different place and adjust the make file accordingly.</p>\n<p>No need to copy your other files at all.</p>\n<blockquote>\n<p>If I use -C false and rsync, make will notice that blah.pdf is newer <br>\nthan blah.svg and not run the conversion.</p>\n</blockquote>\n<p>rsync is part of the answer why special behaviour is avoided by default: <br>\nit is not part of the classic Unix canon of tools.  Even just plain cp is <br>\nvery delicate: hardly any of the more advanced options are universally <br>\navailable.</p>\n<p>The usual Isabelle tool policy is to make things work by default, rather <br>\nthan building too much sophistication into it.  (Which does not mean that <br>\nthe usedir and document tools are not infected by creeping featuritis.)</p>\n<blockquote>\n<p>So I should use $ISABELLE_TOOL instead of $ISATOOL? I don't actually use <br>\nthe lowercase 'isatool' anywhere. I was porting the IsaMakefile which <br>\nhad $ISATOOL in it, and it turned out that in 2009-1 that magically did <br>\nthe right thing (invoked isabelle instead of isatool), so I kept it.</p>\n</blockquote>\n<p>Yes, the ISATOOL setting variable is offically marked as \"legacy\" since <br>\nIsabelle2009 -- see the start of that version's NEWS: \"Simplified main <br>\nIsabelle executables ...\".</p>\n<p>Makarius</p>",
        "id": 294099645,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660833369
    },
    {
        "content": "<p>From: Rafal Kolanski &lt;<a href=\"mailto:rafalk@cse.unsw.edu.au\">rafalk@cse.unsw.edu.au</a>&gt;<br>\nMakarius wrote:</p>\n<blockquote>\n<blockquote>\n<p>USEDIR = $(ISATOOL) usedir -v true -i false -d false -D generated -C <br>\nfalse</p>\n</blockquote>\n<p>Using -D generated is indeed the usual way to achieve any custom <br>\nbehaviour, beyond that what the example setup of the document <br>\npreparation tool is doing.</p>\n</blockquote>\n<p>I understand, but that isn't my problem. The issue I'm having is that <br>\neverything copied into generated by isabelle during the document <br>\ngeneration process is timestamped with the time of the document <br>\ngeneration process, not the timestamps of the original files in the <br>\ndocument directory. This confuses make, as the sources for files it is <br>\nto generate are always newer than any generated files. I think I am <br>\nbeing a bit vague, let me try with an example:</p>\n<p>create document/blah.svg and tell document/Makefile to convert it<br>\n   to a .pdf<br>\nisabelle make<br>\n   (copies document/blah.svg to generated/blah.svg and<br>\n           document/Makefile to generated/Makefile)<br>\ncd document; make<br>\n   (creates generated/blah.pdf from generated/blah.svg)<br>\nchange a theory file<br>\nisabelle make<br>\n   (copies document/blah.svg to generated/blah.svg and<br>\n           document/Makefile to generated/Makefile)<br>\ncd document; make<br>\n   (creates generated/blah.pdf from generated/blah.svg)</p>\n<p>Every time I make my document, it'll re-create blah.pdf, despite <br>\nblah.svg never changing. Additionally, document/Makefile has <br>\napproximately the same timestamp as generated/blah.svg.<br>\nIf I use -C false and rsync, make will notice that blah.pdf is newer <br>\nthan blah.svg and not run the conversion.</p>\n<blockquote>\n<p>BTW, \"isatool\" and the $ISATOOL variable are way old.  The tool wrapper <br>\nis called \"isabelle\", and \"$ISABELLE_TOOL\" refers to it within the <br>\nprocess environment.</p>\n</blockquote>\n<p>So I should use $ISABELLE_TOOL instead of $ISATOOL? I don't actually use <br>\nthe lowercase 'isatool' anywhere. I was porting the IsaMakefile which <br>\nhad $ISATOOL in it, and it turned out that in 2009-1 that magically did <br>\nthe right thing (invoked isabelle instead of isatool), so I kept it.</p>\n<p>Sincerely,</p>\n<p>Rafal Kolanski.</p>",
        "id": 294099783,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660833412
    },
    {
        "content": "<p>From: Rafal Kolanski &lt;<a href=\"mailto:rafalk@cse.unsw.edu.au\">rafalk@cse.unsw.edu.au</a>&gt;<br>\nDear All,</p>\n<p>Is there any reason that isatool does not preserve timestamps when <br>\ncopying document/ into (say) generated/ ? I was under the impression <br>\nthat we should put the document skeleton into document/, run the session <br>\nusing isatool (so it generates .tex files in generated/) and then invoke <br>\nmake inside generated/ to create the document itself. However, as it <br>\nstands, constructing anything inside generated/ confuses make.</p>\n<p>Example: my generated/Makefile generates .pdf files from .svg graphics <br>\nfor pdflatex as needed. If isatool copies the .svg files from document/, <br>\nthey are always newer than the .pdf files in generated/, thereby always <br>\nundergoing the conversion process.<br>\nIf .pdf files are placed in document/, they are copied across at the <br>\nsame time as the .svg files, meaning they most likely have the same <br>\ntimestamp, which means that even if the .svg file was changed, the .pdf <br>\nwill not be updated.</p>\n<p>My current solution to this is to tell isatool not to copy anything, and <br>\nthen do the copying manually, like so:<br>\n     cd ..; $(USEDIR) $(BASE_IMAGE) $(SESSION)<br>\n     rsync -av -c -H document/ generated<br>\nWhere:<br>\nUSEDIR = $(ISATOOL) usedir -v true -i false -d false -D generated -C false</p>\n<p>Is there something obvious I'm missing here? I just don't see the reason <br>\nnot to preserve the timestamps during the copy...</p>\n<p>Sincerely,</p>\n<p>Rafal Kolanski.</p>",
        "id": 294102259,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660834147
    }
]