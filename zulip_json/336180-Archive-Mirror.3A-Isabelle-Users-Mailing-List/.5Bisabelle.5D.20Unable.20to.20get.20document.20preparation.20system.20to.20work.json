[
    {
        "content": "<p>From: James Lingard &lt;<a href=\"mailto:james@lingard.com\">james@lingard.com</a>&gt;<br>\nI'm new to Isabelle, and am struggling to get the document preparation<br>\nsystem to work for the first time.  Here's what I tried:</p>\n<p>$ isabelle mkroot -d test<br>\n...<br>\n$ isabelle build -D test<br>\n...</p>\n<p>This successfully creates a dummy test/output/document.pdf file.  Now I<br>\ncreate the simplest possible theory file, and try to incorporate that:</p>\n<p>$ cat &gt; test/mytheory.thy<br>\ntheory mytheory imports Main<br>\nbegin<br>\nend<br>\n$ vi test/ROOT # to add mytheory<br>\n$ cat test/ROOT<br>\nsession \"test\" = \"HOL\" +<br>\n  options [document = pdf, document_output = \"output\"]<br>\n  theories [document = false]<br>\n    (* Foo Bar *)<br>\n  theories<br>\n    mytheory (* Baz *)<br>\n  files \"document/root.tex\"</p>\n<p>Now the build fails with a bizarre LaTeX error:</p>\n<p>$ isabelle build -D test<br>\nRunning test ...</p>\n<p>test FAILED<br>\n(see also<br>\n/Users/jchl/.isabelle/Isabelle2013-2/heaps/polyml-5.5.1_x86-darwin/log/test)</p>\n<p>*** [Loading MPS to PDF converter (version 2006.09.02).]<br>\n*** )<br>\n(/usr/local/texlive/2013basic/texmf-dist/tex/latex/hyperref/nameref.sty<br>\n*** (/usr/local/texlive/2013basic/texmf-dist/tex/generic/oberdiek/<br>\n<a href=\"http://gettitlestring.st\">gettitlestring.st</a><br>\n*** y)) (./root.out) (./root.out) (./root.toc) (./session.tex<br>\n(./mytheory.tex<br>\n*** Including 'isadelimtheory' comment.)<br>\n*** Runaway argument?<br>\n*** ! File ended while scanning use of \\next.<br>\n*** &lt;inserted text&gt;<br>\n***                 \\par<br>\n*** l.1 \\input{mytheory.tex}</p>\n<hr>\n<p>*** ))<br>\n*** ! Emergency stop.<br>\n*** &lt;*&gt; \\nonstopmode\\input{root.tex}</p>\n<hr>\n<p>*** !  ==&gt; Fatal error occurred, no output PDF file produced!<br>\n*** Transcript written on root.log.<br>\n*** Document preparation failure in directory 'output/document'</p>\n<hr>\n<p>*** Failed to build document \"/Users/jchl/test/output/document.pdf\"<br>\nUnfinished session(s): test<br>\n0:00:10 elapsed time, 0:00:16 cpu time, factor 1.60</p>\n<p>Can anyone help me understand what (if anything) I'm doing wrong, and how I<br>\ncan fix it?</p>\n<p>Version info:</p>\n<ul>\n<li>Isabelle2013-2: December 2013</li>\n<li>pdfTeX 3.1415926-2.5-1.40.14 (TeX Live 2013)</li>\n<li>OS X 10.9.1</li>\n</ul>\n<p>Thanks,<br>\nJames.</p>",
        "id": 294263875,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915385
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThat is a latex error, so it just depends on the actual sources that are <br>\ngiven to it.  It is all in the directory \"output/document\" mentioned <br>\nabove.  You can cd there and just run pdflatex directly, and look closely <br>\nagain what is there in the files. There is some chance that some odd <br>\ncontrol characters somehow sneaked in (maybe via \"cat\"), or something <br>\ncompletely different and unexpected.</p>\n<p>If you still don't see it, just send me the actual output/document/ <br>\ncontent.</p>\n<p>Some side-remarks:</p>\n<p>* Isabelle session names and theory names consist of capitalized words<br>\n     (separated by underscores), e.g. Foo, Bar, Baz, My_Theory.  Almost<br>\n     everything inside a theory uses lowercase names (including types, but<br>\n     excluding datatype constructors).</p>\n<p>* Isabelle/jEdit takes some time to start-up, but once it is running it<br>\n     is able to edit text files conveniently, including ROOT.</p>\n<p>I have recently learned about the server mode of jEdit, which is off by <br>\ndefault.  If enabled it is easy to delegate edit tasks from the <br>\ncommand-line to an already running jEdit application.  (That might be <br>\nworth a different mailing list thread.)</p>\n<p>Makarius</p>",
        "id": 294263910,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915403
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nJust before the test, I had updated to recent MacTeX-2013 and its <br>\n/usr/local/texlive/2013/texmf-dist/tex/latex/comment/comment.sty is still <br>\nat version 3.6.</p>\n<p>Looking briefly at <br>\n<a href=\"http://www.ctan.org/tex-archive/macros/latex2e/contrib/comment\">http://www.ctan.org/tex-archive/macros/latex2e/contrib/comment</a> has the <br>\nsame 3.6 number in the blurb, but there is a brand-new version 3.7:</p>\n<p>comment.sty  9666    2014-01-23 07:36:21</p>\n<p>Its inlined changelog says:</p>\n<p>Changes in 3.7<br>\n  % - only LaTeX support from now on<br>\n  % - code cleanup, and improvements on \\specialcomment<br>\n  % - cleanup of the docs.</p>\n<p>This means it cannot be used with isabelle.sty, because of that:</p>\n<p>%plain TeX version of comment package -- much faster!<br>\n\\let\\isafmtname\\fmtname\\def\\fmtname{plain}<br>\n\\usepackage{comment}<br>\n\\let\\fmtname\\isafmtname</p>\n<p>If comment.sty 3.7 is actually better in latex mode now, it might be worth <br>\nrevisiting.  But by default this is just a normal instance of \"latex <br>\npackage version hell\".</p>\n<p>Makarius</p>",
        "id": 294263939,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915422
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nSo from where did you get that version?  TeXlive is not there yet, <br>\nluckily.</p>\n<p>I use myself CTAN only as occasional reference, but have no idea how it is <br>\nactually maintained.  There is also no immediately visible changeset <br>\nhistory, with names of authors etc.</p>\n<p>Maybe it is just an accident, with some experiment that someone made at <br>\nsome point, to the anoyance of plain TeX users.</p>\n<p>Makarius</p>",
        "id": 294263966,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915434
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOh dear.  I didn't know yet, that TeXlive has its own package manager to <br>\nget latest problems quicker to users.</p>\n<p>I need to think about evasive maneuvers, for the next Isabelle release.</p>\n<p>This continous \"fixing\" of things, destroys everything eventually.</p>\n<p>Makarius</p>",
        "id": 294264041,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915446
    },
    {
        "content": "<p>From: James Lingard &lt;<a href=\"mailto:james@lingard.com\">james@lingard.com</a>&gt;<br>\nHi Makarius,</p>\n<p>Thanks for the response.  I dived into the LaTeX sources, and it turns out<br>\nthat the problem was that I was using the \"wrong\" version of comment.sty.<br>\n I was using the most recent version, version 3.7 (which dates from 2009).<br>\n It seems that Isabelle requires version 3.6.</p>\n<p>Thanks,<br>\nJames.</p>",
        "id": 294264060,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915457
    },
    {
        "content": "<p>From: James Lingard &lt;<a href=\"mailto:james@lingard.com\">james@lingard.com</a>&gt;<br>\nOn 29 January 2014 15:10, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On Wed, 29 Jan 2014, James Lingard wrote:</p>\n<p>I dived into the LaTeX sources, and it turns out that the problem was</p>\n<blockquote>\n<p>that I was using the \"wrong\" version of comment.sty. I was using the most<br>\nrecent version, version 3.7 (which dates from 2009). It seems that Isabelle<br>\nrequires version 3.6.<br>\n</p>\n</blockquote>\n<p>Just before the test, I had updated to recent MacTeX-2013 and its<br>\n/usr/local/texlive/2013/texmf-dist/tex/latex/comment/comment.sty is still<br>\nat version 3.6.</p>\n<p>Looking briefly at <a href=\"http://www.ctan.org/tex-archive/macros/latex2e/\">http://www.ctan.org/tex-archive/macros/latex2e/</a><br>\ncontrib/comment has the same 3.6 number in the blurb, but there is a<br>\nbrand-new version 3.7:</p>\n<p>comment.sty   9666    2014-01-23 07:36:21<br>\n</p>\n</blockquote>\n<p>That's weird.  The copyright at the top of the file says July 2009.  If it<br>\nreally is brand new then that explains why I might have been the first<br>\nperson to run into this.</p>\n<p>Thanks,<br>\nJames.</p>\n<p>Its inlined changelog says:</p>\n<blockquote>\n<p>Changes in 3.7<br>\n % - only LaTeX support from now on<br>\n % - code cleanup, and improvements on \\specialcomment<br>\n % - cleanup of the docs.</p>\n<p>This means it cannot be used with isabelle.sty, because of that:</p>\n<p>%plain TeX version of comment package -- much faster!<br>\n\\let\\isafmtname\\fmtname\\def\\fmtname{plain}<br>\n\\usepackage{comment}<br>\n\\let\\fmtname\\isafmtname</p>\n<p>If comment.sty 3.7 is actually better in latex mode now, it might be worth<br>\nrevisiting.  But by default this is just a normal instance of \"latex<br>\npackage version hell\".</p>\n<p>Makarius<br>\n</p>\n</blockquote>",
        "id": 294264068,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915459
    },
    {
        "content": "<p>From: James Lingard &lt;<a href=\"mailto:james@lingard.com\">james@lingard.com</a>&gt;<br>\nOn 29 January 2014 19:32, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On Wed, 29 Jan 2014, James Lingard wrote:</p>\n<p>comment.sty   9666    2014-01-23 07:36:21</p>\n<blockquote>\n<blockquote>\n<p>That's weird.  The copyright at the top of the file says July 2009.  If<br>\nit<br>\nreally is brand new then that explains why I might have been the first<br>\nperson to run into this.<br>\n</p>\n</blockquote>\n</blockquote>\n<p>So from where did you get that version?  TeXlive is not there yet, luckily.<br>\n</p>\n</blockquote>\n<p>I installed it on Tuesday with \"tlmgr install comment\".</p>\n<p>James.</p>\n<p>I use myself CTAN only as occasional reference, but have no idea how it is</p>\n<blockquote>\n<p>actually maintained.  There is also no immediately visible changeset<br>\nhistory, with names of authors etc.</p>\n<p>Maybe it is just an accident, with some experiment that someone made at<br>\nsome point, to the anoyance of plain TeX users.</p>\n<p>Makarius</p>\n</blockquote>",
        "id": 294264077,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915464
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nI've looked again more closely at CTAN: the situation of <br>\n<a href=\"http://www.ctan.org/tex-archive/macros/latex2e/contrib/comment\">http://www.ctan.org/tex-archive/macros/latex2e/contrib/comment</a> is a bit <br>\nodd, because comment.sty has been copied over with that 3.7 version from <br>\n2009, while everything else is still saying 3.6, including the <br>\ndocumentation (which claims that the package works with Plain TeX).</p>\n<p>I've also tried again if it is feasible to run in regular LaTeX mode, but <br>\nthen it is very slow, as already noticed in 2005, when I made this setup <br>\nfor isabelle.sty.</p>\n<p>So the present conclusion of this thread: Anybody who happens to be on a <br>\nlatest-testing-unstable branch of some TeX installation can put a copy of <br>\nthe included comment.sty 3.6 into $ISABELLE_HOME/lib/texinputs/. The <br>\nIsabelle document preparation system will copy it from there into the <br>\ndocument output directory, so that version should take precedence.</p>\n<p>The next Isabelle release will probably have that comment.sty 3.6 as well, <br>\nbut that is still several months ahead.</p>\n<p>Makarius<br>\n<a href=\"/user_uploads/14278/YCUywol2KSM2_9sL6EDrZ4hJ/comment.sty\">comment.sty</a></p>",
        "id": 294264300,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660915557
    },
    {
        "content": "<p>From: bnord &lt;<a href=\"mailto:bnord01@gmail.com\">bnord01@gmail.com</a>&gt;<br>\nJust wanted to pop this up again as the issue persists with 2014-RC4 and <br>\ncomment.sty version 3.7 is in the stable branch of tex live.</p>\n<p>Best<br>\n     Benedikt</p>",
        "id": 294289895,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660923103
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn Thu, 21 Aug 2014, bnord wrote:</p>\n<blockquote>\n<p>Just wanted to pop this up again as the issue persists with 2014-RC4 and <br>\ncomment.sty version 3.7 is in the stable branch of tex live.</p>\n</blockquote>\n<p>What exactly do you mean by \"the issue persists\"?</p>\n<p>The approach from 29-Jan-2014 still works today: using comment.sty 3.6 <br>\nbefore the desastrous \"fix\".  A copy of it was already included in all <br>\nIsabelle2014 release candidates, so it should work by default, if <br>\ndocuments are built the standard way.  The \"system\" manual has an example <br>\nfor that:</p>\n<p>isabelle mkroot -d Test &amp;&amp; isabelle build -D Test</p>\n<p>You can then look in Test/output/document/root.log to see that a local <br>\ncopy of comment.sty is used.  If not, there is something utterly wrong.</p>\n<p>Makarius</p>\n<blockquote>\n<p>Am 31.01.14 19:44, schrieb Makarius:</p>\n<blockquote>\n<p>On Wed, 29 Jan 2014, Makarius wrote:</p>\n<blockquote>\n<p>On Wed, 29 Jan 2014, James Lingard wrote:</p>\n<blockquote>\n<blockquote>\n<p>comment.sty   9666    2014-01-23 07:36:21</p>\n<p>That's weird.  The copyright at the top of the file says July 2009. <br>\n If it<br>\n  really is brand new then that explains why I might have been the <br>\n  first<br>\n  person to run into this.</p>\n</blockquote>\n</blockquote>\n<p>So from where did you get that version?  TeXlive is not there yet, <br>\n luckily.</p>\n<p>I use myself CTAN only as occasional reference, but have no idea how it <br>\n is actually maintained.  There is also no immediately visible changeset <br>\n history, with names of authors etc.</p>\n<p>Maybe it is just an accident, with some experiment that someone made at <br>\n some point, to the anoyance of plain TeX users.</p>\n</blockquote>\n<p>I've looked again more closely at CTAN: the situation of<br>\n<a href=\"http://www.ctan.org/tex-archive/macros/latex2e/contrib/comment\">http://www.ctan.org/tex-archive/macros/latex2e/contrib/comment</a> is a bit<br>\n odd, because comment.sty has been copied over with that 3.7 version from<br>\n 2009, while everything else is still saying 3.6, including the<br>\n documentation (which claims that the package works with Plain TeX).</p>\n<p>I've also tried again if it is feasible to run in regular LaTeX mode, but<br>\n then it is very slow, as already noticed in 2005, when I made this setup<br>\n for isabelle.sty.</p>\n<p>So the present conclusion of this thread: Anybody who happens to be on a<br>\n latest-testing-unstable branch of some TeX installation can put a copy of<br>\n the included comment.sty 3.6 into $ISABELLE_HOME/lib/texinputs/. The<br>\n Isabelle document preparation system will copy it from there into the<br>\n document output directory, so that version should take precedence.</p>\n<p>The next Isabelle release will probably have that comment.sty 3.6 as well,<br>\n but that is still several months ahead.</p>\n<p>Makarius</p>\n</blockquote>\n</blockquote>",
        "id": 294290159,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660923183
    },
    {
        "content": "<p>From: bnord &lt;<a href=\"mailto:bnord01@gmail.com\">bnord01@gmail.com</a>&gt;<br>\nSorry, my bad. There was some interference in my test case.</p>",
        "id": 294290178,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660923189
    }
]