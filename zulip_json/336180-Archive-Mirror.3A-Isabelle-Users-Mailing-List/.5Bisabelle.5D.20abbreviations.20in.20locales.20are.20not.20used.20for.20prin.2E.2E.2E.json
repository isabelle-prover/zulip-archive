[
    {
        "content": "<p>From: Walter Guttmann &lt;<a href=\"mailto:walter.guttmann@canterbury.ac.nz\">walter.guttmann@canterbury.ac.nz</a>&gt;<br>\nDear Isabelle users,</p>\n<p>some abbreviations introduced in locales do not appear when terms or theorems using them are printed in the same context or in a class which is a sublocale. Is there an explanation for this behaviour?</p>\n<p>In the following example, I would have expected \"ab\" in the output for the term and lemma commands in the locale and \"s.ab\" in the first two outputs for s.ab and s.lem in the class (print_abbrevs contains s.ab after the sublocale command). As expected, \"cd\" appears in the last two outputs for s.ab and s.lem, though I am not sure why it works now. The behaviour is similar if {True} is replaced with True (or with more complex expressions involving locale parameters, from which this example is abstracted).</p>\n<p>theory A<br>\nimports Main<br>\nbegin</p>\n<p>locale l begin<br>\nabbreviation \"ab ≡ {True}\"<br>\nterm ab (* output: \"{True}\" :: \"bool set\" *)<br>\nlemma lem: \"ab = ab\" .. (* output: theorem {True} = {True} *)<br>\nend</p>\n<p>class c begin<br>\nsublocale s: l .<br>\nterm s.ab (* output: \"{True}\" :: \"bool set\" *)<br>\nthm s.lem (* output: {True} = {True} *)</p>\n<p>abbreviation \"cd ≡ {True}\"<br>\nterm s.ab (* output: \"cd\" :: \"bool set\" *)<br>\nthm s.lem (* output: cd = cd *)<br>\nend</p>\n<p>end</p>\n<p>Any insights or workarounds to get ab/s.ab to print would be appreciated.</p>\n<p>Cheers,<br>\nWalter</p>",
        "id": 294759885,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661199059
    }
]