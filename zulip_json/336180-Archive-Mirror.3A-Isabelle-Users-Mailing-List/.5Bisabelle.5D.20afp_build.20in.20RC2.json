[
    {
        "content": "<p>From: Christian Sternagel &lt;<a href=\"mailto:c.sternagel@gmail.com\">c.sternagel@gmail.com</a>&gt;<br>\nDear list,</p>\n<p>it is now the second time that I got</p>\n<h3>I/O error:</h3>\n<p>/home/griff/.isabelle/Isabelle2013-RC2/browser_info/HOL/.session/entries <br>\n(No such file or directory)</p>\n<h3>Browser info: failed to update session index of</h3>\n<p>\"$ISABELLE_BROWSER_INFO/HOL\"</p>\n<p>when starting \"isabelle afp_build some-session\". But this error is <br>\nnondeterministic. Both times, when issuing the command again, it <br>\nsucceeded (and most of the time when I use afp_build, I do not get this <br>\nerror at all).</p>\n<p>Just reporting something odd.</p>\n<p>cheers</p>\n<p>chris</p>\n<p>PS: It might be just a coincidence that I got this with afp_build, maybe <br>\nit can also happen with plain build.</p>",
        "id": 294233241,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903530
    },
    {
        "content": "<p>From: Gerwin Klein &lt;<a href=\"mailto:Gerwin.Klein@nicta.com.au\">Gerwin.Klein@nicta.com.au</a>&gt;<br>\nThis probably just depends on if you have built HOL with browser_info on before or not, i.e. if the session file exists or not.</p>\n<p>(afp_build just sets browser_info and document options)</p>\n<p>I've hit this as well today, but I'm not sure which way is better: failing the build or not. If HOL has not been built with browser_info before, it doesn't really make sense to generate html that links to it.</p>\n<p>Cheers,<br>\nGerwin</p>\n<hr>\n<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.</p>",
        "id": 294233384,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660903598
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn Sat, 2 Feb 2013, Gerwin Klein wrote:</p>\n<blockquote>\n<p>This probably just depends on if you have built HOL with browser_info on <br>\nbefore or not, i.e. if the session file exists or not.</p>\n<p>(afp_build just sets browser_info and document options)</p>\n<p>I've hit this as well today, but I'm not sure which way is better: <br>\nfailing the build or not. If HOL has not been built with browser_info <br>\nbefore, it doesn't really make sense to generate html that links to it.</p>\n</blockquote>\n<p>I have made some refinements here just before starting the Isabelle2013-RC <br>\nphase.  It should mostly work as in Isabelle2012, but with deterministic <br>\norder of the HTML index and without certain race conditions from the past.</p>\n<blockquote>\n<p>On 02.02.2013, at 8:50 PM, Christian Sternagel &lt;<a href=\"mailto:c.sternagel@gmail.com\">c.sternagel@gmail.com</a>&gt; wrote:</p>\n<blockquote>\n<h3>I/O error: /home/griff/.isabelle/Isabelle2013-RC2/browser_info/HOL/.session/entries (No such file or directory)</h3>\n<h3>Browser info: failed to update session index of \"$ISABELLE_BROWSER_INFO/HOL\"</h3>\n<p>when starting \"isabelle afp_build some-session\". But this error is <br>\nnondeterministic. Both times, when issuing the command again, it <br>\nsucceeded (and most of the time when I use afp_build, I do not get this <br>\nerror at all).</p>\n</blockquote>\n</blockquote>\n<p>Is it really non-deterministic due to parallel processing of sessions, or <br>\njust as Gerwin pointed out that you happen to have HOL with or without <br>\nbrowser_info already?</p>\n<p>Looking briefly over src/Pure/Thy/present.scala (and .ML) I don't see <br>\nanything suspicous.  The index is produced once after processing all <br>\nsessions.</p>\n<p>Makarius</p>",
        "id": 294234613,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660904211
    },
    {
        "content": "<p>From: Christian Sternagel &lt;<a href=\"mailto:c.sternagel@gmail.com\">c.sternagel@gmail.com</a>&gt;<br>\nDear Makarius,</p>\n<p>it is not real non-determinism (it just seemed to me like it, since I <br>\ndidn't know the \"raise\" conditions ;)).</p>\n<p>Incidentally, I always get the error when running.</p>\n<p>isabelle build -d -nc '$AFP' &lt;session-name&gt;</p>\n<p>followed by</p>\n<p>isabelle afp_build &lt;session-name&gt;</p>\n<p>Then, running</p>\n<p>isabelle afp_build &lt;session-name&gt;</p>\n<p>a second time succeeds.</p>\n<p>Another thing. After manually deleting <br>\n~/.isabelle/Isabelle2013-RC2/heaps and <br>\n~/.isabelle/Isabelle2013-RC2/browser_info and then running</p>\n<p>isabelle afp_build &lt;afp-session-name&gt;</p>\n<p>I get the output:<br>\nBuilding Pure ...<br>\nFinished Pure (0:00:08 elapsed time, 0:00:08 cpu time, factor 1.00)<br>\nBuilding HOL ...<br>\nrmdir: failed to remove ‘/tmp/isabelle-griff14182’: Directory not empty<br>\nHOL FAILED</p>\n<p>Why do I get this error (and why so late, it seems to approximately take <br>\nthe same time as HOL usually needs to build)? This error does not go <br>\naway when issuing afp_build another time. But with</p>\n<p>isabelle build -b HOL</p>\n<p>it is not triggered.</p>\n<p>cheers</p>\n<p>chris</p>\n<p>PS: Isn't it odd that I have to write -nc if I only want to clean. I <br>\nwould have suspected -c to do exactly that... but then again, there is <br>\nthis difference between just \"running\" a session (and probably <br>\ngenerating some document) and \"building\" a logic image, which I have not <br>\nquite internalized yet.</p>",
        "id": 294235551,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660904602
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThe isabelle build tool is controlled by \"letter soups\", a bit like Unix <br>\ntar.  Certain combinations achieve certain things that you might want to <br>\ndo, but there is quite a lot what one could want.  So far isabelle build <br>\noptions cover only half of the alphabet, a bit less than its predecessor <br>\nusedir.</p>\n<p>The system manual explains the meaning of the build options, and gives <br>\nvarious examples for real-life situations.</p>\n<p>Also note that when you just need a certain session image to work with it, <br>\nyou do it via \"isabelle build_dialog -l My_Session\", or rather \"isabelle <br>\njedit -l My_Session\" which then invokes build_dialog.</p>\n<p>Makarius</p>",
        "id": 294235839,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660904715
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn Tue, 5 Feb 2013, Christian Sternagel wrote:</p>\n<blockquote>\n<p>it is not real non-determinism (it just seemed to me like it, since I didn't <br>\nknow the \"raise\" conditions ;)).</p>\n</blockquote>\n<p>I have experimented a bit, but without any clear conclusion.  There might <br>\nbe some remaining problems (and not just confusions) somewhere, but we <br>\nneed to pin them down precisely.</p>\n<blockquote>\n<p>Incidentally, I always get the error when running.</p>\n<p>isabelle build -d -nc '$AFP' &lt;session-name&gt;</p>\n<p>followed by</p>\n<p>isabelle afp_build &lt;session-name&gt;</p>\n<p>Then, running</p>\n<p>isabelle afp_build &lt;session-name&gt;</p>\n<p>a second time succeeds.</p>\n</blockquote>\n<p>The second time it will not build anything again, because it was already <br>\nfinished in the first run.  When insisting in a second build like this</p>\n<p>isabelle afp_build -- -c &lt;session-name&gt;</p>\n<p>you should see the same behaviour again.</p>\n<p>Recall that \"### I/O error\" is just a warning, about an internal error <br>\nthat was ignored.  IIRC, this non-strict behaviour has been there all the <br>\ntime: the idea is that browser_info is not fully formally managed, so you <br>\ncould have too little or too much lying around in that directory, and the <br>\nsystem fails gracefully.</p>\n<p>In the next big reform of browser_info, I shall probably make all the <br>\ninformation part of the log file, and merely have a tool to pull it from <br>\nthere to get actual HTML.</p>\n<blockquote>\n<p>Another thing. After manually deleting ~/.isabelle/Isabelle2013-RC2/heaps and <br>\n~/.isabelle/Isabelle2013-RC2/browser_info and then running</p>\n<p>isabelle afp_build &lt;afp-session-name&gt;</p>\n<p>I get the output:<br>\nBuilding Pure ...<br>\nFinished Pure (0:00:08 elapsed time, 0:00:08 cpu time, factor 1.00)<br>\nBuilding HOL ...<br>\nrmdir: failed to remove ‘/tmp/isabelle-griff14182’: Directory not empty<br>\nHOL FAILED</p>\n<p>Why do I get this error (and why so late, it seems to approximately take the <br>\nsame time as HOL usually needs to build)?</p>\n</blockquote>\n<p>This also looks very odd to me, but I didn't get there.  It would help to <br>\nsee the log file of the failed HOL session, or the result of it running <br>\nwith \"isabelle build -v\", which gives some progress report.  And what is <br>\nin /tmp/isabelle-griff14182 after breakdown?</p>\n<p>(Better show me this privately off-list.)</p>\n<p>Makarius</p>",
        "id": 294235994,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660904781
    }
]