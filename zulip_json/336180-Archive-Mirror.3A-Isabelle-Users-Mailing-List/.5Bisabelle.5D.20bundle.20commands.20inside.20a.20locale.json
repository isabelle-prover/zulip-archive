[
    {
        "content": "<p>From: anonymous user &lt;<a href=\"mailto:anonymous-for-isabelle-ml@outlook.com\">anonymous-for-isabelle-ml@outlook.com</a>&gt;<br>\nHi,</p>\n<p>I am trying to find a way to encapsulate all the notations that are defined inside a locale into a separate bundle. For a locale called \"Foo\", this would allow me to toggle the notation whenever I unfold \"Foo\" using the \"interpretaion\" or \"sublocale\" command inside another locale called \"Bar\".</p>\n<h2>locale Foo =</h2>\n<h2>fixes A :: \"'a =&gt; bool\"</h2>\n<h2>assumes \"P A\"</h2>\n<h2>begin</h2>\n<h2>## (<em>let's say I define some notation here</em>)</h2>\n<h2>definition</h2>\n<h2>t :: \"'a =&gt; bool\" (\"TTT _\" [50])</h2>\n<h2>where</h2>\n<h2>\"t == A\"</h2>\n<h2></h2>\n<h2>lemma \"TTT x ⟹ A x\" unfolding t_def .</h2>\n<h2>## end</h2>\n<h2>## locale Bar =</h2>\n<h2>fixes B :: \"'a =&gt; bool\"</h2>\n<h2>assumes a1:\"P B\" and \"Q B\"</h2>\n<h2>begin</h2>\n<h2>## interpretation Foo B using a1 .</h2>\n<h2>## (*the syntax is lost here. TTT not recognized anymore...</h2>\n<h2>lemma \"TTT x ⟹ B x\"*)</h2>\n<h2>## (* assuming that I could create a bundle inside Foo locale,</h2>\n<h2>how can I include the Foo_syntax bundle here? ...*)</h2>\n<h2>## end</h2>\n<p>Note that I am aware of the possibility to define bundle blocks that include some notation commands like bellow. However, this is only applicable for those terms which are not defined inside a locale.</p>\n<h2>definition \"t == True\"</h2>\n<h2>## bundle Foo_syntax</h2>\n<h2>begin</h2>\n<h2>notation t (\"TTT\" [50])</h2>\n<h2>end</h2>\n<p>What I am looking for is a way to wrap \"notation\" command inside an inline \"bundle\" inside a locale as follows:</p>\n<h2>context Foo</h2>\n<h2>begin</h2>\n<h2>## bundle Foo_syntax = {</h2>\n<h2>notation t (\"TTT\" [50]),</h2>\n<h2>(<em>or any other command here...</em>)</h2>\n<h2>}</h2>\n<h2>## end</h2>\n<p>Thanks in advance for your help. :)<br>\n  -- an Isabelle user</p>",
        "id": 294753844,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661196527
    },
    {
        "content": "<p>From: mailing-list anonymous &lt;<a href=\"mailto:mailing.list.anonymous@gmail.com\">mailing.list.anonymous@gmail.com</a>&gt;<br>\nDear Anonymous,</p>\n<p>I am far from being an expert on notation/bundles. Therefore, hopefully,<br>\nsomeone else will provide a better reply. However, given your examples, I<br>\ndo not understand why would it not be suitable to merely provide the<br>\nnotation explicitly inside the locale Foo using the command notation?<br>\nFor example,</p>\n<p>locale Foo =<br>\n  fixes A :: \"'a =&gt; bool\"<br>\n  assumes \"P A\"<br>\nbegin<br>\n  definition t :: \"'a ⇒ bool\" (\"TTT _\" [50]) where \"t == A\"<br>\n  notation t (\"TTT _\" [50])<br>\n  lemma \"TTT x ⟹ A x\" unfolding t_def .<br>\nend</p>\n<p>locale Bar =<br>\n  fixes B :: \"'a ⇒ bool\"<br>\n  assumes a1:\"P B\" and \"Q B\"<br>\nbegin<br>\n  interpretation Foo B using a1 .<br>\n  lemma \"TTT x ⟹ B x\" by (simp add: t_def) (<em>the notation is now available</em>)<br>\nend</p>\n<p>Alternatively, in my own work, usually, for each locale, I provide another<br>\nlocale with the notation specified explicitly (I adopted this method from<br>\nan answer to one of my own old and rather naive questions that was provided<br>\nby Akihisa Yamada:<br>\n<a href=\"https://stackoverflow.com/questions/50085849/importing-classes-into-a-locale-in-isabelle-and-other-related-questions\">https://stackoverflow.com/questions/50085849/importing-classes-into-a-locale-in-isabelle-and-other-related-questions</a>).<br>\nThis allows me to switch between different notations if necessary. However,<br>\nthis method does incur a certain amount of boilerplate code. Quite frankly,<br>\nI would also be interested to know if there is a more standard approach<br>\nthat would allow for switching between different sets of notation with<br>\nease.</p>\n<p>Thank you</p>",
        "id": 294753890,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661196545
    },
    {
        "content": "<p>From: anonymous user &lt;<a href=\"mailto:anonymous-for-isabelle-ml@outlook.com\">anonymous-for-isabelle-ml@outlook.com</a>&gt;<br>\nDear Anonymous@gmail,</p>\n<p>Using the notation command explicitly inside a locale is quite convenient, however, it is cumbersome to use when notations are reused. For an example, consider the following graph locales:</p>\n<h2>locale graph</h2>\n<h2>begin</h2>\n<h2>definition \"path u es v ≡ True\"</h2>\n<h2>notation path (\"_ --_--&gt; _\" [50, 50, 50] 90)</h2>\n<h2>end</h2>\n<h2></h2>\n<h2>locale graph_special =</h2>\n<h2>fixes P :: \"'a =&gt; 'b =&gt; bool\"</h2>\n<h2>begin</h2>\n<h2></h2>\n<h2>interpretation graph .</h2>\n<h2></h2>\n<h2>definition \"spath u es v ≡ path u es v &amp; P u v\"</h2>\n<h2>notation spath (\"_ --_--&gt; _\" [50, 50, 50] 90)</h2>\n<h2></h2>\n<h2>(* Now, both \"spath\" and \"path\" have the same notation.</h2>\n<h2>Preferably, the \"path\" notation should have been</h2>\n<h2>shadowed by the new \"spath\" notation.... *)</h2>\n<h2></h2>\n<h2>end</h2>\n<p>The second option that you have mentioned is very close to the solution that I am looking for. Thanks for referring me to it.</p>\n<p>Kind regards,<br>\n  -- anonymous Isabelle user with an @outlook address</p>\n<hr>\n<hr>\n<hr>",
        "id": 294753948,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661196576
    }
]