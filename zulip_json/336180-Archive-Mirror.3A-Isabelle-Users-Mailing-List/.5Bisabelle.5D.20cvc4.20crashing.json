[
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nI am only partly involved here, as provider of Isabelle_System.bash,<br>\nwhich is the place where SIGINT, SIGTERM, SIGKILL are sent to external<br>\nprocesses (the latter signals only occur when processes resist<br>\ntermination on plain SIGINT 10 times).</p>\n<p>The reason for such signals are usually Timeout.timeout in ML, or just<br>\nthe user editing PIDE document content, such that old attempts of<br>\nevaluation are discontinued -- user edits can be quite erratic.</p>\n<p>Looking through the cvc4 sources, I've found several signal handlers<br>\nhere: <a href=\"https://github.com/CVC4/CVC4/blob/master/src/main/util.cpp\">https://github.com/CVC4/CVC4/blob/master/src/main/util.cpp</a> --<br>\nthey usually end with abort(), which causes SIGABRT on the process.</p>\n<p>I am not proficient in C++ system programming and can't say if there is<br>\nsomething wrong on the cvc4 side. At a high-level, a process that reacts<br>\nstrangely when sent SIGINT looks bad, but in some sense it is also a<br>\nvery common situation -- reminds me of E prover some years ago.</p>\n<p>Isabelle as interactive system works under the global assumption that<br>\nall internal and external processes can always be interrupted cleanly.</p>\n<p>Shall we hand this over to the cvc4 guys? There might be still enough<br>\ntime for our release, to get a clarification of this important fine point.</p>\n<p>Makarius</p>",
        "id": 294696505,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178257
    },
    {
        "content": "<p>From: \"Eugene W. Stark\" &lt;<a href=\"mailto:isabelle-users@starkeffect.com\">isabelle-users@starkeffect.com</a>&gt;<br>\nUnfortunately, the --no-statistics option does not work to suppress the aborts.<br>\nWith Isabelle-2016-1-RC3:</p>\n<p>ERROR: apport (pid 3688) Sat Nov 26 08:39:13 2016: this executable already crashed 2 times, ignoring<br>\nERROR: apport (pid 3700) Sat Nov 26 08:39:20 2016: called for pid 3695, signal 6, core limit 0<br>\nERROR: apport (pid 3700) Sat Nov 26 08:39:20 2016: executable:<br>\n/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 (command line<br>\n\"/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 --full-saturate-quant --inst-when=full-last-call<br>\n--inst-no-entail --term-db-mode=relevant --no-statistics --random-seed=1 --lang=smt2 --continued-execution --tlimit 6418<br>\n/tmp/isabelle-gene/process7458968389934499957/cache-io-3949674\")<br>\nERROR: apport (pid 3700) Sat Nov 26 08:39:20 2016: debug: session gdbus call: (true,)</p>\n<p>ERROR: apport (pid 3700) Sat Nov 26 08:39:20 2016: this executable already crashed 2 times, ignoring<br>\nERROR: apport (pid 3712) Sat Nov 26 08:39:24 2016: called for pid 3711, signal 6, core limit 0<br>\nERROR: apport (pid 3712) Sat Nov 26 08:39:24 2016: executable:<br>\n/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 (command line<br>\n\"/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 --full-saturate-quant --inst-when=full-last-call<br>\n--inst-no-entail --term-db-mode=relevant --no-statistics --random-seed=1 --lang=smt2 --continued-execution --tlimit 4058<br>\n/tmp/isabelle-gene/process7458968389934499957/cache-io-3952234\")<br>\nERROR: apport (pid 3712) Sat Nov 26 08:39:24 2016: debug: session gdbus call: (true,)</p>\n<p>ERROR: apport (pid 3712) Sat Nov 26 08:39:24 2016: this executable already crashed 2 times, ignoring<br>\nERROR: apport (pid 3728) Sat Nov 26 08:39:28 2016: called for pid 3720, signal 6, core limit 0<br>\nERROR: apport (pid 3728) Sat Nov 26 08:39:28 2016: executable:<br>\n/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 (command line<br>\n\"/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 --full-saturate-quant --inst-when=full-last-call<br>\n--inst-no-entail --term-db-mode=relevant --no-statistics --random-seed=1 --lang=smt2 --continued-execution --tlimit 3000<br>\n/tmp/isabelle-gene/process7458968389934499957/cache-io-3953574\")<br>\nERROR: apport (pid 3728) Sat Nov 26 08:39:28 2016: debug: session gdbus call: (true,)</p>\n<p>ERROR: apport (pid 3728) Sat Nov 26 08:39:28 2016: this executable already crashed 2 times, ignoring<br>\nERROR: apport (pid 3743) Sat Nov 26 08:39:31 2016: called for pid 3737, signal 6, core limit 0<br>\nERROR: apport (pid 3743) Sat Nov 26 08:39:31 2016: executable:<br>\n/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 (command line<br>\n\"/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 --full-saturate-quant --inst-when=full-last-call<br>\n--inst-no-entail --term-db-mode=relevant --no-statistics --random-seed=1 --lang=smt2 --continued-execution --tlimit 3000<br>\n/tmp/isabelle-gene/process7458968389934499957/cache-io-3953942\")<br>\nERROR: apport (pid 3743) Sat Nov 26 08:39:31 2016: debug: session gdbus call: (true,)</p>\n<p>ERROR: apport (pid 3743) Sat Nov 26 08:39:31 2016: this executable already crashed 2 times, ignoring<br>\nERROR: apport (pid 3753) Sat Nov 26 08:39:32 2016: called for pid 3752, signal 6, core limit 0<br>\nERROR: apport (pid 3753) Sat Nov 26 08:39:32 2016: executable:<br>\n/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 (command line<br>\n\"/opt/Isabelle2016-1-RC3/contrib/cvc4-1.5pre-4/x86_64-linux/cvc4 --full-saturate-quant --inst-when=full-last-call<br>\n--inst-no-entail --term-db-mode=relevant --no-statistics --random-seed=1 --lang=smt2 --continued-execution --tlimit 1071<br>\n/tmp/isabelle-gene/process7458968389934499957/cache-io-3954988\")<br>\nERROR: apport (pid 3753) Sat Nov 26 08:39:32 2016: debug: session gdbus call: (true,)</p>\n<p>ERROR: apport (pid 3753) Sat Nov 26 08:39:32 2016: this executable already crashed 2 times, ignoring</p>",
        "id": 294698312,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178511
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@inria.fr\">jasmin.blanchette@inria.fr</a>&gt;<br>\nDear Eugene, Makarius,</p>\n<p>First, thank you, Eugene, for taking the time to reproduce the issue.</p>\n<p>Makarius wrote:</p>\n<blockquote>\n<p>Shall we hand this over to the cvc4 guys? There might be still enough<br>\ntime for our release, to get a clarification of this important fine point.</p>\n</blockquote>\n<p>Indeed. I'll write to them right now on the CVC4 users mailing list. Indeed, I should have done so long ago.</p>\n<p>Cheers,</p>\n<p>Jasmin</p>",
        "id": 294699580,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178727
    },
    {
        "content": "<p>From: \"Eugene W. Stark\" &lt;<a href=\"mailto:isabelle-users@starkeffect.com\">isabelle-users@starkeffect.com</a>&gt;<br>\nI decided to try replacing the cvc4 binary by a shell script that<br>\nran cvc4 using the \"strace\" utility.  I recorded the attached<br>\ntrace (edited, original was 13MB long).  It seems to show a \"normal\"<br>\ntermination of cvc4 by the receipt of SIGINT, which then results<br>\nin a call to abort() from the SIGINT handler:<br>\n<a href=\"/user_uploads/14278/4dQl6lEM5hlJwrWVF0zZvXIj/strace_cvc4.digest\">strace_cvc4.digest</a></p>",
        "id": 294699610,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178739
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@inria.fr\">jasmin.blanchette@inria.fr</a>&gt;<br>\nDear Eugene,</p>\n<p>Aha ! This shows that passing \"--no-statistics\" to CVC4 is enough to disable this behavior. I'll prepare a changeset for RC2 and send it to Makarius.</p>\n<p>Cheers,</p>\n<p>Jasmin</p>",
        "id": 294699668,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178757
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOK, the change is here<br>\n<a href=\"https://bitbucket.org/isabelle_project/isabelle-release/commits/be149db8207a36\">https://bitbucket.org/isabelle_project/isabelle-release/commits/be149db8207a36</a><br>\nand thus scheduled for the next release candidate.</p>\n<p>Here is also a document about signal handlers in C:<br>\n<a href=\"https://docs.oracle.com/cd/E19455-01/806-5257/gen-26/index.html\">https://docs.oracle.com/cd/E19455-01/806-5257/gen-26/index.html</a></p>\n<p>High-level things like printf are not allowed, so the above fprintf<br>\nmight cause problems again at some point. E prover used to have similar<br>\nproblems some years ago.</p>\n<p>For the Isabelle2016-1 the present workaround should be OK, but the CVC4<br>\nguys should be informed about these inherent weaknesses of the signal<br>\nhandlers.</p>\n<p>Makarius</p>",
        "id": 294699752,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661178781
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@inria.fr\">jasmin.blanchette@inria.fr</a>&gt;<br>\nDear Eugene,</p>\n<blockquote>\n<p>On 26.11.2016, at 20:37, Eugene W. Stark &lt;<a href=\"mailto:isabelle-users@starkeffect.com\">isabelle-users@starkeffect.com</a>&gt; wrote:</p>\n<p>Unfortunately, the --no-statistics option does not work to suppress the aborts.</p>\n</blockquote>\n<p>That's a pity. Looking at the code, I was overly confident this would do the trick. Regardless, I had filed a bug report to the CVC4 developers and have now updated it:</p>\n<p><a href=\"http://church.cims.nyu.edu/bugzilla3/show_bug.cgi?id=767\">http://church.cims.nyu.edu/bugzilla3/show_bug.cgi?id=767</a></p>\n<p>There's also a thread on the CVC-USERS mailing list that discussed the issue. To summarize the thread, CVC4 developer Tim King wrote</p>\n<blockquote>\n<p>But if users want an alternative nice death, i.e. exit with a non-zero<br>\ncode, we might be able to support that. It would probably need to come in<br>\nthe form of a compile time flag.</p>\n</blockquote>\n<p>And user Johannes Kanig wrote</p>\n<blockquote>\n<p>we (the AdaCore SPARK team, heavy users of cvc4) would definitely welcome such a compile time flag.</p>\n</blockquote>\n<p>I'm sorry we don't have a better resolution for Isabelle2016-1, but we're very much dependent on the CVC4 developers cleaning up their act.</p>\n<p>Cheers,</p>\n<p>Jasmin</p>",
        "id": 294703155,
        "sender_full_name": "Email Gateway",
        "timestamp": 1661179849
    }
]