[
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:andreas.lochbihler@inf.ethz.ch\">andreas.lochbihler@inf.ethz.ch</a>&gt;<br>\nDear Isabelle developers,</p>\n<p>I just want to report that the function package fails with an exception THM whenever I use <br>\nit in a context that fixes a variable of non-function type which is used in the function <br>\ndefinition.</p>\n<p>Here's a minimal example:</p>\n<p>theory Scratch imports \"~~/src/HOL/Main\" begin<br>\ncontext fixes y :: \"'a\" begin<br>\nfun foo :: \"unit =&gt; 'a\" where \"foo _ = y\"<br>\nend</p>\n<p>*** exception THM 0 raised (line 726 of \"thm.ML\"):<br>\n*** forall_intr: variable \"y\" free in assumptions<br>\n*** [|foo x1 = y; accp foo_rel x1;<br>\n***  !!uu_. [|x1 = uu_; y = id y; accp foo_rel uu_|] ==&gt; P|]<br>\n*** ==&gt; P<br>\n***   [foo == <a href=\"http://Scratch.foo\">Scratch.foo</a> y, foo_sumC == Scratch.foo_sumC y,<br>\n***     foo_graph == Scratch.foo_graph y]<br>\n*** At command \"fun\"</p>\n<p>Interestingly, there's no error if I change y's type to \"unit =&gt; 'a\":</p>\n<p>context fixes y :: \"unit =&gt; 'a\" begin<br>\nfun foo :: \"unit =&gt; 'a\" where \"foo _ = y ()\"<br>\nend</p>\n<p>The same error also occurs when I change replace the unnamed context with a locale.</p>\n<p>By the way, this is with Isabelle2013-2.</p>\n<p>Best,<br>\nAndreas</p>",
        "id": 294275180,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660918544
    }
]