[
    {
        "content": "<p>From: David Greenaway &lt;<a href=\"mailto:david.greenaway@nicta.com.au\">david.greenaway@nicta.com.au</a>&gt;<br>\nHi all,</p>\n<p>In my spare time I constructed the attached script to attempt to<br>\nautomatically indent apply-style proofs. It is written in BeanShell,<br>\nwhich was probably a mistake, but what's done is done. To use the<br>\nscript, it should be sufficient to just drop it in:</p>\n<p>~/.isabelle/jedit/macros/</p>\n<p>and restart jEdit.</p>\n<p>You can then select a block of proof script you want indented, and then<br>\nin the jEdit menus select \"Macros\" -&gt; \"proof-indent\".</p>\n<p>The script has its fair share of problems: multi-line statements are not<br>\nhandled well, and there seems to be some problems in handling the first<br>\nline of proof script.</p>\n<p>I am posting that script as-is hoping that somebody else might find it<br>\nuseful in its current state, and to also ask for a little bit of help:</p>\n<p>In particular, does anyone know how I can determine that first and last<br>\ncharacters of each command in the proof script? I am currently using<br>\n\"snapshot.node().command_at(x)\", which gives me the proof state<br>\napproximately at character \"x\" of the file, but doesn't appear to<br>\nprovide me with the exact start/end of each statement that I desire.</p>\n<p>If anyone could point me to the correct way of pulling this information<br>\nout of Isabelle (or some documentation), I would very much appreciate<br>\nit.</p>\n<p>Thanks so much,<br>\nDavid</p>\n<hr>\n<p>The information in this e-mail may be confidential and subject to legal professional privilege and/or copyright. National ICT Australia Limited accepts no liability for any damage caused by this email or its attachments.<br>\n<a href=\"/user_uploads/14278/5hbtONkmGCluiA0DCn3DYy4A/proof-indent.bsh\">proof-indent.bsh</a></p>",
        "id": 294237010,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660905236
    },
    {
        "content": "<p>From: Fabian Immler &lt;<a href=\"mailto:immler@in.tum.de\">immler@in.tum.de</a>&gt;<br>\nHi David,</p>\n<p>Am 22.03.2013 um 01:48 schrieb David Greenaway &lt;<a href=\"mailto:david.greenaway@nicta.com.au\">david.greenaway@nicta.com.au</a>&gt;:</p>\n<blockquote>\n<p>In particular, does anyone know how I can determine that first and last<br>\ncharacters of each command in the proof script? I am currently using<br>\n\"snapshot.node().command_at(x)\", which gives me the proof state<br>\napproximately at character \"x\" of the file, but doesn't appear to<br>\nprovide me with the exact start/end of each statement that I desire.<br>\nThe second component appears to return the starting offset, and range()/proper_range() provide you with the length of the command (with or without trailing comments/whitespace):</p>\n</blockquote>\n<p>cmd_start = snapshot.node().command_at(x).get();<br>\ncmd = cmd_start._1;<br>\nstart = cmd_start._2;<br>\nrange = cmd.proper_range();<br>\nend = start + range.stop;</p>\n<blockquote>\n<p>If anyone could point me to the correct way of pulling this information<br>\nout of Isabelle (or some documentation), I would very much appreciate<br>\nit.<br>\nI think you have to browse the respective .scala source files. It also helps to experiment in the BeanShell console of jEdit.</p>\n</blockquote>\n<p>Fabian</p>",
        "id": 294237206,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660905310
    }
]