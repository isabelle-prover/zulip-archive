[
    {
        "content": "<p>From: Andreas Lochbihler &lt;<a href=\"mailto:andreas.lochbihler@kit.edu\">andreas.lochbihler@kit.edu</a>&gt;<br>\nHi all,</p>\n<p>I stumbled across the following odd behaviour of obtains in locales:<br>\nNormally, theorems stated with obtains carry appropriate case_names and <br>\nconsumes declaration, e.g. the following works as expected.</p>\n<p>lemma test:<br>\n   assumes \"n = n\"<br>\n   obtains (first_case) \"n = 0\"<br>\n   | (second_case) n' where \"n = Suc n'\"<br>\nby(cases n) auto</p>\n<p>lemma assumes \"n = n\" shows P<br>\nusing assms<br>\nproof(cases rule: test)<br>\n   case first_case<br>\nnext<br>\n   case (second_case n')<br>\noops</p>\n<p>When I do not provide names for the obtains-cases in the lemma, test is <br>\nstill declared with a \"consumes 1\" and case_names 1 2.</p>\n<p>However, when I put lemma test into a locale that fixes at least one <br>\nparameter, these declarations change:</p>\n<p>locale A =<br>\n   fixes a :: \"'a\"<br>\nbegin</p>\n<p>lemma test:<br>\n   assumes \"n = n\"<br>\n   obtains (first_case) \"n = 0\"<br>\n   | (second_case) n' where \"n = Suc n'\"<br>\nby(cases n) auto</p>\n<p>Lemma test now carries the consumes 0 declaration and case_names 1 2 3, <br>\nindependent of whether the names for obtains-cases are given - which is <br>\nat least unexpected.<br>\nIs this a bug or am I better not to rely on obtains producing proper <br>\nconsumes and case_names declarations in general?</p>\n<p>Regards,<br>\nAndreas</p>",
        "id": 294114982,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660837999
    }
]