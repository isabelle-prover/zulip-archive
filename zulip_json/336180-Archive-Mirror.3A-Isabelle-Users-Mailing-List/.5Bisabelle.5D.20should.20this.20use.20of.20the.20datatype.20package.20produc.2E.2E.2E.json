[
    {
        "content": "<p>From: Brian Huffman &lt;<a href=\"mailto:brianh@cs.pdx.edu\">brianh@cs.pdx.edu</a>&gt;<br>\nHello all,</p>\n<p>Peter Gammie recently brought this issue to my attention (with<br>\n\"domain\" instead of \"datatype\", but the behavior is the same for<br>\nboth).</p>\n<p>The following datatype definition is accepted without any warning messages:</p>\n<p>datatype tree = \"tree list\"</p>\n<p>Can anyone guess what this type definition actually means?</p>\n<p>That's right, it defines a datatype with a single nullary constructor,<br>\nwhich is called \"tree list\". Never mind that the constructor's name<br>\ncontains a space, and is therefore impossible to parse.</p>\n<p>Clearly, no one would ever write such a datatype definition on purpose.</p>\n<p>A feature request: If the name of a constant contains a space or other<br>\nillegal character, the datatype package should issue an error (or at<br>\nthe very least, a warning message).</p>\n<ul>\n<li>Brian</li>\n</ul>",
        "id": 294105842,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660835167
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nThis known problem shows up once a year or so.  By using the proper local <br>\ntheory layer for the package, it will just dissappear, because there are <br>\nsanity checks built in.  Numerous other problems will be solved by <br>\nlocalizing old-style packages.</p>\n<p>Just today Alex has pointed out another yearly accident: sort constraints <br>\nwithin type definitions (this time for record).  The basic packages can <br>\n(typedecl, typedef, record) now handle that.  The more complex ones <br>\n(datatype family, domain) still have their own partial ways of coping with <br>\nsorts.</p>\n<p>Maybe now is a good time for some spring cleaning, before we get too close <br>\nto the next Isabelle release.  (It is already &gt; 4 months after <br>\nIsabelle2009-1.)</p>\n<p>Makarius</p>",
        "id": 294105942,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660835202
    },
    {
        "content": "<p>From: Brian Huffman &lt;<a href=\"mailto:brianh@cs.pdx.edu\">brianh@cs.pdx.edu</a>&gt;<br>\nOn Thu, Apr 15, 2010 at 1:20 PM, Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt; wrote:</p>\n<blockquote>\n<p>On Thu, 15 Apr 2010, Brian Huffman wrote:</p>\n<blockquote>\n<p>The following datatype definition is accepted without any warning<br>\nmessages:</p>\n<p>datatype tree = \"tree list\"</p>\n<p>Can anyone guess what this type definition actually means?</p>\n<p>That's right, it defines a datatype with a single nullary constructor,<br>\nwhich is called \"tree list\". Never mind that the constructor's name<br>\ncontains a space, and is therefore impossible to parse.</p>\n<p>Clearly, no one would ever write such a datatype definition on purpose.</p>\n<p>A feature request: If the name of a constant contains a space or other<br>\nillegal character, the datatype package should issue an error (or at the<br>\nvery least, a warning message).</p>\n</blockquote>\n<p>This known problem shows up once a year or so.  By using the proper local<br>\ntheory layer for the package, it will just dissappear, because there are<br>\nsanity checks built in.  Numerous other problems will be solved by<br>\nlocalizing old-style packages.</p>\n</blockquote>\n<p>So your recommendation is to wait until the datatype package has been<br>\nconverted to use local theories, rather than adding any new<br>\n(temporary) error checks. OK.</p>\n<blockquote>\n<p>Maybe now is a good time for some spring cleaning, before we get too close<br>\nto the next Isabelle release.  (It is already &gt; 4 months after<br>\nIsabelle2009-1.)</p>\n</blockquote>\n<p>So will the conversion of the datatype package be part of this \"spring<br>\ncleaning\"? Has anyone committed to doing the conversion? Of course,<br>\nI'll take responsibility for converting the domain package, but I need<br>\nto have the datatype package done first, so I can see how it's done.</p>\n<ul>\n<li>Brian</li>\n</ul>",
        "id": 294105991,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660835221
    },
    {
        "content": "<p>From: Makarius &lt;<a href=\"mailto:makarius@sketis.net\">makarius@sketis.net</a>&gt;<br>\nOn Fri, 16 Apr 2010, Brian Huffman wrote:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>A feature request: If the name of a constant contains a space or other <br>\nillegal character, the datatype package should issue an error (or at <br>\nthe very least, a warning message).</p>\n</blockquote>\n<p>This known problem shows up once a year or so.  By using the proper <br>\nlocal theory layer for the package, it will just dissappear, because <br>\nthere are sanity checks built in.  Numerous other problems will be <br>\nsolved by localizing old-style packages.</p>\n</blockquote>\n<p>So your recommendation is to wait until the datatype package has been <br>\nconverted to use local theories, rather than adding any new (temporary) <br>\nerror checks. OK.</p>\n</blockquote>\n<p>So far it is just another motivitation to start moving towards a localized <br>\nversion.  The datatype package is very complex, and Stefan Berghofer is <br>\nprobably the only one who can update it without causing collateral damage.</p>\n<p>Anyway, I think Stefan is already trying some small-scale improvements, <br>\nalthough such long standing oddities are hard to reform.  For example, <br>\nold-style mixfix notation involves constant names with spaces and with <br>\nnon-identifier characters, e.g. \"op #\".  Due to earlier spring cleaning it <br>\nmight actually work out this time.</p>\n<blockquote>\n<blockquote>\n<p>Maybe now is a good time for some spring cleaning, before we get too <br>\nclose to the next Isabelle release.  (It is already &gt; 4 months after <br>\nIsabelle2009-1.)</p>\n</blockquote>\n<p>So will the conversion of the datatype package be part of this \"spring <br>\ncleaning\"? Has anyone committed to doing the conversion? Of course, I'll <br>\ntake responsibility for converting the domain package, but I need to <br>\nhave the datatype package done first, so I can see how it's done.</p>\n</blockquote>\n<p>Full localization is certainly beyond the spring cleaning, it will take <br>\nmore time.  If you want to do some moves towards it for the domain <br>\npackage, I can point to some spots that are probably easy to update.</p>\n<p>Makarius</p>",
        "id": 294106049,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660835239
    }
]