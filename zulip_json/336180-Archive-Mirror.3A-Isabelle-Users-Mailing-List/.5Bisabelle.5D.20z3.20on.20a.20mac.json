[
    {
        "content": "<p>From: David Brumley &lt;<a href=\"mailto:dbrumley@cmu.edu\">dbrumley@cmu.edu</a>&gt;<br>\nHi,<br>\nI saw the discussion the other day about z3 on a mac. Coincidentally I<br>\nwas setting up z3 on my mac too (10.6.8 on a 2008 mac pro)</p>\n<p>I followed the recipe for z3 under wine.  z3 seems to run fine from<br>\nthe command line.  I added the following to etc/settings (is there a<br>\nbetter place?):</p>\n<p>Z3_COMPONENT=\"$COMPONENT\"<br>\nZ3_HOME=\"$Z3_COMPONENT/$ISABELLE_PLATFORM\"</p>\n<p>Z3_NON_COMMERCIAL=\"yes\"</p>\n<p>Z3_SOLVER=\"$Z3_HOME/z3\"<br>\nZ3_REMOTE_SOLVER=\"z3\"</p>\n<p>if [ -e \"$Z3_HOME\" ]<br>\nthen<br>\n  Z3_INSTALLED=\"yes\"<br>\nfi</p>\n<p>And put the z3 shell script from<br>\n<a href=\"http://www4.in.tum.de/~boehmes/z3.html\">http://www4.in.tum.de/~boehmes/z3.html</a> under contrib/x86-darwin/z3.</p>\n<p>z3 runs fine from the command line (at least z3 /h seems to work).<br>\nHowever, when I run it from isabelle I get<br>\nSMT outcome: Solver terminated abnormally with error code 109</p>\n<p>The simplest example I've tried is:<br>\nlemma really_simple : \"(a \\and b) = (b \\and a)\"<br>\nsledgehammer [provers=z3,verbose=true,debug=true]</p>\n<p>Complex lemmas have the same error.</p>\n<p>Anyone run into this? I looked at the z3 documentation, but couldn't<br>\nfind an error 109 on the list.</p>\n<p>Thanks,<br>\nDavid</p>",
        "id": 294138984,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660845212
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@gmail.com\">jasmin.blanchette@gmail.com</a>&gt;<br>\nHi David,</p>\n<p>I was able to get an error 109 on the Mac as well, even after following Sascha's online instructions. To investigate this, try adding</p>\n<p>declare [[smt_trace]]</p>\n<p>at the beginning of the .thy file, and send us the trace output.</p>\n<p>SMT: Solver:<br>\n  /Users/blanchet/isabelle/contrib/z3-2.15/x86-darwin/z3: line 11: winepath: command not found<br>\n  fixme:heap:HeapSetInformation 0x0 1 0x0 0<br>\n  Error: input file was not specified.<br>\n  For usage information: z3 /h</p>\n<p>If this is also your problem (and it probably is), either (1) make sure \"/Applications/Wine.app/Contents/Resources/bin\" is in your \"PATH\" before you launch Proof General or jEdit, or (2) update your \"z3\" script with the very latest version from Sascha's web page:</p>\n<p><a href=\"http://www4.in.tum.de/~boehmes/z3/mac/z3\">http://www4.in.tum.de/~boehmes/z3/mac/z3</a></p>\n<p>I hope this helps. Please let us know if it doesn't, so we can iron out these issues once and for all.</p>\n<p>Cheers,</p>\n<p>Jasmin</p>",
        "id": 294140294,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660845605
    },
    {
        "content": "<p>From: David Brumley &lt;<a href=\"mailto:dbrumley@cmu.edu\">dbrumley@cmu.edu</a>&gt;<br>\nHello,<br>\nThanks for all the help.  The Isabelle community is amazing. The<br>\nupdates worked with two small tweaks.</p>\n<p>- The script on the webpage uses 'Wine Files/drive_c/Program<br>\nFiles/Microsoft Research/Z3/bin/z3.exe'.  On my machine z3 installs<br>\nwith the same path except Z3-2.19 instead of just Z3.</p>\n<p>- I still needed to edit contrib/z3/etc/settings and uncomment<br>\nZ3_NON_COMMERCIAL=\"yes\" for it to work. I don't know if it is<br>\nintentionally left uncommented in your tar file. It took me some<br>\ndigging to initially find that option last week; perhaps  an explicit<br>\ncomment on the website would be helpful to others?</p>\n<p>A couple of bizarre things happened when trying to get it to work<br>\ntoday. I note these in case someone else experiences them.</p>\n<ul>\n<li>\n<p>When I started up wine today it asked to self-update. I said yes.<br>\n/Applications/Wine.appContents/MacOS/startwine went away. Reinstalling<br>\nwine from the dpkg fixed. .</p>\n</li>\n<li>\n<p>The [[smt_trace]] option is really cool. I didn't know about that widget.</p>\n</li>\n<li>z3 seems to be successfully invoked. The first time I ran it to prove:</li>\n</ul>\n<p>lemma reallysimple : \"(a \\&lt;and&gt; b)= (b \\&lt;and&gt; a)\"<br>\nusing [[smt_trace]]<br>\nsledgehammer [provers=z3,verbose=true,debug=true]</p>\n<p>z3 didn't produce a solution. However, it has reliably since then.<br>\nI'm not sure why, but it's worked reliably since then. I'm chalking it<br>\nup to first time initialization tasks.</p>\n<p>Take care,<br>\n-David</p>",
        "id": 294140366,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660845623
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@gmail.com\">jasmin.blanchette@gmail.com</a>&gt;<br>\nHi David,</p>\n<blockquote>\n<ul>\n<li>The script on the webpage uses 'Wine Files/drive_c/Program<br>\nFiles/Microsoft Research/Z3/bin/z3.exe'.  On my machine z3 installs<br>\nwith the same path except Z3-2.19 instead of just Z3.</li>\n</ul>\n</blockquote>\n<p>This is mentioned under step 3 at <a href=\"http://www4.in.tum.de/~boehmes/z3.html\">http://www4.in.tum.de/~boehmes/z3.html</a>. I think Sascha is unwilling to hardcode and then have to maintain version numbers.</p>\n<blockquote>\n<ul>\n<li>I still needed to edit contrib/z3/etc/settings and uncomment<br>\nZ3_NON_COMMERCIAL=\"yes\" for it to work. I don't know if it is<br>\nintentionally left uncommented in your tar file.</li>\n</ul>\n</blockquote>\n<p>Yes, it's intentional; by uncommenting it out, you acknowledge that you are a noncommercial user. (Some of our users are commercial or semicommercial and hence not allowed to use the noncommercial version of Z3.)</p>\n<blockquote>\n<p>It took me some<br>\ndigging to initially find that option last week; perhaps  an explicit<br>\ncomment on the website would be helpful to others?</p>\n</blockquote>\n<p>Not sure this is the right place. That web page is only for Mac users, whereas the problem you describe is platform-agnostic. Normally (i.e. with Isabelle2011 or better), if you neglect to set \"Z3_NON_COMMERCIAL\" to \"yes\", you will get an error when using the \"smt\" method or Sledgehammer:</p>\n<p>The SMT solver Z3 is not activated. To activate it, set the environment variable Z3_NON_COMMERCIAL to \"yes\".</p>\n<p>Didn't you get such a message?</p>\n<blockquote>\n<ul>\n<li>When I started up wine today it asked to self-update. I said yes.<br>\n/Applications/Wine.app/Contents/MacOS/startwine went away. Reinstalling<br>\nwine from the dpkg fixed.</li>\n</ul>\n</blockquote>\n<p>Strange. It also self-updated for me today, but the \"startwine\" file is still there.</p>\n<blockquote>\n<ul>\n<li>The [[smt_trace]] option is really cool. I didn't know about that widget.</li>\n</ul>\n</blockquote>\n<p>A similar effect can be achieved using Sledgehammer's \"overlord\" option (see \"sledgehammer.pdf\" for details). I find it more convenient to study SMT/ATP inputs and outputs in the comfort of my favorite editor than in Emacs's amazingly slow trace buffer.</p>\n<blockquote>\n<ul>\n<li>z3 seems to be successfully invoked. The first time I ran it to prove:</li>\n</ul>\n<p>lemma reallysimple : \"(a \\&lt;and&gt; b)= (b \\&lt;and&gt; a)\"<br>\nusing [[smt_trace]]<br>\nsledgehammer [provers=z3,verbose=true,debug=true]</p>\n<p>z3 didn't produce a solution. However, it has reliably since then.<br>\nI'm not sure why, but it's worked reliably since then. I'm chalking it<br>\nup to first time initialization tasks.</p>\n</blockquote>\n<p>Weird. If you run into other oddities that you can reproduce or for which you at least have a trace, please let Sascha or me know.</p>\n<p>Cheers,</p>\n<p>Jasmin</p>",
        "id": 294140419,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660845635
    },
    {
        "content": "<p>From: Sascha Boehme &lt;<a href=\"mailto:boehmes@in.tum.de\">boehmes@in.tum.de</a>&gt;<br>\nHi David,</p>\n<p>I just updated the description of how to run Z3 on a Mac:</p>\n<p><a href=\"http://www4.in.tum.de/~boehmes/z3.html\">http://www4.in.tum.de/~boehmes/z3.html</a></p>\n<p>Especially, I added a section about how to run Z3 with Isabelle.<br>\nPlease replace your setup (modification of etc/settings) with what is<br>\ndescribed in section 4 of that webpage.</p>\n<p>Cheers,<br>\nSascha</p>\n<p>David Brumley wrote:</p>",
        "id": 294141240,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660845899
    },
    {
        "content": "<p>From: David Brumley &lt;<a href=\"mailto:dbrumley@cmu.edu\">dbrumley@cmu.edu</a>&gt;<br>\nHi,<br>\nSorry for the delay; I was traveling.</p>\n<p>I did not get this error message anywhere obvious.   I'm an isabelle<br>\nnoob, so perhaps it was somewhere I wasn't looking?  I just got  an<br>\nerror related to Z3 remote, but not an indication what to change.</p>\n<p>Thanks again for your help.</p>\n<p>Take care,<br>\nDavid</p>",
        "id": 294141824,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660846095
    },
    {
        "content": "<p>From: Jasmin Blanchette &lt;<a href=\"mailto:jasmin.blanchette@gmail.com\">jasmin.blanchette@gmail.com</a>&gt;<br>\nHi David,</p>\n<p>Indeed -- I can reproduce this. Isabelle2011 was released at a point where the Sledgehammer/SMT business was a bit flaky, unfortunately. More precisely, some changes were done to the integration of off-the-shelf solvers in January, and Sledgehammer was not tested against these. With the repository version of Isabelle (or the next release), you would get the aforementioned message.</p>\n<p>Regards,</p>\n<p>Jasmin</p>",
        "id": 294141867,
        "sender_full_name": "Email Gateway",
        "timestamp": 1660846111
    }
]